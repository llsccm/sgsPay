// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      2.9.31.3
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  'use strict';

  var Tt=Object.freeze,Dt=Object.defineProperty;var bn=(n,e,t)=>e in n?Dt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ne=(n,e,t)=>(bn(n,typeof e!="symbol"?e+"":e,t),t);var At=(n,e)=>Tt(Dt(n,"raw",{value:Tt(e||n.slice())}));function Be(n,e=null,t=!0){let i;return !i&&typeof localStorage<"u"&&(i=localStorage.getItem(n)),i?JSON.parse(i):e}async function ze(n,e,t=!0){typeof localStorage<"u"&&localStorage.setItem(n,JSON.stringify(e));}async function Yt(n,e=!0){typeof localStorage<"u"&&localStorage.removeItem(n);}function ct(n,e=0){let t="";const i="  ".repeat(e);if(Array.isArray(n))n.every(r=>typeof r!="object"||!r)?t+=`${i}${n.join("	")}
`:(t+=`${i}<ol>
`,n.forEach(r=>{t+=`${i}  <li>
`,t+=ct(r,e+2),t+=`${i}  </li>
`;}),t+=`${i}</ol>
`);else if(typeof n=="object"&&n!==null)if(Object.values(n).every(r=>typeof r!="object"||!r))t+=`${i}${Object.entries(n).map(([r,a])=>`<strong>${r}:</strong> ${a}`).join(", ")}
`;else {t+=`${i}<ul>
`;for(const r in n)t+=`${i}  <li>
`,t+=`${i}    <strong>${r}:</strong>
`,t+=ct(n[r],e+2),t+=`${i}  </li>
`;t+=`${i}</ul>
`;}else t+=`${i}  ${n}
`;return t}const dt=[];let Ye=!1,ot=null;function Ze(n,e="acTooltip",t=1e4,i="",s=null,r=!1){r?wn(n,e,t,i):(dt.push({text:n,id:e,duration:t,className:i,clickCallback:s}),Ye||ut());}function wn(n,e,t,i){let s=document.getElementById(e);s||(s=document.createElement("div"),s.id=e,s.className="ac-tooltip "+i,document.body.appendChild(s)),s.innerHTML=n,s.className="ac-tooltip "+i,s.addEventListener("click",()=>{it(uniqueId);}),setTimeout(()=>{s.classList.remove("hide"),s.classList.add("show"),s.style.top="20px";},50),ot&&clearTimeout(ot),ot=setTimeout(()=>it(e),t);}function oe(n){if(ChannelUtils!=null&&ChannelUtils.openQQBuy){ChannelUtils.openQQBuy({ret:!0,msg:n});return}}function ut(n){if(dt.length===0){Ye=!1;return}Ye=!0;const{text:e,id:t,duration:i,className:s,clickCallback:r}=dt.shift();let a=document.getElementById(t);a&&a.remove();let o=t+"-"+new Date().getTime(),c=document.createElement("div");c.id=o,c.className="ac-tooltip "+s,c.innerHTML=e,document.body.appendChild(c),r&&typeof r=="function"&&c.addEventListener("click",r),c.addEventListener("click",()=>{it(o),ut();}),setTimeout(()=>{c.classList.remove("hide"),c.classList.add("show"),c.style.top="20px";},50),i?setTimeout(()=>{it(o),ut();},i):Ye=!1;}function it(n){let e=document.getElementById(n);e&&(e.classList.remove("show"),e.classList.add("hide"),setTimeout(()=>{e&&e.remove();},300));}var Jt,Sn=function(n){return String.raw(Jt||(Jt=At([`
<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>
table { margin-right: 8px; border-collapse: collapse; }
th, td { text-align: center; border: 1px solid black; font-size: 24px; box-sizing: border-box; }
td { padding: 2px 5px; }
.nav, thead { background: white; position: sticky;; }
.rate { margin: 5px; font-size: 28px;}
.button {  display: none; } 
.button[name=mode] ~ .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }
th .button ~ .label { display: inline-block; width: 100%; height: 100%;}
th .button:checked ~ .label::after { content: "↓"; }
th.reverse .button:checked ~ .label::after { content: "↑"; }
.button:checked ~ .label { background: rgb(64,160,255); } 
.s0 { background: white; }
.s1 { background: rgb(221,0,0); }
.s2 { background: rgb(255, 200, 0); }
.s3 { background: rgb(0, 136, 68); }
.s4 { background: rgb(0, 94, 183); }
.s5 { background: rgb(255, 0, 255); }
</style></head><body style="margin: 0 8px;">
<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="summary"></div></div>
<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>
<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>

<script>
const data = Object.entries(`,`).reduce((acc,[mode, records]) => {
acc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));
return acc;
},{});
const modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};
const sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'先手',3:'后手'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};
colors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];
const modeTab = document.getElementById('modeTab');
[26,35,44,5,7].forEach(mode => {
if(mode in data) modeTab.innerHTML += '<label><input type="radio" class="button" name="mode" value="'+mode+'" onclick="reSet()"><span class="label">'+modeName[mode]+'</span></label>';
}); modeTab.innerHTML += ' （更多功能敬请期待…）';
document.querySelector('#record thead').innerHTML = '<tr onclick="recordSort(event)">'+['时间','武将','身份','胜负','时长'].map((name,i)=>'<th'+(i?'':' class="reverse"')+'><label><input type="radio" class="button" name="record" onchange="recordSort(event)" '+(i?'':'checked')+'><span class="label">'+name+'</span></label></th>').join('')+'</tr>';
function reSet() {
var i, tabcontent, tablinks;
window.mode = document.querySelector('#modeTab input[name="mode"]:checked')?.value
window.guozhanQ = modeName[mode].includes('国战');
window.records = data[mode].filter(record => record.shenfen).sort();
let summary = Array.from({length:10},(_,i)=>[0,0,0,i]);
let detail = records.reduce((acc, record) => {
    summary[0][record.result] += 1;
    summary[0][2] += record.duration;
    summary[record.shenfen][record.result] += 1;
    record.general.forEach((g,n)=>{
        if(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);
        acc[g][0][record.result] += 1;
        acc[g][0][2] += record.duration;
        acc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;
    });
    return acc;
},{});
summary = summary.filter(s=>s[0]+s[1]>0);
let sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);
document.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style="background:'+colors[sf]+';">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick="detailSort(event)"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)"><span class="label">平均时长</span></label></th></tr><tr onclick="detailSort(event)">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class="reverse"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)" '+(i==0&&j==1?'checked':'')+'><span class="label">'+name+'</span></label></th>')).join('')+'</tr>';
window.detail = Object.keys(detail).map(general=>{
    let rate = detail[general].filter(s=>sf.includes(s[3]));
    rate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });
    return ({general, rate});
});
let summaryDiv = document.getElementById('summary');
summaryDiv.innerHTML = '';
summary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class="rate" style="color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });
detailSort();
recordSort();
}

function detailSort(event,sf=0,key=4,reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){
        if(element.rowSpan>1) {sf = 0; key = 2; }
        else {
            sf = Math.floor(element.cellIndex/4);
            key = [5,4,0,1][element.cellIndex%4];
        }
        reverse = element.classList.toggle('reverse');
    }
}
window.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });
if(reverse) window.detail = window.detail?.reverse();
document.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');
}

function recordSort(event,key='timestamp', reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'record'){
        key = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;
        reverse = element.classList.toggle('reverse');
    }
}
if(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);
else window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));
if(reverse) window.records = window.records?.reverse();
document.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');
}

function formatSeconds(seconds) {
const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
const secs = Math.floor((seconds % 60)).toString().padStart(2, '0');
return (seconds>=3600?(hrs+':'):'')+mins+':'+secs;
}

document.querySelector('#modeTab input[name="mode"]').click();
<\/script></body></html>`])),n)},kn="jsjiami.com.v7";(function(n,e,t,i,s,r,a){return n=n>>1,r="hs",a="hs",function(o,c,d,m,l){const u=ke;m="tfi",r=m+r,l="up",a+=l,r=d(r),a=d(a),d=0;const x=o();for(;[]&&--i+c;)try{m=-parseInt(u(409,"a(H["))/1+-parseInt(u(403,"qeH8"))/2+parseInt(u(426,"0zA0"))/3*(-parseInt(u(198,"dm0N"))/4)+-parseInt(u(348,"KDdW"))/5+parseInt(u(215,"f&xv"))/6+parseInt(u(493,"IAlp"))/7+parseInt(u(309,"f]5*"))/8*(parseInt(u(182,"CrM1"))/9);}catch{m=d;}finally{if(l=x[r](),n<=i)d?s?m=l:s=l:d=l;else if(d==s.replace(/[eTVJgrSEXQOudGnlCPMth=]/g,"")){if(m===c){x["un"+r](l);break}x[a](l);}}}(t,e,function(o,c,d,m,l,u,x){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),m="join",o[m]("")})})(392,505473,Ke,198);function Ke(){const n=function(){return [kn,"ETOjesGjQitgamCiXlV.dcQProrem.nvgSh7gJMu==","A1pcMSkDWPq","WQjyWQWCla","WQJdV8kKW7/cUW","mqTbWO7cOGTU","W4HvAxW","pKhcMadcMq","WQZdUHWqoHVcSftcKCoEWQpcJa","EhxcHvDLotae","zSogy8o8uhWSst7cNSkrihNdPcm","WP0Fn8o6CW","W7FcOeXfyeRcLvRcQmoF","WRfuW7Lidq","FCoEjL5A","WR3dQ0NcUmkdWRebj0y","WRuoW6VcUCos","WOmIWRdcJd8","mM/dOWav","W54smCoF5zg15yY15yAl5Q6g5lYX6AUe","W7RcI2jYqa","WQGZcbZdGG","55Ie6ikt44oT5A6N6zMt5O+J5PYU5B+/5zgy","k8oFgmoGf8oQWPxdUq","W6r/qSkTW4pcPCotFuWHiX5X","zSo8yJlcHW","ygCIbSkfdSoYoCol","htRcHvmbWQHq","oKldQGSQW6/cRq","6ywm6Asx5O6h5P6l5Bs+5ywL6zEE","WPPYWPTLmvVdLmko","W6pdUrtcOCoaWOvGfJGComoPmGWBwmoV","WQldImkgW7lcVSkbtG","g8o/W5pcU20","m8oNj8oqmW","W4HVW6PliG","g8kcW6NdJWrjDG","WPvKWPewoG","WRPCW79oiG","psZcU1KQ","wvBcKCkiWOm","W4jrDetcMeldOW","FfRcN8kFWOG","W7ueWQpdTSo/","WPHSW5vVlG","ebqCWQec","W5vvW79RhG","FCkxW4hdQCkO","EuRcH8krWRpcJGRcL8kXzSoabG","smoPzrlcLW","WOdcQ8oGWPeq","WRK9W4dcJ8oQ","E1FcLSkDWPRcHbO","W40eWRZdTCox","yCkIWQJcUSkoWOJcNmojWPy","W7SbwCk7xW","hv7dHKRdPq","fCoOW5SQtW","qSkIW7pdSWbjxG4Vtmog","WPZcOCorFmkwcHtcS0BcPmo8FKxcU1RdIG","gW0JWQix","Eh3cGLD0mce","ACk5WRlcSa","W7NcU1XitKBcJwdcVmoDWPxcVYS","W6dcSb/dR8ojW4fGa2izrCo3BG","WPe8W4lcIxq","htRcHvmbWQ91WPis","cCo2W5qRwSo0W416","5PY86iEa5yEJ5l2Y5y2e5P6c","WQqBeHVdQSo/W6rG","A0/cN8kxWOu","kWVcRuSF","W6pdPCkBW6TdW5i0ptxcUSo2rq","lta3WRy7","umoal3L0","WQ5lWQ1dha","WQddQNtcQCkdWPa7dq","WOTmWP1Saa","s8k1W5uSt8k3W5LRcadcGsW","AGJcS08ms3tcSCodWRRcLWi","WPJdGZyNuhFdTW","WOGHW7tcUu/cOh/cPa","pmoylSo3dSoMWP8","WRa7WQtcGIy2Fq","EuRcH8krWRpcJGRcL8kJE8oHft4","FSkxWO7dHZBdPv0EdmoXdXK","6yAd6AET5O6f5P+I5y2e5l+t6AQY","W51UW7r5h8kasZ3cR8k2","EmoBieFcOmojsmoYfW","WPeTpSooWOW","WRhcTCoAWRKyWO48fW","w8opaMT/","WRuPW6RcRCoh","rCkKWQ3cLmkR","WPlcUSoiFmkOgb/cHehcPSob","ofFdTdjAhNm","5ysP5l6G6yAm6Awb5O275P+T5y6D5P66","WPadW4/cP38","hwtdTcyhWPBcIvxdIW","AMePamkCi8oc","ur9DqSkZ","of/dUWCdW6xcVry9hq","B2tdUdSWW7NcHa","pK/dUY0TW6/cPcC6gCkdjrxcHG","iCoFWRlcPGa","6BMW55Qk5BoR5y2h5B6N5zcIW6hcL8oyWO8","swVcPvn2","6z+g6kAH5ywY5lYR5y2E5P2pWQnTE8oh5OIX55E35Bcz5OIg5yEp5lId"].concat(function(){return ["WOaMfColBmoOW59GW4FcTx55WQ4","WQ9oCfqPd8olqKu","oLhdTrzzex7cMa","WOSMWRdcRXK","kMddRcCr","i8oIW6HdFmk6aq","rmoNW4BdL8kE","jmoVW6fbBG","WRTsWOv8gG","WR54WQubkuZdULC/","kKRdRXzxkxlcKCox","k8ogW53cMMJcSa","WOvhvhuO","WOu6W5VcLwe","j3O4aSkdm8ov","FG1bWOdcLbfPzIJdNgtcJfG5WRy","aSodW67cP3u","C8kUW4ddRmk1WRjd","oLNdSHzigg8","jmopWQRcQdVcUmoSW6hdNhaPWRlcTq","owutk8oTcZZdR8oSWRZcJ8otW4Lk","FbbqWOZcVrT5","W7VcPK1ez0ZcNq","WOGBdCoQWPC","W585y8kE","WQGKjI3dIq","pSofp8o7j8oSWO/dJCkSz8khW4JdQG","WOe9WRhcRX8","WQZcKmoKz8kN","e8oBW6jVDq","W4ztrNlcHq","xSk4W6FdSba","WQhdLmkCW7/cUmkKB8oF","zJjTxmkt","AhW4dmk1kCosj8oWzSoWW73dQG","E8o9rZxcSCk8WOZdImoqW6msWQiIdW","B8o9rYdcR8k2WPhdImomW6mP","55wz55s15Bgv5OMk5ysd5lIT","bsekWPOd","W71LD2xcNq","WOWvnmkZfmk1AW","lCoiW6vADG","gNpcIHZcSGRdHmoYn3hcKeDiW4e","WPtdHtaSwNZdTmov","o8ovj8o1ha","gwldTW9+","WRGfW5BcMCo+","a3FdK27dTa","D8o/W6VdLmk+xMFdHmoz","WR0Re8oZ","6yAS6AAD5O+Q5PY+5y686zMN5Pwh5l656AId","WP/dGIaLwx7dTSou","fhJcKdZcRcFdVCoAfq","W7XxzeFcOW","CrDc","p03dSHH5eM/cR8oxWR/cQZS","nSoEjCoXf8olWQ/dK8ku","FHXrWQRcObTZwWRdK37cLLqJWRyY","WQqLnSoWWPJdVmkkCwa5eHLoWPzMWPDlW4C","W6JcKmknW7hcRSoLECopzH7dPvG","WRixab7dSCoaW7vLnSkV","W6hdPmkqW6blW5rVgGtcRSoyFYa","WO3cTCoxDSkZhZ/cJeVcVmokz1G","W7TNW7ZcMwdcNGeDW6hdNulcLCkRWR53","h1/dQHjS","ztvVtCksEs1EW4ee","EKqhfmkU","pfikmCof","WP/dJJ8LqG","DCkUW53dR8ktWPrZWRrKl8oiAXK","c8k2fwP0WQW1cGVdJfnA","cHJcVfau","WOy6W6pcVMZcOwZcKGv1W5ioFq","fx/dVIicWRBcJ10","WRC2WQ3cGdq","5yA95l2X6yEv6AwE5O6P5P665yY75P6x","W5uPWPddN8oLySkPWQBdNCoyxvPZ","W4qOrSkZDG","e3/dSY8rWPdcVhxdOG","WR02WRBcSYi8Da","WQqBeGRdQCoNW6jSaCkTW43cICkL","5P+55zk05y2g5l6l6AU25lUI5AwWtWhcICkH","WOGgi8oUWQW","Ae0+emkc","W648qSkIAW","kL7dRHO1W5xcVsS5ca","uubTW7XhWRtcKmoUWRPzDSkL","Bh3cKMvZncCu","W4fDC3hcK0pdO8oM","WQDvAL4zkmoRxh7cKfpdMh4","of/dUWCwW7/cGYS1a8kMdYVcIZuAW74","WRhcN8onF8k2","ACk5WRlcSmk+WQ/cVmoqWRpdKq","WO99W5jBiq","AhW4dmk8j8oij8oVESoxW6NdQXNcGSoZ","W6eRWQ3dUCon","re3cGunR","WOPWW5H5pq","WP9UWPXRg0ldKmkeW6GEW5hcVa","WPmGW57cGMhcNwZcSXTYW4e","55wH5Bod5OIA5y2Z5lYk55ss","W74lWQFdPCo9","WQioW7pcImozW69oW7O/W48j","W7uvlGrJC8kNEwBcIg3dQKm","WQqAWQJcLtq","dMVdUgZdOW","5ywR5l6P5yYs5P6B6iEMod5xyq","W50YWORdLCovrCkjWRJdPG"].concat(function(){return ["WPBdQtS+wG","j8oLW6jeza","WQ3dQ8kyW5ZcLq","WO13W4X/ot7dPG","DCkUW53dRW","BfpcH8kiWRy","jSkNWPNdVmoLWOC0WPSI","W7ZcP1TgBKxcNfC","WOPTW4PvgJldUSoHnCkgWQWsxLhcNW","FG1bWOdcLbfPFcpdJLJcKG","WRiMWRxcJG88BsK0W4RcKSoQW4e","W6SnFf4VASoSE2JcJvldIa","zIvRw8ksEtXtW5ytrHiC","BSoWW6hdOSk4D0hdVq","aNCUlCoK","jMdMNiyq5Pso5yMNzv3dGu7PMAlMLOVLHkpOTlRNLBK","W4PAy3JcKehdOCoN","DCoCpupcSmoTECoB","W4jZzwlcKW","g0msjCoy","kCoPW47cRge","55Qf6ig344gs5A+C6zIn5OYq5P6P5B6W5zgY","WQviE1iWiSo7","W7FcGmkyWP5pW5nRuq","khpdRGKb","W5n1W6r0mCkmuWFcU8k0suFcLa","zSoqvbGG","vSoStZGWW5yOib0","WPevn8kXcCk1DSocedZdVa","mG1AW7lcSCkkW6K","WQ1vA2KS","55Uh5lQo6ygr5yIv5BsG5yEY6zEX","WRRcHCo7WRKS","r8oPW53dICkf","kv3dNWeU","k8otdSoCdG","bmonW5VcSgq","zSogy8o8xumpuJBcHmktpa","E8oSn0n6nWtdGYq4qhrO","WRZdRCkxW5RcVG","W6C6ECkRyG","kv3cKb/cHG","WPCOcmokCCodW7nO","ySobn07cTW","WOj2W5bFkHxdMSoLfW","DSkpW67dSKhdO8kGW4tdHgGxWOdcIa","6ysO6AAx5O6F5P2W5y6m55EW","BuGVl8kA","jSogW7BcG0y","WQehfrxdISo8W7vxm8kYW5ZcHmk5","WPqGW5/cICoo","l07dJvtdHq","WQ5oFxGT","WOWKjWddIG","W757W7VcL0dcNraW","Be3cMSkFWP3cTrFcQCkX","c2tdUdGAWOVcJvtdI3G+W4rOs8ozkW","DLFcUCkjWRG","EX1zWO7cRW","W4PkW4fEgG","WOmfn8kooCk1CSo0fINdSvJcNW","WQy5l8ohWQe","BmkIW4NdHtK","fmoKjCoSdq","WOeYaSoCE8opW79GW4FcU294WQG","W50KCSksr0BdSq","WQ5zWOfraW","udVcNdBcQKldMSoJohhcP00","W4jrDfxcNuRdQ8oNkhCsE8o4la","WPmTmmoBWOG","FWLAW7FcRSopW6tcNmk+kCkoW5yIaKZdIqlcISkRzSkgWPldRSoHW6K8wSoY","e2xdTXKZ","WPH9W4PQkJldVSonkCkuWRW","W5SYWOddKSolBSkXWPZdICoA","zfeCn8kg","E8o9j2Lopr7dPb84r2nLW7VcRCob","D8kZW4ZdO8k6WP5J","WRiMWRxcJG88Bs4QW5m","BCoTvGlcPmkkWOtdGCoBW7qKWRqz","l8oKW65iDSkXaSky","6z2M6ksz5yEB5l2z5yY+5P6sWPz9g0RMI6lNLjpLS4NMIQFLH6ZKUlO","fuxdIg3dSgO","FCk1W4FdPCkJWRntWQPF","metdOq0ZW4lcNq8y","bmoDWPRcLG4","6yAu6AAM5OYC5PYl5y6055wV","gsFcIvWoWOrW","ECoKW6ZdNCkOx3C","WOHWW5TzmZJdQG","BCkeC8odmSoWWONdTCkS","WRzJWR8lgwVdMLmDu8kdlvZcLLW","dSoGW4HuFG","WQiWkCo2WOS","WQaNWRJcJsG","aJVcTNOi","WPRcOComF8k5ptpcSa","z8kTW5RdRdK","y8owE8oYBa","mu7dGZSQ","WRlcUCoDWP0wWOC0fG3cJ8oDuqeD","D8ogzmo7","nSoOW6iqFa","5P2k5zoW5Bwf5lYq6AQ3WQBdIg1x5lQ+5Psr5y6W5l6555sl","WQyoW7RcTKW","WPJdIfpcT8kq","W5W5w8k1yW"]}())}())}();return Ke=function(){return n},Ke()}function ke(n,e){const t=Ke();return ke=function(i,s){i=i-179;let r=t[i];if(ke.hYtIDO===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let x="",b="";for(let v=0,L,E,V=0;E=l.charAt(V++);~E&&(L=v%4?L*64+E:E,v++%4)?x+=String.fromCharCode(255&L>>(-2*v&6)):0)E=u.indexOf(E);for(let v=0,L=x.length;v<L;v++)b+="%"+("00"+x.charCodeAt(v).toString(16)).slice(-2);return decodeURIComponent(b)};const m=function(l,u){let x=[],b=0,v,L="";l=a(l);let E;for(E=0;E<256;E++)x[E]=E;for(E=0;E<256;E++)b=(b+x[E]+u.charCodeAt(E%u.length))%256,v=x[E],x[E]=x[b],x[b]=v;E=0,b=0;for(let V=0;V<l.length;V++)E=(E+1)%256,b=(b+x[E])%256,v=x[E],x[E]=x[b],x[b]=v,L+=String.fromCharCode(l.charCodeAt(V)^x[(x[E]+x[b])%256]);return L};ke.viTgLd=m,n=arguments,ke.hYtIDO=!![];}const o=t[0],c=i+o,d=n[c];return d?r=d:(ke.pYcDIc===void 0&&(ke.pYcDIc=!![]),r=ke.viTgLd(r,s),n[c]=r),r},ke(n,e)}async function vn(n=W.v){const e=ke,t={MrSTd:function(s,r){return s(r)},LKhlk:"酒馆挂机今日可用",NjEti:function(s,r){return s(r)},lWlDV:e(187,"&W]U"),dBmul:function(s,r){return s===r},zQFBl:"fGrXL",dAcLm:"JYgRY",ksoIr:e(301,"^)XC"),dHzlq:"界小抄会员<br>无限制使用",lWTcl:e(305,"f&xv"),RWgDZ:function(s,r,a,o){return s(r,a,o)},CSuaq:"autoHuangGai",mBKaa:function(s,r){return s*r},awOKF:function(s,r){return s===r},Pqqmr:"task",pDqgI:e(225,"9hbO"),ZcMSy:function(s,r){return s!==r},wIity:"WzLeS",NaDsk:"HiFJy",QBelZ:e(481,"KDdW"),Rbims:e(202,"0zA0"),TGMKl:function(s,r){return s!==r},pWPoq:e(438,"A*Z3"),oYRaV:e(206,"0gC)"),xJQEi:"autoYueKaSwitch",aGrXn:function(s){return s()},gUopm:function(s,r){return s!==r},hAifJ:e(222,"x*gV"),BrZra:e(477,"qeH8")},i=[{id:e(452,"%6Ur"),action:Nn},{id:t.QBelZ,action:an},{id:t.Rbims,action:sn}];if(n)if(t.TGMKl(e(253,"A*Z3"),t[e(183,"Hx[!")]))i[e(320,"FX#@")]({id:t[e(341,"ru3f")],action:Gt},{id:t[e(252,"IAlp")],action:Bt},{id:t.xJQEi,action:Rt}),t[e(240,"a(H[")](Wn);else {let s="本周已体验<br>今日可使用";_0x523735[e(339,"PmNT")]!==s&&(t.MrSTd(_0x2225f3,t[e(203,"tH!y")]),_0x90798d[e(302,"[NFk")]=s);}else if(t[e(370,"db]N")](t[e(345,"^vTn")],t[e(361,"uNpj")]))[{id:t.Pqqmr,action:Gt},{id:e(383,"tH!y"),action:Bt},{id:t[e(279,"db]N")],action:Rt}][e(419,"qeH8")](({id:r})=>{const a=e;if(t[a(179,"%6Ur")](t.zQFBl,t[a(267,"0gC)")])){let o=a(218,"FX#@")+new _0x332899(_0xd5878f.guildVIP[_0x3b52ac[a(356,"x*gV")]])[a(490,"KDdW")]();_0x17c801[a(433,"f&xv")]!==o&&(t.NjEti(_0x2906cc,_0x116126[a(422,"%lus")]+t[a(358,"f]5*")]),_0x45cbed[a(303,"0zA0")]=o);}else {const o=document[a(467,"uyXJ")](r);o&&(a(259,"x*gV")!=="bICdq"?(o[a(249,"$!BY")]=![],o.disabled=!![],o[a(192,"^vTn")](new Event(t[a(380,"^)XC")]))):_0x39bb38[a(352,"0zA0")]&&_0xb124b2());}});else {_0xb7b0df[e(464,"x*gV")]=![],_0x261790[e(274,"inN5")]=![];let s=t.dHzlq;_0x363c80.innerHTML!==s&&(t[e(311,"$kAl")](_0x1ebe73,t.lWTcl),_0x56bc26="v",t.RWgDZ(_0x1bbdb8,t[e(239,"%6Ur")],_0x149471+t.mBKaa(t[e(328,"x*gV")](t.mBKaa(7,24),3600),1e3),![]),_0x1320be[e(219,"UQ(1")]=s);}i[e(223,"6IDZ")](({id:s,action:r})=>{const a=e,o=document[a(319,"IAlp")](s);o&&(o[a(434,"qeH8")]=![],t.awOKF(s,t[a(436,"%lus")])||t[a(416,"&W]U")](s,a(330,"OC3a"))?t.pDqgI===a(421,")h@*")?(_0x5d2429.onchange="",_0xfbfec6[a(333,"#O3T")]=!![],_0x48ff1d[a(249,"$!BY")]=![],_0x43cc22[a(480,"A*Z3")]=a(300,"P3(h")):o[a(418,"tH!y")]=()=>r():t.ZcMSy(t[a(216,"ru3f")],t.NaDsk)?o[a(437,"$kAl")]&&r():_0x202a84[a(404,"qJ!L")]=![]);});}function Wn(){const n=ke,e={JWCUZ:function(i,s,r,a){return i(s,r,a)},EKXQe:function(i,s){return i(s)},LFkcz:n(229,"Nryz"),xVcCh:function(i,s){return i(s)},RbsCb:"黄盖主公小号刷百胜功能可用！",ahfCe:n(226,"[NFk"),nhJwI:function(i,s){return i!==s},ihRoO:n(364,"9hbO"),JaDpL:n(373,"uyXJ"),tllTh:n(290,"$!BY")},t=document[n(276,"%lus")](e.tllTh);t.forEach(i=>{const s=n,r={YJmAi:e.LFkcz,aDrsu:function(a,o){return e.xVcCh(a,o)},tcEHk:e[s(244,"%lus")],JmRSz:e[s(209,"6IDZ")],AVAGG:s(204,"UAx9"),stkUv:function(a,o){return e[s(277,"9hbO")](a,o)},LMtja:e.ihRoO,LVFzB:s(459,"ru3f"),SUwVH:function(a,o){return e[s(268,"a(H[")](a,o)},EImxI:e[s(316,"kn^Z")]};i.disabled=![],i[s(475,"qJ!L")]=function(){const a=s;this[a(242,"f&xv")]?(t.forEach(o=>{const c=a,d={SQoOb:r.YJmAi,bEJUL:function(m,l){return r[ke(195,"0gC)")](m,l)},kuuXw:r[c(255,"f]5*")],JOxqr:r[c(448,"a(H[")],HWUIR:r[c(415,"jBhF")],XuqNT:c(402,"P3(h")};if(r[c(368,"6IDZ")](r[c(324,"PmNT")],r[c(273,"^vTn")])){if(o!==this)if(r.SUwVH(r[c(397,"dm0N")],r[c(440,"g(ge")])){const m={LcgDk:function(l,u){return l(u)},dXEbF:d[c(357,"a(H[")]};d[c(344,"9*Qn")](_0x4afb06,d[c(250,"f&xv")]),_0x178c16.innerHTML=_0x2cc5d1,_0x57bd6b[c(237,"sUxE")]=![],_0x3070c7[c(185,"%lus")]=function(){const l=c;this.checked?(_0x1f8e08[l(406,"f]5*")]=![],_0x45d408.autoBotSwitch=9,_0x190bc0.readyStart(0)):(_0x4415e5[l(188,"UQ(1")]=![],m[l(256,"a(H[")](_0x179d0b,"盖主速刷已关闭")),_0x177ef7[l(456,"vxed")](_0x401b3e[l(408,"9hbO")]),_0x5e5e60[l(366,"9hbO")](m.dXEbF,()=>_0x324d92(),500);};}else o.checked=![];}else {const m=d[c(291,"0zA0")].split("|");let l=0;for(;[];){switch(m[l++]){case"0":_0x60ed3b[c(495,"inN5")]=![];continue;case"1":_0x2530bf.delay(d[c(461,"$kAl")],()=>_0xa10af9(),500);continue;case"2":this[c(308,"6IDZ")]?(_0x30ef45.checked=![],_0x27585c[c(387,"9*Qn")]=!![],_0x4a70ca[c(205,"6IDZ")](d.HWUIR,()=>_0x520b18[c(472,"%tGd")](),500)):(_0x2fa382[c(258,"jBhF")]=![],_0x573eeb[c(476,"f]5*")](c(297,"ru3f"),()=>_0x370218(c(353,"A*Z3")),500));continue;case"3":_0x24bd64.auto(_0x1eb1f3[c(201,"f&xv")]);continue;case"4":_0xde73f0[c(298,"uyXJ")](c(329,"Nryz"))[c(263,"sUxE")][c(468,"uyXJ")](d[c(435,"ru3f")],'"'+_0x4903f8[c(280,"%tGd")][c(400,"PmNT")]()[c(199,"#O3T")](2,"0")+'"');continue}break}}}),e[a(213,"UQ(1")](Mt,parseInt(this[a(385,"#O3T")][a(262,"Xn!H")]),parseInt(this.dataset[a(197,"0zA0")]),this[a(450,"qeH8")][a(221,"$kAl")])):e[a(270,"&W]U")](Mt,![]);};});}async function Fe(n=![]){const e=ke,t={TKnFX:e(355,"PmNT"),FOSkX:function(l,u){return l(u)},XQwul:e(425,"0zA0"),PpUSG:".status",YvnZN:e(231,"f&xv"),AXGFX:e(243,"IAlp"),gGerb:function(l,u){return l(u)},GcWfO:"酒馆挂机今日可用",mXPTq:function(l){return l()},XLYqW:e(251,"sUxE"),QDAtz:"autoBotSetUp",hVGWA:function(l,u){return l!==u},yXXEp:e(430,"#O3T"),AAmgb:"4|7|0|6|3|1|8|5|2",xMndl:e(346,"Hx[!"),uWuhS:function(l,u){return l===u},inQAU:function(l,u){return l===u},buLDO:"ufHov",KTnxh:function(l,u){return l(u)},vsUXZ:function(l,u){return l<=u},YcdWR:function(l,u,x,b){return l(u,x,b)},EMNJs:e(257,"FX#@"),LRYcA:"autoHGExplanation",YRuEb:function(l,u){return l-u},mBhza:function(l,u){return l*u},ZorFz:function(l,u){return l+u},QmVPv:function(l,u){return l*u},zdQBZ:function(l,u){return l*u},UwIIj:function(l,u){return l+u},nDPwO:function(l,u){return l*u},WIemB:function(l,u){return l===u},xmFop:"ZozWA",epSav:"界小抄会员<br>无限制使用",AgDQw:function(l,u){return l!==u},uZzmc:e(266,"%lus"),xtZEm:"autoHuangGai",ZLGrU:function(l,u){return l*u},GLkTP:function(l,u){return l*u},CgJDs:function(l,u){return l!==u},xFQot:e(420,"*Yk0"),HSqrp:e(482,"g(ge"),PBiUP:function(l,u){return l<=u},MhkKW:function(l,u){return l>=u},AgleW:"FZrVp",iLhiy:"fXKvE",ZgIiM:e(410,"&W]U"),cZYnw:"change",FvRhw:"1|0|4|3|2",zozPQ:function(l,u){return l<=u},hdLSk:function(l,u){return l+u},pwPio:function(l,u){return l==u},XBfYQ:e(212,"kn^Z"),CWfYG:e(469,"dm0N"),hncIv:e(392,"0zA0"),PPEGO:"黄盖主公小号刷百胜功能可用！"};let i=await le[e(486,"Nryz")](),s=t[e(281,"KDdW")](i,t[e(271,"^)XC")](Be,e(210,"g(ge"),0,![])),r=document[e(474,"7hXV")](e(188,"UQ(1")),a=document.getElementById(t[e(379,"vxed")]),o=document[e(427,"0zA0")](e(334,"FX#@")),c=document[e(288,"OC3a")](t.LRYcA),d=t[e(246,"CrM1")](W.trialTime,t[e(220,"qJ!L")](t[e(473,"$kAl")](6,24),3600)*1e3),m=new Date(t.ZorFz(W[e(442,"qeH8")],t.QmVPv(t[e(349,"uyXJ")](8,3600),1e3)))[e(211,")h@*")]()[e(326,"9hbO")](0,10);if(W.guildVIP[25242]=new Date(t[e(374,"IAlp")](i,t[e(189,"vxed")](t.nDPwO(t.nDPwO(6,24),3600),1e3)))[e(365,"OC3a")](),r[e(200,"OC3a")]=![],W.v)if(t.WIemB(e(312,"KDdW"),t[e(369,"dm0N")])){const l=t[e(261,"7hXV")][e(381,"P3(h")]("|");let u=0;for(;[];){switch(l[u++]){case"0":t[e(424,"k57k")](_0x36579a,e(241,"qJ!L"));continue;case"1":_0xac642c.autoBotSwitch=!![];continue;case"2":_0x4287e[e(447,"Nryz")]=!![];continue;case"3":_0x3b1c7d[e(306,"Hx[!")]=![];continue;case"4":_0x33a07c[e(278,"Nryz")](e(372,"9hbO"),()=>_0x3f481f(),500);continue;case"5":_0x2ea8be[e(439,"$kAl")](t[e(455,"KDdW")],()=>_0xc3a5fd.readyStart(0),500);continue;case"6":_0x3a7f5a.auto(_0x4f9fca[e(466,"0gC)")]);continue;case"7":_0x467a2c.checked=!![];continue;case"8":_0x48abd2[e(284,"Xn!H")](t[e(196,"vxed")])[e(384,"dm0N")][e(214,"&W]U")](t[e(260,"vxed")],t.AXGFX);continue}break}}else {r[e(354,"g(ge")]=![],a[e(414,"IAlp")]=![];let l=t.epSav;t[e(413,"KDdW")](o[e(412,"sUxE")],l)&&(t[e(457,"^vTn")](e(398,"jBhF"),e(282,"kn^Z"))?(t[e(338,"jBhF")](oe,t[e(479,"^)XC")]),s="v",t[e(485,"OC3a")](ze,t[e(314,"Hx[!")],t[e(207,"UQ(1")](i,t[e(337,"6IDZ")](t.GLkTP(7*24,3600),1e3)),![]),o[e(378,"UAx9")]=l):(t[e(238,"OC3a")](_0x2e1816,t.GcWfO),_0x4ae164.innerHTML=_0x408612));}else if(t.vsUXZ(i,W.guildVIP[W[e(351,"Hx[!")]])){let l="公会包月至<br>"+new Date(W[e(315,"tH!y")][W[e(307,"A*Z3")]]).toLocaleDateString();t[e(289,"KDdW")](o.innerHTML,l)&&(t.gGerb(oe,t.UwIIj(W[e(390,"Hx[!")],t[e(217,"^)XC")])),o[e(190,"%lus")]=l);}else if(t[e(389,")h@*")](i,17284896e5)){let l=e(235,"k57k");o[e(247,"CrM1")]!==l&&(t[e(304,"*Yk0")](e(342,"0zA0"),"WSnAQ")?(t.KTnxh(oe,t.HSqrp),r[e(295,"jBhF")](e(443,"a(H["),()=>{t[e(335,"Xn!H")](rn);},{once:!![]}),o[e(484,"7hXV")]=l):(_0x2ea918.checked=![],_0x1a5f9c.autoBotSwitch=!![],_0x49a7f9[e(428,"*Yk0")]("autoBotTip",()=>_0x2240c0[e(191,"ru3f")](),500)));}else if(t[e(286,"g(ge")](i,d)){let l=e(322,"P3(h");t.CgJDs(o[e(264,"6IDZ")],l)&&(t.KTnxh(oe,t[e(363,"Hx[!")]),o[e(441,"uNpj")]=l);}else if(t[e(417,"UAx9")](i,W[e(275,"9hbO")]))if(t[e(444,"f&xv")](t[e(496,"qeH8")],t[e(371,"[NFk")])){let l=e(193,"IAlp");o[e(350,"0gC)")]!==l&&(oe(t[e(234,"%6Ur")]),r[e(489,"Nryz")](t.cZYnw,tn),o[e(433,"f&xv")]=l);}else t[e(294,"0gC)")](_0x4bf795);else {const l=t.FvRhw[e(394,"9hbO")]("|");let u=0;for(;[];){switch(l[u++]){case"0":r[e(494,"tH!y")][e(293,"UQ(1")]="";continue;case"1":r[e(236,"OC3a")]="";continue;case"2":o[e(488,"f]5*")]=m+e(343,"%tGd");continue;case"3":r.checked=![];continue;case"4":r[e(393,"^vTn")]=!![];continue}break}}if(!r[e(227,"9*Qn")]&&!r[e(405,")h@*")]&&(r[e(299,"$kAl")]=function(){const l=e,u={sMKwY:function(x,b){return t.FOSkX(x,b)},uNgxw:t.XLYqW,cgFbt:t[l(460,"tH!y")]};this[l(308,"6IDZ")]?t[l(375,"&W]U")](t[l(377,"UQ(1")],l(465,"k57k"))?(a[l(242,"f&xv")]=![],W[l(184,")h@*")]=!![],le[l(317,"FX#@")](t[l(471,"OC3a")],()=>O.newRoom(),500)):(this[l(352,"0zA0")]?(_0x6a2394[l(285,"vxed")]=![],_0x49dc90[l(230,"ru3f")]=9,_0xd5eb01[l(492,"^vTn")](0)):(_0x2887d5[l(387,"9*Qn")]=![],u[l(498,"0gC)")](_0x589720,u[l(327,"uNpj")])),_0x1b94ed.auto(_0xcf4e7f[l(245,"db]N")]),_0x16c6ae[l(180,"qJ!L")](u[l(462,"OC3a")],()=>_0x12ff2c(),500)):(W[l(466,"0gC)")]=![],le[l(317,"FX#@")]("autoBotTip",()=>oe("酒馆挂机已关闭"),500)),W[l(228,"6IDZ")]=![],document.querySelector(l(446,"0gC)"))[l(463,"kn^Z")][l(292,"6IDZ")](l(491,"x*gV"),'"'+W[l(458,"f]5*")][l(347,"f]5*")]()[l(233,"A*Z3")](2,"0")+'"'),O.auto(W.autoBotSwitch),le.delay(t[l(362,"6IDZ")],()=>Fe(),500);}),!r.disabled&&!r.parentElement[e(411,"db]N")]&&(r[e(432,"Xn!H")][e(336,"9*Qn")]=function(){const l=e,u=t[l(323,")h@*")].split("|");let x=0;for(;[];){switch(u[x++]){case"0":W[l(269,"^vTn")]=!![];continue;case"1":document[l(232,"k57k")](t[l(321,"P3(h")])[l(313,"ru3f")][l(248,"%tGd")](l(287,"7hXV"),t[l(367,"UQ(1")]);continue;case"2":le.delay(t[l(395,"Hx[!")],()=>Fe(),500);continue;case"3":W[l(310,"uNpj")]=!![];continue;case"4":r[l(454,"9*Qn")]=!![];continue;case"5":O[l(224,"[NFk")](W.autoBotSwitch);continue;case"6":le[l(186,"ru3f")](t[l(208,"#O3T")],()=>O.readyStart(0),500);continue;case"7":a[l(376,"9hbO")]=![];continue;case"8":oe(t.xMndl);continue}break}}),s||t[e(359,"db]N")](i,W.guildVIP[W[e(449,"[NFk")]])){let l=t[e(318,"0zA0")](e(429,"UQ(1"),t[e(254,"0zA0")](s,"v")?t.XBfYQ:s?t[e(331,"7hXV")]:t[e(272,"f&xv")]);c.innerHTML!==l&&(oe(t[e(399,"g(ge")]),c.innerHTML=l,a.disabled=![],a.onchange=function(){const u=e;if(this[u(296,"[NFk")])if(t[u(478,"&W]U")](t[u(445,")h@*")],t[u(325,"vxed")]))r[u(407,"ru3f")]=![],W[u(451,"*Yk0")]=9,O[u(497,"k57k")](0);else {const x=_0xfe7896[u(467,"uyXJ")](_0x26bf45);x&&(x[u(393,"^vTn")]=![],t[u(401,"g(ge")](_0x201cbe,"task")||t.uWuhS(_0x31d00c,"mail")?x[u(382,"kn^Z")]=()=>_0x23e4e7():x.checked&&t[u(470,"dm0N")](_0x44afb0));}else W[u(181,"[NFk")]=![],t[u(283,"f]5*")](oe,t[u(194,"KDdW")]);O[u(386,"UAx9")](W.autoBotSwitch),le[u(340,"&W]U")](u(487,"qeH8"),()=>Fe(),500);});}else a[e(391,"P3(h")]="",a[e(483,"qJ!L")]=!![],a[e(296,"[NFk")]=![],c.innerHTML=e(431,"f&xv");!r[e(453,"Nryz")]&&!a[e(423,"0gC)")]&&(W.autoHGSwitch=![]);}async function In(){en(),An(),Tn();}var $t="jsjiami.com.v7";function Te(n,e){const t=Ve();return Te=function(i,s){i=i-465;let r=t[i];if(Te.Siaran===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let x="",b="";for(let v=0,L,E,V=0;E=l.charAt(V++);~E&&(L=v%4?L*64+E:E,v++%4)?x+=String.fromCharCode(255&L>>(-2*v&6)):0)E=u.indexOf(E);for(let v=0,L=x.length;v<L;v++)b+="%"+("00"+x.charCodeAt(v).toString(16)).slice(-2);return decodeURIComponent(b)};const m=function(l,u){let x=[],b=0,v,L="";l=a(l);let E;for(E=0;E<256;E++)x[E]=E;for(E=0;E<256;E++)b=(b+x[E]+u.charCodeAt(E%u.length))%256,v=x[E],x[E]=x[b],x[b]=v;E=0,b=0;for(let V=0;V<l.length;V++)E=(E+1)%256,b=(b+x[E])%256,v=x[E],x[E]=x[b],x[b]=v,L+=String.fromCharCode(l.charCodeAt(V)^x[(x[E]+x[b])%256]);return L};Te.ZWmcsh=m,n=arguments,Te.Siaran=!![];}const o=t[0],c=i+o,d=n[c];return d?r=d:(Te.DIKRNM===void 0&&(Te.DIKRNM=!![]),r=Te.ZWmcsh(r,s),n[c]=r),r},Te(n,e)}((function(n,e,t,i,s,r,a){return n=n>>3,r="hs",a="hs",function(o,c,d,m,l){const u=Te;m="tfi",r=m+r,l="up",a+=l,r=d(r),a=d(a),d=0;const x=o();for(;[]&&--i+c;)try{m=parseInt(u(517,"WUqw"))/1+parseInt(u(483,"DAKy"))/2*(parseInt(u(491,"o0NE"))/3)+parseInt(u(485,"bSid"))/4+parseInt(u(471,"rKc1"))/5*(-parseInt(u(542,"Do*x"))/6)+-parseInt(u(487,"nMMh"))/7*(-parseInt(u(488,"Q%H!"))/8)+-parseInt(u(565,"Do*x"))/9*(parseInt(u(531,"FM4E"))/10)+parseInt(u(567,"BmV0"))/11*(-parseInt(u(537,"nduF"))/12);}catch{m=d;}finally{if(l=x[r](),n<=i)d?s?m=l:s=l:d=l;else if(d==s.replace(/[MGrSlTHyJYCnkRufEt=]/g,"")){if(m===c){x["un"+r](l);break}x[a](l);}}}(t,e,function(o,c,d,m,l,u,x){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),m="join",o[m]("")})}))(1616,563107,Ve,204),Ve&&($t="o6");function en(){var s;const n=Te,e={AUezK:function(r,a){return r==a},FhBHm:n(470,"Piq1"),QYADr:n(472,"E#eZ"),nYPQm:function(r,a){return r+a},dkvrB:`点击添加激活码
当前激活码有效期至
`,Aemqp:n(490,"SLAf"),EYORY:"green",TlycS:"yObaF",gCzOW:function(r,a){return r!==a},MKNBh:n(551,"8qMz"),ERWcS:function(r,a,o,c,d){return r(a,o,c,d)},dXbtb:n(545,"Q%H!"),OvAZt:n(499,"0noJ"),fhYwj:"HwMak",eavaH:"已激活",OfACA:function(r,a){return r+a},vqslH:function(r,a){return r+a},cqPfg:n(553,"mlj8"),mYxhy:"2px solid rgb(242, 222, 156)",cuozS:function(r,a,o){return r(a,o)},YDUSR:function(r,a){return r===a},MyKtR:n(519,"rKc1"),rqDLI:function(r,a){return r(a)},rTyJx:function(r,a){return r(a)},LKxuo:function(r,a){return r(a)},UXrnY:function(r,a){return r===a},yavLq:n(509,"sGiW"),QmBCk:n(523,"kzOz"),mMIPy:"POST"};if(!W[n(558,"AjSp")])if(e.UXrnY(n(522,"rKc1"),e[n(557,"sGiW")]))_0x5dc413[n(526,"i@69")][_0x4fd48a]?_0xa59e29.skinMap[_0x433e56]=new _0x303728([..._0x545736[n(495,"bSid")][_0xf9ed76],..._0x144e41]):_0x575a78[n(466,"1BG3")][_0x46e340]=new _0x1dc386(_0x48cc8f);else {(s=O[n(539,"rKc1")]("TaskManager"))==null||s.getTaskListFromServer();return}let t=document[n(481,"E0bs")]("AC");const i={username:W.userID,playername:W[n(568,"SLAf")],guildID:W[n(562,"e$PS")],password:t[n(496,"8A&U")]};fetch(e[n(494,"8^KB")],{method:e.mMIPy,headers:{"Content-Type":n(535,"H)$P")},body:JSON.stringify(i)})[n(548,"8qMz")](r=>r.json()).then(r=>{const a=n,o={QDaGd:e.OvAZt};if(e[a(556,"DAKy")]!=="HwMak"){let c;_0x3b454f[a(492,"v^Wm")],e[a(500,"sIUx")](_0x2af8bc[a(513,"rKc1")],!![])?c="已激活":c=e.FhBHm,_0x56f0d9[a(520,"BmV0")](e[a(476,"jMM5")],e.nYPQm(e[a(502,"lUL@")](e[a(536,"SLAf")],_0x4d4b50.expirationTime[a(538,"Do*x")](" ")[0]),c));}else {if(r.message==""){let c;r.expirationTime,e[a(544,"rKc1")](r[a(563,"kzOz")],!![])?c=e[a(473,"kivV")]:c=e.FhBHm,t.setAttribute(e.QYADr,e[a(468,"WUqw")](e[a(554,"bSid")](e[a(514,"#R#^")],r[a(516,"aRGu")][a(475,"sIUx")](" ")[0]),c));}else t.setAttribute(e[a(479,"7G@J")],e[a(529,"t[$6")](e[a(493,"7G@J")],r.message));if(r[a(486,"yX*B")])if(a(477,"VEFi")!==a(566,"8qMz"))_0x8588fa(a(525,"E0bs"),e[a(540,"v^Wm")],1e4,e.EYORY);else {const c=r.guildExpirationTime[a(518,"BmV0")](" ","T"),d=new Date(c);W[a(549,"8qMz")][W[a(524,"Piq1")]]=d;}e[a(504,")Pr*")](r[a(541,"o0NE")],!![])?(W.v=!![],document[a(512,"8A&U")](e[a(511,"vdmA")])[a(555,"lUL@")][a(564,"^@E2")]=e[a(505,"8^KB")],Object[a(489,"Qv01")](G[a(546,"E0bs")])[a(560,"vdmA")](([c,d])=>{var l;const m=a;if(G.skinMap[c])G[m(506,"mlj8")][c]=new Set([...G[m(526,"i@69")][c],...d]);else if(e.TlycS!==e[m(510,"nMMh")]){(l=_0x5f4d35[m(498,"8A&U")](o[m(515,"1BG3")]))==null||l[m(547,"0noJ")]();return}else G[m(527,"7G@J")][c]=new Set(d);}),e[a(507,"EGLk")](setTimeout,()=>{const c=a;if(e.gCzOW(e[c(467,"e$PS")],c(559,"VEFi"))){const d=_0xf372fd[c(543,"E#eZ")][c(530,"7G@J")](" ","T"),m=new _0x33c5bd(d);_0x341404.guildVIP[_0x5416df[c(524,"Piq1")]]=m;}else e.ERWcS(Ze,c(550,"VEp4"),e[c(474,"SLAf")],1e4,c(484,"VEFi"));},5e3),W.trialTime=0):e.YDUSR(e.MyKtR,"cYAtV")?W[a(534,"v^Wm")]=e.rqDLI(parseInt,r.trialTime):_0x21bc8d[a(533,"0noJ")](e[a(528,"kzOz")],e.nYPQm(e[a(570,"8qMz")],_0xce88af[a(503,"yX*B")])),e.rTyJx(Rn,r[a(521,"1BG3")]),t[a(480,"sGiW")]="",e.LKxuo(vn,r[a(469,"H)$P")]),Fe(!![]);}})[n(482,"e$PS")](r=>console[n(497,"E0bs")](n(552,"VEFi"),r));}function Ve(){const n=function(){return [$t,"ruGjCsRJjJSTiYfnaHMmi.clSoERmYk.yRvuty7S==","E1tcJLVcMYlcNxu0","pw4TWP1IWRPyW6lcTmkkWQNdV8kXW7SuWQS","lfxcTCkbW7O","W4pdPSkNW5RdVH7cKxVdMmkEhG","hCkBW7xcR8kk","D13cKq","tKpcIKVcHW","lmo4WRKHc0uuW7ZdOq","wmkcW6ZcNmksqrO","W4VdGMRcT09gCmk4WO7dKSk5W40OdX/dMMZdP8ol","uw3cGmkFW4O","54ku5yA85Rw95yIz5RYM5RA/56ouWQa","FmoUBmobW7tdHCk0WOi","W5VdTfXfWP3cNcyRW79dagdcKSkOtsWaW77cVSocqG","W5TPW7ddJW","W4H0W7ZdJwbaW5BdHW","5Oso6lkD5l2Q5A6U55ww5Bcz5OUy55M85PEu5O2KCWvltUEBS+IbSos/VEMPPUs6N1lcJcNMLA0k55E9A+AHV+w0OUwhTUMdPUs4ToMdVCoYFSkiWQtLVQRMJPxMK6BKV5tLTlZNUAJLHylPGPVLJBxNLRbJymkXWRpKUjJMLiZOHPVLIkFNURpMNQBLJApNLASbW5RcSmk45lQ26zw75yIf6kgN5yEA6ykL5y2555wGbNmSW5BOH7xLI6/NP6JMNkBLJ53NLju","W7D3W6ddJhq","z8k3jaryW5e","F8k6WQpdGwtdVCkEfLRdR31+","fSoZc8kiva","WQa7zJKr","WRKMkSkMFa","nehcMmkmCG","W4ZcJCk3eHaT","ESkZiWzA","W6DdW4BcRCk4WRiX","WQBcOmkZy1FcKWBcS8oqzq","W7ddO8oOn3NcLI0","f8ojB3xdQSo5W7xdU3a","W55XoCocWRJdLq","x8osWQRdSCojyc7dOgjhxW","W4fXW6ddHhm","zt/cVLbAW4ZdNSoRkdG","jLFcOmkyW5zbWQddUG"].concat(function(){return ["wSotWPWseCk1oLZcOSosW6K","W4TzW7FdLwy","xCkQW7RcGCkXzb0","DMxdOmougZNdQa","W5RdNCopgxu","WPPRWR0oW7e","px0PWPH9WRHnW7pcUq","5P2L5RYX5Rwp","iq3dLCouWRlcJ3XEWPRcPvNdVG","W5ZdM2lcUe5Rz8kKWOpdHCkQ","FulcM1dcTa","cvVcRSkcW4G","cSkgWQFdVmkS","WRL2z3TO","tmk1iW5D","WPW2WQ3cMtWKW6BdVhmhW4fy","ke7cSmoRvq","o0hcGSk1zG","BCo4C8oTW7BdRCk4WPCyWPhcOMlcKdW","W7tdT8o1ohu","W656qCoGjCkGF05nzSkfW78","rCk3mW5e","uSk7tSowl3fxtCkKz8kPWQ9s","gmkyW43cOmo/W4rPtvursmkxBt0pW5ZdSSkbW6i","wmoDWPCDhSoWnutcQConW4ZdKq","hhhcTSoqWQJdGSkdW4ldTW","ACoYW4RcMSkHkCof","kv3cL8kCW5DmWRNdTSk0","FSoAWQ4pmLCL","AL7cL1pcHrFcGhe+WRT5nbtcIG","hu/cK8oBrq","AgzyWO8H","e8oPeCkkusqt","WPtdScJdImkx","B8oVDCohW6G","WOxdTda","W6JdSfT6WRhcJImgW7fvbG"].concat(function(){return ["omkJWQ7dR8kt","W5dcON3cJCk0W5jHW4lcU8oN","WR0wtWqz","eSkiW5FcV8o6W6z0","jSo7W5aBea","vfjIWQqZ","B8kJWQ/dJL3dUCkN","aatdGbzw","W6q4W4X8WOpcTJldMCkFnYHt","gfpcN8k1wW","p8kgW5zgDq","W6jDW6tcJSk+","WOxdTdddUmkEW616W4tcUSo3WOviEhS","CvVcKCkmW7FdNKrcWO0","vXFcICkHhW","veRdQmo9mG","kd/dMdHLW6ZcUaW4W6nBW4FdUfS","W6e4W451WOFdIdddTCkLmWW","jMZdVarXW6pdLa","C2hcPmkrW5C","j2ZdUcLKW7tdG8oshIvOyG","DMVdVCoopZBdVW","ExFcJSk1W40","hSoEB2ZdR8kIWQ7cSxn9oCo4WPvtWO4MF2K3WRFdGMRcU1DyW7FdVCoJ","kmkehCo0WR/cQge","5Osv6lk/5l2N5A2r55Ew5Bkh5OMr55M25Pwz5O+KW5X5WQTM55Qm6ikA5l6m6AU+5lIaWQdcQmol5PwRW7/NLRJdKEAGG+w2P+wfOEMdH+s5OUMcIZpdMCo9iUw+VUApNoAqPos8L+w3SEE6LEwgOoMaGEwmG+EuSLddSmkun+s7MoAxJ+IeGUwlQoE4UoADSUwoREEwLr3dU8oOW7FKUiNPLP7LIQFOOO7LHB3PGPRLJyVNLjhcTddcRMNOHARLIiFNPkNMNkZLJQtNL7m","WOHuW5q6z0xcRa","cNZcMmobAInI","j8oZwLJdRG","W5JcTfidWQa","c3lcGCodrIf3","w33cPe/dSL06CL7dTW","FSohrmoXWPxcP3nUpq","W4/dTfXqWOJcMZ8oW7rfaem"]}())}())}();return Ve=function(){return n},Ve()}async function Cn(n){try{fetch("https://goka.top:8080/recordPlayer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});}catch(e){console.error("Error:",e);}}async function En(n,e){const t=`https://goka.top:8080/getLottery?username=${n}&secId=${e}`;return fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>(W.lotteries=i,console.table(i),i)).catch(i=>(console.error("Error:",i),[]))}async function Tn(){try{const n=document.getElementById("choujiang");n.href="https://goka.top:8080/choujiang?username="+W.userID,(await En(W.userID,0)).forEach(t=>{un(t.secId,t.itemId,t.itemNum,t.times);});}catch(n){console.error("Error during fetching:",n);}}async function Dn(n,e,t,i,s){const r={username:W.userID,itemId:e,secId:n,times:t,level:i,itemNum:s};fetch("https://goka.top:8080/recLottery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(a=>console.error("Error:",a));}async function tn(n){if(this.checked)this.removeEventListener("change",tn);else return;const e={username:W.userID};try{const i=await(await fetch("https://goka.top:8080/trial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return W.trialTime=parseInt(i.message),console.warn(W.trialTime),Fe(!0),i}catch(t){return console.error("Error:",t),[]}}async function An(){const n={tianGuo:!1,username:W.userID,officerLv:W.curOfficerLv,getData:!0};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);}).catch(e=>console.error("Error:",e));}async function Ln(n){let e={tianGuo:n,username:W.userID,officerLv:W.curOfficerLv,getData:!1};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+t.PlayerTianGuo+"/"+t.PlayerCount+" = "+(t.PlayerTianGuo/t.PlayerCount).toFixed(2);}).catch(t=>console.error("Error:",t));}async function nn(n=W.nickname){try{const e=await fetch(`https://goka.top:8080/support?username=${n}&userid=${W.userID}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.status===204||e.headers.get("Content-Length")==="0"){console.warn("今日已3助力");return}if(e.ok){const t=await e.json();for(let i of t){let s=0;for(;;){console.warn(i);let r=rn(i);if(await ge(5e3),r)s++;else break;if(s>2)break}}}}catch(e){console.error("Error:",e);}}async function Bn(n){try{await fetch("https://goka.top:8080/setting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});}catch(e){console.error("Error:",e);}}async function Rn(n){try{const e={};n==null||n.forEach(t=>{e[t.settingKey]=t.value;}),ft.forEach(([t,i,s])=>{const r=document.getElementById(t);r&&(r.checked=Be(i)??(e==null?void 0:e[t])==="true"??s,r.dispatchEvent(new Event("change")));});}catch(e){return console.error("Error fetching settings:",e),{}}}async function Gn(n,e){let t=we[n];t||(we[n]=t={});let i=!1;if(e.forEach(({figure:s,game_result:r,game_time:a,game_over_time:o,used_general:c,label_mode:d})=>{r!=255&&!t[o]&&(t[o]={shenfen:s,result:r||0,duration:a,general:c==null?void 0:c.map(m=>G.generalDict[m]||m)},i=!0);}),i){ze("gameRecord",$e);try{W.v&&await fetch("https://goka.top:8080/gameRecords/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({[W.userID]:we})}).then(s=>s.json()).then(s=>{!s&&setTimeout(()=>Laya.Browser.window.SendLogout(),Math.floor(Math.random()*(3e5-1e4+1))+1e4);});}catch(s){console.error("Error:",s);}}}async function On(n=W.userID){const e=`https://goka.top:8080/gameRecords/get?username=${n}`;return fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>(ln(t),t)).catch(t=>(console.error("Error:",t),[]))}const st=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function Me(n,e=20,t=500,i=()=>{}){const s=await Promise.resolve(n());s?i(s):e>0?setTimeout(()=>Me(n,e-1,t,i),t):i(null);}function ye(n,e=20,t=500){return new Promise(i=>{Me(n,e,t,i);})}function ge(n,e){return new Promise((t,i)=>{setTimeout(()=>t(e),n);})}const O={instance:{},scene:"",gamescene:null,flag:null,limit:300,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,chat:()=>null,get(n,e,t){var i,s,r,a,o,c,d,m,l,u,x;if(e||!this.instance[n])if(n=="GameEventDispatcher")this.instance[n]=(i=this.find("SceneLayer"))==null?void 0:i.ged;else if(n=="SgsSpriteFilterBtn")this.instance[n]=(s=O.find("SceneLayer","","topMenu","backBtn"))==null?void 0:s.constructor;else if(n=="ServerProxy")this.instance[n]=(r=this.get(this.instance[TaskManager]?"TaskManager":"ActivityManager"))==null?void 0:r.proxy;else if(n=="ActivityManager"){let b=!this.instance.TaskDailyView;this.instance[n]=(a=this.get("TaskDailyView"))==null?void 0:a.manager,b&&this.del("TaskDailyView");}else if(n=="TaskManager"){let b=!this.instance.MentorSelfTaskView;const v=this.get("MentorSelfTaskView");v==null||v.tabCliCked(1);const L=(o=this.find(v,"MentorSelfLiCheng","MentorLiChengUI"))==null?void 0:o[0];if(!L)return null;L.isSelf=!0,(c=L.taskData)==null||c.splice(0,1/0,{HasAward:!0,baseVo:{name:"",MentorReward:{ApprenticeItemsList:[]}},TaskConditions:[]}),L.updateContent(),this.instance[n]=(u=(l=(m=(d=L==null?void 0:L.panel)==null?void 0:d.content)==null?void 0:m._children)==null?void 0:l[0])==null?void 0:u.manager,b&&this.del("MentorSelfTaskView");}else {this.del(n),this.instance[n]=Laya.ClassUtils.getInstance(n);try{this.instance[n].Init();}catch{console.error("Laya class "+n+" Init() error!");return}}return (x=this.instance[n])!=null&&x.timeoutID&&clearTimeout(this.instance[n].timeoutID),t&&t(this.instance[n]),this.instance[n]},del:(()=>{function n(e){this.instance[e]&&(e.endsWith("Window")?this.instance[e].Close():this.instance[e].destroy(),delete this.instance[e].timeoutID,delete this.instance[e]);}return function(e,t=0){this.instance[e]&&(this.instance[e].timeoutID&&(clearTimeout(this.instance[e].timeoutID),delete this.instance[e].timeoutID),t?this.instance[e].timeoutID=setTimeout(()=>{n.call(this,e);},t):n.call(this,e));}})(),find:(()=>{const n=i=>Array.isArray(i)&&i.length==1?i[0]:i,e=i=>Object.prototype.toString.call(i)==="[object Object]";function t(i,s){var r;if(s in i)return i[s];{let a=s?(r=i==null?void 0:i._children)==null?void 0:r.filter(o=>{var c;return o.name==s||((c=o.constructor)==null?void 0:c.name)==s}):i==null?void 0:i._children;return a!=null&&a.length?n(a):[]}}return function(...i){let s=e(i[0])?i.shift():Laya.stage,r=i.reduce((a,o)=>a instanceof Object?Array.isArray(a)?a.length?Array.isArray(o)?n(a.flatMap(c=>o.flatMap(d=>t(c,d)))):n(a.flatMap(c=>t(c,o))):[]:e(a)?Array.isArray(o)?n(o.flatMap(c=>t(a,c))):n(t(a,o)):[]:[],s);return (r==null?void 0:r.length)==0?null:r}})(),clickBuilder(n,e,t,i=r=>r,s=(r,a)=>(r.onClick(),a)){if(!n)return null;function r(a,o=!0){return a?o&&!a[e]?!1:s(a,o):null}return function(...a){let o=typeof a[0]=="boolean"?a.shift():null;if(a.length==0)a=t||Object.keys(n);else {let c=n.map(i);a.every(d=>c.includes(d))&&(a=a.map(d=>c.indexOf(d)));}if(typeof o=="boolean")return a.map(c=>r(n[c],o));for(let c of a){let d=n[c];if(d!=null&&d[e])return r(d)}return null}},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.chat=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var i,s,r,a;if((r=(s=(i=this.gamescene)==null?void 0:i.seatContainer)==null?void 0:s.seatUIs)!=null&&r.length)return !0;let n=this.find("SceneLayer",st);if(!n)return !1;let e=(a=n.seatContainer)==null?void 0:a.seatUIs,t=n.chatViewUI;if(!(e!=null&&e.length)||!t)return !1;if(this.gamescene=n,W.v&&Mn(),M.fromUI(),typeof this.gamescene.manager.UpdateSeatFixedViewID=="function"&&!this.gamescene.manager.UpdateSeatFixedViewID.toString().includes("room.fromUI")){const o=this.gamescene.manager.UpdateSeatFixedViewID;Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){o.apply(this,arguments),le.delay("seats",M.fromUI.bind(M),500);}});}return this.chat=(o,c=!1)=>{var d;return t!=null&&t.chatInput?(t.chatInput.text=o,c&&((d=t.sendBtn)==null||d.onClick()),!0):null},this.limit=290,ye(()=>M.firstID!==void 0,300).then(()=>this.auto(W.autoBotSwitch)),!0},wugu:(()=>{let n=null;return function(e=1e3){return new Promise(t=>{le.loop("wugu",()=>{var r,a;let i=this.find("WindowLayer","WuGuFengDengWindow");if(!i){le.clear("wugu"),t(n),n=null;return}let s=(r=i.showCardUIs)==null?void 0:r.find(o=>o.maskAlpha==0);s&&((a=i.OnSelectNormalCardUi)==null||a.call(i,s),n=s.Card.cardId);},e);})}})(),yanJiao(n,e=1){var s;const t=this.find("WindowLayer","YanJiaoWindow");if(!t)return;if(((s=t.seat)==null?void 0:s.index)!=M.mySeats[0])return !1;if(e%2!=0){let r=t.cardQueues.flatMap(a=>a);t.cardQueues[0].splice(0,1/0,...r),t.cardQueues[1].splice(0,1/0),t.cardQueues[2].splice(0,1/0),t.layoutCardUIs();return}let i=t.cardQueues.flatMap(r=>r).reduce((r,a)=>(r[a.Card.CardNumber].push(a),r),Array.from({length:14},()=>[]));t.cardQueues[0].splice(0,1/0,...n[2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),t.cardQueues[1].splice(0,1/0,...n[e/2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),t.cardQueues[2].splice(0,1/0,...n[1-e/2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),t.layoutCardUIs();},async newRoom(){var s,r,a,o,c,d;const n=this.find("SceneLayer","HallScene","roomListView");if(![74,84].includes(n==null?void 0:n.modeId))return oe("请进入身份演武房间列表后再开启挂机！"),!1;n.sendCreateTable();const e=await ye(()=>this.find("WindowLayer","CreateTableWindow"));if(!e)return null;(s=e.showMoreHandler)==null||s.call(e),(a=(r=e.modeBox)==null?void 0:r._labels)!=null&&a.length&&(e.modeBox.selectedIndex=e.modeBox._labels.length-1),e.timeBox&&(e.timeBox.selectedIndex=1),e.banItemBox&&(e.banItemBox.selected=!0),e.passwordInput&&(e.passwordInput.text="GuDuZun"),await ge(1e3),(o=e.sureHandler)==null||o.call(e);const t=await ye(()=>this.find("SceneLayer","TableScene"));if(!((d=(c=t==null?void 0:t.seatListView)==null?void 0:c.seatList)!=null&&d.length))return null;let i=t.seatListView.seatList.filter(m=>!m.WaitInfo).slice(-1)[0];return t.seatListView.showBtns(i),t.seatListView.sitHandler(),!0},async readyStart(n){var i,s,r,a,o,c,d,m,l,u,x,b,v,L,E,V;const e=await ye(()=>this.find("SceneLayer","TableScene"),n);let t=(s=(i=e==null?void 0:e.seatListView)==null?void 0:i.seatList)==null?void 0:s.length;if(!t||!(e!=null&&e.startUI))return null;if(await ge(2e3),(a=(r=e.dianjiangView)==null?void 0:r.onOpenDJClick)==null||a.call(r),!((c=(o=e.startUI)==null?void 0:o.startBtn)!=null&&c.visible))return (m=(d=e.startUI)==null?void 0:d.readyBtn)!=null&&m.visible&&((u=(l=e.startUI).readyHandler)==null||u.call(l)),!0;if(W.autoBotSwitch===!0)for(let X of e.seatListView.seatList.filter(w=>!w.WaitInfo&&w.seatId>=t/2))e.seatListView.showBtns(X),e.seatListView.addAiMHandler(X),await ge(200);if((x=e.confirmNormalAi)==null||x.call(e),await ge(1e3),W.autoBotSwitch===!0&&((L=(v=(b=e.banGeneralBtn)==null?void 0:b.skins)==null?void 0:v[0])!=null&&L.startsWith("open"))){e.banGeneralHandler();const X=await ye(()=>this.find("WindowLayer","BanGeneralWindow"));if(!((E=X==null?void 0:X.showItemui)!=null&&E.length))(V=X==null?void 0:X.Close)==null||V.call(X);else {for(let w of X.showItemui.slice(0,7))w.onClick(),await ge(200);X.onSureBtnClick();}}return await ge(5e3),Me(()=>{let X=this.find("SceneLayer","TableScene","startUI");if(!(X!=null&&X.startBtn)||!(X!=null&&X.confirmStart))return "Cancel";if(X.startBtn.enabled)X.confirmStart();else return !1;return !0},60,2e3),!0},auto(n){var e,t,i,s,r,a,o,c,d,m,l,u,x,b;if(n!=this.flag&&(this.flag=n,le.clear("auto"),n!==null))if((i=(t=(e=this.gamescene)==null?void 0:e.seatContainer)==null?void 0:t.seatUIs)!=null&&i.length){if(this.deal.toString().endsWith("null")){let v=(s=this.gamescene.seatContainer)==null?void 0:s.seatUIs,L=(a=(r=this.gamescene.seatContainer)==null?void 0:r.selfSeatUi)==null?void 0:a.skillItems,E=(d=(c=(o=this.gamescene.seatContainer)==null?void 0:o.selfSeatUi)==null?void 0:c.cardContainer)==null?void 0:d.activatedCardtems,V=(u=(l=(m=this.gamescene.seatContainer)==null?void 0:m.selfSeatUi)==null?void 0:l.buttonBar)==null?void 0:u.btns;if(!v||!E||!V)return !1;let X=v.map(A=>A.seat.index),w=v.map((A,z)=>({i:z,id:A.seat.fixedViewId+(A.seat.isHide?8:0)})).sort((A,z)=>A.id-z.id).map(A=>A.i),T=v.map((A,z)=>A.seat.figure||(z?0:-1)),N=v.map(A=>A.seat.playerInfo.clientId<4e9?0:A.seat.playerInfo.showName.includes("金")?2:1);N.some(Boolean)&&oe("对战AI小杀！"),w=w.filter(A=>N[A]==1&&T[A]!=T[0]).concat(w.filter(A=>N[A]==2&&T[A]!=T[0])).concat(w.filter(A=>N[A]!=0&&T[A]==T[0])).concat(w.filter(A=>N[A]==0)),console.warn("优先级",w.map(A=>["玩家-","小杀-","玫瑰金-"][N[A]]+(M.name(X[A])||A)+"-身份"+T[A])),this.skill=this.clickBuilder(L,"activated",null,A=>{var z;return (z=A.skill)==null?void 0:z.SkillId},(A,z)=>{var ae;return A.SetSelected(z),(ae=A.skill)==null?void 0:ae.SkillId}),this.card=this.clickBuilder(E,"activated",null,A=>{var z;return (z=A.Card)==null?void 0:z.cardId},(A,z)=>{var ae;return A.setSelected(z),(ae=A.Card)==null?void 0:ae.cardId}),this.seat=this.clickBuilder(v,"activated",w,A=>{var z;return (z=A.seat)==null?void 0:z.index},(A,z)=>{var ae;return A.seat.SetSelected(z),(ae=A.seat)==null?void 0:ae.index}),this.btn=this.clickBuilder(V,"_enabled",null,A=>A.name,(A,z)=>(A.onClick(),A.name));let Q=A=>Array.isArray(A)?A[0]:A;this.deal=(A=[],z=[],ae=[])=>{var me,S,C,D;let de=Q(this.card(...A));(me=ce.name.闪电)!=null&&me.has(de)?de=Q(this.card(!0)):(S=ce.name.铁索)!=null&&S.has(de)?z=[!1]:(C=ce.name.无懈)!=null&&C.has(de)?ae=[3,1,0,2]:(D=ce.name.桃)!=null&&D.has(de)&&v.some((P,f)=>{var h,p;return N[f]==1&&T[f]!=T[0]&&!((h=P==null?void 0:P.seat)!=null&&h.isDead)&&((p=P==null?void 0:P.seat)==null?void 0:p.currentHp)<=0})&&(ae=[1,2,3,0]),Q(this.seat(...z)),this.flag==9&&(ae=[3,1,0,2]),this.btn(...ae);};}if(n==9){const v=()=>{var L;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,((L=this.gamescene.Manager)==null?void 0:L.GamePassedTime)>60&&le.loop("auto",v,500);};le.loop("auto",v,3500),oe("启动黄盖主公自动苦肉模式");}else if(n==3){let v=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,v,v.stageMoveHandler),le.loop("auto",()=>{v.seat.OnlineState!=3&&v.onTrusteeshipClick(),this.limit--<=0&&this.auto(W.autoBotSwitch);},1e3),oe("切换到AI托管挂机...");}else if(n){let v=(b=(x=this.gamescene)==null?void 0:x.seatContainer)==null?void 0:b.selfSeatUi;le.loop("auto",()=>{var L;((L=v==null?void 0:v.seat)==null?void 0:L.OnlineState)>=3&&(v==null||v.stageMoveHandler()),this.deal();},1e3),oe("切换到脚本接管挂机...");}else console.warn("酒馆挂机已关闭！");}else this.flag=null;}},Lt=(()=>{const n=t=>Array.isArray(t)?t:[t];function e(t=!0,i,s,r){var c,d,m,l,u,x;const a=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="SelectCardWindow"?this:O.find("WindowLayer","SelectCardWindow");if(!a)return null;if(((d=a.seat)==null?void 0:d.index)!=(s>=0?s:M.mySeats[0])||i>0&&((m=a.Skill)==null?void 0:m.SkillId)!=i)return !1;r=(r>0?r:((l=a.Skill)==null?void 0:l.SelectCardCountWhenResponse)||1)-(((u=a.selectCardUis)==null?void 0:u.length)||0);let o=n(O.find(a,"SkillSelectCardUi")).filter(b=>{var v;return (b==null?void 0:b.activated)&&!((v=a.selectCardUis)!=null&&v.includes(b))}).slice(0,r).map(b=>{var v;return a.onTouchCard({target:b}),(v=b.Card)==null?void 0:v.CardId});return t===!0&&((x=a.confirmClick)==null||x.call(a)),o}return async function(t,...i){var V,X;const s=await ye(()=>O.find("WindowLayer","SelectCardWindow"),50,100);if(t)return e.apply(s,i);const r=s==null?void 0:s.confirm_btn,a=((V=s.Skill)==null?void 0:V.SelectCardCountWhenResponse)||1;if(!(r!=null&&r.textField)||!(a>1)||((X=s.seat)==null?void 0:X.index)!=M.mySeats[0])return !1;let{x:o,y:c,width:d,height:m,_labelColors:l,_labelPadding:u,textField:{fontSize:x,font:b,bold:v},constructor:L}=r,E=s.myFuncBtn||new L;return Object.assign(E,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:d,height:m,labelSize:x,labelFont:b,labelBold:v,_labelColors:l,_labelPadding:u}),E.pos(o-1.2*d,c),s.myFuncBtn||(E.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),s.addChild(s.myFuncBtn=E),s.myFuncBtn.on(Laya.Event.CLICK,s,e)),!0}})(),Mn=(()=>{function n(t){var r,a;const i=((r=this==null?void 0:this.constructor)==null?void 0:r.name)=="CardUIContainer"?this:O.find("SceneLayer",st,"SelfSeatUi","cardContainer");if(!((a=i==null?void 0:i.cardUis)!=null&&a.length))return null;let s=i.cardUis.filter(o=>o==null?void 0:o.activated).reduce((o,c)=>(o[c.selected?1:0].push(c),o),[[],[]]);t!==!0&&s[1].forEach(o=>o.CardUI_Click()),t!==!1&&s[0].forEach(o=>o.CardUI_Click());}const e=[function(){n.call(this,!0);},function(){n.call(this,void 0);},function(){n.call(this,!1);}];return async function(){var i;const t=await ye(()=>{var s;return ((s=O.gamescene)==null?void 0:s.SelfSeatUi)||O.find("SceneLayer",st,"SelfSeatUi")});if(!((i=t==null?void 0:t.cardContainer)!=null&&i.cardUis))return !1;if(e.forEach((s,r)=>{let a=t["myFuncBtn"+r]||new(O.get("SgsSpriteFilterBtn"));Object.assign(a,{label:["全选","反选","取消"][r],width:40,height:29,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),t["myFuncBtn"+r]||(a.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),t.addChild(t["myFuncBtn"+r]=a),t["myFuncBtn"+r].on(Laya.Event.CLICK,t.cardContainer,s));}),!t.OnStageResize.toString().includes("myFuncBtn")){const s=t.OnStageResize;Object.defineProperty(t,"OnStageResize",{value:function(){s.apply(this,arguments);let r=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},(a,o)=>{var c;return (c=this["myFuncBtn"+o])==null?void 0:c.pos(r,33+27*o)});}}),t.OnStageResize();}return !0}})();function _n(n){$e[n]?ln($e[n]):$e[n]=we,St(n);}async function St(n,e=[26,35,44,5,7]){const t=O.get("SevenDayResultWindow");t.uuid=n,we.req=new Set(e),setTimeout(()=>{Array.from(we.req,i=>t.sendReq(i)),O.del("SevenDayResultWindow",1e3);},0);}async function Bt(){setTimeout(async()=>{var e,t;await ge(1e3);const n=O.get("KanShuWindow",!0);((e=n.jbpUserData)==null?void 0:e.Status)==0&&(n.onKanShuClick(),await ge(2e3),n.onUpdateAwardStatus(),await ge(1e3)),((t=n.jbpUserData)==null?void 0:t.Status)==1&&(n.autoClickAllPeach(),await ge(1e3),n.onShowEvent(),await ge(500),n.onShowEvent(),O.del("KanShuWindow",3e3));},0);}async function Rt(){var t;const n=O.get("ZhiGouMonthCardView");if(n.updateAllInfo(),(t=n.cardData)!=null&&t.bActive){n.getBtnClick();for(let i=0;i<4;i++)n.addItemClick(i);}O.del("ZhiGouMonthCardView",1e3);const e=O.get("NewWeekCardView");e.updateAllInfo(),e.getBtn._text=="领取"&&e.getBtnClick(),O.del("NewWeekCardView",1e3);}async function sn(){var t,i,s,r,a;const n=O.get("GeneralOpenWindow");let e=(([o,c,d])=>((o*60+c)*60+d)*1e3)((a=(r=(s=(i=(t=n.newView)==null?void 0:t.freeTimeTxt)==null?void 0:i._text)==null?void 0:s.split)==null?void 0:r.call(s,":"))==null?void 0:a.map(Number));e?setTimeout(sn,e):n.onNewOpenBag(8100101,3),O.del("GeneralOpenWindow",5e3),ye(()=>O.find("WindowLayer","GeneralOpenResultWindow")).then(o=>o==null?void 0:o.Close());}async function Nn(){var t;const n=O.get("GuildDrumWindow",!1,i=>i==null?void 0:i.initDrums());n.updateItems(),await ge(1e3);let e=(t=n==null?void 0:n.itemList)==null?void 0:t.find(i=>i.leftTime);le.loop("drum",()=>e==null?void 0:e.btnClick(),300,(e==null?void 0:e.leftTime)||0,()=>O.del("GuildDrumWindow",500));}async function Pn(n=!1){try{await ge(1e4);const e=O.get("DailySignNewView",!1);if((e==null?void 0:e.signState)==2)for(let t=0;t<e.itemList.length;t++){let i=e.itemList[t].baseData.ID;i!=9020101&&i.toString().startsWith("90")&&n||e.itemList[t].type==1&&(e.itemList[t].OnSignClick(),oe("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await ge(500));}for(let t=0;t<(e==null?void 0:e.totalItemList.length);t++)e.totalItemList[t].type==3&&(e.totalItemList[t].OnSignClick(),await ge(500));O.del("DailySignNewView",1e4);}catch(e){console.error(e);}}async function Gt(){setTimeout(()=>{var i;const n=O.get("TaskDailyView");n.taskPanel.contentSp.drawContaniers.filter(s=>{var r;return (r=s==null?void 0:s.taskvo)==null?void 0:r.CanAward}).forEach(s=>s.onOpClick()),setTimeout(()=>{Array.from({length:3},(s,r)=>{var a;return (a=n.topDayTask)==null?void 0:a.onClickItem(r)}),n.manager.HasJDRewardRed&&n.onceRewardClick(),O.del("TaskDailyView",3e3);},3e3);const e=O.get("ActivityWindow");e.enterFunc(),t(e).flatMap(s=>{try{return t(s)}catch{return []}}).flatMap(s=>{try{return s.itemArr.map(r=>r.getAwardBtn)}catch{return []}}).filter(s=>s.visible).forEach(s=>s.onClick()),(i=O.find("WindowLayer","TaskReqRewardWindow"))==null||i.Close(),O.del("ActivityWindow",3e3);function t(s){return s.tabGroup.btnList.filter(r=>r.redPointIsShow).map(r=>{let a=s.viewStack.childInitDataList.findIndex(o=>o==r.value);return a<1&&(a=r.value),s.viewStack.selectedIndex=a,s.viewStack._childUIList[a]})}},0);}const Un=(()=>{async function n(){var t;const e=((t=this==null?void 0:this.constructor)==null?void 0:t.name)=="TreasureView"?this:O.find("WindowLayer","ActivityWindow","contentSprite","TreasureView")||O.get("TreasureView");le.loop("duobao",()=>e==null?void 0:e.onSigleClick(),100,10,()=>O.del("TreasureView",1e4));}return async function(){const e=await ye(()=>O.find("WindowLayer","ActivityWindow","contentSprite","TreasureView")),t=e==null?void 0:e.tenBtn;if(!(t!=null&&t.textField))return !1;let{x:i,y:s,width:r,height:a,_labelColors:o,_labelPadding:c,textField:{fontSize:d,font:m,bold:l},constructor:u}=t,x=e.myFuncBtn||new u;return Object.assign(x,{label:"单抽十次",width:r*.65,height:a,labelSize:d,labelFont:m,labelBold:l,_labelColors:o,_labelPadding:c}),x.pos(i+1.11*r,s),e.myFuncBtn||(x.InitSkin("red_small_btn_normal","red_small_btn_over","red_small_btn_down","red_small_btn_disable"),e.addDrawChild(e.myFuncBtn=x),e.myFuncBtn.on(Laya.Event.CLICK,e,n)),!0}})();function Ot(n=""){const e=O.get("GiftExchangeWindow");e.giftInput.text=n,e.getClicked(),O.del("GiftExchangeWindow",1e4);}const an=(()=>{async function n(){var i,s,r,a,o,c,d,m,l,u;const e=((i=this==null?void 0:this.constructor)==null?void 0:i.name)=="MailWindow"?this:O.find("WindowLayer","MailWindow")||O.get("MailWindow"),t=e==null?void 0:e.mailContentWindow;if(Array.isArray(t==null?void 0:t.winArr)){(r=(s=O.get("ActivityManager"))==null?void 0:s.AskRechargeInfoAgain)==null||r.call(s),await ge(1e3);for(const x of (((a=e.manager)==null?void 0:a.systemMailList)||[]).filter(({mid:b})=>b)){let b=x.mid;if(x.title=="道具过期提醒")(o=e.manager)==null||o.DeleteMail(b);else if(x.hasAttachMent){x.read||(c=e.manager)==null||c.ReadMail(b);let v=x.AttachmentType,L=((d=x.attachment.getStringKey("key"))==null?void 0:d[0])??"",E=x.fromUserName&&x.fromUserName!="系统未知好友"?x.fromUserName:"";if(v==1){let V=E?2:0;t.ChangeWindow(V,x),(m=t.winArr[V])==null||m.getBtnClick(),(l=t.winArr[V])==null||l.Close(),t.close();}else v==2&&((u=e.manager)==null||u.SendClientDbsGetgmawardReq(L,b,E));await ge(500),setTimeout(()=>{var V;x.read&&x.Geted&&((V=e.manager)==null||V.DeleteMail(b));},1e3);}}O.del("MailWindow",1e4);}}return async function(e){if(e)return n();const t=await ye(()=>O.find("WindowLayer","MailWindow")),i=t==null?void 0:t.feedbackBtn;if(!(i!=null&&i.textField))return !1;let{x:s,y:r,width:a,height:o,_labelColors:c,_labelPadding:d,textField:{fontSize:m,font:l,bold:u},constructor:x}=i,b=t.myFuncBtn||new x;return Object.assign(b,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:a,height:o,labelSize:m,labelFont:l,labelBold:u,_labelColors:c,_labelPadding:d}),b.pos(s-1.05*a,r),t.myFuncBtn||(b.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),t.addChild(t.myFuncBtn=b),t.myFuncBtn.on(Laya.Event.CLICK,t,n)),!0}})(),Mt=(()=>{let n=null,e=0,t="",i,s;const r=d=>{var m,l,u,x;return ((m=d==null?void 0:d.selloutTex)==null?void 0:m.visible)==!1&&((x=(u=(l=d==null?void 0:d.limitCount)==null?void 0:l._innerHTML)==null?void 0:u.includes)==null?void 0:x.call(u,"0/"))};function a(){n=null,document.querySelectorAll('.left input[type="checkbox"]').forEach(d=>{d.checked=!1;});}function o(d=900,m=50){le.loop("seckill",()=>{var l;if(i=O.find("WindowLayer","ActivityWindow","","WelfareSeckillView")||O.get("WelfareSeckillView"),!((l=i==null?void 0:i.itemList)!=null&&l.length))return null;if(s=i.itemList.find((u,x)=>{var b;return x==n||((b=u.data)==null?void 0:b.goods_id)==n}),typeof(s==null?void 0:s.buyHpItemHandler)!="function")return !1;le.set("seckill",c,e+50),oe(`秒杀连点器启动！
${t}`);},m,d/m>>0,()=>oe(`未找到秒杀面板！
连点器秒杀失败！`));}function c(d=300){s==null||s.buyHpItemHandler(),le.loop("seckill",()=>{s==null||s.buyHpItemHandler(),r(s)||(a(),le.clear("seckill"));},d);}return (d,m,l="",u=1e3)=>{var x;if(d===!1)a(),le.clear("seckill"),oe("秒杀连点器已取消！");else if(d!==void 0&&d!==n){e=m||Date.now();let b=e-u,v=b-Date.now();n=d,t=l||((x=G.goodsID(d))==null?void 0:x.name)||"",v>1?(oe(`${(v/6e4).toFixed(1)}分钟后启动秒杀连点器！
${t}`),le.set("seckill",o,b)):o();}return n}})();function rn(n="浩铭er",e=!1){var i;const t=O.get("SzxyHelpWin");return t.enterWindow(n),(i=t==null?void 0:t.btnHelp)!=null&&i.enabled?(t.onClickHelp(),O.del("SzxyHelpWin"),!0):(e&&oe("助力已完成，非常感谢！"),O.del("SzxyHelpWin"),!1)}var on="jsjiami.com.v7";function Le(n,e){const t=Je();return Le=function(i,s){i=i-374;let r=t[i];if(Le.oMRWOl===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let x="",b="";for(let v=0,L,E,V=0;E=l.charAt(V++);~E&&(L=v%4?L*64+E:E,v++%4)?x+=String.fromCharCode(255&L>>(-2*v&6)):0)E=u.indexOf(E);for(let v=0,L=x.length;v<L;v++)b+="%"+("00"+x.charCodeAt(v).toString(16)).slice(-2);return decodeURIComponent(b)};const m=function(l,u){let x=[],b=0,v,L="";l=a(l);let E;for(E=0;E<256;E++)x[E]=E;for(E=0;E<256;E++)b=(b+x[E]+u.charCodeAt(E%u.length))%256,v=x[E],x[E]=x[b],x[b]=v;E=0,b=0;for(let V=0;V<l.length;V++)E=(E+1)%256,b=(b+x[E])%256,v=x[E],x[E]=x[b],x[b]=v,L+=String.fromCharCode(l.charCodeAt(V)^x[(x[E]+x[b])%256]);return L};Le.IMZsCA=m,n=arguments,Le.oMRWOl=!![];}const o=t[0],c=i+o,d=n[c];return d?r=d:(Le.TGhtNj===void 0&&(Le.TGhtNj=!![]),r=Le.IMZsCA(r,s),n[c]=r),r},Le(n,e)}((function(n,e,t,i,s,r,a){return n=n>>6,r="hs",a="hs",function(o,c,d,m,l){const u=Le;m="tfi",r=m+r,l="up",a+=l,r=d(r),a=d(a),d=0;const x=o();for(;[]&&--i+c;)try{m=parseInt(u(383,"Eb14"))/1*(-parseInt(u(384,"QmHG"))/2)+parseInt(u(381,"DU20"))/3+-parseInt(u(385,"[^KU"))/4+parseInt(u(375,"8p@k"))/5+-parseInt(u(376,"Eb14"))/6+-parseInt(u(386,"U]zj"))/7+parseInt(u(382,"QmHG"))/8*(parseInt(u(374,"R#ZJ"))/9);}catch{m=d;}finally{if(l=x[r](),n<=i)d?s?m=l:s=l:d=l;else if(d==s.replace(/[yAEPVbeIURBCDxWntYXMdrS=]/g,"")){if(m===c){x["un"+r](l);break}x[a](l);}}}(t,e,function(o,c,d,m,l,u,x){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),m="join",o[m]("")})}))(12160,360662,Je,192),Je&&(on=3060);function Je(){const n=function(){return [on,"tVjxUsAeYjyISiEadrxmPMiW.CncBXoXyDmbR.v7==","WRlcJCkNa8oPW5/cRmkzWRtcVCksW5VcLa","WPaSlLldPHfNWOvE","W4xcPCoDkSkskK7dOHG","W7nVkCkVW6vwdSo8WRmIWRHIW58"].concat(function(){return ["WPeGltpcU3r8WPr9uHdcVq","h13cJ0pdTXDey1tdQSkzxW","afVcSLOic2pcHW9OWRVdU3e","WRldJZ1zWR3cL8oBowFcJ8ktqa","W5FdVHBcHv7dGCoO","WPxdImo5ASouF2dcH0ZcG3JdPG"].concat(function(){return ["W4GWWOldUhhdMmoEimoqWPvasG","WPCGlJ/cVxLXWQXUAZ7cLq","W45kW6hcOddcVmo0","F8kZW47cO8kkCCk9kComaZtcKCog"]}())}())}();return Je=function(){return n},Je()}const W={userID:0,account:"",nickname:"",inviteName:"",curOfficerLv:1,v:![],UsedGeneralSkinID:{UsedGeneralSkinID:{}},isFrameAdd:![],goods:[],lotteries:[],closeIframe:![],trialTime:0,autoBotStatus:30,autoBotInfinite:![],guildVIP:{}};let ft=[["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["padding","PADDING",0],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0]];const pe=new Proxy(Object.fromEntries(ft.map(([n,e,t])=>[n,Be(e,t)])),{set:function(n,e,t){let i=Object.fromEntries(ft)[e]??e;ze(i,t);let s={};return s.username=W.userID,s.settingKey=e,s.value=t,hn(Bn(s),300),n[e]=t,e=="padding"&&(window.padding=t),!0}}),H={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]},G={},we={};function ln(n){Object.assign(we,n);}const $e=Be("gameRecord",{}),Qe={},le={tasks:{},shift:0,overdue:!0,async now(){if(!this.overdue)return Date.now()+this.shift;this.overdue=!1,this.delay("timer",()=>{this.overdue=!0;},18e5);const n=["https://worldtimeapi.org/api/timezone/Etc/UTC","https://timeapi.io/api/Time/current/zone?timeZone=UTC"];for(const e of n)try{const t=await fetch(e);if(!t.ok){console.error(`Error fetching time from ${e}: ${t.statusText}`);continue}const i=await t.json();let s;return i.utc_datetime?s=new Date(i.utc_datetime).getTime():i.dateTime&&(s=new Date(i.dateTime).getTime()),this.shift=s-Date.now(),s}catch(t){console.error(`Error fetching time from ${e}:`,t);continue}return oe("使用当前电脑时间"),Date.now()+this.shift},loop(n,e,t,i=1/0,s){return this.clear(n),this.tasks[n]=setInterval(()=>{e(),--i<=0&&(this.clear(n),typeof s=="function"&&s());},t),this.tasks[n]},delay(n,e,t){return this.clear(n),this.tasks[n]=setTimeout(()=>{this.clear(n),e();},t),this.tasks[n]},set(n,e,t=this.now(),i=18e5){(async function s(){this.clear(n);const r=await this.now(),a=t-r;a>1?this.tasks[n]=setTimeout(s.bind(this),a<i?a:i):e();}).call(this);},clear(n){Array.isArray(n)||(n=[n]),n.filter(e=>this.tasks[e]).map(e=>(clearTimeout(this.tasks[e]),clearInterval(this.tasks[e]),this.tasks[e]=void 0,e));}},U=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce((n,e,t)=>(n[e]=n[t]=[],n),{}),end(n){(this.isGameStart&&!this.isPassed||n===!1)&&(this.isGameStart=!1,this.isPassed=!0,H.seatUIs=[],H.friendGeneral=0,kt(null),St(W.userID),O.reset(),document.querySelectorAll(".mizhu").forEach(e=>e.style.display="none"),console.warn("游戏已结束！")),n&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},M.reset(),console.warn("游戏已重置！游戏即将开始！"),Me(()=>O.init()));},ready(n){this.end(!0),M.cardList=n;let e=G.cardIDsOrder.filter(i=>n.includes(i)),t=e.concat(n.filter(i=>!e.includes(i))).filter(Boolean);ce.init(t),$.init(t,"2-255"),M.isGuoZhan=n.includes(1150),M.isDouDiZhu=n.includes(13005),M.isShanHeTu=n.includes(20100),gi(),console.warn("牌堆初始化完成");},start(){this.isGameStart||!M.size||(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+M.seatIDs+"] > "+M.mySeats),ui(),fi(M.size),$.draw());},enter(n,e,t){var i,s,r,a,o,c,d,m,l,u,x;if(n>0)this.turn=n,this.round=0,this.clear("turn"),n==1&&(this.clear("game"),this.start());else {e==0?(this.currentID=t,this.round++,this.phase=0,[7011,3090,2143,3271].forEach(L=>delete this.spellSpace[L]),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",this.clear("round"),W.autoBotSwitch===!0&&O.limit>0&&((a=(r=(s=(i=O.gamescene)==null?void 0:i.topMenu)==null?void 0:s.areaServerLabel)==null?void 0:r.text)!=null&&a.includes("身份"))&&(this.currentID==((u=(l=(m=(d=(c=(o=O.gamescene)==null?void 0:o.seatContainer)==null?void 0:c.seatUIs)==null?void 0:d.filter(L=>L.seat.currentHp>0))==null?void 0:m.map(L=>L.seat.index))==null?void 0:l.slice(-1))==null?void 0:u[0])?O.auto(3):this.currentID!=M.mySeats[0]&&O.auto(!0))):this.phase++,this.clear("phase");let b=document.getElementById("phrase"),v=parseInt((x=b.innerText.match(/\(([0-9])\)$/))==null?void 0:x[1]);this.phase==v?b.innerText=b.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][e]}($4)`):b.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][e]} (${this.phase})`;}},clear(n,e,t){let i=this.domContainer[n];for(let s=i.length-1;s>=0;s--)t===void 0&&e!==i[s].SpellID&&i[s].count--,(!(i[s].count>0)||e===i[s].SpellID&&t===i[s].SeatID)&&(i[s].element.remove(),i.splice(s,1));}},{ownKeys(n){return Reflect.ownKeys(n.spellSpace)},getOwnPropertyDescriptor(n,e){return Object.getOwnPropertyDescriptor(n.spellSpace,e)},deleteProperty(n,e){return Reflect.deleteProperty(n.spellSpace,e)},get(n,e,t){return e in n?n[e]:Reflect.get(n.spellSpace,e,n.spellSpace)},set(n,e,t,i){return e in n?n[e]=t:Reflect.set(n.spellSpace,e,t,n.spellSpace),!0}}),M={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos(n=8){return {0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[n]},dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(n,e)=>{n=parseInt(n),this.orderIDs.includes(n)||(this.firstID===void 0&&(this.firstID=n,console.warn("[PubGsCMoveCard]先手位置:"+n)),this.orderIDs.push(n),e>0&&!this.mySeats.includes(n)&&(this.mySeats.length?this.mySeats.push(n):this.setMyID(n)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(n){var i;if(this.seatUIs.length)return (i=this.seatUIs.find(s=>s.seatID==n))==null?void 0:i.order;let e=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,t=this.seatIDs.indexOf(parseInt(n));if(t!==-1)return (t-e+this.size)%this.size},getIndex(n){if(this.seatUIs.length)return this.seatUIs.findIndex(s=>s.seatID==n);let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,t=this.seatIDs.indexOf(parseInt(n));if(t<0)return;let i=(t-e+this.size)%this.size;return this.seatPos()[i]},getID(n){var s;if(this.seatUIs.length)return (s=this.seatUIs[this.seatPos().indexOf(parseInt(n))])==null?void 0:s.seatID;let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,t=this.seatPos().indexOf(parseInt(n));if(t<0)return;let i=(t+e+this.size)%this.size;return this.seatIDs[i]},sequence(n){let e=this.seatIDs.indexOf(n);return e<0?[]:this.seatIDs.slice(e).concat(this.seatIDs.slice(0,e))},update(n,e=this.orderIDs){if(e=e.slice(),e.length>this.seatIDs.length||e.length==this.seatIDs.length&&n!==!1)this.seatIDs=e,this.size=e.length;else if(n){for(let t=e.length;t<this.size;t++)e.push(((e[t-1]??-1)+1)%this.size);this.seatIDs=e,this.size=e.length;}this.draw();},fromUI(){var e,t,i,s,r,a;let n=(s=(i=(t=(e=O.gamescene)==null?void 0:e.seatContainer)==null?void 0:t.seatUIs)==null?void 0:i.map(o=>o.seat))==null?void 0:s.filter(o=>!o.isHide);(r=n==null?void 0:n.filter(o=>o.fixedViewId))!=null&&r.length&&(this.seatUIs=n.map(({index:o,fixedViewId:c})=>({seatID:o,order:c-1})),this.size=this.seatUIs.length,this.firstID=((a=this.seatUIs.find(o=>o.order==0))==null?void 0:a.seatID)??this.firstID,this.seatIDs=this.seatUIs.map(o=>o.seatID),this.setMyID(this.seatUIs[0].seatID),this.draw());},setMyID(n){if(n!==void 0&&this.mySeats[0]!==n){let e=this.mySeats.indexOf(n);e>-1&&this.mySeats.splice(e,1),this.mySeats.unshift(n);}},setGeneral(n,e,t=0,i=!1){if(!G.generalDict[e])return;this.generals[n]||(this.generals[n]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[n][t]=e;let s=this.getOrder(n),r=document.getElementById(s+1);r&&r.style.setProperty("--No-content",`"${M.name(n)}"`);},find(n,e,t=!1){var i;return Array.isArray(e)||(e=[e]),(i=this.generals[n])==null?void 0:i.find(s=>e.find(r=>{var a;return t?(a=G.skinMap[s])==null?void 0:a.has(r):s==r}))},name(n,e){var s;let t=this.getOrder(n),i=(s=this.generals[n])==null?void 0:s.map(r=>G.generalDict[r]);return (i!=null&&i.some(Boolean)?i.map(r=>r||"暗").join("丨"):"一二三四五六七八"[t]+"号位")+(e?"":"丨"+"一二三四五六七八"[t])},draw(){this.seatIDs.forEach(n=>{let e=this.getOrder(n),t=document.getElementById(e+1);if(!t)return;let i=M.name(n);t.style.setProperty("--No-content",`"${i}"`);}),kt();}},ce=new Proxy({name:{},color:Array.from({length:7},()=>new Set),number:Array.from({length:14},()=>new Set),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(n,e,t,i,s){this.id=n,this.name=e,this.color=t,this.number=i,this.type=s,this.key=-1;}plot(n){let e=this._button;if(!e){if(e=this._button=document.createElement("button"),e.className=this.color<=2?"shoupai R":"shoupai",!this.id)return e;e.id="Qcard"+this.id,e.innerHTML=`<span>${dn(this.color)+De(this.number)}</span><br>${this.name.substring(0,2)}`;}return (this.key!==n||n==1)&&(this.key=n,e.style.backgroundColor=n===0?"":n===1?"cyan":"#23201d",e.title=n===0?"牌堆":n===2?"弃牌堆":ee.findKZ(this.id).zones.map(t=>{let[i,s,r]=t.split("-").map(a=>parseInt(a));return $.name(s,i,null,r,r)}).join("/")),e}},[Symbol.iterator]:function*(){for(let n of this.cards)n!==void 0&&(yield n);},init(n){this.name={},this.color=Array.from({length:7},()=>new Set),this.number=Array.from({length:14},()=>new Set),this.type=Array.from({length:4},()=>new Set),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],n.forEach(e=>{let{name:t,color:i,number:s,type:r}=ie[e];t in this.name||(this.name[t]=new Set),this.name[t].add(e),this.color[i].add(e),this.number[s].add(e),this.type[r].add(e),i==3&&s>=2&&s<=9&&this.number[0].add(e),t.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,t,i,s,r);});},onquery(n,e){if(this.select[n].delete(e)){if(this.select[n].size){Array.from(this[n][e]).forEach(t=>this.query.delete(t)),this.draw();return}}else this.select[n].add(e);this.query=["name","number","color"].filter(t=>this.select[t].size).reduce((t,i)=>new Set(Array.from(this.select[i]).flatMap(s=>Array.from(this[i][s])).filter(s=>!t.size||t.has(s))),new Set),this.draw();},queryone(n,e){this.query=new Set(Array.from(this[n][e])),this.draw();},draw(){const n=document.getElementById("cardTypeDetail");if(n.innerHTML="",this.query.size==0)return;let e=new Set($.unknown),t=new Set($.qipai),i=G.cardIDsOrder.filter(s=>this.query.has(s)).reduce((s,r)=>(e.has(r)?s[0].push(r):t.has(r)?s[2].push(r):s[1].push(r),s),[[],[],[]]);[0,1,2].forEach(s=>i[s].forEach(r=>n.appendChild(this.cards[r].plot(s))));}},{get(n,e,t){return typeof e=="number"||typeof e=="string"&&!isNaN(e)?n.cards[e]:Reflect.get(...arguments)}}),J=class J{static label(e){if(J.groups.has(e))return J.groups.get(e);const t=J.LABELs.shift();return J.groups.set(e,t),t}constructor(e,t=null,i="12-255",s=null,r=null){var a;this._key=e,this.zone=i,this.id=t??((a=this.next)==null?void 0:a.id)??this.key,this.next=s,this.prev=r,J.nodes.has(e)||J.nodes.set(e,new Set),J.nodes.get(e).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(e){this._key!=e&&(J.nodes.get(this._key).delete(this),this._key=e,J.nodes.has(e)||J.nodes.set(e,new Set),J.nodes.get(e).add(this));}static get(e){return J.nodes.has(e)?Array.from(J.nodes.get(e)):[]}static init(e,t){return J.key=0,J.nodes=new Map,J.groups=new Map([[0,"?"]]),J.LABELs=Array.from({length:62},(i,s)=>String.fromCharCode(s+65)),e.map(i=>new J(0,i,t))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?ie[this.id].ncn:"？")}plot(e){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(e);let t=this._button;return t||(t=this._button=document.createElement("button"),t.className="shoupai"),t.disabled=this.key<=0&&this.key%2==0,(e||this.key!=((i=t==null?void 0:t.dataset)==null?void 0:i.key)||this.key<=0&&J.label(this.key)!=t.innerHTML)&&(t.className="shoupai",t.id="card"+this.id,t.dataset.key=this.key,this.key>0?(t.classList.remove("G"),ie[this.id].color>2?t.classList.remove("R"):ie[this.id].color>0&&t.classList.add("R"),t.style.color="",t.style.fontSize="",t.title=new $("unknown").cards.has(this)?J.findKZ(this.id).zones.map(s=>{let[r,a,o]=s.split("-").map(c=>parseInt(c));return $.name(a,r,null,o,o)}).join("/"):ie[this.id].ncn,t.innerHTML=`<span>${ie[this.id].cn}</span><br>${ie[this.id].name.substring(0,2)}`):(t.classList.add("G"),t.innerHTML="？")),t}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),$.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),$.draw(e.zone),this}create(e){const t=new J(this.key,this.id,this.zone,this.next,this);return this.key=e,this.next&&(this.next.prev=t),this.next=t,this}delete(){let e=!1;if(this.next){let t=this.next;return this.key=t.key,this.id=t.id,this.next=t.next,t.next?t.next.prev=this:new $("unknown").cards.delete(t)&&(e=!0,this.prev&&new $("unknown").cards.add(this)),J.nodes.get(t.key).delete(t),e}else return this.key===0?(this.key=this.id,wt(this.id,this.key),!0):null}destroy(e){let t=!1,i=this.key;for(;i<0;)this.delete()&&(t=!0),J.unpack(i)&&(t=!0),i=this.key;return this.key!=e&&(this.key=e??this.id,wt(this.id,this.key)),this.prev?J.unpack(this.prev.key):(this.plot(!0),$.draw(this.zone)),t&&$.draw("unknown"),this}identify(e,t=null){if(t!==null&&console.count("REidentify"+t+">"+this),this.id==e)return this.key>0?this:(t&&(this.end.id=t),this.destroy(),this);let i,s=new Set([this.key]),r=[[this.key,[]]];for(;r.length>0;){let[a,o]=r.shift();if(i=J.find(a,e),i){o.concat(i).reduce((c,d)=>c.swap(d).next,this);break}for(let c of J.get(a).filter(d=>d.next))s.has(c.next.key)||(s.add(c.next.key),r.push([c.next.key,o.concat(c)]));}if(i){if(t){let a=this;for(a.id=t;a.next;)a=a.next,a.id=t;}return this.destroy(),this}else {if(e>0)return this.identify(0,e);console.error("identify error: "+(e>0?e:t)+">"+this);}return null}static move(e,t){return Array.isArray(e)||(e=[e]),e==null||e.forEach(i=>i.zone=t),Array.from(new Set(e==null?void 0:e.map(i=>i.key))).filter(i=>i<=0).map(i=>J.unpack(i)).length?$.draw("unknown"):Array.from(new Set(e==null?void 0:e.map(i=>i.key))).filter(i=>i>0&&ce.query.has(i)).forEach(i=>{ce[i].plot(t=="2-255"?2:1);}),e}static pack(e,t,i){if(!((e==null?void 0:e.length)>1&&(e!=null&&e.every(a=>a))))return;let s=new Set(e.map(a=>a.key));if(s.size===1)return [...s][0];J.key=J.key-1;let r;if(i){if(new Set(e.map(c=>c.head.zone)).size===1)return null;let o=Array.from(J.nodes.keys()).filter(c=>c<0);for(let c=0;c>=J.key;c--)if(!(o.includes(c*2-1)||o.includes(c*2-2))){r=c*2-i;break}o.filter(c=>c>r).sort((c,d)=>c-d).forEach(c=>{J.get(c).forEach(d=>{d.key=d.key-2,d.head.plot(!0);});}),r=-i;}else r=J.key*2-(t?2:1);return e.forEach(a=>{a.create(r),new $("unknown").cards.delete(a),t||new $("unknown").cards.add(a.end);}),$.draw("unknown"),r}static unpack(e){if(e>0)return !0;const t=J.get(e);let i=new Set(t.map(r=>{var a;return (a=r.next)==null?void 0:a.key})),s=new Set(t.map(r=>r.head.zone));if(t.length===1||!s.has("1-255")&&(s.size===1||i.size===1&&e!==0)){J.groups.has(e)&&(J.LABELs.unshift(J.groups.get(e)),J.groups.delete(e));let r=t.map(a=>a.delete()).some(Boolean);return Array.from(new Set(t.filter(a=>a.prev).map(a=>a.prev.key))).forEach(a=>J.unpack(a)),t.filter(a=>!a.prev).forEach(a=>a.plot(!0)),Array.from(s).forEach(a=>$.draw(a)),r}else return !1}static find(e,t){let i=J.get(e).find(s=>s.id==t);if(i===void 0&&e!=0){let s=J.get(0).find(r=>r.id==t);s&&(i=J.get(e).find(r=>r.end.key==0),i!==void 0&&s.swap(i.end));}return i}static findIDs(e,t=!1,i=new Set,s=new Set){return s.add(e),e>0||!t&&e==0?i.add(e):(t||e%2!=0)&&J.get(e).forEach(r=>{if(r.next){let a=r.next.key;s.has(a)||J.findIDs(a,t,i,s);}else t&&i.add(r.id);}),Array.from(i)}static findKZ(e,t=!1,i=new Set,s=new Set){let r=e;return !(r instanceof J)&&e>0&&(r=J.get(e)[0]),r instanceof J||(r=J.get(0).find(a=>a.id==e)),r instanceof J&&(!t&&r.key==0?(s.add(""),i.add(0)):(s.add(r.head.zone),i.has(r.key)||(i.add(r.key),(r.key<0||t&&r.key==0)&&J.get(r.key).forEach(a=>{a!=r&&J.findKZ(a,t,i,s);})),r.prev&&J.findKZ(r.prev,t,i,s))),{keys:Array.from(i),zones:Array.from(s)}}};Ne(J,"key",NaN),Ne(J,"nodes",new Map),Ne(J,"groups",new Map([[0,"?"]])),Ne(J,"LABELs",Array.from({length:50},(e,t)=>String.fromCodePoint(t<20?9312+t:t<35?12881-20+t:12977-35+t)));let ee=J;const he=class he{static get paidui(){return Array.from(new Set(Array.from(ee.get(0),({id:e})=>e).concat((he.obj["1-255"]??[]).map(({id:e})=>e))))}static get qipai(){return (he.obj["2-255"]??[]).filter(({key:e})=>e>0).map(({id:e})=>e)}static get unknown(){return Array.from(ee.get(0),({id:e})=>e)}static shoupai(e){return (he.obj["5-"+e]??[]).filter(({key:t})=>t>0).map(({id:t})=>t)}constructor(e,t=5,i=null,s=null,r=null,a=null){var o;typeof e=="number"?(this.id=e,this.zone=t,this.id==0&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),this.zone==9&&(this.zone=1),this.zone==4&&(this.id=this.id+"-"+(a||r||0)),this.zone==8&&(this.id="-"+(r||a||0)),this.zoneID=this.zone+"-"+this.id):typeof e=="string"?[this.zoneID,this.zone,this.id]=e.match(/(.*?)-(.*)/)??[e,e,""]:(o=e==null?void 0:e.every)!=null&&o.call(e,c=>c instanceof ee),this.zoneID in he.obj||(he.obj[this.zoneID]=[]),this.pos=(i===65280||i===1?1:i===0||i===-1?-1:0)*(this.zone==1?-1:1),t!=1&&(this.pos=0),this.count=s;}show(e=[]){if(isNaN(ee.key))return [];if(Array.isArray(e)||(e=[e]),e.filter(s=>s>0).length==0)return [];let t=[],i=e.slice();if(this.pos==-1)t=this.cards.slice(0,e.length).map(s=>s.identify(i.shift()));else if(this.pos==1)t=this.cards.slice(-e.length).map(s=>s.identify(i.shift()));else if(this.zone!=1){let s=i.map(r=>ee.findKZ(r,!0).keys);this.cards.slice().sort((r,a)=>a.key-r.key).some(r=>{if(i.filter(a=>a>0).length==0)return !0;s.some((a,o)=>{if(a.includes(r.key))return t[o]=r.identify(i[o]),a.length=0,i[o]=null,!0});}),i.forEach((r,a)=>{var o,c,d,m;if(r&&(t[a]=(o=this.cards.find(l=>l.id==0))==null?void 0:o.identify(r),t[a]===void 0&&(t[a]=(c=this.cards.find(l=>l.key==0))==null?void 0:c.identify(r)),t[a]===void 0)){let l=ee.get(r)[0];l?(t[a]=(m=(d=this.cards.find(u=>!t.includes(u)))==null?void 0:d.swap(l))==null?void 0:m.identify(r),console.error(this.zoneID+"SWAP Card ["+r+"] Shown")):(t[a]=new ee(r,r,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+r+"] Shown"));}});}return he.draw(this.zoneID),t}remove(e=[],t,i){if(isNaN(ee.key))return [];Array.isArray(e)||(e=[e]),i&&(this.count=i);let s=[],r=e.slice();if(this.pos==-1)s=this.cards.splice(0,this.count);else if(this.pos==1)s=this.cards.splice(-this.count);else if(e.filter(c=>c>0).length>0){let c=r.map(m=>ee.findKZ(m,!0).keys);this.cards.slice().reverse().sort((m,l)=>l.key-m.key).some(m=>{if(r.filter(l=>l>0).length==0)return !0;c.some((l,u)=>{if(l.includes(m.key))return s[u]=this.cards.splice(this.cards.indexOf(m),1)[0],l.length=0,r[u]=null,!0});}),r.forEach((m,l)=>{var x;if(!m)return;let u=this.cards.findIndex(b=>b.id==0);if(u===-1&&(u=this.cards.findIndex(b=>b.key==0)),u>-1)s[l]=this.cards.splice(u,1)[0];else {let b=ee.get(m)[0],v=this.cards.findIndex(L=>!s.includes(L));b&&v>=0?(s[l]=(x=this.cards.splice(v,1)[0])==null?void 0:x.swap(b),console.error(this.zoneID+"SWAP Card ["+m+"] Moved")):(s[l]=new ee(m,m,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+m+"] Moved"));}});}else if(this.count==this.length||this.size==1)s=this.cards.splice(0,this.count);else if(this.zone==1||this.zone==2){var a=[...this.cards.filter(c=>c.key<=0).sort((c,d)=>d.key-c.key),...this.cards.filter(c=>c.key>0)];if([11104,3488,862].includes(t)){var o=new Set(a.map(c=>c.key));t==11104?o=new Set(Array.from(o).filter(c=>ee.get(c).some(d=>{var m;return (m=ce.type[3])==null?void 0:m.has(d.id)}))):t==3488?o=new Set(Array.from(o).filter(c=>ee.get(c).some(d=>{var m,l,u;return ((m=ce.name.雷杀)==null?void 0:m.has(d.id))||((l=ce.name.火杀)==null?void 0:l.has(d.id))||((u=ce.name.冰杀)==null?void 0:u.has(d.id))}))):t==862&&(o=new Set(Array.from(o).filter(c=>ee.get(c).some(d=>ce.number[6].has(d.id))))),a=a.filter(c=>o.has(c.key));}s=a.slice(0,this.count),s.some(c=>c.key>0||c.key%2)&&ee.pack(a,!0),s.forEach(c=>this.cards.splice(this.cards.indexOf(c),1));}else ee.pack(this.cards),s=this.cards.splice(0,this.count);return s.length!=this.count&&Array.from({length:this.count-s.length},()=>(console.error(this.zoneID+" New Card Moved"),s.push(new ee(0,0,this.zoneID)))),e.filter(c=>c>0).length==this.count?e.forEach((c,d)=>{var m;return (m=s[d])==null?void 0:m.identify(c)}):s.filter(c=>c.key>0).length==this.count&&s.forEach(({id:c},d)=>{e[d]=c;}),he.draw(this.zoneID),s}add(e){if(!isNaN(ee.key))return this.pos==-1?he.obj[this.zoneID]=ee.move(e,this.zoneID).reverse().concat(this.cards):he.obj[this.zoneID]=this.cards.concat(ee.move(e,this.zoneID)),he.draw(this.zoneID),e}set(e){isNaN(ee.key)||(he.obj[this.zoneID]=ee.move(e,this.zoneID),he.draw(this.zoneID));}get cards(){return he.obj[this.zoneID]??[]}get length(){var e;return ((e=this.cards)==null?void 0:e.length)??0}get size(){var e;return new Set(((e=this.cards)==null?void 0:e.map(t=>t.key))??[]).size}static init(e,t){he.obj={unknown:new Set},he.obj[t]=ee.init(e,t);}static draw(e){var d,m;if(isNaN(ee.key))return;if(e===void 0){Object.keys(he.obj).filter(l=>l.split("-")[0]=="5").forEach(l=>he.draw(l));return}let t=null,i=null,[s,r,a]=((d=e.split("-"))==null?void 0:d.map(Number))??[];if(e=="unknown")t="knownCards";else if(s==1)t="paiduiCards";else if(s==5)t=String(M.getOrder(r)+1);else if(s==4&&a in G.markSpell)t="mark"+e;else return;i=document.getElementById(t);let o=Array.from(he.obj[e]??[]);if(e=="unknown"&&(Array.from(new Set(o.map(l=>l.head.zone))).forEach(l=>he.draw(l)),ce.draw()),!o||o.filter(l=>l.key>0||l.key%2!==0).length==0){i&&(i.classList.contains("markedCard")?i.remove():i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove()));return}if(i)i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove());else if(s==4)(m=document.getElementById(String(M.getOrder(r)+1)))==null||m.insertAdjacentHTML("beforeend",`<div id="${t}" class="markedCard"><span class = 'mark'>${G.markSpell[a]}</span></div>`),i=document.getElementById(t);else return;e!="1-255"&&o.sort((l,u)=>l.key>0&&u.key>0?0:u.key-l.key),s==4&&(i=i.firstElementChild||i);var c=1;o.map(l=>l.plot(e=="unknown")).reverse().forEach((l,u,x)=>{var b,v;if(l.dataset.key==((v=(b=x[u+1])==null?void 0:b.dataset)==null?void 0:v.key))c++;else {c>1&&(l.style.fontSize="",l.innerHTML=`<span>${l.innerHTML}×</span><br>${c}`);let L=parseInt(l.dataset.key);if(L<0){let E=ee.findIDs(L).sort((V,X)=>V>0&&X>0?0:X-V);l.title=c+"张："+E.map(V=>ie[V].ncn).join("/"),e!=="1-255"&&E.length<5&&(l.style.fontSize="",l.innerHTML=E.map(V=>{var X,w;return ((w=(X=ee.get(V)[0])==null?void 0:X.plot())==null?void 0:w.outerHTML)||""}).join(""));}s==4?i.insertAdjacentElement("afterend",l):i.insertAdjacentElement("afterbegin",l),c=1;}});}static name(e,t,i,s,r){var o;let a;if(isNaN(t))return "?";if(t==1&&e==0)return "牌堆(游戏开始前) ";if(t==1&&e==255)a="牌堆";else if(t==2)a="弃牌堆";else if(t==3)a="处理区";else if(t==4)a="标记";else if(t==5)a="手牌";else if(t==6)a="装备";else if(t==7)a="判定区";else if(t==8)a="弹窗";else {if(t==9)return "洗牌";t==10?a="交换临时区":t==11?a="弃牌临时区":t==12?a="回收区":t==0&&(a="游戏外");}return ([0,1,2,3,8,11,12].includes(t)?"":M.name(e,!0))+([4,8].includes(t)?"["+((o=G.spellDict[t==8?r:s||r||0])==null?void 0:o.name)+"]":"")+(a??"zone"+t)+({0:"底",65280:"顶",65282:"*"}[i]??(i?":"+i:""))}};Ne(he,"obj",{unknown:new Set});let $=he;function Hn(n){const e=new Map;W.goods.forEach(t=>{e.set(t.GoodsBaseID,t.ChangeCount);}),n.forEach(t=>{const{GoodsBaseID:i,ChangeCount:s}=t;e.has(i)?e.set(i,e.get(i)+s):e.set(i,s);}),W.goods=Array.from(e,([t,i])=>({GoodsBaseID:t,ChangeCount:i}));}const cn={乐不思蜀:"乐",兵粮寸断:"兵",八卦阵:"八卦",爪黄飞电:"爪黄+1",的卢:"的卢+1",绝影:"绝影+1",骅骝:"骅骝+1",赤兔:"赤兔-1",大宛:"大宛-1",紫骍:"紫骍-1",紫騂:"紫骍-1",诸葛连弩:"连弩",木牛流马:"木马",顺手牵羊:"顺手",万箭齐发:"万箭",五谷丰登:"五谷",无中生有:"无中",过河拆桥:"过拆",桃园结义:"桃园",无懈可击:"无懈",南蛮入侵:"南蛮",借刀杀人:"借刀",铁索连环:"铁索",随机应变:"随机",远交近攻:"远交",以逸待劳:"逸劳",知己知彼:"知己",逐近弃远:"逐近",洞烛先机:"洞烛",出其不意:"出其",水淹七军:"水淹","无懈可击·国":"国无",挟天子以令诸侯:"挟令",方天画戟:"方天戟",雌雄双股剑:"雌雄剑",青龙偃月刀:"青龙刀",丈八蛇矛:"丈八矛",朱雀羽扇:"朱雀扇",白银狮子:"白银狮",三尖两刃刀:"三尖刀",乌铁锁链:"乌铁链",五行鹤翎扇:"五行扇",太公阴符:"太公符",无双方天戟:"无双戟",束发紫金冠:"紫金冠",玲珑狮蛮带:"玲珑带",红棉百花袍:"百花袍",红锦百花袍:"百花袍",四乘粮舆:"四乘舆",铁蒺玄舆:"铁蒺舆",飞轮战舆:"飞轮舆",鬼龙斩月刀:"鬼龙刀",国风玉袍:"国风袍",赤炎镇魂琴:"赤炎琴",奇门八阵:"奇门阵",绝尘金戈:"绝尘+1",修罗炼狱戟:"修罗戟",虚妄之冕:"虚妄冕",赤血青峰:"赤青锋",赤血青锋:"赤青锋",鸾凤和鸣剑:"鸾凤剑",七彩神鹿:"神鹿-1",金乌落日弓:"金乌弓",刑天破军斧:"刑天斧",长安大舰:"长安-2",禅让诏书:"诏书",镔铁双戟:"镔铁戟",继往开来:"继往",攻守兼备:"攻守",进退自如:"进退",洪荒之力:"洪荒",同舟共济:"同舟",力争上游:"力争",逆水行舟:"逆水",撒豆成兵:"撒豆",移花接木:"移花",联军盛宴:"联军",调虎离山:"调虎",火烧连营:"火烧",勠力同心:"勠力",调剂盐梅:"调剂",声东击西:"声东",增兵减灶:"增兵",草木皆兵:"草木",唯我独尊:"独尊",弃甲曳兵:"弃甲",金蝉脱壳:"金蝉",故步自封:"自封",金鼓笙旗:"金鼓",党同伐异:"伐异",燎原之火:"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮",商鞅变法:"变法",真龙长剑:"真龙剑",传国玉玺:"玉玺",厚积形:"厚积",桎梏形:"桎梏",盈冲形:"盈冲",背水形:"背水",整肃形:"整肃",寸兵形:"寸兵",雄黄酒:"酒"},ie=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let n in this.cards)yield this.cards[n];}},{get:function(n,e){var t;if(e in n)return n[e];if(!n.cards[e])if((t=G.cardDict)!=null&&t[e]){let{name:i,type:s,color:r,number:a,subType:o}=G.cardDict[e],c=dn(r),d=De(a);n.cards[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[o]||cn[i]||i,type:parseInt(s),color:parseInt(r),number:parseInt(a),ncn:i+c+d,cn:c+d,c,n:d};}else n.cards[e]=n.cards[0];return n.cards[e]}});function dn(n){return ["","♥","♦","♠","♣"][n]??""}function De(n,e=!0){return e&&parseInt(n)==1?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[n]??""}function zn(){for(let e=11;e<=60;e++){const t=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=t,i.classList.add("face"),i.onmousedown=()=>He(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach((e,t)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>He(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);});}async function He(n,e){oe("复制成功！");var t={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(e&&Object.keys(t).forEach(s=>{n=n.replaceAll(s,t[s]);}),O.chat(n),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",n);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=n,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(s){return console.warn("Copy to clipboard failed.",s),prompt("Copy to clipboard: Ctrl+C, Enter",n)}finally{document.body.removeChild(i);}}}async function jn(n,e){let t=Be("CDK");t||(t=[]);let i=n.filter(a=>!t.includes(a));await ge(1e4);for(let a of i)Ze(`找到兑换码！<br>${a}<br>点击该通知即可兑换`,"ac-tooltip",1e4,"green",function(){!t.includes(a)&&t.push(a),ze("CDK",t),Ot(a);});var s=document.getElementById(e);s.innerText="",n.length==0&&e=="CDK"&&(n=["所有兑换码已经兑换","迟点再看看吧"],Yt("CDK"));for(let a of n){let o=document.createElement("button");o.className="calRes",o.innerText=a,o.onmousedown=function(){Ot(a),o.innerText="已兑换",setTimeout(()=>{o.textContent=a;},"500");},s.append(o);var r=document.createElement("br");s.append(r);}}function qn(n){var e=document.getElementById("storeDetail");e.innerText="",n.length==0&&(n=["暂无集市数据"]);for(let t of n){let i=document.createElement("button");i.className="storeDetail",i.innerText=t,e.append(i);}}let Fn={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券"};function Qn(n){return !Fn[n]}function un(n,e,t,i){var s;if(document.getElementById("sec"+n)==null){let r=document.getElementById("lottery");const a=document.createElement("div"),o=document.createElement("div");o.innerHTML=G.secId[n].Name+" 次数："+i+"<br>",o.id="sec"+n+"+times",a.id="sec"+n,a.append(o),r.append(a),r.append(document.createElement("hr"));}if(typeof document.getElementById("sec"+n)<"u"&&document.getElementById(n+"+"+e)==null){const r=document.getElementById("sec"+n+"+times");r.innerHTML=G.secId[n].Name+" 次数："+i+"<br>";let a=document.getElementById("sec"+n);const o=document.createElement("div");o.className="suit",Qn(e)&&o.classList.add("r");const c=document.createElement("span"),d=document.createElement("span");c.innerText=((s=G.goodsID(e))==null?void 0:s.name)+" * ",d.innerText=t,c.id=n+"+"+e,d.id=n+"+"+e+"+number",o.append(c),o.append(d),a.appendChild(o);}else if(typeof document.getElementById(n)<"u"&&document.getElementById(n+"+"+e)!=null){const r=document.getElementById("sec"+n+"+times");r.innerHTML=G.secId[n].Name+" 次数："+i+"<br>";let a=document.getElementById(n+"+"+e+"+number"),o=parseInt(a.innerText);o+=t,a.innerText=o;}}function _t(n){let e=document.getElementById("lastUseCard");const t=document.createElement("div");for(const s of n){if(s=="0")continue;var i=document.createElement("button");i.className=ie[s].color<=2?"shoupai R":"shoupai";let r=document.createElement("span");r.innerText=ie[s].cn,i.appendChild(r),i.appendChild(document.createElement("br")),i.innerHTML+=ie[s].name.substring(0,2),t.append(i);}e.innerHTML=t.innerHTML;}const Nt=new MutationObserver(n=>{n.forEach(e=>{const t=e.target,i=document.getElementById(t.id),s=document.getElementById("s"+t.id);if(s&&i&&(e.type==="childList"||e.type==="attributes")){const r=t.innerHTML;if(s.dataset.lastContent!==r){if(s){const a=t.cloneNode(!0);s.innerHTML=a.innerHTML,fn(s);}s.dataset.lastContent=r;}}});}),Kn={attributes:!0,childList:!0,subtree:!0};function fn(n){n&&n instanceof HTMLElement&&(n.scrollHeight>40?n.classList.add("show-ellipsis"):n.classList.remove("show-ellipsis"));}function hn(n,e){let t;return function(...i){clearTimeout(t),t=setTimeout(()=>n.apply(this,i),e);}}const Vn=hn(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".sorder-body").forEach(e=>{fn(e);});});},500);window.addEventListener("resize",Vn);function at(){const n=document.getElementById("seatUI"),e=document.createDocumentFragment();for(let t of H.seatUIs)if(t.posY&&t.posX&&typeof t.actualSeatID<"u")if(document.getElementById("sor"+t.actualSeatID)==null){const i=document.createElement("div");i.className="sorderContainer",i.id="sor"+t.actualSeatID,i.style.top=t.posY+"px",i.style.left=t.posX+"px",i.style.width=(H.unscaledWidth+H.paddingRight)*H.scale+"px";const s=document.createElement("div");s.className="sorder-body",s.classList.add("sNo"+t.actualSeatID),s.id="s"+t.actualSeatID,i.appendChild(s);const r=document.getElementById(t.actualSeatID);r&&(Nt.observe(r,Kn),e.appendChild(i));}else {const i=document.getElementById("sor"+t.actualSeatID);i.style.top=t.posY+"px",i.style.left=t.posX+"px",i.style.width=(H.unscaledWidth+H.paddingRight)*H.scale+"px";}if(H.seatUIs.length===0){Nt.disconnect();for(let t=1;t<=8;t++){const i=document.getElementById("sor"+t);i&&i.remove();}}n.appendChild(e);}async function ht(n,e){for(let s of n){const{x:r,y:a}=G.Rcity[s.id],o=H.centerX+r*SystemContext.gameScale/window.devicePixelRatio+"px",c=H.centerY+a*SystemContext.gameScale/window.devicePixelRatio+"px";if(document.getElementById("city"+s.id+s.event)==null){const d=document.createElement("div");if(d.id="city"+s.id+s.event,d.className="city",d.style.position="absolute",d.style.fontSize="15px",d.style.left=o,d.style.top=c,typeof G.Rfight[s.event]<"u"){let l=[];for(let u of G.Rfight[s.event].generals){let x=u.start?"[先行]":"",[b,v]=Ht(u,Qe.difficulty);v?l.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+u.generalname+x+" "+b.join(" ")+"</span>"):l.push(u.generalname+x);}d.innerHTML=l.join("<br>").replace(/\n/g," ")+"<hr>"+G.Rfight[s.event].get.replace(/\n/g,"<br>");}else {let l=[];for(let u=1;u<4;u++){let x=s.event+u.toString(),b=[];if(G.Rchoose[x])if(G.Rchoose[x].generals)for(let v of G.Rchoose[x].generals){let L=v.start?"[先行]":"",[E,V]=Ht(v,Qe.difficulty);V?b.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+v.generalname+" "+L+E.join(" ")+"</span>"):b.push(v.generalname+L);}else b.push(G.Rchoose[x].lost)&&b.push("");l.push(b);}d.innerHTML=(G.Rchoose[s.event+"1"]?(G.Rchoose[s.event+"1"].lost==""?"":l[0].join("<br>").replace(/\n/g," ")+"<hr>")+G.Rchoose[s.event+"1"].get.replace(/\n/g,"<br>"):"")+(G.Rchoose[s.event+"2"]?"<hr>"+(G.Rchoose[s.event+"2"].lost==""?"":l[1].join("<br>").replace(/\n/g," ")+"<hr>")+G.Rchoose[s.event+"2"].get.replace(/\n/g,"<br>"):"")+(G.Rchoose[s.event+"3"]?"<hr>"+(G.Rchoose[s.event+"3"].lost==""?"":l[2].join("<br>").replace(/\n/g," ")+"<hr>")+G.Rchoose[s.event+"3"].get.replace(/\n/g,"<br>"):"");}document.getElementById("rogueUI").appendChild(d);}else {const d=document.getElementById("city"+s.id+s.event);d.style.left=o,d.style.top=c;}}const t=n.map(s=>"city"+s.id+s.event);document.querySelectorAll("div.city").forEach(s=>{t.includes(s.id)||s.remove();});}function rt(n,e="点击复制",t=!0,i=!1,s=null){let r=document.createElement("button");return r.className="calRes",r.title=e,r.disabled=i,r.innerText=n,r.onclick=()=>{He(n,t),r.innerText="复制成功",setTimeout(()=>{r.textContent=n;},500);},r}async function Pt(n){let e=n.slice().sort((r,a)=>r-a),t=[];function i(r,a,o){if(o===13){t.push(r.slice());return}if(!(o>13))for(let c=a;c<e.length;c++)c>a&&e[c]===e[c-1]||(r.push(e[c]),i(r,c+1,o+e[c]),r.pop());}i([],0,0);let s=document.getElementById("result");s.innerHTML="";for(let r of t.sort((a,o)=>o.length-a.length))if(s.appendChild(rt(r.map(a=>De(a,!1)).join("+"))),s.children.length>=15)break;s.innerHTML===""&&(s.innerHTML='<span class="textRes">【资援】无解！</span>');}async function Jn(n,e=!1){function t(c,...d){let m=c.slice();for(let l=0;l<m.length;l++){for(let u=0;u<d.length;u++)if(m[l]-=d[u][l],m[l]<0)return !1;if(l>0&&m[l]>=2)return 0}return m}let i=n.reduce((c,d)=>(c[0]++,c[d]++,c),Array(14).fill(0)),s=Math.floor(i[14]/2),r=new Map([[0,[Array(14).fill(0)]]]);for(let c=1;c<=13;c++){let d=i[c];if(d!=0)for(let m of Array.from(r.keys()).sort((l,u)=>u-l)){let l=r.get(m);for(let u=1;u<=d;u++){let x=m+c*u;if(x>s)break;r.has(x)||r.set(x,[]);for(let b=0;b<l.length;b++){let v=l[b].slice();v[0]+=u,v[c]+=u,r.get(x).push(v);}}}}r.delete(0);let a=new Map;for(let c of Array.from(r.keys()).sort((d,m)=>m-d)){let d=r.get(c);for(let m=0;m<d.length;m++)for(let l=m;l<d.length;l++){let u=t(i,d[m],d[l]);u&&(a.has(u[0])||a.set(u[0],[]),d[m][0]<=d[l][0]?a.get(u[0]).push([d[m],d[l],u]):a.get(u[0]).push([d[l],d[m],u]));}}let o=document.getElementById("result");o.innerHTML="",Array.from(a.keys()).sort((c,d)=>c-d).some(c=>{if(a.get(c).sort((d,m)=>d[0][0]-m[0][0]).forEach(([d,m,l])=>{let u=document.createElement("button");u.className="calRes";let x=document.createElement("span"),b=document.createElement("span");x.innerText=d.flatMap((v,L)=>L>0?Array(v).fill(De(L,!1)):[]).join("+"),b.innerText=m.flatMap((v,L)=>L>0?Array(v).fill(De(L,!1)):[]).join("+"),u.appendChild(x),u.insertAdjacentHTML("beforeend","<span>=</span>"),u.appendChild(b),u.title="点击复制",u.onclick=function(){He(this.innerText,!0);},e&&(u.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",x.className="yanjiaospan",b.className="yanjiaospan",x.onclick=function(v){v.stopPropagation(),O.yanJiao([d,m,l],2);},b.onclick=function(v){v.stopPropagation(),O.yanJiao([d,m,l],0);}),o.appendChild(u);}),o.children.length>=5)return !0}),o.innerHTML===""?o.innerHTML='<span class="textRes">【严教】无解！</span>':e&&o.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function Zn(n,e){if(!(n!=null&&n.length))return;let t=n.slice().sort((a,o)=>a-o),i=[];function s(a,o,c){if(!(c>13)){i.unshift(a.slice()),e&&(i[0].K=c===13?a.length:0);for(let d=o;d<t.length;d++)d>o&&t[d]===t[d-1]||(a.push(t[d]),s(a,d+1,c+t[d]),a.pop());}}s([],0,0);let r=document.getElementById("result");r.innerHTML="";for(let a of i.filter((o,c,d)=>!d.some(m=>o.length<m.length&&o.every(l=>m.includes(l)))).sort((o,c)=>c.K-o.K||c.length-o.length))r.appendChild(rt(a.map(o=>De(o,!1)).join("+"))),e&&a.K&&r.lastChild.classList.add("textRes");}async function Ut(n,e){function t(o,c,d,m,l){if(d.length===l+1){c.push([...d,...d.reduce((u,x)=>(u.splice(u.indexOf(x),1),u),o.slice())]);return}for(let u=m;u<o.length;u++)u>m&&o[u]===o[u-1]||(d.push(o[u]),d[0]+=o[u],t(o,c,d,u+1,l),d[0]-=d.pop());return c}let i=document.getElementById("result");if(i.innerHTML="",!(n!=null&&n.length)||!(e!=null&&e.length))return;let s=Math.max(n.length,e.length);n.sort((o,c)=>o-c),e.sort((o,c)=>o-c);for(let o=2;o<=s;o++){let c=t(n,[],[0],0,o);t(e,[],[0],0,o).forEach(d=>c.forEach(m=>{d[0]>m[0]&&d.slice(1,o+1).every(l=>!m.slice(1,o+1).includes(l))&&(s<3||Array.from({length:o}).some((l,u)=>d[u+1]<m[u+1]))&&i.appendChild(rt(d.slice(1,o+1).map(l=>De(l))+"→"+m.slice(1,o+1).map(l=>De(l)),"点击复制",!1));}));}let r=Array.from(new Set(e)),a=Array.from(new Set(n));r.forEach(o=>{let c=a.filter(d=>d<o);c.length&&i.appendChild(rt(De(o)+"→"+c.map(d=>De(d)).join("/"),"点击复制",!1));}),i.innerHTML===""&&(i.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function pt(n){var c,d,m;if(!(n!=null&&n.allData)){H.cities=[],ht(H.cities),document.getElementById("centerUI").classList.remove("show"),document.getElementById("centerUI").classList.add("hide");return}const e=document.getElementById("centerUI");e.classList.remove("hide"),e.classList.add("show");let t=n.allData,i=t.shopData,s=t.chapterData,r=t.generalpool;if(i){i.bShow=!0;let l=[];if(i.itemId&&G.Rplot)for(let u of i.itemId)G.Rplot[u]&&l.push(G.Rplot[u].name);qn(l);}if(r&&r.general_change&&r.general_change.length>0){let l=r.general_change.map(u=>G.generalDict[u]||`Unknown (${u})`);Ze(`小抄提示：可换将为${l.reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let a=t.seasonData,o=a&&a.difficulty;o&&(Qe.difficulty=o),Qe.general=((d=(c=t.gameData)==null?void 0:c.myGeneral)==null?void 0:d.uGeneralId)??0,Qe.itemId=((m=t.gameData)==null?void 0:m.itemId)??[],s&&s.locations&&(H.cities=s.locations.map(l=>({id:l.location,event:l.event})),G.Rcity&&ht(H.cities));}const Xn=(()=>{class n{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(s){this.id=s.readUnsignedByte(),this.goods_id=s.readUnsignedInt(),this.goods_cnt=s.readUnsignedInt(),this.price_type=s.readUnsignedByte(),this.price_num=s.readUnsignedInt(),this.stock=s.readUnsignedInt(),this.buy_limit=s.readUnsignedByte(),this.ori_price=s.readUnsignedInt();}UpdateDate(s){this.goods_id=s.goods_id,this.goods_cnt=s.goods_cnt,this.price_type=s.price_type,this.price_num=s.price_num,this.stock=s.stock,this.buy_limit=s.buy_limit,this.ori_price=s.ori_price,this.all_bought_cnt=s.all_bought_cnt,this.self_bought_cnt=s.self_bought_cnt;}}function e(i){i.position=0;let s=[],r=i.readBoolean();if(i.Data.length<=1)return null;let a=i.readUnsignedInt(),o=i.readUnsignedInt(),c=new Date(a*1e3).toISOString().slice(5,16).replace("T"," "),d=new Date(o*1e3).toISOString().slice(5,16).replace("T"," "),m=i.readUnsignedInt();for(let l=0;l<m;l++){let u=new n;u.Read(i);let x=s.find(b=>b.id==u.id);x?x.UpdateDate(u):s.push(u);}m=i.readUnsignedInt();for(let l=0;l<m;l++){let u=i.readUnsignedInt(),x=i.readUnsignedInt(),b=s.find(v=>v.id==u);b&&(b.all_bought_cnt=x);}m=i.readUnsignedInt();for(let l=0;l<m;l++){let u=i.readUnsignedInt(),x=i.readUnsignedInt(),b=s.find(v=>v.id==u);b&&(b.self_bought_cnt=x);}return {commonVo:s,start_time:a,end_time:o,start:c,end:d,next:r}}let t=!1;return async i=>{if(t)return null;const s=document.querySelectorAll('.left input[type="checkbox"]');let r=e(i);if(!r)return null;let{commonVo:a,start_time:o,end_time:c,start:d,end:m,next:l}=r;if(l)return;o=(o-8*60*60)*1e3;let u=a.map(({goods_id:v,goods_cnt:L,price_type:E,price_num:V,stock:X,buy_limit:w,ori_price:T,all_bought_cnt:N,self_bought_cnt:Q},A)=>{var me;let z=V+["","通用元宝","元宝","银两"][E]+": "+((me=G.goodsID(v))==null?void 0:me.name)+(L>1?"*"+L:""),ae=`${d} ~ ${m} 共${X}个`,de=N>=X||Q>=w;return Object.assign(s[A].dataset??{},{goods_id:v,start_time:o,goods:z}),{goods_id:v,goods:z,title:ae,disabled:de}}),x=document.getElementsByClassName("right")[0];x&&(x.innerHTML=u.map(({goods:v,title:L,disabled:E})=>`<span class="secKillDetailText${E?" gray":""}" title="${L}">${v}</span>`).join(""));let b=x.start-6e4;return b>Date.now()&&le.set("miaosha",()=>{oe(`${d}
秒杀即将开始！
`+u.map(({goods:v})=>v).join(`
`)),t=!0,setTimeout(()=>{t=!1;},66666);},b),i.Size==i.position}})();let Yn=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇"];const lt={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function Ht(n,e){let t=[],i=!1,s=$n(e);const r=lt[s];let a=Object.keys(lt).filter(o=>lt[o]<=r).map(o=>n[o]).filter(Boolean).join(";");a=a==null?void 0:a.split(";").map(o=>{var c;return ((c=G.spellDict[o])==null?void 0:c.name)||"无收录技能"});for(let o of a)Yn.includes(o)&&(t.push(o),i=!0);return [t,i]}function $n(n){switch(Math.floor((n-1)/5)){case 0:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY";default:return "getspell"}}var je=[],mt=[],zt={290:"推锋",766:"匡弼"},Ee=[],et={},tt={},Ue={},Oe={},nt=new Map,ve=()=>({name:"加载中"}),be=[],xt={},gt={},Ie={},Se={},ei={},yt={},bt={};Object.assign(G,{cardDict:je,cardIDsOrder:mt,spellDict:Ee,generalDict:et,skinSP:tt,skinDict:Ue,skinMap:Oe,bigSkin:nt,goodsID:ve,rogejson:Se,gxjson:ei,Rfight:Ie,Rchoose:gt,Rcity:xt,secId:yt,vskinMap:bt,Rplot:be});async function ti(n){return new Promise(e=>JSZipUtils.getBinaryContent(window.location.host==="test.sanguosha.com"?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,(t,i)=>JSZip.loadAsync(i).then(async s=>{var X;var r=(w=>w.getFullYear().toString()+(w.getMonth()+1).toString().padStart(2,"0")+w.getDate().toString().padStart(2,"0"))(new Date);let a=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess"];var o=await Promise.all(a.map(w=>s.file(w+".sgs").async("arraybuffer").then(T=>JSON.parse(new TextDecoder().decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(T)).decompress()))))).then(w=>a.reduce((T,N,Q)=>(T[N+".sgs"]=w[Q],T),{}));function c(w,T){if(typeof w!="object")return w;let N={};for(let Q in w){let A=T.get(Q)||Q;N[A]=w[Q];}return N}var d=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),m=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce((w,T)=>(w.set(T.a,T),w),new Map),l=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce((w,{Short:T,Long:N})=>(w.set(T,N),w),new Map),u=o["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce((w,T)=>(w.has(T.a)||w.set(T.a,[]),w.get(T.a).push(T.d),w),new Map);ve=(()=>{var w={};return function(T){if(T=parseInt(T),w[T])return w[T];let N=c(m.get(T),l),Q=o["sys_h5_shop.sgs"].root.itemtips.find(({a:z})=>z==T),A=N.usedeffect&&L(N.usedeffect);return w[T]={...N,...Q&&{info:Q.e},...A&&{effect:A}}}})();var x={};function b(w){var N;let T=w==null?void 0:w.replace(/([^0-9,\.])/g,"").split(",").map(Q=>parseInt(Q));return (T==null?void 0:T.length)<2?w:(x[T[0]]??(x[T[0]]=(N=m.get(T[0]))==null?void 0:N.b)??T[0])+(parseInt(T[1])>1?"*"+T[1]:"")}var v={};function L(w){let T=parseInt(w);if(T!=1e3&&Math.abs(T)>0)return v[T]??(v[T]=(u.get(Math.abs(T))??[]).map(N=>{var Q;return ((Q=m.get(N))==null?void 0:Q.b)??L(N)}).join(T>0?"/":"&"))}Ee=o["cha_spell.sgs"].GameSpells.spell.reduce((w,{a:T,c:N,o:Q})=>{var z,ae;let A={name:N,spellid:T,desc:((ae=(z=Q==null?void 0:Q.replace(/<[^\<\>]*>/g,""))==null?void 0:z.replace(/#.*/g,""))==null?void 0:ae.replace(/[;\n]+$/g,""))||""};return (A.desc.includes("暗置")||A.desc.includes("扣置")||A.desc.includes("移出"))&&(zt[T]=cn[A.name]??A.name),w[T]=A,w},[]);let E=o["sys_playcard.sgs"].abbreviation.reduce((w,{Short:T,Long:N})=>(w.set(T,N),w),new Map);if(je=o["sys_playcard.sgs"].GamePlayCards.card.map(w=>c(w,E)).reduce((w,T)=>{var N,Q;return w[T.id]={...T,name:T.name??((N=Ee[T.spellId])==null?void 0:N.name),desc:(Q=Ee[T.spellId])==null?void 0:Q.desc},w},[]),mt=o["sys_playcard.sgs"].GamePlayCards.card.sort((w,T)=>w.c-T.c||w.d-T.d||w.h-T.h||w.m-T.m||w.g-T.g||w.f-T.f||w.a-T.a).map(({a:w})=>w),nt=new Map(o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map(w=>[String(w.a),[w.a,w.c,w.v||w.q,w.r]]).reverse()),Ue=o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce((w,{skinID:T,name:N,skinlevel:Q,dongPoint:A})=>{let z=parseInt(T/100);return w[z]||(w[z]={}),w[z][T]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[Q]||"未知",name:N,state:A!==void 0},w},{}),tt=o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter(w=>String(w.skinID).includes("_")).reduce((w,T)=>{let[N,Q]=T.skinID.split("_").map(Number);return w[N]?w[N].includes(Q)||w[N].push(Q):w[N]=[Q],w},{}),Object.entries(tt).forEach(([w,T])=>{var A,z;(A=nt.get(w))==null||A.push(T);let N=parseInt(w/100),Q=(z=Ue[N])==null?void 0:z[w];Q&&(delete Ue[N][w],T.forEach(ae=>{Ue[N][w+"_"+ae]={...Q,name:Q.name+ae};}));}),et=o["character.sgs"].GameCharacters.character.reduce((w,{a:T,ai:N,b:Q})=>(w[T]=(N||"")+(Q==null?void 0:Q.replaceAll("&","")),w),{}),o["character.sgs"].GameCharacters.character.forEach(({a:w,v:T})=>{if(typeof T!="string"){Oe[w]=new Set([w]);return}let N=[w,...T.split(";").map(A=>parseInt(A))],Q=N.find(A=>A in Oe);if(Q){let A=Oe[Q];N.filter(z=>!A.has(z)).forEach(z=>(Oe[z]=A).add(z));}else {let A=new Set(N);N.forEach(z=>Oe[z]=A);}}),bt=o["character.sgs"].WuJiangs.Spgroup.reduce((w,T)=>{const N=T.spgenerals?T.spgenerals.split(",").map(Number):[];return N.forEach(Q=>{w[Q]=new Set(N);}),w},{}),yt=o["ff_tiangong.sgs"].root.Common.reduce((w,T)=>(w[T.Id]=T,w),{}),typeof n!="string"){let w=o["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter(T=>T.allServerWord&&!T.platform&&(!T.level||T.level=="0,201")&&T.endtime>=r&&T.begintime<=r).sort((T,N)=>T.endtime-N.endtime).map(({c_allServerWord:T,allServerWord:N})=>T||N).filter(Boolean);jn(w,"CDK");}if(Object.assign(G,{cardDict:je,cardIDsOrder:mt,markSpell:zt,spellDict:Ee,generalDict:et,skinSP:tt,skinDict:Ue,skinMap:Oe,bigSkin:nt,goodsID:ve,secId:yt}),(typeof n!="string"||n=="roge")&&async function(w,T){xt=w.Root.Level.reduce((f,{cityID:h,cityname:p,citypic:y,citycoordinate:g,startshow:I})=>{let[_,F]=g.split(",").map(Number);return f[h]={x:_,y:-F,boss:I,name:p??(y==null?void 0:y.replace(/^city_([0-9])_(.+)*\.png$/,(B,re,Z)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"})[re+Z]??B))},f},{}),w.Root.Tactics.forEach(({plot:f,plotname:h,plotdesc:p,school:y,money:g,level:I})=>{be[f]={name:h.replaceAll("·",""),desc:p.replaceAll(" ",""),school:y,money:g,level:I,type:2};}),w.Root.Spell.forEach(({id:f,spellid:h,money:p,level:y})=>{var g,I;be[f]={name:(g=Ee[h])==null?void 0:g.name,desc:(I=Ee[h])==null?void 0:I.desc,spellid:h,money:p,level:y,type:3};}),w.Root.Card.forEach(({id:f,cardid:h,isequip:p,money:y,level:g})=>{var I=je[h];be[f]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[I.subType]??I.name,desc:I.desc,color:I.color,number:I.number,money:y,level:g,type:4+p,rType:(I.type*10+I.subType)*100+p};});var N=w.Root.Roundid.reduce((f,{useSeason:h})=>h),Q=new Map,A=w.Root.Text.reduce((f,{ID:h,text:p})=>(f[h]=p,f),[]);w.Root.General=(f=>w.Root.General.map(h=>c(h,f)))(w.root.abbreviation.reduce((f,{Short:h,Long:p})=>(f.set(h,p),f),new Map)),w.Root.Adventure.forEach(f=>{f.chapname=A[f.chapname]??f.chapname;});let z=w.Root.RewardGroup.reduce((f,{reward:h,rewarddesc:p,allreward:y,abandonmoney:g})=>{var I,_;return f[h]=(g?g+"铜币/":"")+((_=(I=y==null?void 0:y.split(";"))==null?void 0:I.flatMap(F=>F==null?void 0:F.split(",")))==null?void 0:_.map(F=>["随机","普通","稀有","史诗","传说"][F]).join("/"))+p.replace("多选一","自选"),f},w.Root.Other.reduce((f,{reward:h,rewardname:p})=>(f[h]=p,f),{}));var ae=w.Root.Chapter.reduce((f,{seasonID:h,chapter:p,cityName:y,bosslocation:g,location:I})=>(I.split(";").forEach(_=>{f[_]=`${h}-${p}${y}`;}),f[g]=`${h}-${p}${y}BOSS`,f),{}),de=w.Root.General.reduce((f,h)=>(f[h.generalgroup]||(f[h.generalgroup]=[]),f[h.generalgroup].push(h),h.generalname=h.generalname.replace("&",""),f),{});w.Root.General.forEach(f=>{f.GeneralRank||(f.GeneralRank=0),f.JumpStage&&(f.next=(([h,p])=>de[h][p-1]??de[h][0])(f.JumpStage.split(";"))),f.info={general:f.generalname,hp:f.hp,maxhp:f.maxhp,card:f.cardnum,draw:f.draw,sha:1+f.exshatimes,armor:f.armor,getarmor:f.getarmor,...f.next?{next:f.next.generalname}:{}},f.spells=["","_ZD","_KN","_EM","_LY"].flatMap((h,p)=>{var y;return (((y=f["getspell"+h])==null?void 0:y.split(";"))??[]).map(g=>Ee[g]).filter(Boolean).map(g=>({...g,level:p}))}),f.spell=f.spells.map(({name:h})=>h).join(","),f.cards=["","_ZD","_KN","_EM","_LY"].flatMap((h,p)=>{var y,g;return [...((y=f["carddesc"+h])==null?void 0:y.split(";"))??[],...((g=f["equip"+h])==null?void 0:g.split(";"))??[]].map(I=>je[I]).filter(Boolean).map(({id:I})=>({id:I,ncn:ie[I].ncn,level:p}))}),f.card=f.cards.map(({ncn:h})=>h).join(",");}),Ie=w.Root.Fight.reduce((f,h)=>{function p(y,g,I=!1){y&&(h.fight+=P(y.info),h.lost+=(y.start?"[先手]":"")+y.generalname,y.next?(h.lost+=">",y.next.stage=g,y.next.info.pre=y.generalname,h.generals.push(y.next),p(y.next,g+1,I)):I||(h.fight+="+",h.lost+=" "));}if(h.generals=[...de[h.Ggroup]??[]],h.fight="",h.lost="",h.startnum){let y=h.generals.find(g=>g.generalID==h.startnum);y&&(y.start=!0);}return h.generals.forEach((y,g,I)=>p(y,1,g==I.length-1)),h.get=h.itemgroup+`铜币
`+(h.rewarditem?String(h.rewarditem).split(";"):[]).concat(String(h.reward).split(";")).map(y=>z[y]).join(`
`),h.text=A[h.text]??h.text,h.name=A[h.name]??h.name,f[h.fightID]=h,f},[]);for(let f in de)f in Ie||(Ie[f]={generals:de[f]});if(gt=w.Root.Choose.reduce((f,h)=>{var p;return h.type==7?(f[h.effectID]=Ie[h.event1],Q.set(h.event1,(p=w.Root.Adventure.find(y=>y.ID===parseInt(h.effectID/10)))==null?void 0:p.chapname)):h.type==3&&h.event1=="2"?f[h.effectID]={get:"营地"}:f[h.effectID]={lost:(y=>y&&"失去 "+y)(D(h.lostitem,h.lostnum,h.effectID)),get:(y=>y&&h.showitem?y.replace("随机","特定"):y)(D(h.getitem,h.getnum,h.effectID))},f},[]),Object.assign(G,{Rfight:Ie,Rchoose:gt,Rcity:xt,vskinMap:bt,Rplot:be}),!n||n=="roge"){var me=Object.entries(de).reduce((f,[h,p])=>{var _,F,B,re,Z;let y=h.length<6?h.slice(-3):h.slice(0,2)!=="99"?h.slice(-5,-2)+">":"*"+h.slice(-2),g=h.length<6?h.slice(0,-3)-2:h.slice(0,2)!=="99"?h.slice(0,-5)-2:h.slice(-3,-2)-h.slice(-4,-3)+9;if(["新年大吉"].includes(((_=Ie[h])==null?void 0:_.name)??((F=Ie[parseInt(y)+4e3])==null?void 0:F.name)))return f;f[y]||(f[y]={fight:((B=Ie[h])==null?void 0:B.name)??((re=Ie[parseInt(y)+4e3])==null?void 0:re.name)??"",generals:{}}),Q.has(h)&&(f[y].event=Q.get(h));let I=f[y].generals;return (((Z=Ie[h])==null?void 0:Z.generals)??p).forEach(se=>{let fe=(y.startsWith("*")?g:"")+(se.stage||"")+"#"+se.generalID;for(;;){if(!I[fe])I[fe]={general:(se.info.pre?">":"")+se.generalname+(se.info.next?">":""),info:P(se.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};else if(I[fe].levels.includes(g)){fe+="@";continue}break}let ue=I[fe];g%10<6&&g<20&&(ue.levels.push(g),se.start&&ue.start.push(g)),ue.infos[g]=se.info,se.otherad&&(ue.ad[g]=se.otherad),se.spells&&se.spells.forEach(Y=>{ue.spell[Y.spellid]||(ue.spell[Y.spellid]={...Y,levels:[],level:void 0}),g%10<6&&g<20&&ue.spell[Y.spellid].levels.push(g+(Y.level??0));}),se.cards&&se.cards.forEach(Y=>{ue.card[Y.id]||(ue.card[Y.id]={name:Y.ncn,levels:[],level:void 0}),g%10<6&&g<20&&ue.card[Y.id].levels.push(g+(Y.level??0));});}),f},{});Object.entries(me).forEach(([f,h])=>{me[f].shift=f.startsWith("*")&&Math.min(...Object.values(h.generals).flatMap(p=>p.levels))==1?1:0,h.generals=Object.values(h.generals).map(p=>(p.level=Math.min(...p.levels.sort((y,g)=>g-y))-me[f].shift,p.level=p.level,p.spell=Object.values(p.spell).map(y=>{let g=Math.min(...y.levels.sort((I,_)=>_-I));return y.levels.some((I,_,F)=>I<10&&!F.includes(I+10)&&(p.levels.includes(I+10)||p.levels.length==2&&p.levels.includes(10)))&&(y.level=[g]),y.levels.some(I=>I<10)&&(I=>{I.length&&(y.level=[g,I[I.length-1]]);})(y.levels.filter((I,_,F)=>I>=10&&!F.includes(I-10))),y.level=(y.level??g)-me[f].shift,delete y.levels,delete y.spellid,y}).sort((y,g)=>{let I=_=>_[1]>=10?_[1]:_[0]??_;return I(y.level)%10-I(g.level)%10||I(y.level)-I(g.level)}),p.card=Object.values(p.card).map(y=>{let g=Math.min(...y.levels.sort((I,_)=>_-I));return y.levels.some((I,_,F)=>I<10&&!F.includes(I+10)&&(p.levels.includes(I+10)||p.levels.length==2&&p.levels.includes(10)))&&(y.level=[g]),y.levels.some(I=>I<10)&&(I=>{I.length&&(y.level=[g,I[I.length-1]]);})(y.levels.filter((I,_,F)=>I>=10&&!F.includes(I-10))),y.level=(y.level??g)-me[f].shift,delete y.levels,y}).sort((y,g)=>{let I=_=>_[1]>=10?_[1]:_[0]??_;return I(y.level)%10-I(g.level)%10||I(y.level)-I(g.level)}),p.card.length||delete p.card,p.info=Object.values(p.infos).reduce((y,g)=>(Object.keys(y).forEach(I=>{g[I]>y[I]&&(y[I]=g[I]);}),y),{hp:0,card:0,draw:0,sha:0}),Object.keys(p.ad).length?Object.keys(p.ad).sort((y,g)=>g-y).forEach((y,g,I)=>{(y>=10&&p.ad[y]==p.ad[y%10]||p.ad[y]==p.ad[I[g+1]])&&delete p.ad[y];}):delete p.ad,p.start.length?p.start=Math.min(...p.start):delete p.start,delete p.infos,delete p.levels,p)).sort((p,y)=>p.level-y.level);});var S=w.Root.UniversalGroup.filter(f=>f.fightgroup!==void 0).reduce((f,h)=>{f[h.fightID]||(f[h.fightID]={});let p=String(h.fightgroup).slice(-3);return f[h.fightID][p]||(f[h.fightID][p]=[]),f[h.fightID][p].push(h),f},{}),C=Array.from(Array.from(w.Root.Level.reduce((f,{cityID:h,eventfight:p,universalfight:y,startshow:g})=>{var _,F;I(y),I((F=(_=p==null?void 0:p.split(";"))==null?void 0:_.map(B=>B.slice(-3)))==null?void 0:F.filter((B,re,Z)=>!Z.slice(re+1).includes(B)));function I(B){if(!B||B.length==0)return;let re=f.get(B);re?re.includes(ae[h])||re.push(ae[h]):f.set(B,[ae[h]]);}return f},new Map).entries()).reduce((f,[h,p])=>{let y=p.length>1&&new Set(p.map(g=>g.slice(0,3))).size<2?p.map((g,I)=>g.slice(I?3:0)).join("/"):String(p);return f.get(y)||f.set(y,new Set),(S[h]?Object.keys(S[h]):h).forEach(g=>f.get(y).add(g)),f},new Map).entries()).reduce((f,[h,p])=>(f[h]=Array.from(p,y=>me[y]),f),{});Se.jsbs=JSON.stringify(Object.entries(C).filter(f=>f[0].includes(N+"-")).reduce((f,[h,p])=>{let y=h.slice(2);return f[y]||(f[y]=[]),p.forEach(g=>{g.fight!="新年大吉"&&f[y].push(g);}),f},{})),Se.jsft=JSON.stringify(Object.values(me).filter(f=>["天涯故交","招兵买马","万众敬仰"].includes(f.event)&&f.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(f.event)).reduce((f,{event:h,generals:p,fight:y})=>(f[h]||(f[h]=[]),f[h].push({...y?{fight:y}:{},generals:p}),f),{})),Se.wscd=JSON.stringify(Object.values(T.Card.map(({CitationID:f,money:h})=>({...be[f],money:h})).reduce((f,{level:h,money:p,name:y,color:g,number:I,desc:_,rType:F})=>{let B=h+y+I;return f[B]||(f[B]={cl:[],level:p,name:y,number:I,type:F,desc:_}),f[B].cl.push(g),f},{})).sort(Ge("type","level"))),Se.wssp=JSON.stringify(T.Spell.map(({CitationID:f,money:h})=>({...be[f],money:h})).sort(Ge("money","level","spellid")).map(({level:f,money:h,name:p,desc:y})=>({level:h,name:p,desc:y}))),Se.wszf=JSON.stringify(T.Tactics.map(({CitationID:f,money:h})=>({...be[f],money:h})).filter(f=>{var h;return (f.name=(h=f.name)==null?void 0:h.replace("·新",""))&&!f.name.includes("废弃")&&!f.desc.includes("备用")&&!/(游戏|战斗)开始/.test(f.desc)}).sort((f,h)=>!f.money^!h.money?f.money?1:-1:f.name.slice(0,2).localeCompare(h.name.slice(0,2))!=0?f.name.slice(0,2).localeCompare(h.name.slice(0,2)):Ge("money","level","name.length")(f,h)).map(({level:f,money:h,name:p,desc:y})=>({level:h,name:p,desc:y})).filter((f,h,p)=>JSON.stringify(f)!=JSON.stringify(p[h+1]))),Se.jssp=JSON.stringify(be.filter(f=>(f==null?void 0:f.type)==3).sort(Ge("level","money","spellid")).map(({level:f,money:h,name:p,desc:y})=>({name:p,level:f,desc:y}))),Se.jscd=JSON.stringify(Object.values(be.filter(f=>(f==null?void 0:f.type)>=4).reduce((f,{level:h,money:p,name:y,color:g,number:I,type:_,desc:F,rType:B})=>{let re=h+y+I,Z=[33,34].includes(Math.floor(B/100))||y=="诸葛连弩"&&h==4;return f[re]||(f[re]={cl:[],level:Z?0:h,money:p,name:y,number:I,type:B+(Z?6:0),desc:F}),f[re].cl.push(g),f},{})).sort(Ge("type","level","money")).sort((f,h)=>f.level>0&&h.level==0?-1:0)),Se.jssd=JSON.stringify(w.Root.seed.sort(Ge("level","seed")).map(({name:f,desc:h,level:p,huchijineng:y})=>{var I,_,F;let g=(I=h==null?void 0:h.match(/.*获得【([^【】]*)】.*/))==null?void 0:I[1];return g&&(h+=((_=Ee[y])==null?void 0:_.desc)??((F=Ee.find(B=>(B==null?void 0:B.name)==g))==null?void 0:F.desc)),{name:f,level:p,desc:h}})),Se.jssc=JSON.stringify(w.Root.school.map(({school:f,name:h,effect:p,needputong:y,needxiyou:g,needshishi:I,needchuanshuo:_})=>({school:f,name:h,need:[y,g,I,_],desc:be[p].desc.replaceAll(" ","")}))).replace("（","(").replace("）",")").replace("）",")"),Se.jszf=JSON.stringify(be.filter(f=>(f==null?void 0:f.type)==2).filter(f=>(f.school=parseInt(f.school||100),f.name=f.name.replace("·新",""),!f.name.includes("废弃")&&!f.desc.includes("备用")&&!f.name.includes("套装"))).sort((f,h)=>f.name.slice(0,2).localeCompare(h.name.slice(0,2))!=0?f.name.slice(0,2).localeCompare(h.name.slice(0,2)):Ge("level","money","name.length")(f,h)).map(({level:f,money:h,name:p,desc:y,school:g})=>({...g<100?{school:g}:{},name:p,level:f,desc:y})).filter((f,h,p)=>JSON.stringify(f)!=JSON.stringify(p[h+1]))),Se.jstf=JSON.stringify(w.Root.saijitianfu.filter(f=>f.seasonID==N).reduce((f,{tfid:h,ceng:p,type:y,cost:g,plot:I,preposition:_})=>(f[h]={id:h,x:y,y:p,cost:g,pre:(_==null?void 0:_.split(/,|;/))??[],...be[I]},f),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),e(Se);}function D(f,h,p){var y,g,I;return f?f.includes(",")?(([_,F])=>["随机","普通","稀有","史诗","传说"][F]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[_])(f.split(",")):z[f]?(h>1?h:"")+z[f]:be[f]?(y=be[f])==null?void 0:y.name:de[f]?(Q.set(f,(g=w.Root.Adventure.find(_=>_.ID===parseInt(p/10)))==null?void 0:g.chapname),de[f].map(_=>_.generalname).join(`
`)):(I=w.Root.Card.find(_=>_.id==f))==null?void 0:I.name:""}function P({general:f,hp:h,maxhp:p,armor:y,getarmor:g,card:I,draw:_,sha:F,next:B,pre:re}){return (re?">":"")+f+h+(p!==h?"/"+p:"")+"血"+I+"牌摸"+_+"杀"+F+(B?">":"")}}(o["hd_roguelike.sgs"],o["hd_1v1_rogue.sgs"]),typeof n!="string"||n=="guanxing"){let me=function(S,C,D="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let P=D+S+".png";return fetch(P).then(f=>{if(f.ok)return {name:C,desc:`<a target="_blank" href="${P}"><img src="${P.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`};if(!D.includes("seat"))return me(S,C,D.replace("big/s","seat/s").replace("bigSkin","static"))})};G.gxjson={"结果为推演和预测，请以最终公告为准！更新时间":new Date().toLocaleString(),"【充值消费】":[]};let w=o["gn_dbs_quest.sgs"].TaskAll.Task.filter(({_attributes:S})=>S.clientTimeStart>=String(r)).map(({_attributes:S,Reward:C})=>{let D=",";return C.SelectReward&&(C=C.SelectReward,D="/"),C.RewardItem.length||(C.RewardItem=[C.RewardItem]),{id:S.id,time:S.timeStart.slice(0,8)+"—"+S.timeEnd.slice(0,8),desc:"【"+S.name+"】"+S.desc,reward:C.RewardItem.map(({_attributes:P})=>b(P.itemId+","+P.count)).join(D)}}).concat(o["sys_h5_quest.sgs"].root.Task.filter(S=>S.ClientTimeStart>=String(r)).map(({Id:S,Name:C,Desc:D,Rewards:P,Count:f,ClientTimeStart:h,ExtraRewards:p,ClientTimeEnd:y,SelectRewards:g})=>{let I=g?"/":",";return {id:S,time:h.slice(0,8)+"—"+y.slice(0,8),desc:"【"+C+"】"+D,reward:[P+","+f,...(p==null?void 0:p.split(";"))??[]].map(b).join(I)}})),T=o["sys_h5_task.sgs"].TaskAll.TaskNode.filter(({duration:S,quest_id:C})=>C&&(!S||(S==null?void 0:S.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(r))).reduce((S,{duration:C,quest_id:D,name:P})=>{var p,y;let f=D.split(";").map(g=>parseInt(g)).filter(g=>g>0),h=(((y=C||((p=w.find(({id:g,time:I})=>f.includes(g)&&I))==null?void 0:p.time))==null?void 0:y.slice(0,8))+"·【"+(P==null?void 0:P.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return f.forEach(g=>{g!=""&&(S[g]=h);}),S},{});w.forEach(({id:S,...C})=>{let D=T[S]??String(r)+"·【其它任务】";G.gxjson[D]||(G.gxjson[D]=[]),G.gxjson[D].push(C);}),(S=>{var C;S.length>1&&(G.gxjson[((C=S[0].time)==null?void 0:C.slice(0,8))+"·兑换【占星秘宝】"]=S);})(o["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter(({timeRange:S})=>(S==null?void 0:S.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).map(({Id:S,counts:C,exchangecount:D,timeRange:P})=>({time:P==null?void 0:P.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,(f,h,p)=>h+"-"+p),desc:"消耗·星石币*"+D,reward:b(S+","+C)}))),o["ff_exchange_new.sgs"].root.Common.filter(({duration:S})=>(S==null?void 0:S.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).forEach(({itemid:S,goods:C,rewardstype:D,duration:P})=>G.gxjson[P.slice(0,8)+"·【"+ve(S).name+"】兑换"]=C.sort((f,h)=>h.exchangecount1-f.exchangecount1).map(({exchangecount1:f,Id2:h,counts:p,limitcounts:y,itemid2:g,exchangecount2:I})=>{let _=String(p).split(";");return {time:P.slice(0,8)+"—"+P.slice(16,24),desc:"消耗·"+b((g??S)+","+(I??f))+(y?",限"+y+"次":""),reward:String(h).split(";").map((F,B)=>b(F+","+_[B])).join("/")}})),o["sys_treasure_chest.sgs"].root.Common.filter(({duration:S})=>(S==null?void 0:S.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).forEach(({itemid:S,rewards:C,duration:D})=>G.gxjson[D.slice(0,8)+"·开启【"+ve(S).name+"】"]=C.map(P=>({time:D.slice(0,8)+"—"+D.slice(16,24),desc:"开启·"+b(S+","+P.counts),reward:JSON.stringify(P).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter(f=>(f==null?void 0:f.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0).map(f=>f.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,(h,p,y)=>b(p)+(y?"["+b(y)+"]":""))).join(P.rewardstype==2?"/":",")})));let N=[],Q=[],A=[],z=o["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter(({BeginTime:S})=>S>String(r)).flatMap(({DropId:S,ExchangeId:C,BeginTime:D,EndTime:P})=>{let f=D.slice(0,8)+"-"+P.slice(0,8),h=(u.get(Math.abs(S))??[]).map(ve).filter(({name:I})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(I)),p=h.map(({ID:I})=>I),g=(u.get(Math.abs(C))??[]).map(ve).filter(({ID:I,name:_,TypeID:F})=>p.includes(I)||!(F==43&&(_!=null&&_.endsWith("动态套装"))||F==36&&(_!=null&&_.startsWith("文和乱武*"))||F==25&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(_)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(_))).map(({ID:I,name:_})=>{let F=h.findIndex(({name:B})=>B==_);return F>=0&&p.splice(F,1,I),I});return Array.from(new Set([...p,...g])).map(ve).map(({ID:I,TypeID:_,PicID:F,name:B,returngoods:re,usedeffect:Z,info:se,fragment:fe})=>{var Y;let ue={time:f,name:B,price:[...p.includes(I)?["四角"]:[],...g.includes(I)&&fe?[fe+"夺宝碎片"]:[]].join("/"),...(Ce=>Ce&&{desc:Ce})(["祈福灯","圣魂玄晶","枭雄金印"].includes(B)?"":re&&re!="0"&&re.split(";").filter(Ce=>(Ce==null?void 0:Ce.search(/[0-9]+,[0-9]+/))>=0).map(b).join(";")||(Z==null?void 0:Z.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&Z.replace(/([0-9]+),[0-9,]+/g,b)||Z&&L(Z)||se)};return (_==36||((Y=ue.name)==null?void 0:Y.search(/\*[^0-9]/))>=0)&&A.push({name:B,res:F}),ue})});z.length&&(G.gxjson.夺宝行动=z,z=z.map(({name:S})=>S));let ae=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(S=>{var C;return ((C=S.x)==null?void 0:C.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)&&S.a!=834901}).map(({a:S,ah:C,l:D})=>{if(D&&D.replace(/([0-9]+),[0-9,]+/g,(P,f)=>(!C&&![100301,200101,1325201].includes(parseInt(f))&&N.push(parseInt(f)),P)),C)Q.push(S);else return S}).filter(Boolean).concat(N).sort((S,C)=>S-C).filter((S,C,D)=>C==0||S!=D[C-1]);Array.from(new Set(o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter(S=>S.SellTime>String(r)).map(S=>S.baseID).concat(ae.concat(ae.filter((S,C,D)=>S-D[C-1]>1e3&&D[C+1]-S<1e3).map(S=>o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(C=>C.a-S>0&&C.a-S<1e4).map(C=>C.a)).reduce((S,C)=>[...S,...C],[])).sort((S,C)=>S-C)))).map(S=>ve(S)).filter(S=>S&&![...z,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(S.name)).forEach(({ID:S,TypeID:C,PicID:D,name:P,maxBuyCount:f,yuanbao:h,returngoods:p,SellTime:y,usedeffect:g,info:I,yuanbaoonly:_,fragment:F,exchange:B,shopvisual:re})=>{var se;let Z={...y&&{time:y.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,(fe,ue,Y)=>ue+"-"+Y)},name:P,...B!=null&&B.includes(",")?{price:b(B)}:re&&h!=999999&&{price:_?h+"通用元宝":h+"元宝",...f&&((fe,ue)=>parseInt(fe)>0?{max:ue+"个/"+(fe==1?"":fe)+"天"}:{})(...f.split(";"))},...(fe=>fe&&{desc:fe})(["祈福灯","圣魂玄晶","枭雄金印"].includes(P)?"":p&&p!="0"&&p.split(";").filter(fe=>(fe==null?void 0:fe.search(/[0-9]+,[0-9]+/))>=0).map(b).join(";")||(g==null?void 0:g.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&g.replace(/([0-9]+),[0-9,]+/g,b)||g&&L(g)||I)};(C==36||((se=Z.name)==null?void 0:se.search(/\*[^0-9]/))>=0)&&A.push({name:P,res:D}),String(Z.price).includes("夺宝")||String(Z.price).includes("灵宝")?(G.gxjson.夺宝行动||(G.gxjson.夺宝行动=[]),G.gxjson.夺宝行动.push(Z)):Z.max?(G.gxjson.限购礼包||(G.gxjson.限购礼包=[]),G.gxjson.限购礼包.push(Z)):(G.gxjson.其它道具||(G.gxjson.其它道具=[]),G.gxjson.其它道具.push(Z));}),(X=G.gxjson.其它道具)==null||X.sort((S,C)=>S.price&&!C.price?-1:1),Q.length&&(G.gxjson.祈福武将=Object.entries(Q.map(S=>ve(S)).filter(({returngoods:S})=>{var C;return ((C=ve(S.split(";")[1].split(",")[0]))==null?void 0:C.TypeID)==25}).reduce((S,{name:C,lotteryPrice:D})=>(S[D]||(S[D]=[]),S[D].push(C.replace("武将","").replace(/\(.*?\)/g,"")),S),{})).sort((S,C)=>C[0]-S[0]).map(([S,C])=>({price:S+"同心结",reward:C.join("/")}))),(S=>{S.length&&(G.gxjson.祈愿台=S);})(o["ff_tiangong.sgs"].root.Drop.reduce((S,{Id:C,ItemId:D,MaxCount:P})=>(S[C]||(S[C]=[]),(f=>{["欢乐豆","手气卡","点将卡","灵宝经","换将卡","诏令天","校尉将","朱砂*","灵宝经","桃花*","功勋*","传世玉","大将军","夺宝券","水晶碎","圣魂玄"].includes(f.slice(0,3))||S[C].push(f);})(b(D+","+P)),S),[]).reduce((S,C)=>{if(C){let D=S.find(({reward:P})=>C.includes(P));D&&(D.reward=C.join(","));}return S},o["ff_tiangong.sgs"].root.Common.slice().reverse().reduce((S,{Id:C,Name:D,bigrewards:P,Duration2:f})=>{let h=parseInt(f.slice(0,8))+1;if(h<parseInt(r))return S;let p=S.find(({name:y})=>y==D);return p?p.time+=";"+h:S.push({name:D,reward:et[P],time:String(h)}),S},[]).reverse()));const de=(()=>{var S={};return function(C){return S[C]?S[C]:S[C]=o["ff_chess.sgs"].root.NewChess.filter(({PlanId2:D})=>D==C).reduce((D,{MaxFloors:P})=>D+parseInt(P),0)}})();(S=>{S.length&&(G.gxjson.绘卷=S);})(o["ff_chess.sgs"].root.Common.reduce((S,{GrandPrize:C,PlanID2:D,duration2:P})=>{var h;let f=parseInt(P.slice(0,8))+1;return f<parseInt(r)||S.push({reward:(h=ve(C))==null?void 0:h.name,预估价格:de(D)/2>>0,time:f+"-"+P.slice(16,24)}),S},[])),G.gxjson.新品皮肤=A.map(({name:S})=>({name:S})),Object.entries(G.gxjson).forEach(([S,C])=>G.gxjson[S]=Array.isArray(C)?C.map(D=>c(D,d)):c(C,d)),(!n||n=="guanxing")&&e(Promise.all(A.map(({name:S,res:C})=>me(C,S))).then(S=>G.gxjson.新品皮肤=S.filter(Boolean)).then(()=>(Object.entries(G.gxjson).forEach(([S,C])=>G.gxjson[S]=Array.isArray(C)?C.map(D=>c(D,d)):c(C,d)),G.gxjson)));}e(o),console.warn("[initMap] Config_w 解析完成");})))}function Ge(...n){return new Function("_a","_b","return "+n.map(e=>"((_a."+e+")-(_b."+e+"))").join("||"))}var ni=`<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;margin:0;padding:0;font-size:13px;width:100%;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-size:13px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center}.nav1{font-weight:bolder;height:20px;width:100%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, '座位号丨武将');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:'牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards{padding:5px;height:auto;width:94%;float:right;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.knownCards:after{text-align:center;content:'场上手牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:'权变牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:'宴戏牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:'牌堆类型详情';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:'第一张为牌堆顶';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:'第一张为牌堆底';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:10px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 10px;display:flex;width:100%}input:checked+.slider+.status:before{content:'开'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, '30');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, '关')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",'Noto Color Emoji';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url('https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed}transformOrigin = 0 0 .sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:'...';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.centerUI{width:18px;height:18px;background-color:#4e251f;border-radius:4px;display:flex;border:1px solid rgb(110 107 91);justify-content:center;align-items:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.3);visibility:hidden}.centerUI::after{content:"!";font-family:Arial,sans-serif;font-size:15px;color:#fff;font-weight:700}.centerUI:hover{background-color:rgb(134 74 58)}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div id="nav1"></div><div class="nav1" id="phrase">当前阶段提示</div></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:'神诸葛亮丨一'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:'卧龙诸葛丨二'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:'天候孔明丨三'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:'诸葛亮丨四'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:'武诸葛亮丨五'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:'卧龙凤雏丨六'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:'界卧龙诸葛丨七'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:'界诸葛亮丨八'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><div class="sha" id="sha">剩余出杀次数：指记入次数的杀</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉弥</button> <button class="cardType">天野</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机<span class="question-mark" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;打开开关即可助力脚本作者&#10;领取限时至十月九日的体验&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;">?</span></span> <label class="switch"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷<span class="question-mark" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;">?</span></span> <label class="switch"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">加入互助<span class="question-mark" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;">?</span></span> <label class="switch"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">皮肤体验<span class="question-mark" data-tooltip="该功能仅限于体验皮肤&#10;喜欢还请购买支持画师&#10;此功能随时失效！！！">?</span></span> <label class="switch"><input id="skinSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="skinStateButton" style="display:none"><span class="explanation">动态皮肤</span> <label class="switch"><input id="skinStateSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽动态<span class="question-mark" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开">?</span></span> <label class="switch"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框 <span class="question-mark" data-tooltip="明牌展示在武将下面">? </span></span><label class="switch"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效 <span class="question-mark" data-tooltip="其他角色显示五阶特效">? </span></span><label class="switch"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到 <span class="question-mark" data-tooltip="自动领取打卡签到的奖励">? </span></span><label class="switch"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡 <span class="question-mark" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取">? </span></span><label class="switch"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">领武将包<span class="question-mark" data-tooltip="每天登录，自动领取免费的武将包">?</span></span> <label class="switch"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">公会三敲<span class="question-mark" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉">?</span></span> <label class="switch"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">月卡奖励<span class="question-mark" data-tooltip="自动领取月卡奖励&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树<span class="question-mark" data-tooltip="每天登录自动砍树&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗<span class="question-mark" data-tooltip="跳过领取武将&#10;MVP结算&#10;出货弹窗&#10;加快氪金速度">?</span></span> <label class="switch"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码&#13;&#10;当前激活码未激活"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" target="_blank">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/PBA8Mt4rCI" target="_blank">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://greasyfork.org/zh-CN/scripts/448004-%E4%B8%89%E5%9B%BD%E6%9D%80%E6%89%93%E5%B0%8F%E6%8A%84/versions" target="_blank">查看历史更新</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>`;let Pe=null;const qe=" "+"2.9.31.3".replace(/^2\.9\./,""),ii="自动任务会有周年庆弹窗，暂时取消自动任务".replace(/；/g,"<br>");var Zt,Xt;(Xt=(Zt=document.getElementById("createSkinIframeSource"))==null?void 0:Zt.contentWindow)==null||Xt.document;function si(){return window.WDVerSion="1.0.0",window.padding=pe.padding||0,window.addEventListener("resize",pn),new Promise((n,e)=>{function t(){var i;typeof JSZipUtils<"u"&&typeof CtrUtil<"u"&&typeof((i=CtrUtil==null?void 0:CtrUtil.Ctr)==null?void 0:i.Ofb_Dec)<"u"&&typeof SystemContext<"u"&&document.getElementById("bgDiv")?gn(!0).then(n):setTimeout(t,1e3);}t();})}function ai(){var n,e,t,i;return window.removeEventListener("resize",pn),window.removeEventListener("resize",xn),window.removeEventListener("SGSresize",mn),(n=document.getElementById("seatUI"))==null||n.remove(),(e=document.getElementById("rogueUI"))==null||e.remove(),(t=document.getElementById("cusBGDiv"))==null||t.remove(),(i=document.getElementById("createIframe"))==null||i.remove(),W.isFrameAdd=!1,!0}function pn(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function mn(){window.dispatchEvent(new Event("resize"));}let Xe;function xn(){Xe&&clearTimeout(Xe),Xe=setTimeout(()=>{oi(),Xe=null;},500);}async function gn(n=!1){var e,t,i,s,r;if(n&&((e=document.getElementById("seatUI"))==null||e.remove(),(t=document.getElementById("rogueUI"))==null||t.remove(),(i=document.getElementById("cusBGDiv"))==null||i.remove(),(s=document.getElementById("createIframe"))==null||s.remove(),W.isFrameAdd=!1),!W.isFrameAdd){window.addEventListener("resize",xn),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(a){this._gameScreenType!==a&&(this._gameScreenType=a,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(a){this._gameScale!==a&&(this._gameScale=a,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",mn);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,(r=document.querySelector("link[rel=stylesheet]"))==null||r.remove();}catch{}return di(),ri(),hi(),W.isFrameAdd=!0,ti(!0)}}function ri(){var n=document.getElementById("bgDiv");if(n){var e=document.createElement("div");e.id="cusBGDiv",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.zIndex="0",e.style.pointerEvents="none";var t=document.createElement("video");t.className="bg-ani",t.id="sgsBgVideo",t.autoplay=!0,t.loop=!0,t.muted=!0,t.preload="auto",t.style.setProperty("object-fit","fill","important");var i=document.createElement("img");i.className="bg-ani",i.id="sgsBgIMG",i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.style.zIndex="1",i.style.position="absolute",i.style.top="0",i.style.left="0",e.appendChild(t),e.appendChild(i),n.appendChild(e),window.dispatchEvent(new Event("resize"));}}function oi(){if(!SystemContext)return;H.width=SystemContext.gameWidth*SystemContext.gameScale>>0,H.height=SystemContext.gameHeight*SystemContext.gameScale>>0,H.scale=SystemContext.gameScale,H.seatUIs&&H.seatUIs.length>0&&(yn(),at());let n={width:(SystemContext.gameWidth*SystemContext.gameScale>>0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale>>0)/window.devicePixelRatio};pe.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let e=document.getElementById("cusBGDiv"),t=document.getElementById("sgsBgVideo"),i=document.getElementById("sgsBgIMG"),s=document.getElementById("seatUI"),r=document.getElementById("rogueUI"),a=document.getElementById("centerUI"),o=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;e&&(e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,e.style.left=window.innerWidth/2+"px",e.style.top=o+"px"),t.width=n.width,t.height=n.height,t.style.left=window.innerWidth/2+"px",t.style.top=o+"px",i.width=n.width,i.height=n.height,s.style.width=`${n.width}px`,s.style.height=`${n.height}px`,s.style.left=window.innerWidth/2+"px",s.style.top=o+"px",r.style.width=`${n.width}px`,r.style.height=`${n.height}px`,r.style.left=window.innerWidth/2+"px",r.style.top=o+"px",H.centerX=window.innerWidth>n.width?n.width/2:window.innerWidth/2,H.centerY=n.height/2,a.style.left=210*SystemContext.gameScale/window.devicePixelRatio+"px",a.style.top=52*SystemContext.gameScale/window.devicePixelRatio+"px",H.cities.length>0&&ht(H.cities);}function yn(){const n={ScaledHeight:H.selfSeatUiUnscaledHeight*H.scale};let e=H.unscaledWidth*H.scale,t=H.unscaledHeight*H.scale;H.ScaleWidth=e,H.ScaleHeight=t;let i=H.height,s=H.width;var r=n.ScaledHeight,a=0,o=0,c=H.seatUIs.length;if(c!=1){a=e,o=t;var d=[];d=H.seatUIs;var m=d.length-1,l=0,u=0,x=0;m<3?u=m:m==3?u=1:m==4||m==6?u=2:(m==5||m==7)&&(u=3),l=m-u>>1,x=m-l-u,M.isShanHeTu&&c==3&&H.friendGeneral==1&&(u=1,x=1);var b=1,v,L,E=0,V=0,X=0,w=0,T=H.rightBarWidth*H.scale,N=0;if(l>0){var Q=a,A=o*l;for(X=(i-r-A)*.25>>0,H.verticalGap=X,A+=(l-1)*X,v=b+l,E=s-Q-H.paddingRight*H.scale-T-N,V=(i-r-A-H.paddingTop*H.scale-H.paddingBottom>>1)+(H.paddingTop+10)*H.scale+A+H.leftRightTop;b<v;b+=1)L=d[b],V-=t,L.posX=(E-5>>0)/window.devicePixelRatio,L.posY=(V+t>>0)/window.devicePixelRatio,L.DisplayLocation="Right",V-=X;}if(u>0){var z=a*u;for(w=(s-T-z)*.07>>0,H.horizontalGap=w,z+=(u-1)*w,v=b+u,E=(s-z-T)/2+z+(s<=1600?H.paddingLeftTopExtra:0),V=(H.paddingTop+10)*H.scale;b<v;b+=1)L=d[b],E-=e,L.posX=(E>>0)/window.devicePixelRatio,L.posY=(V+t>>0)/window.devicePixelRatio,L.DisplayLocation="Top",E-=w;}var ae=0;if(x>0){var de=o*x;for(X=(i-r-de)*.25>>0,de+=(x-1)*X,v=b+x,E=H.paddingLeft*H.scale,V=(i-r-de-H.paddingTop*H.scale-H.paddingBottom>>1)+(H.paddingTop+10)*H.scale+H.leftRightTop;b<v;b+=1)L=d[b],L&&(L.DisplayLocation="Left",L.posX=(E+ae>>0)/window.devicePixelRatio,L.posY=(V+t>>0)/window.devicePixelRatio),V+=o+X;}}}function kt(n){if(H.seatUIs=[],at(),n===null)return;let e=M.sequence(M.mySeats[0]);H.seatUIs=e.map(t=>({actualSeatID:M.getOrder(t)+1})),yn(),at();}function li(){document.getElementById("sgsBgIMG").src="https://web.sanguosha.com/10/pc/res/assets/runtime/general/maxBig/604701.png",setTimeout(function(){document.getElementById("sgsBgIMG").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";},2e4);}function ci(){var n=document.createElement("div");n.id="sidebarHint",n.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(n);}function di(){var n=document.createElement("div");n.id="seatUI",n.style.position="absolute",n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)",n.style.pointerEvents="none",n.style.display="";var e=document.createElement("div");e.id="rogueUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="",pe.seatUISwitch?n.style.display="block":(n.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach(i=>i.style.display="none"));var t=document.createElement("div");t.id="centerUI",t.className="centerUI",t.style.position="absolute",t.style.pointerEvents="auto",t.onmouseover=function(){document.querySelectorAll("div.city").forEach(s=>{s.classList.remove("hide"),s.classList.add("show");});},t.onmouseout=function(){document.querySelectorAll("div.city").forEach(s=>{s.classList.remove("show"),s.classList.add("hide");});},e.appendChild(t),document.body.appendChild(n),document.body.appendChild(e);}function ui(){for(let n=0;n<=7;n++){let e="or"+(n+1);document.getElementById(e).style.display="block";}}function fi(n){for(let e=7;e>=n;e--){let t="or"+(e+1);document.getElementById(t).style.display="none";}}function hi(){let n=document.getElementById("createIframe");if(!n){n=document.createElement("div"),n.id="createIframe",n.id="createIframe",n.className="createIframe",n.style.position="fixed",n.style.overflow="hidden",n.style.resize="vertical",n.style.top="31px",n.style.right="155px",n.style.width="230px",n.style.height="500px",n.style.zIndex="10000000000",n.style.display="flex",n.style.flexDirection="column",n.style.color="#f2de9c",n.style.background="rgb(35, 32, 29)",n.style.userSelect="none",n.style.textAlign="left",n.style.transition="height 200ms",n.style.borderRadius="8px",n.style.transformOrigin="top right",n.style.transform="translate(0px, 0px)";var e=document.createElement("p");e.id="header",e.className="header",e.style.margin="1px",e.style.userSelect="none",e.style.cursor="grab",e.style.display="flex",e.style.alignItems="center",e.style.fontSize="20px",e.style.borderRadius="5px";var t=document.createElement("span");t.id="title",t.style="margin-right: auto;",t.innerText="三国杀打小抄"+qe,n.appendChild(e),n.onmouseover=function(){document.querySelectorAll("div.city").forEach(d=>{d.classList.remove("hide"),d.classList.add("show");});},n.onmouseout=function(){document.querySelectorAll("div.city").forEach(d=>{d.classList.remove("show"),d.classList.add("hide");});};var i=document.createElement("button");i.innerText="-",i.id="toggle-me",i.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",i.type="button",i.addEventListener("mouseover",function(){i.style.backgroundColor="rgb(130, 30, 30)";}),i.addEventListener("mouseout",function(){i.style.backgroundColor="rgb(107, 30, 30)";}),e.appendChild(t),e.appendChild(i),localStorage.getItem("DXCVersion")!=qe&&(Ze(`小抄已经更新到${qe}<br>${ii}`,"acTooltip",1e4,"green"),localStorage.setItem("DXCVersion",qe)),document.body.appendChild(n),Pe=document.createElement("div"),Pe.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",Pe.id="iframe-source",n.append(Pe),Pe.innerHTML=ni,Pe.querySelectorAll("script").forEach(c=>{const d=document.createElement("script");c.src?(d.src=c.src,d.async=c.async):d.textContent=c.textContent,document.body.appendChild(d),c.remove();});const r=document.querySelectorAll('input[id$="Switch"]'),a=document.querySelectorAll(".slider");r.forEach((c,d)=>{const m=a[d];c.addEventListener("change",l=>{const u=l.target.checked;try{gsap.to(m,{duration:.4,ease:"power2.inOut",css:{"--slider-position":u?"30px":"2px"},onStart:()=>{gsap.to(m,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(m,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(m,{duration:.4,ease:"power2.inOut",boxShadow:u?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:u?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(x){console.error("GSAP animation failed:",x);}});}),document.querySelectorAll(".panel-header").forEach(c=>{c.addEventListener("click",function(){const d=this.nextElementSibling;this.classList.toggle("active"),d.style.maxHeight?d.style.maxHeight=null:d.style.maxHeight=d.scrollHeight+"px";const m=new MutationObserver(()=>{d.style.maxHeight&&(d.style.maxHeight=d.scrollHeight+"px");});m.observe(d,{childList:!0,subtree:!0,characterData:!0}),d.style.maxHeight||m.disconnect();});}),document.querySelectorAll(".laya-header")[0].click(),document.querySelectorAll(".question-mark").forEach(function(c){c.addEventListener("mouseenter",function(d){let m=document.createElement("div");m.classList.add("tooltip","top"),m.textContent=c.getAttribute("data-tooltip"),document.body.appendChild(m);const l=c.getBoundingClientRect();m.style.left=`${l.left+window.scrollX+l.width/2-m.offsetWidth/2}px`,m.style.top=`${l.top+window.scrollY-m.offsetHeight-8}px`,m.classList.add("visible"),c.addEventListener("mouseleave",function(){m.classList.remove("visible"),setTimeout(()=>{m.remove();},100);});});});}ci(),pi(),xi(),zn();}function pi(){var n=document.getElementById("toggle-me");n.onclick=function(){W.closeIframe=!W.closeIframe,W.closeIframe?(document.getElementById("iframe-source").style.display="none",n.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",pe.padding&&(pe.padding=0,window.dispatchEvent(new Event("resize")),Ft=0,Qt=0,draggable.style.transform=`translate(${Ft}px, ${Qt}px)`)):(document.getElementById("iframe-source").style.display="block",n.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+qe,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("change",t=>{var s;if(t.target.checked){var i=(s=document.getElementById("inviteName"))==null?void 0:s.value;typeof i=="string"&&i.length!==0&&(W.inviteName=i,ze("INVITE_NAME",W.inviteName),oe(`为目前机器所有账号绑定助力${W.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),nn(W.inviteName.trim()||W.nickname);}else Yt("INVITE_NAME");}),document.getElementById("guanxing").onmousedown=function(){const t=jt(ct(G.gxjson),"myWindowGuanXing","观星");qt(t);},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,St(W.userID);we.req;)await ge(500);this.disabled=!1,W.v&&await On();const t=jt(Sn(JSON.stringify(we)),"myWindowGameRecord","游戏记录");qt(t);},document.getElementById("mizhu").onmousedown=function(){let t=document.querySelectorAll(".mizhu");M.mySeats.length<=1?(t.forEach(i=>i.style.display="none"),Pt(Array.from($.shoupai(M.mySeats[0]),i=>ie[i].number))):M.mySeats.forEach((i,s)=>{t[s].style.display="block",t[s].innerText=M.name(i),t[s].onclick=()=>{Pt(Array.from($.shoupai(i),r=>ie[r].number));},s==0&&t[s].click();});};function e(t,i,o){var r=t.target,a=r.checked,o=r.id;o==="autoBotSwitch"||o==="autoHGSwitch"||(pe[o]=a,o=="skinSwitch"&&a==!0?document.getElementById("skinStateButton").style.display="block":o=="skinSwitch"&&a==!1&&(document.getElementById("skinStateButton").style.display="none"),o=="seatUISwitch"&&a==!0?document.getElementById("seatUI").style.display="block":o=="seatUISwitch"&&a==!1&&(document.getElementById("seatUI").style.display="none"));}if(window.padding==0){console.warn("closesidebar");var n=document.getElementById("toggle-me");console.warn("toggle"),n.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach(t=>t.addEventListener("change",e)),document.getElementById("ACSubmit").onclick=en,mi();}function mi(){let n=document.getElementById("openStore");n.onclick=function(){O.get("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),Ze("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function jt(n,e,t){let i=document.getElementById("myWindow"+e);if(i)return i.style.display="block",i;const s=document.createElement("div");s.classList.add("window"),s.id=e;const r=document.createElement("div");r.classList.add("window-header");const a=document.createElement("div");a.classList.add("title"),a.innerText=t;const o=document.createElement("div");o.classList.add("controls");const c=document.createElement("button");c.innerText="⬜";const d=document.createElement("button");d.innerText="❌",o.appendChild(c),o.appendChild(d),r.appendChild(a),r.appendChild(o);const m=document.createElement("iframe");return m.classList.add("window-content"),m.srcdoc=`
    <html>
      <head><meta charset="utf-8" /><title>${e}</title></head>
      <body>${n}</body>
    </html>
  `,s.appendChild(r),s.appendChild(m),document.body.appendChild(s),{windowDiv:s,maximizeBtn:c,closeBtn:d}}function qt(n){const{windowDiv:e,maximizeBtn:t,closeBtn:i}=n;let s=!1;t.addEventListener("click",()=>{s?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),s=!s;}),i.addEventListener("click",()=>{e.style.display="none";});}let Ft=0,Qt=0;function xi(){const n=document.getElementById("header"),e=document.getElementById("createIframe"),t=document.getElementById("sidebarHint");let i=!1,s=0,r=0,a=0,o=0,c=!1;const d=u=>{n.style.cursor="grabbing",i=!0,s=u.clientX||u.touches[0].clientX,r=u.clientY||u.touches[0].clientY,e.style.userSelect="none",e.style.willChange="transform",document.addEventListener("mousemove",m),document.addEventListener("mouseup",l),document.addEventListener("touchmove",m),document.addEventListener("touchend",l);};n.addEventListener("mousedown",d),n.addEventListener("touchstart",d);function m(u){if(!i)return;t.style.display="flex";const x=u.clientX||u.touches[0].clientX,b=u.clientY||u.touches[0].clientY,v=x-s,L=b-r;a+=v,o+=L,pe.padding&&(pe.padding=0,e.style.height="500px",window.dispatchEvent(new Event("resize"))),c||(c=!0,requestAnimationFrame(()=>{e.style.transform=`translate(${a}px, ${o}px)`,c=!1;})),window.innerWidth-x<25?t.style.backgroundColor="rgba(55, 40, 32, 1)":t.style.backgroundColor="rgba(55, 40, 32, 0.8)",s=x,r=b;}function l(u){t.style.display="none",n.style.cursor="grab",i=!1,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",l),e.style.willChange="auto",window.innerWidth-(u.clientX||u.touches[0].clientX)<25&&n.id==="header"&&(pe.padding||(W.closeIframe&&document.getElementById("toggle-me").click(),pe.padding=232,window.dispatchEvent(new Event("resize")),a=0,o=0,e.style.transform=`translate(${a}px, ${o}px)`));}}function wt(n,e){let{name:t,number:i,color:s}=ie[n??0];if(n!==void 0&&(!n||!t||ce.name[t]===void 0))return;let r=$.unknown;(n?[t]:Object.keys(ce.name)).forEach(a=>{let o=r.filter(d=>ce.name[a].has(d)).length,c=document.getElementById(a);c.textContent=o>1?o+a:a,c.disabled=o<=0;}),(n?[5,6].filter(a=>ce.color[a].has(n)).concat(s):[1,2,3,4,5,6]).forEach(a=>{var d;let o=r.filter(m=>ce.color[a].has(m)).length,c=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][a]);c.innerHTML=(d=c.innerHTML)==null?void 0:d.replace(/-?[0-9]+/,String(o));}),n?ce.query.has(n)&&ce[n].plot(e==0?0:1):ce.draw();}function gi(){for(let n=1;n<=3;n++)document.getElementById("type"+n).innerHTML="";for(let n of document.getElementsByClassName("order-body"))n.innerHTML="",n.title="一二三四五六七八"[n.id.slice(-1)]??n.title;for(let n in ce.name){let e=document.getElementById("type"+ie[[...ce.name[n]][0]].type),t=document.createElement("button");t.id=n,t.className="cardType",t.innerText=n,t.onclick=()=>{ce.queryone("name",n);},e.appendChild(t);}H.seatUIs=[],at(),pt();}var yi=[1562902854,1678425373];const Kt=function(){const n=typeof window.requestIdleCallback=="function";return console.warn("Use IdleCallback",n),function(e,t=500){if(n){const i=window.requestIdleCallback(e),s=setTimeout(()=>{window.cancelIdleCallback(i),e();},t);return ()=>clearTimeout(s)}else return setTimeout(e,0)}}();function bi(n){var s,r,a,o,c,d,m,l,u,x,b,v,L,E,V,X,w,T,N,Q,A,z,ae,de,me,S;try{if(!n)return;if((s=n.startsWith)!=null&&s.call(n,"SwitchScene"))Kt(()=>{var R,j;let k=O.scene=n.slice(n.lastIndexOf("-")+1);U.end(st.includes(k)),k=="TableScene"?W.autoBotSwitch&&le.delay("auto",()=>Me(()=>W.autoBotSwitch&&O.readyStart(),20),8e3):k=="HallScene"?W.autoBotSwitch===!0&&(oe("5秒后开始酒馆自动挂机"),le.delay("auto",()=>Me(()=>W.autoBotSwitch===!0&&O.newRoom(),10,1e3),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some(ne=>n.endsWith(ne))&&(W.autoBotSwitch===!0&&((R=document.getElementById("autoBotSwitch"))==null||R.click()),W.autoBotSwitch===9&&((j=document.getElementById("autoHGSwitch"))==null||j.click()));});else if(pe.skipWindowSwitch&&["GeneralOpenResultWindow","GetPropSpecialWindow","GameMvpWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin"].includes(n)){let k=n=="GetPropSpecialWindow"?5:1;Me(()=>ye(()=>O.find(null,n),10,200*k).then(R=>{var j,ne;if(Array.isArray(R))R.forEach(K=>{var te,q;(te=K==null?void 0:K.Hide)==null||te.call(K),(q=K==null?void 0:K.Close)==null||q.call(K);});else if(R!=null&&R.Close)(j=R.Hide)==null||j.call(R),(ne=R.Close)==null||ne.call(R);else return "done"}),k,1e3);}else if((r=n.endsWith)!=null&&r.call(n,"View"))n=="TreasureView"&&Un();else if((a=n.endsWith)!=null&&a.call(n,"Window"))n=="MailWindow"?an():n=="ChangeSkinWindow"?pe.skinSwitch&&ye(()=>O.find("WindowLayer","ChangeSkinWindow","selectView","itemList"),50,100).then(k=>(k==null?void 0:k.length)>1&&(k==null?void 0:k.forEach(R=>{R.dynamicState=R.hasSkin?R.dynamicState?-1:-2:-3,R.hasSkin=R.bg.mouseEnabled=!0,R.blackbg.visible=R.isUsing=!1,R.timeBg.visible=R.composeBg.visible=R.composeIcon.visible=R.composeTxt1.visible=R.composeTxt2.visible=R.composeTxt.visible=R.timeLimiteTxt.visible=!1;}))):n=="SelectSkinWindow"?W.autoBotSwitch!=9&&ye(()=>O.find("WindowLayer",n)).then(k=>k==null?void 0:k.Close()):n=="SelectCardWindow"?O.flag===!0?Lt(!0,!0):W.v&&Lt():n=="WuGuFengDengWindow"&&O.flag===!0?O.wugu():["SelectGeneralWindow","SelectGeneralHappyWindow"].includes(n)&&W.autoBotSwitch?setTimeout(()=>{ye(()=>O.find("WindowLayer",n)).then(k=>{var ne;if(!((ne=k==null?void 0:k.generalUis)!=null&&ne.length))return;let R=-1,j=null;k.generalUis.some(K=>{var q;if(K!=null&&K.dianJiangSk)return j=K;let te=((q=K==null?void 0:K.generalInfo)==null?void 0:q.quality)||0;te>R&&(R=te,j=K);}),j==null||j.sureBtnClick(),W.autoBotSwitch!=9&&setTimeout(()=>j==null?void 0:j.sureBtnClick(),500);});},3e3):n=="AdPushWindow"&&ye(()=>O.find("WindowLayer",n)).then(k=>k.curViewList[0].closeClicker(),oe("小抄已经为你跳过广告和祈愿台出货播报"));else if(n.className===void 0&&!["ClientGeneralSkinReq"].includes((o=n.constructor)==null?void 0:o.name))return;let{ProtoObj:C,className:D,SeatID:P,SrcSeatID:f,targetSeatID:h,SpellID:p,Param:y,Params:g,Datas:I,DataCount:_,CardCount:F,CardIDs:B,FromID:re,FromZone:Z,FromPosition:se,FromZoneParam:fe,ToID:ue,ToZone:Y,ToPosition:Ce,ToZoneParam:vt,MoveType:Ae,Type:Re}=n;if(D||(D=(c=n.constructor)==null?void 0:c.name),!W.userID&&n.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(D)){if(Object.assign(W,{userID:n.userID,nickname:n.Nickname||W.nickname||"",account:n.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||W.account||""}),W.UsedGeneralSkinID=Be(W.account+"::UsedGeneralSkinID",W.UsedGeneralSkinID),yi.includes(W.userID))return;Promise.all([gn(),ye(()=>{var xe;const k=O.get("QldjChooseRuleWindow");let{clientId:R,nickname:j,guildID:ne,guildName:K,Level:te,vipLevel:q}=((xe=k==null?void 0:k.seat)==null?void 0:xe.playerInfo)||{};return O.del("QldjChooseRuleWindow"),R!=W.userID||!j||!K&&ne?null:(Object.assign(W,{nickname:j,guildID:ne,guildName:K,Level:te,vipLevel:q}),j)},30,1e3)]).then(()=>{pe.autoSignSwitch&&Pn(pe.autoSignSkipSwitch),_n(W.userID);let k=document.getElementById("uuid");k.innerText="id："+W.userID,k.onclick=function(){He(W.userID,!1),k.innerText="复制成功",setTimeout(()=>{k.textContent="id："+W.userID;},"500");};let R=document.getElementById("nickName");R.innerText="昵称："+W.nickname,R.onclick=function(){He(W.nickname,!1),R.innerText="复制成功",setTimeout(()=>{R.textContent="昵称："+W.nickname;},"500");};let j=document.getElementById("guildID");j.innerText="公会数字ID："+W.guildID,In(),document.getElementById("inviteName").setAttribute("placeholder",W.nickname||""),Be("INVITE_NAME")&&Be("INVITE_NAME")!=W.Nickname&&(document.getElementById("inviteName").value=Be("INVITE_NAME"));async function ne(K=2e4){var xe;let q=0;for(;!W.nickname||!W.userID;)if(await new Promise(We=>setTimeout(We,2e3)),q+=2e3,q>=K){oe("没办法获取到昵称用于助力 请重新登录");return}nn(((xe=W.inviteName)==null?void 0:xe.trim())||W.nickname);}pe.autoInviteSwitch&&ne();});}if(D=="ClientUserbaseinfoRep"&&n.clientID!=0&&n.clientID<=42e8){const k={username:n.clientID,playername:n.nickname};n.clientID!=W.userID&&Cn(k);}if(D=="ClientGeneralSkinRep"){M.mySeats[0]===void 0&&Re==5&&n.ClientID<10&&(M.setMyID(n.ClientID),kt());let k=n.GeneralSkinList[0],R=M.find(M.mySeats[0],k.GeneralID,!0);if(k.GeneralID!=R&&pe.skinStateBlockSwitch&&(k.state=0),pe.skinSwitch&&R){if([46,479].includes(k.GeneralID)&&li(),W.UsedGeneralSkinID.UsedGeneralSkinID[R]){let[j,ne]=String(W.UsedGeneralSkinID.UsedGeneralSkinID[R]).split("_").map(K=>parseInt(K));k.SkinID=j,k.skin_type=ne||0;}k.state=pe.skinStateSwitch?1:0;}}else if(D=="ClientGeneralSkinReq"){if(pe.skinSwitch){let{RealGeneralID:k,SkinID:R,state:j}=n.SkinItem;if(!(j<0))return;j<-2&&(n.SkinItem.SkinID=0),n.SkinItem.state=j<-1?0:1;let[ne,K]=String(W.UsedGeneralSkinID.UsedGeneralSkinID[k]).split("_").map(Number);if(ne==R)if(R in G.skinSP)R=R+"_"+G.skinSP[R][(K||1)%G.skinSP[R].length];else return;W.UsedGeneralSkinID.UsedGeneralSkinID[k]=R,ze(W.account+"::UsedGeneralSkinID",W.UsedGeneralSkinID);}}else if(D!="MsgReconnectGame"){if(D=="ClientOfficerInfoRep")W.curOfficerLv=n.curOfficerLv;else if(D=="decodeSSCChatmsgNtf")C.scene==11&&(C.scene=2);else if(D=="ClientRoleGeneralStarRep")pe.generalSwitch&&(n.Star>=0&&(n.Star=4),C.star>=0&&(C.star=4));else if(D=="ClientGameRecordInfoRep")(C==null?void 0:C.query_uid)==W.userID&&[26,35,44,5,7].includes(C==null?void 0:C.id)&&((d=we==null?void 0:we.req)==null||d.delete(C.id),((m=we.req)==null?void 0:m.size)==0&&delete we.req,(l=C==null?void 0:C.all_record)!=null&&l.length&&Gn(C.id||0,C.all_record));else if(D=="DbsCcUserGoodshintNtf")Re==2010&&typeof n.GoodsList=="object"&&Hn(n.GoodsList);else if(D=="decodeClientSecretInfoRep"){if(Object.keys(W.goods).length>0){G.currentSec=C.secId;for(let k of W.goods)un(G.currentSec,k.GoodsBaseID,k.ChangeCount,C.openTime),Dn(C.secId,k.GoodsBaseID,C.openTime,C.levelId,k.ChangeCount);}W.goods=[];}else if(D=="decodeClientTavernInfoRep"){let k=((u=C==null?void 0:C.tavern_info)==null?void 0:u.day_quest_finished_cnt)??0;if(W.autoBotStatus=30-k,W.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${W.autoBotStatus.toString().padStart(2,"0")}"`),k>=30){let R=document.getElementById("autoBotSwitch");R!=null&&R.checked&&!W.autoBotInfinite&&R.click(),oe(`今日已获得亲密度：${k}<br>恭喜你完成任务~`);}else k>0&&oe(`今日已获得亲密度：${k}还差 ${30-k} 亲密度<br>继续努力吧~`);}else if(D=="ClientSecKillInfoRep")Xn(n.Data);else if(D=="decodeRogueLikeDataSync")pt(C);else if(D=="ClientActivitysetDataRep")Kt(()=>{pt();});else if(D=="decodeRogueLikeGameOverRep")document.getElementById("chongsheng").innerText="重生是否发动：是";else if(D=="SmsgGamePlayerDead")W.autoBotSwitch===!0&&!W.autoBotInfinite&&P==M.mySeats[0]&&setTimeout(()=>{var k,R,j,ne,K;((j=(R=(k=O.gamescene)==null?void 0:k.seatContainer)==null?void 0:R.seatUIs)==null?void 0:j.reduce((te,q,xe,We)=>{var _e,Wt,It,Ct,Et;return te+(((_e=q==null?void 0:q.seat)==null?void 0:_e.figure)==We[0].seat.figure||(Ct=(It=(Wt=q==null?void 0:q.seat)==null?void 0:Wt.playerInfo)==null?void 0:It.showName)!=null&&Ct.includes("金")?1:-1)*((Et=q==null?void 0:q.seat)==null?void 0:Et.currentHp)},0))<0&&((K=(ne=O.gamescene)==null?void 0:ne.topMenu)==null||K.onClickBack(),ye(()=>O.find("PromptLayer","ConfirmWindow")).then(te=>{var xe;if(((xe=te==null?void 0:te.confirmData)==null?void 0:xe.title)!="退出游戏")return;te.checkBox.selected=!0;let q=te.confirmData.buttonArr.find(We=>We.label=="确定");q.callBack&&q.thisObject&&q.callBack.apply(q.thisObject,q.callBackParams),te.confirmData.clickClose&&te.RemoveFromParent();}));},1e4);else if(D=="MsgGameDealCharacter"){if(W.userID==1099193522&&typeof Allows<"u"&&typeof Re<"u"&&Re==1){var e=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+e;}}else if(D=="GsCUpdateRoleDataNtf")M.mySeats[0]===void 0&&n.StateID===58&&(M.setMyID(P),console.warn(D,"游戏人数："+M.size+", 我的座位："+M.mySeats,M.seatIDs));else if(D=="GsCFirstPhaseRole")P!==void 0&&(M.firstID=P,console.warn("先手位置:"+M.firstID));else if(D=="MsgGameRoundNtf")n.isPassed&&(U.isPassed=n.isPassed);else if(!(D=="MsgGameOver"||D=="ClientRecommendShopItemRep"||D=="ClientLeavetableRep")){if(D=="decodeRougeBaseInfoRep")H.friendGeneral=((x=C==null?void 0:C.friendGeneral)==null?void 0:x.length)??H.friendGeneral;else if(D=="MsgGamePlayCardNtf")U.ready(n.CardList);else if(D=="SmsgGameSetCharacter")M.mySeats[0]===void 0&&M.isDouDiZhu&&n.Infos.length==1&&M.setMyID(n.Infos[0].SeatID),n.Infos.forEach(({SeatID:k,CharacterID:R})=>{M.setGeneral(k,R);});else if(D=="GsCGuoZhanSetCharacter")(b=n.GeneralData)==null||b.forEach(({index:k,cardID:R})=>{M.setGeneral(P,R,k);});else if(D=="MsgGameTurnNtf")U.enter(n.TurnCnt);else if(D=="GsCGamephaseNtf")U.enter(null,n.Round,P);else if(D=="GsCUpdateRoleDataExNtf")U.currentID==P&&n.DataID==1&&Array.isArray(n.Datas)&&(document.getElementById("sha").innerText="剩余出杀次数："+Math.max(0,I[2]-I[1]));else if(D=="ClientHappyGetFriendHandcardRep")M.find(n.seatId,[7004,2087,3048])&&new $(n.seatId).show(n.Cards);else if(D=="PubGsCUseCard")M.mySeats[0]==P&&_t([n.CardID]),U.currentID==P&&M.find(U.currentID,[7003,2086,3047])&&n.useType==1&&n.fromZone!=1&&!n.isSend?(U.spellSpace[7011]||(U.spellSpace[7011]={count:0,color:new Set}),ie[n.CardID].type!=3&&U.spellSpace[7011].count++,U.spellSpace[7011].color.add(ie[n.CardID].c),document.getElementById("suit").innerHTML="["+U.spellSpace[7011].count+"]"+Array.from(U.spellSpace[7011].color).join("")):U.currentID==P&&M.find(U.currentID,[330,1068])&&n.useType==1&&!n.isSend&&(document.getElementById("suit").innerHTML=ie[n.CardID].cn);else if(D=="PubGsCUseSpell")p==3324&&(document.getElementById("chongsheng").innerText="重生是否发动：是"),M.mySeats[0]==P&&B.length==1&&_t(B),p==2143?(U.spellSpace[p]||(U.spellSpace[p]=new Set),B.forEach(k=>U.spellSpace[p].add(ie[k].c)),document.getElementById("suit").innerHTML=Array.from(U.spellSpace[p]).join("")):[3157,3511].includes(p)&&B.filter(k=>k>0).length!=0&&(f==M.mySeats[0]||W.v)?U[p]=B:([3193,3185,3138].includes(p)||p==3161)&&U.phase--;else if(D=="GsCRoleOptTargetNtf")if(p==945&&y==0&&(g==null?void 0:g.length)>0)Jn(g.map(k=>ie[k].number),W.v&&P==M.mySeats[0]);else if(p==3440&&M.mySeats.includes(P)&&y==0&&(g==null?void 0:g.length)>0)Re==28?Ut(g.map(k=>ie[k].number),new $(P).cards.map(k=>ie[k.id].number)):Ut();else if(p==11003&&y==0&&(g==null?void 0:g.length)>0&&f!=M.mySeats[0]&&pe.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+g.map(k=>ie[k].ncn).join("<br>")+"</span>";else if([7016,7017].includes(p)&&(g==null?void 0:g.length)>0&&(f==M.mySeats[0]||W.v)){U[p]=g.slice();let k=Array.from(new Set(new $(y).cards.map(({key:q})=>q))).sort((q,xe)=>xe-q),R=Array.from(new Set(new $(255,1).cards.slice(0,M.isGuoZhan?void 0:2).map(({key:q})=>q))).sort((q,xe)=>xe-q),{yes:j,no:ne}=g.reduce((q,xe)=>{let{keys:We}=ee.findKZ(xe);return k.find(_e=>We.includes(_e))!==void 0&&q.yes.push(xe),R.find(_e=>We.includes(_e))!==void 0&&q.no.push(xe),q},{yes:[],no:[]}),K=document.getElementById("result");ne.length==2?j=g.filter(q=>!ne.includes(q)):j.length==1&&(ne=g.filter(q=>!j.includes(q))),j.length==1||j.length==2?(K.innerHTML='<span class="textRes">【宴戏】'+j.map(q=>ie[q].ncn).join("/")+"</span>",U[p]=j.concat(g.filter(q=>!j.includes(q)))):K.innerHTML='<span class="textRes">【宴戏】未知</span>';let te=new $(y).show(U[p][0]).concat(new $(255,1,M.isGuoZhan?null:1).show(U[p].slice(-2)));j.length==3?ee.pack(te):j.length==1?ee.pack(te.slice(1,3)):j.length==2&&(ee.pack(te.slice(0,2)),ee.pack(te.slice(1,3))),g.forEach(q=>{K.innerHTML+='<span class="textRes'+(j.length<3&&j.includes(q)?" textRes":"")+'">'+ie[q].ncn+"："+[[j,"手牌"],[ne,"牌堆"]].filter(([xe,We])=>xe.includes(q)).map(([xe,We])=>We).join("/")+"</span><br>";});}else [4,5,921,372,811,357,3119,501,3437].includes(p)&&(g==null?void 0:g.length)>0?h!==void 0&&h!==255&&new $(h).show(g):[851,361,774,3310].includes(p)&&y==0&&(g==null?void 0:g.length)>0?h!==void 0&&h!==255&&new $(h).show(g):p==943&&y==0&&(g==null?void 0:g.length)==1?new $(255,1,1).show(g):p==898&&y==0&&(g==null?void 0:g.length)>2?f!==void 0&&f!==255&&new $(f).show(g.slice(1,g[0]+1)):(p==987||p==988)&&y==1&&(g==null?void 0:g.length)>2?h!==void 0&&h!==255&&(f==M.mySeats[0]||W.v)&&new $(h).show(g.slice(-g[1])):p==3266&&y==0&&(g==null?void 0:g.length)>0?h!==void 0&&(f==M.mySeats[0]||W.v)&&new $(h,h==255?1:5,1).show(g.filter((k,R)=>R%3==1)):p==3483&&y==1?(g==null?void 0:g.length)>2&&h!==void 0&&h!==255?new $(h).show(g.slice(-g[1])):g[0]>0&&(U[p]=g[0]):(p==7010||p==7011)&&(g==null?void 0:g.length)>0&&h==255?(U.spellSpace[7009]=g.slice(),(f==M.mySeats[0]||W.v)&&ee.pack(new $(255,1,1).show(g))):p==2900&&Re==28&&M.setGeneral(h,g[2],g[1],!0);else if(D=="CGsRoleSpellOptRep")p==2022?M.setGeneral(P,I[0],I[1],!0):p==7009?((v=U[7009])==null||v.pop(),(L=U[7009])!=null&&L.length||new $(255,1,1).show(I)):p==3336?new $(255,1,-1).show((E=I==null?void 0:I.slice())==null?void 0:E.reverse()):I.length>0&&p==15&&Re==10&&Ln(ie[I[0]].color==1);else if(D=="PubGsCMoveCard"){if(B=B.slice(),F===0||Ae===0||Y===11||n.isSend)return;if(p==713&&Ae==21&&F==B.length-2){let k=B.splice(0,1)[0];B.splice(k,1);}B.filter(k=>k>0).length!=F&&B.filter(k=>k>0).length!=0&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+B+"]"),console.error(n),B=[]),Z==1&&se==65282&&[3208,7011].includes(p)&&(se=65280,B.reverse()),Z==1&&se==65282&&Ae==13&&F==1&&(se=65280),Z==1&&se==65282&&Y==4&&Ae==8&&p==795&&F==1&&(se=65280),Z==1&&se==65282&&Y==5&&p==3101&&F==1&&(se=0),Z==1&&se==65282&&Y==5&&!M.isGuoZhan&&[7016,7017].includes(p)&&F==1&&(se=65280),Y==1&&ue==255&&Ce==65280&&(B=B.filter(k=>k!=4400&&k!=4401));var t=new $(re,Z,se,F,p,fe),i=new $(ue,Y,Ce,F,p,vt);if(Y==12||Z==12)Y!=12?i.add(B.concat(Array(F-B.length).fill(0)).map(k=>new ee(k,k,i.zoneID))):Z!=12&&Z!=0&&t.remove(B,p);else if(Z==5&&Y==1&&ue==0)i.add(t.remove(B.filter(k=>k>0)).map(k=>k.destroy(0)));else if(Z==2&&Y==9&&re==0&&ue==0)U.isGameStart&&!U.isPassed&&ee.pack(ee.get(0).map(k=>k.destroy()),!1,1),i.set(i.cards.concat(t.cards.map(k=>k.destroy(0)))),t.set([]),wt(),U.isPassed=!1;else if(Ae!==255){if(Z==1&&Y==5&&M.dealCard(ue,B[0]),Y==2&&(U.spellSpace[3090]||(U.spellSpace[3090]=new Set),B.forEach(k=>U.spellSpace[3090].add(ie[k].c)),document.getElementById("boTu").innerHTML=Array.from(U.spellSpace[3090]).join("")),(Z==5||Y==5)&&(ue==((V=M.mySeats)==null?void 0:V[0])||re==((X=M.mySeats)==null?void 0:X[0]))){const k=Array.from($.shoupai(M.mySeats[0])).map(K=>ie[K]),R=B.map(K=>ie[K]),{countType2:j,countSha:ne}=[...k,...R].reduce((K,te)=>(te.type===2&&!["乐不思蜀","兵粮寸断","闪电"].includes(te.name)&&K.countType2++,["杀","火杀","雷杀","冰杀"].includes(te.name)&&K.countSha++,K),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+ne+"："+j+"</span>";}if([441,3492].includes(p)&&Y==8&&Ae==6&&Zn(B.map(k=>ie[k].number),p==3492&&W.v),p==3033&&Z==1&&Y==8&&B.filter(k=>k>0).length==1){let k=ie[B[0]].number,R=0,j=0,ne=0;$.paidui.forEach(K=>{let te=ie[K].number;te===k?ne++:te>k?R++:j++;}),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(R>j?"大":"小")+'</span><br><span class="textRes">跟'+k+"比，"+R+"张大		"+j+"张小		"+ne+"平</span>";}if(p==3329&&re==U.currentID){let k=ie[B[0]].number,R=$.paidui,j=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap(K=>R.filter(te=>{var q;return (q=ce.name[K])==null?void 0:q.has(te)})).reduce((K,te)=>{let q=ie[te].number;return q>k?K.g++:q<k?K.l++:K.e++,K},{g:0,l:0,e:0}),ne=["五谷","桃园","火攻","借刀","撒豆"].flatMap(K=>R.filter(te=>{var q;return (q=ce.name[K])==null?void 0:q.has(te)})).reduce((K,te)=>{let q=ie[te].number;return q>k?K.g++:q<k?K.l++:K.e++,K},{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(j.g>j.l?"大":j.g<j.l?"小":ne.g>ne.l?"大":ne.g<ne.l?"小":"平")+'</span><br><span class="textRes">'+j.g+"."+ne.g+"大		"+j.l+"."+ne.l+"小</span>";}else p==3488&&Z==5&&Y==5&&Ae==21&&B.filter(k=>k>0).length==1?(U[p]||(U[p]={}),U[p][re]=B.find(k=>k>0)):p==3488&&Z==5&&Y==10&&Ae==11&&B.filter(k=>k>0).length==0?(B[0]=((w=U[p])==null?void 0:w[re])||0,U[p].stack=B[0]):p==3488&&Z==10&&(Y==1||Y==2)&&Ae==11&&B.filter(k=>k>0).length==0&&(B[0]=((T=U[p])==null?void 0:T.stack)||0,(N=U[p])==null||delete N.stack);if([3157,3511].includes(p)&&Z==2&&Y==5&&F==((Q=U[p])==null?void 0:Q.length)&&B.filter(k=>k>0).length==0&&U[p].forEach((k,R)=>B[R]=k),[7016,7017].includes(p)&&Y==5&&F==1&&(f==M.mySeats[0]||W.v)&&(B[0]&&((A=U[p])!=null&&A.includes(B[0]))?U[p].splice(U[p].indexOf(B[0]),1):Z==5||((z=U[p])==null?void 0:z.length)==2||((ae=U[p])==null?void 0:ae.length)==1?B[0]=((de=U[p])==null?void 0:de.shift())||0:M.isGuoZhan),re==ue&&Z==Y&&(se==Ce||Y!=1)&&(fe==vt||Y!=4))t.show(B);else if(p==3208&&Z==10&&Y==5&&B.filter(k=>k>0).length===0)t.pos=-1,ee.pack(t.cards.slice(0,t.length-1)),i.add(t.remove(B));else if(p==3483)if(Z==10&&Y==10)B.filter(k=>k>0).length===0&&(t.pos=-1,i.pos=1),i.add(t.remove(B));else if(Z==1&&Y==10&&se==65282)U[p]&&ee.pack(t.cards.slice(0,U[p])),B.filter(k=>k>0).length==0&&(t.pos=-1),i.add(t.remove(B));else if(Z==5&&Y==10)U[p]=i.add(t.remove(B));else if(Z==10&&Y==1&&se==65282){if(B.filter(k=>k>0).length==0&&((me=U[p])==null?void 0:me.length)==F&&U[p].every(k=>t.cards.includes(k))){let k=U[p].flatMap(j=>t.cards.splice(t.cards.indexOf(j),1));ee.pack(i.add(k));let R=k.map(j=>j.key);R.every(j=>j>0)&&B.splice(0,F,...R);}else i.add(t.remove(B));delete U[p];}else i.add(t.remove(B));else if(p==780&&Z==5&&se==65282&&F==1)if(Y==5&&re==U.currentID)U[p]=i.add(t.remove(B))[0];else if(Y==1&&re!=U.currentID&&t.cards.includes(U[p])){let k=(S=i.add(t.cards.splice(t.cards.indexOf(U[p]),1))[0])==null?void 0:S.key;k>0&&B.filter(R=>R>0).length==0&&(B[0]=k),delete U[p];}else i.add(t.remove(B));else i.add(t.remove(B,p));}}}}}catch(C){console.error(C);}}function Vt(){let n=Array.prototype.slice.call(arguments);try{return n[0]==="INIT"?si():n[0]==="EXIT"?ai():bi(n[n.length-1])}catch(e){console.error(e.message),console.error(e.stack);const[,t,i]=e.stack.match(/(\d+):(\d+)/);console.error("Line:",t),console.error("Column:",i),oe("小抄GG了，联系作者解决");}}typeof SGSMODULE<"u"&&(Object.defineProperty(window.console,"log",{get(){return console.info},set(){}}),window.SGSMODULE.forEach(n=>n("EXIT")),delete window.SGSMODULE);console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;");window.SGSMODULE=[];Object.defineProperty(window.console,"log",{get(){return function(...n){(window._debug||window.isLogAllClass)&&console.debug(...n),window.SGSMODULE.forEach(e=>e==null?void 0:e(...n));}},set(){}});Vt("INIT").then(n=>{n&&window.SGSMODULE.push(Vt);});

})();