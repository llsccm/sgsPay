// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      2.9.38.1
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  'use strict';

  var Ot=Object.freeze,Pt=Object.defineProperty;var Tn=(t,e,n)=>e in t?Pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var je=(t,e,n)=>(Tn(t,typeof e!="symbol"?e+"":e,n),n);var _t=(t,e)=>Ot(Pt(t,"raw",{value:Ot(e||t.slice())}));function Be(t,e=null,n=!0){let i;return !i&&typeof localStorage<"u"&&(i=localStorage.getItem(t)),i?JSON.parse(i):e}async function He(t,e,n=!0){typeof localStorage<"u"&&localStorage.setItem(t,JSON.stringify(e));}async function Ct(t,e=!0){typeof localStorage<"u"&&localStorage.removeItem(t);}function pt(t,e=0){let n="";const i="  ".repeat(e);if(Array.isArray(t))t.every(r=>typeof r!="object"||!r)?n+=`${i}${t.join("	")}
`:(n+=`${i}<ol>
`,t.forEach(r=>{n+=`${i}  <li>
`,n+=pt(r,e+2),n+=`${i}  </li>
`;}),n+=`${i}</ol>
`);else if(typeof t=="object"&&t!==null)if(Object.values(t).every(r=>typeof r!="object"||!r))n+=`${i}${Object.entries(t).map(([r,a])=>`<strong>${r}:</strong> ${a}`).join(", ")}
`;else {n+=`${i}<ul>
`;for(const r in t)n+=`${i}  <li>
`,n+=`${i}    <strong>${r}:</strong>
`,n+=pt(t[r],e+2),n+=`${i}  </li>
`;n+=`${i}</ul>
`;}else n+=`${i}  ${t}
`;return n}async function Dn(t,e=""){const n=document.createElement("a");n.download=e,n.href=t,n.click(),n.remove();}const mt=[];let it=!1,ft=null;function Ve(t,e="acTooltip",n=1e4,i="",s=null,r=!1){r?Bn(t,e,n,i):(mt.push({text:t,id:e,duration:n,className:i,clickCallback:s}),it||gt());}function Bn(t,e,n,i){let s=document.getElementById(e);s||(s=document.createElement("div"),s.id=e,s.className="ac-tooltip "+i,document.body.appendChild(s)),s.innerHTML=t,s.className="ac-tooltip "+i,s.addEventListener("click",()=>{lt(uniqueId);}),setTimeout(()=>{s.classList.remove("hide"),s.classList.add("show"),s.style.top="20px";},50),ft&&clearTimeout(ft),ft=setTimeout(()=>lt(e),n);}function oe(t){if(ChannelUtils!=null&&ChannelUtils.openQQBuy){ChannelUtils.openQQBuy({ret:!0,msg:t});return}}function gt(t){if(mt.length===0){it=!1;return}it=!0;const{text:e,id:n,duration:i,className:s,clickCallback:r}=mt.shift();let a=document.getElementById(n);a&&a.remove();let o=n+"-"+new Date().getTime(),c=document.createElement("div");c.id=o,c.className="ac-tooltip "+s,c.innerHTML=e,document.body.appendChild(c),r&&typeof r=="function"&&c.addEventListener("click",r),c.addEventListener("click",()=>{lt(o),gt();}),setTimeout(()=>{c.classList.remove("hide"),c.classList.add("show"),c.style.top="20px";},50),i?setTimeout(()=>{lt(o),gt();},i):it=!1;}function lt(t){let e=document.getElementById(t);e&&(e.classList.remove("show"),e.classList.add("hide"),setTimeout(()=>{e&&e.remove();},300));}var sn,An=function(t){return String.raw(sn||(sn=_t([`
<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>
table { margin-right: 8px; border-collapse: collapse; }
th, td { text-align: center; border: 1px solid black; font-size: 24px; box-sizing: border-box; }
td { padding: 2px 5px; }
.nav, thead { background: white; position: sticky;; }
.rate { margin: 5px; font-size: 28px;}
.button {  display: none; } 
.button[name=mode] ~ .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }
th .button ~ .label { display: inline-block; width: 100%; height: 100%;}
th .button:checked ~ .label::after { content: "↓"; }
th.reverse .button:checked ~ .label::after { content: "↑"; }
.button:checked ~ .label { background: rgb(64,160,255); } 
.s0 { background: white; }
.s1 { background: rgb(221,0,0); }
.s2 { background: rgb(255, 200, 0); }
.s3 { background: rgb(0, 136, 68); }
.s4 { background: rgb(0, 94, 183); }
.s5 { background: rgb(255, 0, 255); }
</style></head><body style="margin: 0 8px;">
<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="summary"></div></div>
<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>
<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>

<script>
const data = Object.entries(`,`).reduce((acc,[mode, records]) => {
acc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));
return acc;
},{});
const modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};
const sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'先手',3:'后手'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};
colors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];
const modeTab = document.getElementById('modeTab');
[26,35,44,5,7].forEach(mode => {
if(mode in data) modeTab.innerHTML += '<label><input type="radio" class="button" name="mode" value="'+mode+'" onclick="reSet()"><span class="label">'+modeName[mode]+'</span></label>';
}); modeTab.innerHTML += ' （更多功能敬请期待…）';
document.querySelector('#record thead').innerHTML = '<tr onclick="recordSort(event)">'+['时间','武将','身份','胜负','时长'].map((name,i)=>'<th'+(i?'':' class="reverse"')+'><label><input type="radio" class="button" name="record" onchange="recordSort(event)" '+(i?'':'checked')+'><span class="label">'+name+'</span></label></th>').join('')+'</tr>';
function reSet() {
var i, tabcontent, tablinks;
window.mode = document.querySelector('#modeTab input[name="mode"]:checked')?.value
window.guozhanQ = modeName[mode].includes('国战');
window.records = data[mode].filter(record => record.shenfen).sort();
let summary = Array.from({length:10},(_,i)=>[0,0,0,i]);
let detail = records.reduce((acc, record) => {
    summary[0][record.result] += 1;
    summary[0][2] += record.duration;
    summary[record.shenfen][record.result] += 1;
    record.general.forEach((g,n)=>{
        if(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);
        acc[g][0][record.result] += 1;
        acc[g][0][2] += record.duration;
        acc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;
    });
    return acc;
},{});
summary = summary.filter(s=>s[0]+s[1]>0);
let sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);
document.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style="background:'+colors[sf]+';">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick="detailSort(event)"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)"><span class="label">平均时长</span></label></th></tr><tr onclick="detailSort(event)">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class="reverse"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)" '+(i==0&&j==1?'checked':'')+'><span class="label">'+name+'</span></label></th>')).join('')+'</tr>';
window.detail = Object.keys(detail).map(general=>{
    let rate = detail[general].filter(s=>sf.includes(s[3]));
    rate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });
    return ({general, rate});
});
let summaryDiv = document.getElementById('summary');
summaryDiv.innerHTML = '';
summary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class="rate" style="color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });
detailSort();
recordSort();
}

function detailSort(event,sf=0,key=4,reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){
        if(element.rowSpan>1) {sf = 0; key = 2; }
        else {
            sf = Math.floor(element.cellIndex/4);
            key = [5,4,0,1][element.cellIndex%4];
        }
        reverse = element.classList.toggle('reverse');
    }
}
window.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });
if(reverse) window.detail = window.detail?.reverse();
document.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');
}

function recordSort(event,key='timestamp', reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'record'){
        key = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;
        reverse = element.classList.toggle('reverse');
    }
}
if(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);
else window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));
if(reverse) window.records = window.records?.reverse();
document.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');
}

function formatSeconds(seconds) {
const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
const secs = Math.floor((seconds % 60)).toString().padStart(2, '0');
return (seconds>=3600?(hrs+':'):'')+mins+':'+secs;
}

document.querySelector('#modeTab input[name="mode"]').click();
<\/script></body></html>`])),t)},Ln="jsjiami.com.v7";(function(t,e,n,i,s,r,a){return t=t>>1,r="hs",a="hs",function(o,c,d,h,l){const u=We;h="tfi",r=h+r,l="up",a+=l,r=d(r),a=d(a),d=0;const g=o();for(;[]&&--i+c;)try{h=-parseInt(u(409,"a(H["))/1+-parseInt(u(403,"qeH8"))/2+parseInt(u(426,"0zA0"))/3*(-parseInt(u(198,"dm0N"))/4)+-parseInt(u(348,"KDdW"))/5+parseInt(u(215,"f&xv"))/6+parseInt(u(493,"IAlp"))/7+parseInt(u(309,"f]5*"))/8*(parseInt(u(182,"CrM1"))/9);}catch{h=d;}finally{if(l=g[r](),t<=i)d?s?h=l:s=l:d=l;else if(d==s.replace(/[eTVJgrSEXQOudGnlCPMth=]/g,"")){if(h===c){g["un"+r](l);break}g[a](l);}}}(n,e,function(o,c,d,h,l,u,g){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),h="join",o[h]("")})})(392,505473,$e,198);function $e(){const t=function(){return [Ln,"ETOjesGjQitgamCiXlV.dcQProrem.nvgSh7gJMu==","A1pcMSkDWPq","WQjyWQWCla","WQJdV8kKW7/cUW","mqTbWO7cOGTU","W4HvAxW","pKhcMadcMq","WQZdUHWqoHVcSftcKCoEWQpcJa","EhxcHvDLotae","zSogy8o8uhWSst7cNSkrihNdPcm","WP0Fn8o6CW","W7FcOeXfyeRcLvRcQmoF","WRfuW7Lidq","FCoEjL5A","WR3dQ0NcUmkdWRebj0y","WRuoW6VcUCos","WOmIWRdcJd8","mM/dOWav","W54smCoF5zg15yY15yAl5Q6g5lYX6AUe","W7RcI2jYqa","WQGZcbZdGG","55Ie6ikt44oT5A6N6zMt5O+J5PYU5B+/5zgy","k8oFgmoGf8oQWPxdUq","W6r/qSkTW4pcPCotFuWHiX5X","zSo8yJlcHW","ygCIbSkfdSoYoCol","htRcHvmbWQHq","oKldQGSQW6/cRq","6ywm6Asx5O6h5P6l5Bs+5ywL6zEE","WPPYWPTLmvVdLmko","W6pdUrtcOCoaWOvGfJGComoPmGWBwmoV","WQldImkgW7lcVSkbtG","g8o/W5pcU20","m8oNj8oqmW","W4HVW6PliG","g8kcW6NdJWrjDG","WPvKWPewoG","WRPCW79oiG","psZcU1KQ","wvBcKCkiWOm","W4jrDetcMeldOW","FfRcN8kFWOG","W7ueWQpdTSo/","WPHSW5vVlG","ebqCWQec","W5vvW79RhG","FCkxW4hdQCkO","EuRcH8krWRpcJGRcL8kXzSoabG","smoPzrlcLW","WOdcQ8oGWPeq","WRK9W4dcJ8oQ","E1FcLSkDWPRcHbO","W40eWRZdTCox","yCkIWQJcUSkoWOJcNmojWPy","W7SbwCk7xW","hv7dHKRdPq","fCoOW5SQtW","qSkIW7pdSWbjxG4Vtmog","WPZcOCorFmkwcHtcS0BcPmo8FKxcU1RdIG","gW0JWQix","Eh3cGLD0mce","ACk5WRlcSa","W7NcU1XitKBcJwdcVmoDWPxcVYS","W6dcSb/dR8ojW4fGa2izrCo3BG","WPe8W4lcIxq","htRcHvmbWQ91WPis","cCo2W5qRwSo0W416","5PY86iEa5yEJ5l2Y5y2e5P6c","WQqBeHVdQSo/W6rG","A0/cN8kxWOu","kWVcRuSF","W6pdPCkBW6TdW5i0ptxcUSo2rq","lta3WRy7","umoal3L0","WQ5lWQ1dha","WQddQNtcQCkdWPa7dq","WOTmWP1Saa","s8k1W5uSt8k3W5LRcadcGsW","AGJcS08ms3tcSCodWRRcLWi","WPJdGZyNuhFdTW","WOGHW7tcUu/cOh/cPa","pmoylSo3dSoMWP8","WRa7WQtcGIy2Fq","EuRcH8krWRpcJGRcL8kJE8oHft4","FSkxWO7dHZBdPv0EdmoXdXK","6yAd6AET5O6f5P+I5y2e5l+t6AQY","W51UW7r5h8kasZ3cR8k2","EmoBieFcOmojsmoYfW","WPeTpSooWOW","WRhcTCoAWRKyWO48fW","w8opaMT/","WRuPW6RcRCoh","rCkKWQ3cLmkR","WPlcUSoiFmkOgb/cHehcPSob","ofFdTdjAhNm","5ysP5l6G6yAm6Awb5O275P+T5y6D5P66","WPadW4/cP38","hwtdTcyhWPBcIvxdIW","AMePamkCi8oc","ur9DqSkZ","of/dUWCdW6xcVry9hq","B2tdUdSWW7NcHa","pK/dUY0TW6/cPcC6gCkdjrxcHG","iCoFWRlcPGa","6BMW55Qk5BoR5y2h5B6N5zcIW6hcL8oyWO8","swVcPvn2","6z+g6kAH5ywY5lYR5y2E5P2pWQnTE8oh5OIX55E35Bcz5OIg5yEp5lId"].concat(function(){return ["WOaMfColBmoOW59GW4FcTx55WQ4","WQ9oCfqPd8olqKu","oLhdTrzzex7cMa","WOSMWRdcRXK","kMddRcCr","i8oIW6HdFmk6aq","rmoNW4BdL8kE","jmoVW6fbBG","WRTsWOv8gG","WR54WQubkuZdULC/","kKRdRXzxkxlcKCox","k8ogW53cMMJcSa","WOvhvhuO","WOu6W5VcLwe","j3O4aSkdm8ov","FG1bWOdcLbfPzIJdNgtcJfG5WRy","aSodW67cP3u","C8kUW4ddRmk1WRjd","oLNdSHzigg8","jmopWQRcQdVcUmoSW6hdNhaPWRlcTq","owutk8oTcZZdR8oSWRZcJ8otW4Lk","FbbqWOZcVrT5","W7VcPK1ez0ZcNq","WOGBdCoQWPC","W585y8kE","WQGKjI3dIq","pSofp8o7j8oSWO/dJCkSz8khW4JdQG","WOe9WRhcRX8","WQZcKmoKz8kN","e8oBW6jVDq","W4ztrNlcHq","xSk4W6FdSba","WQhdLmkCW7/cUmkKB8oF","zJjTxmkt","AhW4dmk1kCosj8oWzSoWW73dQG","E8o9rZxcSCk8WOZdImoqW6msWQiIdW","B8o9rYdcR8k2WPhdImomW6mP","55wz55s15Bgv5OMk5ysd5lIT","bsekWPOd","W71LD2xcNq","WOWvnmkZfmk1AW","lCoiW6vADG","gNpcIHZcSGRdHmoYn3hcKeDiW4e","WPtdHtaSwNZdTmov","o8ovj8o1ha","gwldTW9+","WRGfW5BcMCo+","a3FdK27dTa","D8o/W6VdLmk+xMFdHmoz","WR0Re8oZ","6yAS6AAD5O+Q5PY+5y686zMN5Pwh5l656AId","WP/dGIaLwx7dTSou","fhJcKdZcRcFdVCoAfq","W7XxzeFcOW","CrDc","p03dSHH5eM/cR8oxWR/cQZS","nSoEjCoXf8olWQ/dK8ku","FHXrWQRcObTZwWRdK37cLLqJWRyY","WQqLnSoWWPJdVmkkCwa5eHLoWPzMWPDlW4C","W6JcKmknW7hcRSoLECopzH7dPvG","WRixab7dSCoaW7vLnSkV","W6hdPmkqW6blW5rVgGtcRSoyFYa","WO3cTCoxDSkZhZ/cJeVcVmokz1G","W7TNW7ZcMwdcNGeDW6hdNulcLCkRWR53","h1/dQHjS","ztvVtCksEs1EW4ee","EKqhfmkU","pfikmCof","WP/dJJ8LqG","DCkUW53dR8ktWPrZWRrKl8oiAXK","c8k2fwP0WQW1cGVdJfnA","cHJcVfau","WOy6W6pcVMZcOwZcKGv1W5ioFq","fx/dVIicWRBcJ10","WRC2WQ3cGdq","5yA95l2X6yEv6AwE5O6P5P665yY75P6x","W5uPWPddN8oLySkPWQBdNCoyxvPZ","W4qOrSkZDG","e3/dSY8rWPdcVhxdOG","WR02WRBcSYi8Da","WQqBeGRdQCoNW6jSaCkTW43cICkL","5P+55zk05y2g5l6l6AU25lUI5AwWtWhcICkH","WOGgi8oUWQW","Ae0+emkc","W648qSkIAW","kL7dRHO1W5xcVsS5ca","uubTW7XhWRtcKmoUWRPzDSkL","Bh3cKMvZncCu","W4fDC3hcK0pdO8oM","WQDvAL4zkmoRxh7cKfpdMh4","of/dUWCwW7/cGYS1a8kMdYVcIZuAW74","WRhcN8onF8k2","ACk5WRlcSmk+WQ/cVmoqWRpdKq","WO99W5jBiq","AhW4dmk8j8oij8oVESoxW6NdQXNcGSoZ","W6eRWQ3dUCon","re3cGunR","WOPWW5H5pq","WP9UWPXRg0ldKmkeW6GEW5hcVa","WPmGW57cGMhcNwZcSXTYW4e","55wH5Bod5OIA5y2Z5lYk55ss","W74lWQFdPCo9","WQioW7pcImozW69oW7O/W48j","W7uvlGrJC8kNEwBcIg3dQKm","WQqAWQJcLtq","dMVdUgZdOW","5ywR5l6P5yYs5P6B6iEMod5xyq","W50YWORdLCovrCkjWRJdPG"].concat(function(){return ["WPBdQtS+wG","j8oLW6jeza","WQ3dQ8kyW5ZcLq","WO13W4X/ot7dPG","DCkUW53dRW","BfpcH8kiWRy","jSkNWPNdVmoLWOC0WPSI","W7ZcP1TgBKxcNfC","WOPTW4PvgJldUSoHnCkgWQWsxLhcNW","FG1bWOdcLbfPFcpdJLJcKG","WRiMWRxcJG88BsK0W4RcKSoQW4e","W6SnFf4VASoSE2JcJvldIa","zIvRw8ksEtXtW5ytrHiC","BSoWW6hdOSk4D0hdVq","aNCUlCoK","jMdMNiyq5Pso5yMNzv3dGu7PMAlMLOVLHkpOTlRNLBK","W4PAy3JcKehdOCoN","DCoCpupcSmoTECoB","W4jZzwlcKW","g0msjCoy","kCoPW47cRge","55Qf6ig344gs5A+C6zIn5OYq5P6P5B6W5zgY","WQviE1iWiSo7","W7FcGmkyWP5pW5nRuq","khpdRGKb","W5n1W6r0mCkmuWFcU8k0suFcLa","zSoqvbGG","vSoStZGWW5yOib0","WPevn8kXcCk1DSocedZdVa","mG1AW7lcSCkkW6K","WQ1vA2KS","55Uh5lQo6ygr5yIv5BsG5yEY6zEX","WRRcHCo7WRKS","r8oPW53dICkf","kv3dNWeU","k8otdSoCdG","bmonW5VcSgq","zSogy8o8xumpuJBcHmktpa","E8oSn0n6nWtdGYq4qhrO","WRZdRCkxW5RcVG","W6C6ECkRyG","kv3cKb/cHG","WPCOcmokCCodW7nO","ySobn07cTW","WOj2W5bFkHxdMSoLfW","DSkpW67dSKhdO8kGW4tdHgGxWOdcIa","6ysO6AAx5O6F5P2W5y6m55EW","BuGVl8kA","jSogW7BcG0y","WQehfrxdISo8W7vxm8kYW5ZcHmk5","WPqGW5/cICoo","l07dJvtdHq","WQ5oFxGT","WOWKjWddIG","W757W7VcL0dcNraW","Be3cMSkFWP3cTrFcQCkX","c2tdUdGAWOVcJvtdI3G+W4rOs8ozkW","DLFcUCkjWRG","EX1zWO7cRW","W4PkW4fEgG","WOmfn8kooCk1CSo0fINdSvJcNW","WQy5l8ohWQe","BmkIW4NdHtK","fmoKjCoSdq","WOeYaSoCE8opW79GW4FcU294WQG","W50KCSksr0BdSq","WQ5zWOfraW","udVcNdBcQKldMSoJohhcP00","W4jrDfxcNuRdQ8oNkhCsE8o4la","WPmTmmoBWOG","FWLAW7FcRSopW6tcNmk+kCkoW5yIaKZdIqlcISkRzSkgWPldRSoHW6K8wSoY","e2xdTXKZ","WPH9W4PQkJldVSonkCkuWRW","W5SYWOddKSolBSkXWPZdICoA","zfeCn8kg","E8o9j2Lopr7dPb84r2nLW7VcRCob","D8kZW4ZdO8k6WP5J","WRiMWRxcJG88Bs4QW5m","BCoTvGlcPmkkWOtdGCoBW7qKWRqz","l8oKW65iDSkXaSky","6z2M6ksz5yEB5l2z5yY+5P6sWPz9g0RMI6lNLjpLS4NMIQFLH6ZKUlO","fuxdIg3dSgO","FCk1W4FdPCkJWRntWQPF","metdOq0ZW4lcNq8y","bmoDWPRcLG4","6yAu6AAM5OYC5PYl5y6055wV","gsFcIvWoWOrW","ECoKW6ZdNCkOx3C","WOHWW5TzmZJdQG","BCkeC8odmSoWWONdTCkS","WRzJWR8lgwVdMLmDu8kdlvZcLLW","dSoGW4HuFG","WQiWkCo2WOS","WQaNWRJcJsG","aJVcTNOi","WPRcOComF8k5ptpcSa","z8kTW5RdRdK","y8owE8oYBa","mu7dGZSQ","WRlcUCoDWP0wWOC0fG3cJ8oDuqeD","D8ogzmo7","nSoOW6iqFa","5P2k5zoW5Bwf5lYq6AQ3WQBdIg1x5lQ+5Psr5y6W5l6555sl","WQyoW7RcTKW","WPJdIfpcT8kq","W5W5w8k1yW"]}())}())}();return $e=function(){return t},$e()}function We(t,e){const n=$e();return We=function(i,s){i=i-179;let r=n[i];if(We.hYtIDO===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let g="",y="";for(let w=0,T,k,U=0;k=l.charAt(U++);~k&&(T=w%4?T*64+k:k,w++%4)?g+=String.fromCharCode(255&T>>(-2*w&6)):0)k=u.indexOf(k);for(let w=0,T=g.length;w<T;w++)y+="%"+("00"+g.charCodeAt(w).toString(16)).slice(-2);return decodeURIComponent(y)};const h=function(l,u){let g=[],y=0,w,T="";l=a(l);let k;for(k=0;k<256;k++)g[k]=k;for(k=0;k<256;k++)y=(y+g[k]+u.charCodeAt(k%u.length))%256,w=g[k],g[k]=g[y],g[y]=w;k=0,y=0;for(let U=0;U<l.length;U++)k=(k+1)%256,y=(y+g[k])%256,w=g[k],g[k]=g[y],g[y]=w,T+=String.fromCharCode(l.charCodeAt(U)^g[(g[k]+g[y])%256]);return T};We.viTgLd=h,t=arguments,We.hYtIDO=!![];}const o=n[0],c=i+o,d=t[c];return d?r=d:(We.pYcDIc===void 0&&(We.pYcDIc=!![]),r=We.viTgLd(r,s),t[c]=r),r},We(t,e)}async function Rn(t=I.v){const e=We,n={MrSTd:function(s,r){return s(r)},LKhlk:"酒馆挂机今日可用",NjEti:function(s,r){return s(r)},lWlDV:e(187,"&W]U"),dBmul:function(s,r){return s===r},zQFBl:"fGrXL",dAcLm:"JYgRY",ksoIr:e(301,"^)XC"),dHzlq:"界小抄会员<br>无限制使用",lWTcl:e(305,"f&xv"),RWgDZ:function(s,r,a,o){return s(r,a,o)},CSuaq:"autoHuangGai",mBKaa:function(s,r){return s*r},awOKF:function(s,r){return s===r},Pqqmr:"task",pDqgI:e(225,"9hbO"),ZcMSy:function(s,r){return s!==r},wIity:"WzLeS",NaDsk:"HiFJy",QBelZ:e(481,"KDdW"),Rbims:e(202,"0zA0"),TGMKl:function(s,r){return s!==r},pWPoq:e(438,"A*Z3"),oYRaV:e(206,"0gC)"),xJQEi:"autoYueKaSwitch",aGrXn:function(s){return s()},gUopm:function(s,r){return s!==r},hAifJ:e(222,"x*gV"),BrZra:e(477,"qeH8")},i=[{id:e(452,"%6Ur"),action:Jn},{id:n.QBelZ,action:pn},{id:n.Rbims,action:hn}];if(t)if(n.TGMKl(e(253,"A*Z3"),n[e(183,"Hx[!")]))i[e(320,"FX#@")]({id:n[e(341,"ru3f")],action:Ut},{id:n[e(252,"IAlp")],action:Nt},{id:n.xJQEi,action:Ht}),n[e(240,"a(H[")](Gn);else {let s="本周已体验<br>今日可使用";_0x523735[e(339,"PmNT")]!==s&&(n.MrSTd(_0x2225f3,n[e(203,"tH!y")]),_0x90798d[e(302,"[NFk")]=s);}else if(n[e(370,"db]N")](n[e(345,"^vTn")],n[e(361,"uNpj")]))[{id:n.Pqqmr,action:Ut},{id:e(383,"tH!y"),action:Nt},{id:n[e(279,"db]N")],action:Ht}][e(419,"qeH8")](({id:r})=>{const a=e;if(n[a(179,"%6Ur")](n.zQFBl,n[a(267,"0gC)")])){let o=a(218,"FX#@")+new _0x332899(_0xd5878f.guildVIP[_0x3b52ac[a(356,"x*gV")]])[a(490,"KDdW")]();_0x17c801[a(433,"f&xv")]!==o&&(n.NjEti(_0x2906cc,_0x116126[a(422,"%lus")]+n[a(358,"f]5*")]),_0x45cbed[a(303,"0zA0")]=o);}else {const o=document[a(467,"uyXJ")](r);o&&(a(259,"x*gV")!=="bICdq"?(o[a(249,"$!BY")]=![],o.disabled=!![],o[a(192,"^vTn")](new Event(n[a(380,"^)XC")]))):_0x39bb38[a(352,"0zA0")]&&_0xb124b2());}});else {_0xb7b0df[e(464,"x*gV")]=![],_0x261790[e(274,"inN5")]=![];let s=n.dHzlq;_0x363c80.innerHTML!==s&&(n[e(311,"$kAl")](_0x1ebe73,n.lWTcl),_0x56bc26="v",n.RWgDZ(_0x1bbdb8,n[e(239,"%6Ur")],_0x149471+n.mBKaa(n[e(328,"x*gV")](n.mBKaa(7,24),3600),1e3),![]),_0x1320be[e(219,"UQ(1")]=s);}i[e(223,"6IDZ")](({id:s,action:r})=>{const a=e,o=document[a(319,"IAlp")](s);o&&(o[a(434,"qeH8")]=![],n.awOKF(s,n[a(436,"%lus")])||n[a(416,"&W]U")](s,a(330,"OC3a"))?n.pDqgI===a(421,")h@*")?(_0x5d2429.onchange="",_0xfbfec6[a(333,"#O3T")]=!![],_0x48ff1d[a(249,"$!BY")]=![],_0x43cc22[a(480,"A*Z3")]=a(300,"P3(h")):o[a(418,"tH!y")]=()=>r():n.ZcMSy(n[a(216,"ru3f")],n.NaDsk)?o[a(437,"$kAl")]&&r():_0x202a84[a(404,"qJ!L")]=![]);});}function Gn(){const t=We,e={JWCUZ:function(i,s,r,a){return i(s,r,a)},EKXQe:function(i,s){return i(s)},LFkcz:t(229,"Nryz"),xVcCh:function(i,s){return i(s)},RbsCb:"黄盖主公小号刷百胜功能可用！",ahfCe:t(226,"[NFk"),nhJwI:function(i,s){return i!==s},ihRoO:t(364,"9hbO"),JaDpL:t(373,"uyXJ"),tllTh:t(290,"$!BY")},n=document[t(276,"%lus")](e.tllTh);n.forEach(i=>{const s=t,r={YJmAi:e.LFkcz,aDrsu:function(a,o){return e.xVcCh(a,o)},tcEHk:e[s(244,"%lus")],JmRSz:e[s(209,"6IDZ")],AVAGG:s(204,"UAx9"),stkUv:function(a,o){return e[s(277,"9hbO")](a,o)},LMtja:e.ihRoO,LVFzB:s(459,"ru3f"),SUwVH:function(a,o){return e[s(268,"a(H[")](a,o)},EImxI:e[s(316,"kn^Z")]};i.disabled=![],i[s(475,"qJ!L")]=function(){const a=s;this[a(242,"f&xv")]?(n.forEach(o=>{const c=a,d={SQoOb:r.YJmAi,bEJUL:function(h,l){return r[We(195,"0gC)")](h,l)},kuuXw:r[c(255,"f]5*")],JOxqr:r[c(448,"a(H[")],HWUIR:r[c(415,"jBhF")],XuqNT:c(402,"P3(h")};if(r[c(368,"6IDZ")](r[c(324,"PmNT")],r[c(273,"^vTn")])){if(o!==this)if(r.SUwVH(r[c(397,"dm0N")],r[c(440,"g(ge")])){const h={LcgDk:function(l,u){return l(u)},dXEbF:d[c(357,"a(H[")]};d[c(344,"9*Qn")](_0x4afb06,d[c(250,"f&xv")]),_0x178c16.innerHTML=_0x2cc5d1,_0x57bd6b[c(237,"sUxE")]=![],_0x3070c7[c(185,"%lus")]=function(){const l=c;this.checked?(_0x1f8e08[l(406,"f]5*")]=![],_0x45d408.autoBotSwitch=9,_0x190bc0.readyStart(0)):(_0x4415e5[l(188,"UQ(1")]=![],h[l(256,"a(H[")](_0x179d0b,"盖主速刷已关闭")),_0x177ef7[l(456,"vxed")](_0x401b3e[l(408,"9hbO")]),_0x5e5e60[l(366,"9hbO")](h.dXEbF,()=>_0x324d92(),500);};}else o.checked=![];}else {const h=d[c(291,"0zA0")].split("|");let l=0;for(;[];){switch(h[l++]){case"0":_0x60ed3b[c(495,"inN5")]=![];continue;case"1":_0x2530bf.delay(d[c(461,"$kAl")],()=>_0xa10af9(),500);continue;case"2":this[c(308,"6IDZ")]?(_0x30ef45.checked=![],_0x27585c[c(387,"9*Qn")]=!![],_0x4a70ca[c(205,"6IDZ")](d.HWUIR,()=>_0x520b18[c(472,"%tGd")](),500)):(_0x2fa382[c(258,"jBhF")]=![],_0x573eeb[c(476,"f]5*")](c(297,"ru3f"),()=>_0x370218(c(353,"A*Z3")),500));continue;case"3":_0x24bd64.auto(_0x1eb1f3[c(201,"f&xv")]);continue;case"4":_0xde73f0[c(298,"uyXJ")](c(329,"Nryz"))[c(263,"sUxE")][c(468,"uyXJ")](d[c(435,"ru3f")],'"'+_0x4903f8[c(280,"%tGd")][c(400,"PmNT")]()[c(199,"#O3T")](2,"0")+'"');continue}break}}}),e[a(213,"UQ(1")](zt,parseInt(this[a(385,"#O3T")][a(262,"Xn!H")]),parseInt(this.dataset[a(197,"0zA0")]),this[a(450,"qeH8")][a(221,"$kAl")])):e[a(270,"&W]U")](zt,![]);};});}async function Ye(t=![]){const e=We,n={TKnFX:e(355,"PmNT"),FOSkX:function(l,u){return l(u)},XQwul:e(425,"0zA0"),PpUSG:".status",YvnZN:e(231,"f&xv"),AXGFX:e(243,"IAlp"),gGerb:function(l,u){return l(u)},GcWfO:"酒馆挂机今日可用",mXPTq:function(l){return l()},XLYqW:e(251,"sUxE"),QDAtz:"autoBotSetUp",hVGWA:function(l,u){return l!==u},yXXEp:e(430,"#O3T"),AAmgb:"4|7|0|6|3|1|8|5|2",xMndl:e(346,"Hx[!"),uWuhS:function(l,u){return l===u},inQAU:function(l,u){return l===u},buLDO:"ufHov",KTnxh:function(l,u){return l(u)},vsUXZ:function(l,u){return l<=u},YcdWR:function(l,u,g,y){return l(u,g,y)},EMNJs:e(257,"FX#@"),LRYcA:"autoHGExplanation",YRuEb:function(l,u){return l-u},mBhza:function(l,u){return l*u},ZorFz:function(l,u){return l+u},QmVPv:function(l,u){return l*u},zdQBZ:function(l,u){return l*u},UwIIj:function(l,u){return l+u},nDPwO:function(l,u){return l*u},WIemB:function(l,u){return l===u},xmFop:"ZozWA",epSav:"界小抄会员<br>无限制使用",AgDQw:function(l,u){return l!==u},uZzmc:e(266,"%lus"),xtZEm:"autoHuangGai",ZLGrU:function(l,u){return l*u},GLkTP:function(l,u){return l*u},CgJDs:function(l,u){return l!==u},xFQot:e(420,"*Yk0"),HSqrp:e(482,"g(ge"),PBiUP:function(l,u){return l<=u},MhkKW:function(l,u){return l>=u},AgleW:"FZrVp",iLhiy:"fXKvE",ZgIiM:e(410,"&W]U"),cZYnw:"change",FvRhw:"1|0|4|3|2",zozPQ:function(l,u){return l<=u},hdLSk:function(l,u){return l+u},pwPio:function(l,u){return l==u},XBfYQ:e(212,"kn^Z"),CWfYG:e(469,"dm0N"),hncIv:e(392,"0zA0"),PPEGO:"黄盖主公小号刷百胜功能可用！"};let i=await de[e(486,"Nryz")](),s=n[e(281,"KDdW")](i,n[e(271,"^)XC")](Be,e(210,"g(ge"),0,![])),r=document[e(474,"7hXV")](e(188,"UQ(1")),a=document.getElementById(n[e(379,"vxed")]),o=document[e(427,"0zA0")](e(334,"FX#@")),c=document[e(288,"OC3a")](n.LRYcA),d=n[e(246,"CrM1")](I.trialTime,n[e(220,"qJ!L")](n[e(473,"$kAl")](6,24),3600)*1e3),h=new Date(n.ZorFz(I[e(442,"qeH8")],n.QmVPv(n[e(349,"uyXJ")](8,3600),1e3)))[e(211,")h@*")]()[e(326,"9hbO")](0,10);if(I.guildVIP[25242]=new Date(n[e(374,"IAlp")](i,n[e(189,"vxed")](n.nDPwO(n.nDPwO(6,24),3600),1e3)))[e(365,"OC3a")](),r[e(200,"OC3a")]=![],I.v)if(n.WIemB(e(312,"KDdW"),n[e(369,"dm0N")])){const l=n[e(261,"7hXV")][e(381,"P3(h")]("|");let u=0;for(;[];){switch(l[u++]){case"0":n[e(424,"k57k")](_0x36579a,e(241,"qJ!L"));continue;case"1":_0xac642c.autoBotSwitch=!![];continue;case"2":_0x4287e[e(447,"Nryz")]=!![];continue;case"3":_0x3b1c7d[e(306,"Hx[!")]=![];continue;case"4":_0x33a07c[e(278,"Nryz")](e(372,"9hbO"),()=>_0x3f481f(),500);continue;case"5":_0x2ea8be[e(439,"$kAl")](n[e(455,"KDdW")],()=>_0xc3a5fd.readyStart(0),500);continue;case"6":_0x3a7f5a.auto(_0x4f9fca[e(466,"0gC)")]);continue;case"7":_0x467a2c.checked=!![];continue;case"8":_0x48abd2[e(284,"Xn!H")](n[e(196,"vxed")])[e(384,"dm0N")][e(214,"&W]U")](n[e(260,"vxed")],n.AXGFX);continue}break}}else {r[e(354,"g(ge")]=![],a[e(414,"IAlp")]=![];let l=n.epSav;n[e(413,"KDdW")](o[e(412,"sUxE")],l)&&(n[e(457,"^vTn")](e(398,"jBhF"),e(282,"kn^Z"))?(n[e(338,"jBhF")](oe,n[e(479,"^)XC")]),s="v",n[e(485,"OC3a")](He,n[e(314,"Hx[!")],n[e(207,"UQ(1")](i,n[e(337,"6IDZ")](n.GLkTP(7*24,3600),1e3)),![]),o[e(378,"UAx9")]=l):(n[e(238,"OC3a")](_0x2e1816,n.GcWfO),_0x4ae164.innerHTML=_0x408612));}else if(n.vsUXZ(i,I.guildVIP[I[e(351,"Hx[!")]])){let l="公会包月至<br>"+new Date(I[e(315,"tH!y")][I[e(307,"A*Z3")]]).toLocaleDateString();n[e(289,"KDdW")](o.innerHTML,l)&&(n.gGerb(oe,n.UwIIj(I[e(390,"Hx[!")],n[e(217,"^)XC")])),o[e(190,"%lus")]=l);}else if(n[e(389,")h@*")](i,17284896e5)){let l=e(235,"k57k");o[e(247,"CrM1")]!==l&&(n[e(304,"*Yk0")](e(342,"0zA0"),"WSnAQ")?(n.KTnxh(oe,n.HSqrp),r[e(295,"jBhF")](e(443,"a(H["),()=>{n[e(335,"Xn!H")](mn);},{once:!![]}),o[e(484,"7hXV")]=l):(_0x2ea918.checked=![],_0x1a5f9c.autoBotSwitch=!![],_0x49a7f9[e(428,"*Yk0")]("autoBotTip",()=>_0x2240c0[e(191,"ru3f")](),500)));}else if(n[e(286,"g(ge")](i,d)){let l=e(322,"P3(h");n.CgJDs(o[e(264,"6IDZ")],l)&&(n.KTnxh(oe,n[e(363,"Hx[!")]),o[e(441,"uNpj")]=l);}else if(n[e(417,"UAx9")](i,I[e(275,"9hbO")]))if(n[e(444,"f&xv")](n[e(496,"qeH8")],n[e(371,"[NFk")])){let l=e(193,"IAlp");o[e(350,"0gC)")]!==l&&(oe(n[e(234,"%6Ur")]),r[e(489,"Nryz")](n.cZYnw,dn),o[e(433,"f&xv")]=l);}else n[e(294,"0gC)")](_0x4bf795);else {const l=n.FvRhw[e(394,"9hbO")]("|");let u=0;for(;[];){switch(l[u++]){case"0":r[e(494,"tH!y")][e(293,"UQ(1")]="";continue;case"1":r[e(236,"OC3a")]="";continue;case"2":o[e(488,"f]5*")]=h+e(343,"%tGd");continue;case"3":r.checked=![];continue;case"4":r[e(393,"^vTn")]=!![];continue}break}}if(!r[e(227,"9*Qn")]&&!r[e(405,")h@*")]&&(r[e(299,"$kAl")]=function(){const l=e,u={sMKwY:function(g,y){return n.FOSkX(g,y)},uNgxw:n.XLYqW,cgFbt:n[l(460,"tH!y")]};this[l(308,"6IDZ")]?n[l(375,"&W]U")](n[l(377,"UQ(1")],l(465,"k57k"))?(a[l(242,"f&xv")]=![],I[l(184,")h@*")]=!![],de[l(317,"FX#@")](n[l(471,"OC3a")],()=>G.newRoom(),500)):(this[l(352,"0zA0")]?(_0x6a2394[l(285,"vxed")]=![],_0x49dc90[l(230,"ru3f")]=9,_0xd5eb01[l(492,"^vTn")](0)):(_0x2887d5[l(387,"9*Qn")]=![],u[l(498,"0gC)")](_0x589720,u[l(327,"uNpj")])),_0x1b94ed.auto(_0xcf4e7f[l(245,"db]N")]),_0x16c6ae[l(180,"qJ!L")](u[l(462,"OC3a")],()=>_0x12ff2c(),500)):(I[l(466,"0gC)")]=![],de[l(317,"FX#@")]("autoBotTip",()=>oe("酒馆挂机已关闭"),500)),I[l(228,"6IDZ")]=![],document.querySelector(l(446,"0gC)"))[l(463,"kn^Z")][l(292,"6IDZ")](l(491,"x*gV"),'"'+I[l(458,"f]5*")][l(347,"f]5*")]()[l(233,"A*Z3")](2,"0")+'"'),G.auto(I.autoBotSwitch),de.delay(n[l(362,"6IDZ")],()=>Ye(),500);}),!r.disabled&&!r.parentElement[e(411,"db]N")]&&(r[e(432,"Xn!H")][e(336,"9*Qn")]=function(){const l=e,u=n[l(323,")h@*")].split("|");let g=0;for(;[];){switch(u[g++]){case"0":I[l(269,"^vTn")]=!![];continue;case"1":document[l(232,"k57k")](n[l(321,"P3(h")])[l(313,"ru3f")][l(248,"%tGd")](l(287,"7hXV"),n[l(367,"UQ(1")]);continue;case"2":de.delay(n[l(395,"Hx[!")],()=>Ye(),500);continue;case"3":I[l(310,"uNpj")]=!![];continue;case"4":r[l(454,"9*Qn")]=!![];continue;case"5":G[l(224,"[NFk")](I.autoBotSwitch);continue;case"6":de[l(186,"ru3f")](n[l(208,"#O3T")],()=>G.readyStart(0),500);continue;case"7":a[l(376,"9hbO")]=![];continue;case"8":oe(n.xMndl);continue}break}}),s||n[e(359,"db]N")](i,I.guildVIP[I[e(449,"[NFk")]])){let l=n[e(318,"0zA0")](e(429,"UQ(1"),n[e(254,"0zA0")](s,"v")?n.XBfYQ:s?n[e(331,"7hXV")]:n[e(272,"f&xv")]);c.innerHTML!==l&&(oe(n[e(399,"g(ge")]),c.innerHTML=l,a.disabled=![],a.onchange=function(){const u=e;if(this[u(296,"[NFk")])if(n[u(478,"&W]U")](n[u(445,")h@*")],n[u(325,"vxed")]))r[u(407,"ru3f")]=![],I[u(451,"*Yk0")]=9,G[u(497,"k57k")](0);else {const g=_0xfe7896[u(467,"uyXJ")](_0x26bf45);g&&(g[u(393,"^vTn")]=![],n[u(401,"g(ge")](_0x201cbe,"task")||n.uWuhS(_0x31d00c,"mail")?g[u(382,"kn^Z")]=()=>_0x23e4e7():g.checked&&n[u(470,"dm0N")](_0x44afb0));}else I[u(181,"[NFk")]=![],n[u(283,"f]5*")](oe,n[u(194,"KDdW")]);G[u(386,"UAx9")](I.autoBotSwitch),de[u(340,"&W]U")](u(487,"qeH8"),()=>Ye(),500);});}else a[e(391,"P3(h")]="",a[e(483,"qJ!L")]=!![],a[e(296,"[NFk")]=![],c.innerHTML=e(431,"f&xv");!r[e(453,"Nryz")]&&!a[e(423,"0gC)")]&&(I.autoHGSwitch=![]);}async function On(){ln(),Mn(),_n();}var on="jsjiami.com.v7";function Ee(t,e){const n=qe();return Ee=function(i,s){i=i-159;let r=n[i];if(Ee.zMrtOV===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let g="",y="";for(let w=0,T,k,U=0;k=l.charAt(U++);~k&&(T=w%4?T*64+k:k,w++%4)?g+=String.fromCharCode(255&T>>(-2*w&6)):0)k=u.indexOf(k);for(let w=0,T=g.length;w<T;w++)y+="%"+("00"+g.charCodeAt(w).toString(16)).slice(-2);return decodeURIComponent(y)};const h=function(l,u){let g=[],y=0,w,T="";l=a(l);let k;for(k=0;k<256;k++)g[k]=k;for(k=0;k<256;k++)y=(y+g[k]+u.charCodeAt(k%u.length))%256,w=g[k],g[k]=g[y],g[y]=w;k=0,y=0;for(let U=0;U<l.length;U++)k=(k+1)%256,y=(y+g[k])%256,w=g[k],g[k]=g[y],g[y]=w,T+=String.fromCharCode(l.charCodeAt(U)^g[(g[k]+g[y])%256]);return T};Ee.GmFfot=h,t=arguments,Ee.zMrtOV=!![];}const o=n[0],c=i+o,d=t[c];return d?r=d:(Ee.dLpVYx===void 0&&(Ee.dLpVYx=!![]),r=Ee.GmFfot(r,s),t[c]=r),r},Ee(t,e)}function qe(){const t=function(){return [on,"nWXjIsdPYjqiDTEaJtmPbiPTG.cUFoQSmVM.FDv7==","5P6N5RYC5Rs7","WQT+CqKjWQ7cII3cVrddQ3xcI8kcWRrw","WQTTvqOpWQhcNZdcPa","F8kPW5jxgH/dKmkFdNWsWO/dMYCzWQVdK8oTW5VdP3e","5OAH6lks5l6T5A6e55Er5Bkq5OI255Ut5PAO5OYtFJxcUh7NM6dOG5FKVy3PQQZKUiBcPSkqW6xML5FcQEExSKtMOklLTRpLHiVPG7/KUkJPG5JdOZm5aUw9QUApHEAsSEs+Gow2MUE6OUweJUMbKEwmNEEuPghcQCo+WP/KUktMLR/OHiFLI6VNUyZMNB7LJ7hNLAZdNKHKW4ZKU6VPL7BLI4dOOkJLHP3PG7xLJO3NLy3dMbDEDEIeREwjPUEKU+ACK+wmTEEuLW","WPtdSIzaW59icW","yY3cUCoCWPS","FSkaW7r7fa","WRG0WOtcQSolW7WKhSkOWPFdSmkEWPJdKSkpW6BcKSo0E3XyWRX8WPpcKSkNxXi","WQ09smkuW5q","W5FcNmoPWQpcHa","jKSQF1/cQSoMWPK","a2jME8kziCoJWPORtrRdRa","WRhdNhpcGtO","WPtdVdTVW6zDcCkahCkpWPfC","W6zLcmkEWQS","ESk6BCkYW5i","W5NdHCkKeCo5W4NdUWC","WOetsSkmW5ZdPCkcWPa/W63cTmk8iSkN","W67cRSoYWQBcGSkFg8kGjZRcJq","W5zAdCoCWPJcSSooWQ0QW6JcS8ktgG","WQ/cQSo7caq","DI41cmoN","ACoCWPRdSei","n3HGEmoo","A8kPW5jcdXJdICk6bxOsWQW","W75oAejsrq4","WQ92CqWsWQZcNZdcUXhdKtpcJmku","WQaSWPhcUCoDWQ5KxCkRWP3dQq","FCo+WPNdQhGtW68rW7hcGSkoW6lcQCoe","W4ffnmkMWR7dHgy6WOyVW7OS","W4JcQmo2WQVcPa","iqjRWOJcRNvYkCkU","FCk+W5rScq","vftcV8k8W4C","WQPFvv9cvHhcPY8","W6bgBxNdJq"].concat(function(){return ["dSoeWQ7dOvy","W7RdJ8kTWQHx","CSkXlCk7W5W","WOOmCJHh","WOZdHxxcRc8Rdg3cRW","5Bsl5R685RsL","W6vKfCkmlSk4WOO","W4pcH8o7orFcSCoQ","zee2W5RdTbiIFCkhWQFdMmohW5FcUa","v8owWQBdIu0","W63dJ8oXW5pdHq","WO7dQbzzW4G","mLBcRbvN","dSoYWRSjuq","WQBdKvbzWO4/lKeq","lCopWRxdJ1BdQuJcM8oOuJ8nyce","54ky5yEQ5Rwf5yQo5R2O5RAj56oVW6dLV5RLIjVMVApMTjZNO7xMN4pMLi/MN43OHjTS","W59fm8kuWQVdL3e","WQr4W6tcUL9AW5zqugGuWPOEgW","W5CXWOddNHS","Bmo0WOddOgyMW7ivW7S","W5lcNSkPkJe","W6FcR2/dJq","o0RcVGj+","WPWkWOtcNmoa","W53cVCoKWQJcOq","kK07CftcUq","WQ0lsbT6","W6yIWRNdPYqiWP8","nu7cKs9x","nSoDWORcM8kBzmopW7lcLW","W4tcMZtdIfHsWRi","WOtdGqDDW7O","xmk4W6j6aW","WRC1WPNcTSoCWO9p","w8ksf8kbW5m","5BAn5R+g5REu","w8kmkSk+W7S","A2uKWRL2s8k1W5xcPSoHW6FdMG"].concat(function(){return ["WQf7W6NcSv1zW5DzFxSzWRm+eG","jvvFzmoZ","W5/cTW3dJ3m","WRrwaCkxW4W8ugdcMSoUW4NcTM0","qmkqgSkuW4O","W77cT2NdJCokWQ4i","f0pcLwtdQchcQ8o8cdZdSf/dVCoN","t8krF8kFW6WZysFcLq","dqvBWQtcHq","W7qcrSocWPTPdq","kCo4WPiZq1JdICkRnKSXWQa","fH56W5VcIa","h8oae8oiWRrNlxZcGvxdTJfAWRO","iKBdR8klWQajbmoOlmkQ","W47dN8khfSoTWOhdICoSFa","j8opWRldUvVdQ0a","WQNdH0b3WRe","F8oyWOJdVLZdVK4","vCkzW6TwDKCiWRnOWPyUWOO","W68sqSoNWRy","DexdGYFdIWq","c27cGcHY","fNFcGdPR","W5nFwq1B","W73dUCkgWPP2","xSkEsSktW6y3EIlcGvFdSq","zbZcSCouWPSLja","WR7cOaRdSve","eqrgWPdcUG","cZbXW5lcHSkmxW","5OwF6lkC5l6Z5A6f55wx5Bgy5OII55Q+5PAK5OYBrJj2iEEBMUIbR+s9VUMOK+s7ISkjcCol5PErlEExL8kd5QkH5BAM5yAs6ykt5lUP6yc1WO/cJmoyW4RLV5pMJihMK4xKVzpLT4JNUApLHjJPGR7LJk7NLQBdKdDRw+s4R+AwRoIhTowiHEE6IoAEQowpGEExG8oHWQVcGJ/KUANPLR7LIk3OOj7LHyhPGBdLJ7dNLQieCeqg6iso5yMZ56EG5P6p5y+Q55sC","W7VdHCkIpSoR","WPtdLezgWQ8","W5NdImk8WQXcnhq","W6PFEepdSG","lCoVWQuXFW","WRpdKHHKW7C"]}())}())}();return qe=function(){return t},qe()}((function(t,e,n,i,s,r,a){return t=t>>7,r="hs",a="hs",function(o,c,d,h,l){const u=Ee;h="tfi",r=h+r,l="up",a+=l,r=d(r),a=d(a),d=0;const g=o();for(;[]&&--i+c;)try{h=-parseInt(u(218,"YAV)"))/1*(-parseInt(u(196,")&8C"))/2)+parseInt(u(215,"HW@S"))/3*(-parseInt(u(173,"CA6d"))/4)+parseInt(u(268,"eBCJ"))/5*(parseInt(u(262,"Q%Tm"))/6)+parseInt(u(217,"7yKW"))/7+-parseInt(u(223,"fB[U"))/8+parseInt(u(174,"ne8E"))/9+-parseInt(u(205,"]CEv"))/10;}catch{h=d;}finally{if(l=g[r](),t<=i)d?s?h=l:s=l:d=l;else if(d==s.replace(/[SnXIUtbdqQPWMGDJTYFEV=]/g,"")){if(h===c){g["un"+r](l);break}g[a](l);}}}(n,e,function(o,c,d,h,l,u,g){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),h="join",o[h]("")})}))(25344,962052,qe,200),qe&&(on=qe);function ln(){var s;const t=Ee,e={tZafM:function(r,a){return r==a},Dnokl:t(242,"2APE"),iqYwZ:t(270,"(zpA"),WZSXy:t(182,"zf43"),iutIL:t(261,"@zvG"),fLRxo:function(r,a,o,c,d){return r(a,o,c,d)},IVrqz:t(244,"HPmX"),VqvqU:t(191,"@zvG"),MPCVQ:function(r,a,o,c,d){return r(a,o,c,d)},qZsqH:function(r,a){return r!==a},HqeGO:function(r,a){return r===a},povSo:t(185,"]CEv"),TyQAp:function(r,a){return r(a)},mShnK:`点击添加激活码
`,TwVJI:t(237,"vKVy"),DLQAH:function(r,a){return r==a},OPOHG:t(202,"756c"),YqfAS:function(r,a){return r+a},nEbgC:function(r,a){return r+a},xRWjk:"hGPif",mQvMd:t(195,"UePG"),EoUnz:t(221,"vKVy"),rgwfk:"2px solid rgb(242, 222, 156)",THFBQ:function(r,a,o){return r(a,o)},ZliyZ:function(r,a){return r(a)},thokD:t(257,"mIIT"),TKWJe:"fYdcy",LJtFx:t(250,"(zpA"),cXHsh:"POST",DxgCF:t(243,"HPmX")};if(!I.userID)if(e[t(226,"756c")]===e[t(241,"afCA")]){let r;_0x28091b[t(260,"Q%Tm")],e[t(248,"YAV)")](_0x244209[t(164,"eBCJ")],!![])?r=t(171,"uZbq"):r=e[t(166,"pS9g")],_0x2b4be1[t(256,"afCA")](e[t(177,"afCA")],e[t(229,"m)#T")]+_0x2e1bda[t(271,"#uIx")].split(" ")[0]+r);}else {(s=G.class(e[t(239,"Pj@I")]))==null||s[t(245,"HW@S")]();return}let n=document[t(181,"pS9g")]("AC");const i={username:I.userID,playername:I[t(253,"2HfN")],guildID:I.guildID,password:n.value};fetch(e[t(190,"(zpA")],{method:e[t(198,"afCA")],headers:{"Content-Type":e[t(264,"xWg9")]},body:JSON.stringify(i)}).then(r=>r[t(188,"2APE")]()).then(r=>{var c;const a=t,o={NLhuJ:function(d,h,l,u,g){return e[Ee(178,"756c")](d,h,l,u,g)},nMCCG:a(212,"7yKW"),Slpgb:function(d,h){return e[a(265,"#uIx")](d,h)},wepqd:function(d,h){return e.HqeGO(d,h)},DtDyx:a(167,"m)#T"),vOXDz:function(d,h){return d===h},IkoLy:e[a(266,"nGhB")],mMUQc:function(d,h){return e[a(236,"rMvK")](d,h)},kWpAg:a(270,"(zpA"),bBIOR:function(d,h){return d+h},XuYMG:e[a(252,"@zvG")]};if(e[a(193,"uZbq")]!=="EWUPB"){if(r.message==""){let d;r[a(269,"HPmX")],e[a(189,"756c")](r[a(219,"rMvK")],!![])?d=e[a(175,"#uIx")]:d=e[a(168,"E0UW")],n[a(267,"HW@S")](a(230,"7yKW"),e[a(163,"oukW")](e.nEbgC(e.WZSXy,r[a(211,"]Ctk")][a(169,"uZbq")](" ")[0]),d));}else if(e[a(176,"8bzg")](e.xRWjk,a(207,"oneP")))n.setAttribute(e.iqYwZ,e[a(216,"M#5g")](e[a(203,"E0UW")],r[a(220,"pS9g")]));else {(c=_0x1712de[a(165,"Pj@I")](e[a(224,"JU6R")]))==null||c.getTaskListFromServer();return}if(r.guildExpirationTime){const d=r.guildExpirationTime.replace(" ","T"),h=new Date(d);I.guildVIP[I[a(200,"(zpA")]]=h;}r[a(180,"vKVy")]==!![]?e[a(240,"95y#")]!==e[a(232,"%rl&")]?(I.v=!![],document.getElementById(a(204,"7*Da")).style[a(192,"2HfN")]=e[a(160,"@zvG")],Object[a(172,"abzF")](O.vskinMap).forEach(([d,h])=>{const l=a;if(o.Slpgb(l(187,"0qa2"),"iNsZe"))if(O[l(234,"M#5g")][d])if(o.wepqd(o[l(199,"HW@S")],o[l(233,"ne8E")]))O.skinMap[d]=new Set([...O[l(231,"YAV)")][d],...h]);else {const u=_0x8295fe.guildExpirationTime[l(214,"JU6R")](" ","T"),g=new _0x4a1d4c(u);_0x56dcd6[l(259,"PgF(")][_0x3a78ca.guildID]=g;}else o[l(209,"E0UW")](o[l(255,"JLI[")],"BxPWr")?O[l(238,"m)#T")][d]=new Set(h):_0x405682[l(197,"oneP")][_0x7fa362]?_0x4942d6[l(194,"]CEv")][_0x153a62]=new _0x7405f9([..._0x5a3ed4[l(247,"afCA")][_0x2fc5a4],..._0x2474c1]):_0x44b7da[l(210,"2APE")][_0xccdc4e]=new _0x101310(_0x593906);else o[l(179,"95y#")](_0x3b4e4f,l(235,"95y#"),o.nMCCG,1e4,l(227,"UePG"));}),e[a(258,"7yKW")](setTimeout,()=>{const d=a;e[d(249,"HW@S")](Ve,d(246,"PgF("),e[d(251,"Q%Tm")],1e4,e.VqvqU);},5e3),I[a(186,"#uIx")]=0):_0x32d5e2[a(170,"JLI[")]=o[a(201,"E0UW")](_0xe85aa8,_0x40d7a8[a(161,"ne8E")]):I.trialTime=parseInt(r.trialTime),e.ZliyZ(Un,r.setting),n.value="",e[a(263,"CA6d")](Rn,r.activated),e.TyQAp(Ye,!![]);}else _0x18f357[a(159,"mIIT")](o.kWpAg,o[a(206,"nGhB")](o[a(213,"ne8E")],_0x65e490[a(183,"mIIT")]));})[t(228,"hpkB")](r=>console[t(162,"HW@S")](t(225,"@lAT"),r));}async function Pn(t,e){const n=`https://goka.top:8080/getLottery?username=${t}&secId=${e}`;return fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>(I.lotteries=i,console.table(i),i)).catch(i=>(console.error("Error:",i),[]))}async function _n(){try{const t=document.getElementById("choujiang");t.href="https://goka.top:8080/choujiang?username="+I.userID,(await Pn(I.userID,0)).forEach(n=>{Sn(n.secId,n.itemId,n.itemNum,n.times);});}catch(t){console.error("Error during fetching:",t);}}async function cn(t,e,n,i,s){const r={username:I.userID,itemId:e,secId:t,times:n,level:i,itemNum:s};fetch("https://goka.top:8080/recLottery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(a=>console.error("Error:",a));}async function dn(t){if(this.checked)this.removeEventListener("change",dn);else return;const e={username:I.userID};try{const i=await(await fetch("https://goka.top:8080/trial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return I.trialTime=parseInt(i.message),console.warn(I.trialTime),Ye(!0),i}catch(n){return console.error("Error:",n),[]}}async function Mn(){const t={tianGuo:!1,username:I.userID,officerLv:I.curOfficerLv,getData:!0};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);}).catch(e=>console.error("Error:",e));}async function Nn(t){let e={tianGuo:t,username:I.userID,officerLv:I.curOfficerLv,getData:!1};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+n.PlayerTianGuo+"/"+n.PlayerCount+" = "+(n.PlayerTianGuo/n.PlayerCount).toFixed(2);}).catch(n=>console.error("Error:",n));}async function un(t=I.nickname){try{const e=await fetch(`https://goka.top:8080/support?username=${t}&userid=${I.userID}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.status===204||e.headers.get("Content-Length")==="0"){console.warn("今日已3助力");return}if(e.ok){const n=await e.json();for(let i of n){let s=0;for(;;){console.warn(i);let r=mn(i);if(await ye(5e3),r)s++;else break;if(s>2)break}}}}catch(e){console.error("Error:",e);}}async function Hn(t){try{await fetch("https://goka.top:8080/setting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});}catch(e){console.error("Error:",e);}}async function Un(t){try{const e={};t==null||t.forEach(n=>{e[n.settingKey]=n.value;}),xt.forEach(([n,i,s])=>{const r=document.getElementById(n);r&&(r.checked=Be(i)??(e==null?void 0:e[n])==="true"??s,r.dispatchEvent(new Event("change")));});}catch(e){return console.error("Error fetching settings:",e),{}}}var fn="jsjiami.com.v7";((function(t,e,n,i,s,r,a){return t=t>>4,r="hs",a="hs",function(o,c,d,h,l){const u=De;h="tfi",r=h+r,l="up",a+=l,r=d(r),a=d(a),d=0;const g=o();for(;[]&&--i+c;)try{h=-parseInt(u(275,"i[g!"))/1+-parseInt(u(287,"H8$i"))/2+parseInt(u(283,"Q^pe"))/3+-parseInt(u(290,"Ju8B"))/4+-parseInt(u(302,"Q[MF"))/5*(parseInt(u(288,"k10q"))/6)+-parseInt(u(295,"Q^pe"))/7*(-parseInt(u(299,"SsVB"))/8)+-parseInt(u(267,"Zeua"))/9*(-parseInt(u(274,"sJ&P"))/10);}catch{h=d;}finally{if(l=g[r](),t<=i)d?s?h=l:s=l:d=l;else if(d==s.replace(/[xRTXtKWDPCLlSFgdwJIr=]/g,"")){if(h===c){g["un"+r](l);break}g[a](l);}}}(n,e,function(o,c,d,h,l,u,g){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),h="join",o[h]("")})}))(3040,604003,et,192),et&&(fn=15455);function De(t,e){const n=et();return De=function(i,s){i=i-266;let r=n[i];if(De.mVmvMc===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let g="",y="";for(let w=0,T,k,U=0;k=l.charAt(U++);~k&&(T=w%4?T*64+k:k,w++%4)?g+=String.fromCharCode(255&T>>(-2*w&6)):0)k=u.indexOf(k);for(let w=0,T=g.length;w<T;w++)y+="%"+("00"+g.charCodeAt(w).toString(16)).slice(-2);return decodeURIComponent(y)};const h=function(l,u){let g=[],y=0,w,T="";l=a(l);let k;for(k=0;k<256;k++)g[k]=k;for(k=0;k<256;k++)y=(y+g[k]+u.charCodeAt(k%u.length))%256,w=g[k],g[k]=g[y],g[y]=w;k=0,y=0;for(let U=0;U<l.length;U++)k=(k+1)%256,y=(y+g[k])%256,w=g[k],g[k]=g[y],g[y]=w,T+=String.fromCharCode(l.charCodeAt(U)^g[(g[k]+g[y])%256]);return T};De.KZWorK=h,t=arguments,De.mVmvMc=!![];}const o=n[0],c=i+o,d=t[c];return d?r=d:(De.KWuCic===void 0&&(De.KWuCic=!![]),r=De.KZWorK(r,s),t[c]=r),r},De(t,e)}function et(){const t=function(){return [fn,"djLsSXljiwDaKTmi.dcoRxm.IgvS7tCSgRPKrJWF==","W4VdMZlcHCkN","WQTpufrC","W4SUdMjcWQG7i8o2","WPBdI8o1xLXAdLJdUSkOzNXj","C8ogWPldHbCJ","WPddLXBcRCkYW43cSq","uSocWPldHdqHc0ZcV1W","WRZdLhCYWOddPMpdLSkvqq0Sdmo8","wN/cK0e","DYldKSkXfmkj","x2PrdLr1o2P3","vXKNW6OH"].concat(function(){return ["WRaPzXGvWR54rSkrEqhdT8oYW5S","W5PSWQ43WOCkxcPWk8kuWRC","vmoVWOJdIX4","tSodn2JdL8kn","W7ddNtFcVSk3","WPv7vx9JWO8GbCoCrCk5","ymodFmkpwG","fmodhSkB","W7/dN8odamoxCsa","aa5AjmkqWP3dRCkEhCoJymkcgq","n8kkW73cRmoGjmk6g8kLrmkFfLO","WODTxMHyWQO","W7eMrSosWO/cLLFcLeJdTG","oSkbDZ7cLmkgW58feb/dVZbp"].concat(function(){return ["eCo5W50NWOCpCIlcLSomWRG","zIFdK8k6cq","WQpcP8kGrv/dTdFcGCosWO/dHqNcHG","W7dcSNBcVq","BCkyWOXXW5m","de8Bpa","CSolWPhdTSkZ","aa1BimkrW57cTCkLiCo1ra","W6dcImkQhrylsa","vWXgA1O7vmkwWRlcNdtcSmk0","W5VcGdbLgCo1hgddLW","WPFdGSoXhXyuF1NdJa"]}())}())}();return et=function(){return t},et()}async function jn(t,e){const n=De,i={daWKa:function(a,o){return a||o},MXhfl:function(a,o,c){return a(o,c)},YQkNM:function(a,o){return a+o},UHtkf:function(a,o){return a*o},uGJkl:function(a,o){return a-o},vtymJ:function(a,o,c){return a(o,c)},wsXmk:n(286,"Pwao"),bOiiR:function(a,o,c){return a(o,c)},DhHRq:"https://goka.top:8080/gameRecords/save",YIlRB:n(281,"(t!i"),msckg:"application/json",DxrPX:n(277,"H8$i")};let s=Se[t];s||(Se[t]=s={});let r=![];if(e[n(282,"Fx!j")](({figure:a,game_result:o,game_time:c,game_over_time:d,used_general:h,label_mode:l})=>{const u=n;o!=255&&!s[d]&&(s[d]={shenfen:a,result:i.daWKa(o,0),duration:c,general:h==null?void 0:h.map(g=>O[u(279,"Q[MF")][g]||g)},r=!![]);}),r){i.vtymJ(He,i[n(294,"*BR5")],st);try{I.v&&await i[n(300,"Zeua")](fetch,i[n(280,"8J9b")],{method:i[n(278,"Zeua")],headers:{"Content-Type":i.msckg},body:JSON[n(298,"W60v")]({[I[n(285,"Q[MF")]]:Se})})[n(270,"spq6")](a=>a[n(293,"S26y")]())[n(291,"Q5Hm")](a=>{const o=n;!a&&i[o(292,"k10q")](setTimeout,()=>Laya[o(296,"SsVB")][o(271,"K!Dm")][o(268,"zdSY")](),i.YQkNM(Math[o(289,"K!Dm")](i[o(276,"zdSY")](Math[o(266,"zdSY")](),i[o(301,"Q[MF")](i.uGJkl(3e5,1e4),1))),1e4));});}catch(a){console.error(i[n(273,"uf#@")],a);}}}async function zn(t=I.userID){const e=`https://goka.top:8080/gameRecords/get?username=${t}`;return fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>(xn(n),n)).catch(n=>(console.error("Error:",n),[]))}const Ne=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function Me(t,e=20,n=500,i=()=>{}){const s=await Promise.resolve(t());s?i(s):e>0?setTimeout(()=>Me(t,e-1,n,i),n):i(null);}function me(t,e=20,n=500){return new Promise(i=>{Me(t,e,n,i);})}function ye(t,e){return new Promise((n,i)=>{setTimeout(()=>n(e),t);})}const G={instance:{},scene:"",gamescene:null,flag:null,limit:300,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,chat:()=>null,classes:Object.fromEntries(["SgsSprite","SgsText","SgsTexture","SgsFlatButton","SgsSpriteButton","SgsSpriteFilterBtn","SgsImage","SgsFlatImage","BaseEffect","BaseSpineEffect"].map(t=>[t,void 0])),class(t,e,n){var i,s,r,a,o,c,d,h,l,u,g,y,w,T,k,U,Q,S,E,M,q,B,j,ie,le,he,W,A;if(e||!this.classes[t]){if(typeof n=="function")this.classes[t]=n();else if(n)this.classes[t]=n;else if(t=="GameEventDispatcher")this.classes[t]=(i=this.find("SceneLayer"))==null?void 0:i.ged;else if(t=="SgsText")this.classes[t]=(s=this.find("SceneLayer","","topMenu","timeLabel"))==null?void 0:s.constructor;else if(t=="SgsTexture")this.classes[t]=(r=this.find("SceneLayer","","topMenu","lineBg"))==null?void 0:r.constructor;else if(t=="SgsFlatButton")this.classes[t]=(a=this.find("SceneLayer","","topMenu","logo"))==null?void 0:a.constructor;else if(t=="SgsSpriteFilterBtn")this.classes[t]=(o=this.find("SceneLayer","","topMenu","backBtn"))==null?void 0:o.constructor;else if(t=="SgsSpriteButton")this.classes[t]=(h=(d=(c=this.class("SgsSpriteFilterBtn"))==null?void 0:c.prototype)==null?void 0:d.__proto__)==null?void 0:h.constructor;else if(t=="SgsSprite")this.classes[t]=(g=(u=(l=this.class("SgsSpriteButton"))==null?void 0:l.prototype)==null?void 0:u.__proto__)==null?void 0:g.constructor;else if(t=="ServerProxy")this.classes[t]=(y=this.class(this.classes.TaskManager?"TaskManager":"ActivityManager"))==null?void 0:y.proxy;else if(t=="ActivityManager"){let D=!this.instance.TaskDailyView;this.classes[t]=(w=this.get("TaskDailyView"))==null?void 0:w.manager,D&&this.del("TaskDailyView");}else if(t=="GeneralSkinManager"){let D=!this.instance.GeneralSkinView;this.classes[t]=(T=this.get("GeneralSkinView"))==null?void 0:T.gsm,D&&this.del("GeneralSkinView");}else if(t=="TaskManager"){let D=!this.instance.MentorSelfTaskView;const L=this.get("MentorSelfTaskView");L==null||L.tabCliCked(1);const f=(k=this.find(L,"MentorSelfLiCheng","MentorLiChengUI"))==null?void 0:k[0];if(!f)return null;f.isSelf=!0,(U=f.taskData)==null||U.splice(0,1/0,{HasAward:!0,baseVo:{name:"",MentorReward:{ApprenticeItemsList:[]}},TaskConditions:[]}),f.updateContent(),this.classes[t]=(M=(E=(S=(Q=f==null?void 0:f.panel)==null?void 0:Q.content)==null?void 0:S._children)==null?void 0:E[0])==null?void 0:M.manager,D&&this.del("MentorSelfTaskView");}else if(t=="RogueLikePveManager")this.classes[t]=this.find("SceneLayer","RogueSmallMapScene","PveMgr"),this.classes[t]||(this.classes[t]=(q=this.get("RogueSmallMapScene"))==null?void 0:q.PveMgr,this.del("RogueSmallMapScene",3e5));else if((t=="BaseEffect"||t=="BaseSpineEffect"||t=="SgsImage"||t=="SgsFlatImage")&&(this.classes[t]=(ie=(j=(B=this.gamescene)==null?void 0:B.SelfSeatUi)==null?void 0:j.getEffectType(t=="BaseEffect"?2:4))==null?void 0:ie.constructor,!this.classes[t])){const D=this.get("SkinInfoWindow");if(!(D!=null&&D.skinBigSps))return;Object.assign(D,{skinData:{skinBaseVo:{}},generalinfo:{ItemID:1}}),D.showRightInfo(),D.skinBigSps.CreateBgEffect(),D.skinBigSps.CreateSpineEffect(),this.classes.SgsImage=(le=D.skinImg)==null?void 0:le.constructor,this.classes.SgsFlatImage=(he=D.skinRightImg)==null?void 0:he.constructor,this.classes.BaseEffect=(W=D.skinBigSps.bgEffect)==null?void 0:W.constructor,this.classes.BaseSpineEffect=(A=D.skinBigSps.spineBg)==null?void 0:A.constructor,this.del("SkinInfoWindow");}}return this.classes[t]},get(t,e){var n;if(t in this.classes)return this.class(t)?new this.classes[t]:void 0;if(e||!this.instance[t]){this.del(t),this.instance[t]=Laya.ClassUtils.getInstance(t);try{this.instance[t].Init();}catch{console.error("Laya instance "+t+" Init() error!");}}return (n=this.instance[t])!=null&&n.timeoutId&&clearTimeout(this.instance[t].timeoutId),this.instance[t]},del:(()=>{function t(e){this.instance[e]&&(e.endsWith("Window")?this.instance[e].Close():this.instance[e].destroy(),delete this.instance[e].timeoutId,delete this.instance[e]);}return function(e,n=0){this.instance[e]&&(this.instance[e].timeoutId&&(clearTimeout(this.instance[e].timeoutId),delete this.instance[e].timeoutId),n?this.instance[e].timeoutId=setTimeout(()=>{t.call(this,e);},n):t.call(this,e));}})(),find:(()=>{const t=i=>Array.isArray(i)&&i.length==1?i[0]:i,e=i=>Object.prototype.toString.call(i)==="[object Object]";function n(i,s){var r;if(s in i)return i[s];{let a=s?(r=i==null?void 0:i._children)==null?void 0:r.filter(o=>{var c;return o.name==s||((c=o.constructor)==null?void 0:c.name)==s}):i==null?void 0:i._children;return a!=null&&a.length?t(a):[]}}return function(...i){let s=e(i[0])?i.shift():Laya.stage,r=i.reduce((a,o)=>a instanceof Object?Array.isArray(a)?a.length?Array.isArray(o)?t(a.flatMap(c=>o.flatMap(d=>n(c,d)))):t(a.flatMap(c=>n(c,o))):[]:e(a)?Array.isArray(o)?t(o.flatMap(c=>n(a,c))):t(n(a,o)):[]:[],s);return (r==null?void 0:r.length)==0?null:r}})(),clickBuilder(t,e,n,i=r=>r,s=(r,a)=>(r.onClick(),a)){if(!t)return null;function r(a,o=!0){return a?o&&!a[e]?!1:s(a,o):null}return function(...a){let o=typeof a[0]=="boolean"?a.shift():null;if(a.length==0)a=n||Object.keys(t);else {let c=t.map(i);a.every(d=>c.includes(d))&&(a=a.map(d=>c.indexOf(d)));}if(typeof o=="boolean")return a.map(c=>r(t[c],o));for(let c of a){let d=t[c];if(d!=null&&d[e])return r(d)}return null}},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.chat=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var i,s,r,a;if((r=(s=(i=this.gamescene)==null?void 0:i.seatContainer)==null?void 0:s.seatUIs)!=null&&r.length)return !0;let t=this.find("SceneLayer",Ne);if(!t)return !1;let e=(a=t.seatContainer)==null?void 0:a.seatUIs,n=t.chatViewUI;if(!(e!=null&&e.length)||!n)return !1;if(this.gamescene=t,I.v&&Fn(),Qn(),H.fromUI(),typeof this.gamescene.manager.UpdateSeatFixedViewID=="function"&&!this.gamescene.manager.UpdateSeatFixedViewID.toString().includes("room.fromUI")){const o=this.gamescene.manager.UpdateSeatFixedViewID;Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){o.apply(this,arguments),de.delay("seats",H.fromUI.bind(H),500);}});}return this.chat=(o,c=!1)=>{var d;return n!=null&&n.chatInput?(n.chatInput.text=o,c&&((d=n.sendBtn)==null||d.onClick()),!0):null},this.limit=290,me(()=>H.firstID!==void 0,300).then(()=>this.auto(I.autoBotSwitch)),!0},wugu:(()=>{let t=null;return function(e=1e3){return new Promise(n=>{de.loop("wugu",()=>{var r,a;let i=this.find("WindowLayer","WuGuFengDengWindow");if(!i){de.clear("wugu"),n(t),t=null;return}let s=(r=i.showCardUIs)==null?void 0:r.find(o=>o.maskAlpha==0);s&&((a=i.OnSelectNormalCardUi)==null||a.call(i,s),t=s.Card.cardId);},e);})}})(),yanJiao(t,e=1){var s;const n=this.find("WindowLayer","YanJiaoWindow");if(!n)return;if(((s=n.seat)==null?void 0:s.index)!=H.mySeats[0])return !1;if(e%2!=0){let r=n.cardQueues.flatMap(a=>a);n.cardQueues[0].splice(0,1/0,...r),n.cardQueues[1].splice(0,1/0),n.cardQueues[2].splice(0,1/0),n.layoutCardUIs();return}let i=n.cardQueues.flatMap(r=>r).reduce((r,a)=>(r[a.Card.CardNumber].push(a),r),Array.from({length:14},()=>[]));n.cardQueues[0].splice(0,1/0,...t[2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),n.cardQueues[1].splice(0,1/0,...t[e/2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),n.cardQueues[2].splice(0,1/0,...t[1-e/2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),n.layoutCardUIs();},async newRoom(){var s,r,a,o,c,d;const t=this.find("SceneLayer","HallScene","roomListView");if(![74,84].includes(t==null?void 0:t.modeId))return oe("请进入身份演武房间列表后再开启挂机！"),!1;t.sendCreateTable();const e=await me(()=>this.find("WindowLayer","CreateTableWindow"));if(!e)return null;(s=e.showMoreHandler)==null||s.call(e),(a=(r=e.modeBox)==null?void 0:r._labels)!=null&&a.length&&(e.modeBox.selectedIndex=e.modeBox._labels.length-1),e.timeBox&&(e.timeBox.selectedIndex=1),e.banItemBox&&(e.banItemBox.selected=!0),e.passwordInput&&(e.passwordInput.text="GuDuZun"),await ye(1e3),(o=e.sureHandler)==null||o.call(e);const n=await me(()=>this.find("SceneLayer","TableScene"));if(!((d=(c=n==null?void 0:n.seatListView)==null?void 0:c.seatList)!=null&&d.length))return null;let i=n.seatListView.seatList.filter(h=>!h.WaitInfo).slice(-1)[0];return n.seatListView.showBtns(i),n.seatListView.sitHandler(),!0},async readyStart(t){var i,s,r,a,o,c,d,h,l,u,g,y,w,T,k,U;const e=await me(()=>this.find("SceneLayer","TableScene"),t);let n=(s=(i=e==null?void 0:e.seatListView)==null?void 0:i.seatList)==null?void 0:s.length;if(!n||!(e!=null&&e.startUI))return null;if(await ye(2e3),(a=(r=e.dianjiangView)==null?void 0:r.onOpenDJClick)==null||a.call(r),!((c=(o=e.startUI)==null?void 0:o.startBtn)!=null&&c.visible))return (h=(d=e.startUI)==null?void 0:d.readyBtn)!=null&&h.visible&&((u=(l=e.startUI).readyHandler)==null||u.call(l)),!0;if(I.autoBotSwitch===!0)for(let Q of e.seatListView.seatList.filter(S=>!S.WaitInfo&&S.seatId>=n/2))e.seatListView.showBtns(Q),e.seatListView.addAiMHandler(Q),await ye(200);if((g=e.confirmNormalAi)==null||g.call(e),await ye(1e3),I.autoBotSwitch===!0&&((T=(w=(y=e.banGeneralBtn)==null?void 0:y.skins)==null?void 0:w[0])!=null&&T.startsWith("open"))){e.banGeneralHandler();const Q=await me(()=>this.find("WindowLayer","BanGeneralWindow"));if(!((k=Q==null?void 0:Q.showItemui)!=null&&k.length))(U=Q==null?void 0:Q.Close)==null||U.call(Q);else {for(let S of Q.showItemui.slice(0,7))S.onClick(),await ye(200);Q.onSureBtnClick();}}return await ye(5e3),Me(()=>{let Q=this.find("SceneLayer","TableScene","startUI");if(!(Q!=null&&Q.startBtn)||!(Q!=null&&Q.confirmStart))return "Cancel";if(Q.startBtn.enabled)Q.confirmStart();else return !1;return !0},60,2e3),!0},auto(t){var e,n,i,s,r,a,o,c,d,h,l,u,g,y;if(t!=this.flag&&(this.flag=t,de.clear("auto"),t!==null))if((i=(n=(e=this.gamescene)==null?void 0:e.seatContainer)==null?void 0:n.seatUIs)!=null&&i.length){if(this.deal.toString().endsWith("null")){let w=(s=this.gamescene.seatContainer)==null?void 0:s.seatUIs,T=(a=(r=this.gamescene.seatContainer)==null?void 0:r.selfSeatUi)==null?void 0:a.skillItems,k=(d=(c=(o=this.gamescene.seatContainer)==null?void 0:o.selfSeatUi)==null?void 0:c.cardContainer)==null?void 0:d.activatedCardtems,U=(u=(l=(h=this.gamescene.seatContainer)==null?void 0:h.selfSeatUi)==null?void 0:l.buttonBar)==null?void 0:u.btns;if(!w||!k||!U)return !1;let Q=w.map(B=>B.seat.index),S=w.map((B,j)=>({i:j,id:B.seat.fixedViewId+(B.seat.isHide?8:0)})).sort((B,j)=>B.id-j.id).map(B=>B.i),E=w.map((B,j)=>B.seat.figure||(j?0:-1)),M=w.map(B=>B.seat.playerInfo.clientId<4e9?0:B.seat.playerInfo.showName.includes("金")?2:1);M.some(Boolean)&&oe("对战AI小杀！"),S=S.filter(B=>M[B]==1&&E[B]!=E[0]).concat(S.filter(B=>M[B]==2&&E[B]!=E[0])).concat(S.filter(B=>M[B]!=0&&E[B]==E[0])).concat(S.filter(B=>M[B]==0)),console.warn("优先级",S.map(B=>["玩家-","小杀-","玫瑰金-"][M[B]]+(H.name(Q[B])||B)+"-身份"+E[B])),this.skill=this.clickBuilder(T,"activated",null,B=>{var j;return (j=B.skill)==null?void 0:j.SkillId},(B,j)=>{var ie;return B.SetSelected(j),(ie=B.skill)==null?void 0:ie.SkillId}),this.card=this.clickBuilder(k,"activated",null,B=>{var j;return (j=B.Card)==null?void 0:j.cardId},(B,j)=>{var ie;return B.setSelected(j),(ie=B.Card)==null?void 0:ie.cardId}),this.seat=this.clickBuilder(w,"activated",S,B=>{var j;return (j=B.seat)==null?void 0:j.index},(B,j)=>{var ie;return B.seat.SetSelected(j),(ie=B.seat)==null?void 0:ie.index}),this.btn=this.clickBuilder(U,"_enabled",null,B=>B.name,(B,j)=>(B.onClick(),B.name));let q=B=>Array.isArray(B)?B[0]:B;this.deal=(B=[],j=[],ie=[])=>{var he,W,A,D;let le=q(this.card(...B));(he=ue.name.闪电)!=null&&he.has(le)?le=q(this.card(!0)):(W=ue.name.铁索)!=null&&W.has(le)?j=[!1]:(A=ue.name.无懈)!=null&&A.has(le)?ie=[3,1,0,2]:(D=ue.name.桃)!=null&&D.has(le)&&w.some((L,f)=>{var m,b;return M[f]==1&&E[f]!=E[0]&&!((m=L==null?void 0:L.seat)!=null&&m.isDead)&&((b=L==null?void 0:L.seat)==null?void 0:b.currentHp)<=0})&&(ie=[1,2,3,0]),q(this.seat(...j)),this.flag==9&&(ie=[3,1,0,2]),this.btn(...ie);};}if(t==9){const w=()=>{var T;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,((T=this.gamescene.Manager)==null?void 0:T.GamePassedTime)>60&&de.loop("auto",w,500);};de.loop("auto",w,3500),oe("启动黄盖主公自动苦肉模式");}else if(t==3){let w=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,w,w.stageMoveHandler),de.loop("auto",()=>{w.seat.OnlineState!=3&&w.onTrusteeshipClick(),this.limit--<=0&&this.auto(I.autoBotSwitch);},1e3),oe("切换到AI托管挂机...");}else if(t){let w=(y=(g=this.gamescene)==null?void 0:g.seatContainer)==null?void 0:y.selfSeatUi;de.loop("auto",()=>{var T;((T=w==null?void 0:w.seat)==null?void 0:T.OnlineState)>=3&&(w==null||w.stageMoveHandler()),this.deal();},1e3),oe("切换到脚本接管挂机...");}else console.warn("酒馆挂机已关闭！");}else this.flag=null;}},Mt=(()=>{const t=n=>Array.isArray(n)?n:[n];function e(n=!0,i,s,r){var c,d,h,l,u,g;const a=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="SelectCardWindow"?this:G.find("WindowLayer","SelectCardWindow");if(!a)return null;if(((d=a.seat)==null?void 0:d.index)!=(s>=0?s:H.mySeats[0])||i>0&&((h=a.Skill)==null?void 0:h.SkillId)!=i)return !1;r=(r>0?r:((l=a.Skill)==null?void 0:l.SelectCardCountWhenResponse)||1)-(((u=a.selectCardUis)==null?void 0:u.length)||0);let o=t(G.find(a,"SkillSelectCardUi")).filter(y=>{var w;return (y==null?void 0:y.activated)&&!((w=a.selectCardUis)!=null&&w.includes(y))}).slice(0,r).map(y=>{var w;return a.onTouchCard({target:y}),(w=y.Card)==null?void 0:w.CardId});return n===!0&&((g=a.confirmClick)==null||g.call(a)),o}return async function(n,...i){var U,Q;const s=await me(()=>G.find("WindowLayer","SelectCardWindow"),50,100);if(n)return e.apply(s,i);const r=s==null?void 0:s.confirm_btn,a=((U=s.Skill)==null?void 0:U.SelectCardCountWhenResponse)||1;if(!(r!=null&&r.textField)||!(a>1)||((Q=s.seat)==null?void 0:Q.index)!=H.mySeats[0])return !1;let{x:o,y:c,width:d,height:h,_labelColors:l,_labelPadding:u,textField:{fontSize:g,font:y,bold:w},constructor:T}=r,k=s.myFuncBtn||new T;return Object.assign(k,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:d,height:h,labelSize:g,labelFont:y,labelBold:w,_labelColors:l,_labelPadding:u}),k.pos(o-1.2*d,c),s.myFuncBtn||(k.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),s.addChild(s.myFuncBtn=k),s.myFuncBtn.on(Laya.Event.CLICK,s,e)),!0}})(),Fn=(()=>{function t(n){var r,a;const i=((r=this==null?void 0:this.constructor)==null?void 0:r.name)=="CardUIContainer"?this:G.find("SceneLayer",Ne,"SelfSeatUi","cardContainer");if(!((a=i==null?void 0:i.cardUis)!=null&&a.length))return null;if(n===!0&&typeof(i==null?void 0:i.AllSelectHandCards)=="function")return i.AllSelectHandCards();if(n!==!1&&typeof(i==null?void 0:i.RAllSelectHandCards)=="function")return i.RAllSelectHandCards();let s=i.cardUis.filter(o=>o==null?void 0:o.activated).reduce((o,c)=>(o[c.selected?1:0].push(c),o),[[],[]]);n!==!0&&s[1].forEach(o=>o.CardUI_Click()),n!==!1&&s[0].forEach(o=>o.CardUI_Click());}const e=[function(){t.call(this,!0);},function(){t.call(this,void 0);},function(){t.call(this,!1);}];return async function(){var i;const n=await me(()=>{var s;return ((s=G.gamescene)==null?void 0:s.SelfSeatUi)||G.find("SceneLayer",Ne,"SelfSeatUi")});if(!((i=n==null?void 0:n.cardContainer)!=null&&i.cardUis))return !1;if(e.forEach((s,r)=>{let a=n["myFuncBtn"+r]||G.get("SgsSpriteFilterBtn");Object.assign(a,{label:["全选","反选","取消"][r],width:40,height:29,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),n["myFuncBtn"+r]||(a.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),n.addChild(n["myFuncBtn"+r]=a),n["myFuncBtn"+r].on(Laya.Event.CLICK,n.cardContainer,s));}),!n.OnStageResize.toString().includes("myFuncBtn")){const s=n.OnStageResize;Object.defineProperty(n,"OnStageResize",{value:function(){s.apply(this,arguments);let r=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},(a,o)=>{var c;return (c=this["myFuncBtn"+o])==null?void 0:c.pos(r,33+27*o)});}}),n.OnStageResize();}return !0}})(),tt={res:{},sprite:void 0,async init(){var n,i;if((n=this.sprite)!=null&&n._parent)return this.sprite;const t=await me(()=>G.find("BackgroundLayer"));if(!t||(this.sprite=this.sprite||t.myBg||G.get("SgsSprite"),!this.sprite))return !1;this.sprite.bg||(this.sprite.bg=G.get("SgsFlatImage"),this.sprite.addDrawChild(this.sprite.bg)),t.myBg=this.sprite,t.addChild(this.sprite),this.sprite.zOrder=100;const e=(i=this.sprite)==null?void 0:i.OnStageResize;return typeof e=="function"&&!e.toString().includes("func.apply")&&Object.defineProperty(this.sprite,"OnStageResize",{value:function(){e.apply(this,arguments);let s=Math.max(this.width?SystemContext.gameWidth/this.width:1,this.height?SystemContext.gameHeight/this.height:1);this.scale(s,s),this.pos(SystemContext.gameWidth/2,SystemContext.gameHeight/2);}}),!0},async setBg({url:t,type:e,width:n,height:i}=this.res){var s;if(t&&((s=this.sprite)!=null&&s._parent||await me(()=>this.init()),!(!this.sprite||this.sprite.url==t))){if(Object.assign(this.sprite,{width:n,height:i}),this.clear(),e==0)this.sprite.bg.skin=t,this.sprite.bg.posInteger(-n/2,-i/2);else if(e!=1){let r,a,o,c;e==2?(o="sk",c=G.class("BaseEffect")):(o="json",c=G.class("BaseSpineEffect")),e!=3?(r=["beijing","xingxiang"],a="play"):(r=["beijing","daiji","qianjing"],a="DaiJi"),r.forEach(d=>{let h=new c;this.sprite.addChild(h),h.AutoReleaseRes=!0,h.InitEffect(`${t}/${d}.${o}`,a,!0),h.playEffect(),e==2&&h.size(n,i);});}this.sprite.OnStageResize(),this.sprite.url=t,Object.assign(this.res,{url:t,type:e,width:n,height:i}),He(I.userID+"::paperRes",this.res,!0);}},async switch(t){var e;if(t)return this.setBg();(e=this.sprite)==null||e.removeSelf();},async clear(t){var n;if(!this.sprite)return;for(this.res={},this.sprite.bg.skin=null;this.sprite.numChildren;)(n=this.sprite.removeChildAt(0))==null||n.destroy();if(!t)return;Ct(I.userID+"::paperRes",!0),this.sprite.removeSelf(),this.sprite=void 0;const e=await me(()=>G.find("BackgroundLayer"));if(!e)return !1;delete e.myBg;}},qn=(()=>{async function t(){var o,c,d,h,l,u,g,y;if(!((o=this==null?void 0:this.skinImg)!=null&&o.skin))return null;let i=this.is169?594:this.isHor?536:350,s=this.is169?335:this.isHor?380:464,r=this.isDynamicPlay!=1?0:((d=(c=this.skinData)==null?void 0:c.skinBaseVo)==null?void 0:d.ResType)||0,a=((l=(h=this.skinData)==null?void 0:h.skinBaseVo)==null?void 0:l.DynamicSkinBigSkeletonUrl)||"";if(r==2?G.class("BaseEffect",!0,()=>{var w,T;return (T=(w=this.skinBigSps)==null?void 0:w.bgEffect)==null?void 0:T.constructor}):r>2&&G.class("BaseSpineEffect",!0,()=>{var w,T;return (T=(w=this.skinBigSps)==null?void 0:w.spineBg)==null?void 0:T.constructor}),r==1){a=(((g=(u=this.skinData)==null?void 0:u.skinBaseVo)==null?void 0:g.DynamicSkinBigUrl)||"")+".mp4",this.myFuncBtn0.off(Laya.Event.CLICK,this,t),this.myFuncBtn0.on(Laya.Event.CLICK,this,()=>e.call(this,a)),this.myFuncBtn0.label="保存视频";return}else if(r==3)this.skinData.skinBaseVo.NewSkinJudge?a=this.skinData.skinBaseVo.DynamicSkinBigSkeletonUrlNew(this.juexingState):r=4;else if(!(r==2||r==4)){let{response:w,url:T}=await n(this.skinImg.skin);if(T&&w.ok){a=T;let k=await w.blob(),U=await createImageBitmap(k);i=U.width,s=U.height;}}(y=this.Close)==null||y.call(this),console.warn({url:a,type:r,width:i,height:s}),Ve("壁纸设置成功，该壁纸会覆盖所有原生壁纸<br>如需停止使用该壁纸，可在设置中关闭","ac-tooltip",1e4,"green",null),setTimeout(()=>tt.setBg({url:a,type:r,width:i,height:s}),1e3);}async function e(i){var h,l,u,g,y,w,T;let s=((l=(h=this.skinData)==null?void 0:h.skinBaseVo)==null?void 0:l.name)||O.generalDict[(u=this.skinData)==null?void 0:u.generalID]||"三国杀皮肤",r=(y=(g=this.skinData)==null?void 0:g.skinBaseVo)==null?void 0:y.bigSkin,a=i&&typeof i=="string"?i:((w=this.skinImg)==null?void 0:w.skin)||"";if(!a)return;let[,o,c]=a.match(/\/([0-9]+)(_[0-9])?(\.png|\.mp4)/i).map(Number),d=((T=O.skinSP[o])==null?void 0:T.length)||{60500:3,62300:2,66100:2}[o]||(c?2:1);(d>1?Array.from({length:d},(k,U)=>"_"+(U+1)):[""]).forEach(async k=>{let U=a.replace(/(\/[0-9]+)(_[0-9])?(\.png|\.mp4)/i,"$1"+k+"$3"),{response:Q}=await n(U,r);if(Q!=null&&Q.ok){let S=await Q.blob(),E=URL.createObjectURL(S);Dn(E,s+k),URL.revokeObjectURL(E);}});}async function n(i,s=!0){if(s){let a=i.replace("/big/static/","/big/bigSkin/"),o=await fetch(a);if(o.ok)return {response:o,url:a}}let r=await fetch(i);return r.ok?{response:r,url:i}:null}return async function(){const i=await me(()=>G.find("WindowLayer","SkinInfoWindow")),s=i==null?void 0:i.skinFrame;if(!s)return !1;let{x:r,y:a,width:o}=s;return [t,e].forEach((c,d)=>{let h=i["myFuncBtn"+d]||G.get("SgsFlatButton");Object.assign(h,{label:["设为壁纸","保存图片"][d],width:166,height:50,labelSize:18,labelFont:"fzltchjw",labelPadding:"0,0,10,0",labelColors:"#FCE1AA,#FCE1AA,#FCE1AA,#FCE1AA",align:"center",valign:"middle"}),h.pos(r+o/2+(d-1)*166,a-50),i["myFuncBtn"+d]||(h.InitSkin("skinInfo_dynamicBtn_normal","skinInfo_dynamicBtn_over","skinInfo_dynamicBtn_down","skinInfo_dynamicBtn_disable"),i.contentSprite.addDrawChild(i["myFuncBtn"+d]=h),i["myFuncBtn"+d].on(Laya.Event.CLICK,i,c));}),!0}})(),Qn=(()=>{let t=!1;async function e(){var r,a,o;const i=await me(()=>G.find(this==null?void 0:this.stateContainer,"SeatStateTextUI")).then(c=>Array.isArray(c)?c[0]:c),s=(r=i==null?void 0:i.__proto__)==null?void 0:r.SetSeatState;return typeof s!="function"||s.toString().includes("func.apply")?t=!1:(Object.defineProperty(i.__proto__,"SetSeatState",{value:function(c,d){var l;let h=["SeatStateBoTuPo"].includes((l=d==null?void 0:d.constructor)==null?void 0:l.name);h&&(c!=null&&c.IsSelf)&&(this.textField.fontSize=17,this.textField.color="#FFFFFF"),s.apply(this,arguments),h&&(this.textField.text=this.textField.text.replace("♠","♤").replace("♥","♡"));},configurable:!0}),["SeatStateBoTuPo"].includes((o=(a=i.seatState)==null?void 0:a.constructor)==null?void 0:o.name)&&(i.textField.fontSize=17,i.textField.color="#FFFFFF",i.textField.text=i.textField.text.replace("♠","♤").replace("♥","♡")),t=!0)}function n(i){const s=i==null?void 0:i.updateSeatState;if(typeof s!="function"||s.toString().includes("func.apply"))return !1;Object.defineProperty(i,"updateSeatState",{value:async function(r){t&&Object.defineProperty(this,"updateSeatState",{value:s,configurable:!0}),s.apply(this,arguments),!t&&r&&r.Opened&&!r.MultiFlag&&!(r.IsZhanFaState&&this.rogue1v1ZhanFaContainer)&&!r.NeedAnimate&&r.NeedLayout&&!(r.IsStateCard&&this.seat&&this.seat.IsSelf)&&(t=!0,e.call(this));},configurable:!0});}return async function(){var s,r,a;if(t)return !0;const i=(r=(s=G.gamescene)==null?void 0:s.seatContainer)==null?void 0:r.seatUIs;if(!(i!=null&&i.length))return !1;i.forEach(n),n((a=i[0])==null?void 0:a.__proto__);}})();async function Kn(){const t=await me(()=>G.find("SceneLayer","TableScene")),e=t==null?void 0:t.recordBtn;if(!(e!=null&&e.textField))return !1;let{x:n,y:i,width:s,height:r,constructor:a}=e,o=t.myFuncBtn||new a;return Object.assign(o,{width:s,height:30}),o.pos(31,46),t.myFuncBtn||(Object.assign(o,{label:"将池",labelFont:"fzltchjw",labelSize:18,sizeGrid:"15,15,15,15",labelColors:"#FBEDC3,#FBEDC3,#FBEDC3,#FBEDC3"}),o.InitSkin("vippoint_red_normal","vippoint_red_over","vippoint_red_down","vippoint_red_disable"),t.addChild(t.myFuncBtn=o),t.myFuncBtn.on(Laya.Event.CLICK,t,t.showJiangChi)),!0}function Vn(t){st[t]?xn(st[t]):st[t]=Se,Et(t);}async function Et(t,e=[26,35,44,5,7]){const n=G.get("SevenDayResultWindow");n.uuid=t,Se.req=new Set(e),setTimeout(()=>{Array.from(Se.req,i=>n.sendReq(i)),G.del("SevenDayResultWindow",1e3);},0);}async function Nt(){setTimeout(async()=>{var e,n;await ye(1e3);const t=G.get("KanShuWindow",!0);((e=t.jbpUserData)==null?void 0:e.Status)==0&&(t.onKanShuClick(),await ye(2e3),t.onUpdateAwardStatus(),await ye(1e3)),((n=t.jbpUserData)==null?void 0:n.Status)==1&&(t.autoClickAllPeach(),await ye(1e3),t.onShowEvent(),await ye(500),t.onShowEvent(),G.del("KanShuWindow",3e3));},0);}async function Ht(){var n;const t=G.get("ZhiGouMonthCardView");if(t.updateAllInfo(),(n=t.cardData)!=null&&n.bActive){t.getBtnClick();for(let i=0;i<4;i++)t.addItemClick(i);}G.del("ZhiGouMonthCardView",1e3);const e=G.get("NewWeekCardView");e.updateAllInfo(),e.getBtn._text=="领取"&&e.getBtnClick(),G.del("NewWeekCardView",1e3);}async function hn(){var n,i,s,r,a;const t=G.get("GeneralOpenWindow");let e=(([o,c,d])=>((o*60+c)*60+d)*1e3)((a=(r=(s=(i=(n=t.newView)==null?void 0:n.freeTimeTxt)==null?void 0:i._text)==null?void 0:s.split)==null?void 0:r.call(s,":"))==null?void 0:a.map(Number));e?setTimeout(hn,e):t.onNewOpenBag(8100101,3),G.del("GeneralOpenWindow",5e3),me(()=>G.find("WindowLayer","GeneralOpenResultWindow")).then(o=>o==null?void 0:o.Close());}async function Jn(){var n;const t=G.get("GuildDrumWindow",!1);t==null||t.initDrums(),t.updateItems(),await ye(1e3);let e=(n=t==null?void 0:t.itemList)==null?void 0:n.find(i=>i.leftTime);de.loop("drum",()=>e==null?void 0:e.btnClick(),300,(e==null?void 0:e.leftTime)||0,()=>G.del("GuildDrumWindow",500));}async function Zn(t=!1){try{await ye(1e4);const e=G.get("DailySignNewView",!1);if((e==null?void 0:e.signState)==2)for(let n=0;n<e.itemList.length;n++){let i=e.itemList[n].baseData.ID;i!=9020101&&i.toString().startsWith("90")&&t||e.itemList[n].type==1&&(e.itemList[n].OnSignClick(),oe("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await ye(500));}for(let n=0;n<(e==null?void 0:e.totalItemList.length);n++)e.totalItemList[n].type==3&&(e.totalItemList[n].OnSignClick(),await ye(500));if(G.del("DailySignNewView",1e4),!t){const n=G.get("WyqjBigView"),i=Je(n).find(s=>{var r;return ((r=s==null?void 0:s.constructor)==null?void 0:r.name)=="WyqjSmallView"});i==null||i.Init(),i==null||i.onClickTiYanBtn(),G.del("WyqjBigView",3e3);}}catch(e){console.error(e);}}async function Ut(){const t=G.get("TaskDailyView");t.taskPanel.contentSp.drawContaniers.filter(a=>{var o;return (o=a==null?void 0:a.taskvo)==null?void 0:o.CanAward}).forEach(a=>a.onOpClick()),setTimeout(()=>{Array.from({length:3},(a,o)=>{var c;return (c=t.topDayTask)==null?void 0:c.onClickItem(o)}),t.manager.HasJDRewardRed&&t.onceRewardClick(),G.del("TaskDailyView",3e3);},3e3);const e=G.get("IndpdtPanelWindow2");e.enterFunc();const[n,i]=Je(e,!0),s=Je(n).find(a=>{var o;return ((o=a==null?void 0:a.constructor)==null?void 0:o.name)=="NewPlayerSignGiftView"});s==null||s.Init(),s!=null&&s.panel&&me(()=>G.find(s.panel,"Box","NewPlayerSignGiftItem")).then(a=>{var o;return (o=a==null?void 0:a.filter(c=>{var d;return (d=c==null?void 0:c.taskUserVo)==null?void 0:d.CanAward}))==null?void 0:o.forEach(c=>c.onItemClick())}),i&&(i.Init(),i.clickTab(1),i.curView.taskPanel.contentSp.drawContaniers.filter(a=>{var o;return (o=a==null?void 0:a.taskvo)==null?void 0:o.CanAward}).forEach(a=>a.onOpClick()),setTimeout(()=>{i.clickTab(0),i.tabGroup.btnList[0].redPointIsShow&&i.curView.onClickGetAll();},3e3)),G.del("IndpdtPanelWindow2",1e4);const r=G.get("ActivityWindow");r.enterFunc(),Je(r).flatMap(a=>{try{return Je(a)}catch{return []}}).flatMap(a=>{try{return a.itemArr.map(o=>o.getAwardBtn)}catch{return []}}).filter(a=>a.visible).forEach(a=>a.onClick()),setTimeout(()=>{var a;return (a=G.find("WindowLayer","TaskReqRewardWindow"))==null?void 0:a.Close()}),de.delay("VuplexWebView",()=>r.Hide(),500),G.del("ActivityWindow",3e3);}function Je(t,e){var n,i,s;return ((s=(i=(n=t==null?void 0:t.tabGroup)==null?void 0:n.btnList)==null?void 0:i.filter(r=>e||r.redPointIsShow))==null?void 0:s.map(r=>{let a=t.viewStack.childInitDataList.findIndex(o=>o==r.value);return a<1&&(a=r.value),t.viewStack.selectedIndex=a,t.viewStack._childUIList[a]}))||[]}function jt(t=""){const e=G.get("GiftExchangeWindow");e.giftInput.text=t,e.getClicked(),G.del("GiftExchangeWindow",1e4);}const pn=(()=>{async function t(){var i,s,r,a,o,c,d,h,l,u;const e=((i=this==null?void 0:this.constructor)==null?void 0:i.name)=="MailWindow"?this:G.find("WindowLayer","MailWindow")||G.get("MailWindow"),n=e==null?void 0:e.mailContentWindow;if(Array.isArray(n==null?void 0:n.winArr)){(r=(s=G.class("ActivityManager"))==null?void 0:s.AskRechargeInfoAgain)==null||r.call(s),await ye(1e3);for(const g of (((a=e.manager)==null?void 0:a.systemMailList)||[]).filter(({mid:y})=>y)){let y=g.mid;if(g.title=="道具过期提醒")(o=e.manager)==null||o.DeleteMail(y);else if(g.hasAttachMent){g.read||(c=e.manager)==null||c.ReadMail(y);let w=g.AttachmentType,T=((d=g.attachment.getStringKey("key"))==null?void 0:d[0])??"",k=g.fromUserName&&g.fromUserName!="系统未知好友"?g.fromUserName:"";if(w==1){let U=k?2:0;n.ChangeWindow(U,g),(h=n.winArr[U])==null||h.getBtnClick(),(l=n.winArr[U])==null||l.Close(),n.close();}else w==2&&((u=e.manager)==null||u.SendClientDbsGetgmawardReq(T,y,k));await ye(500),setTimeout(()=>{var U;g.read&&g.Geted&&((U=e.manager)==null||U.DeleteMail(y));},1e3);}}G.del("MailWindow",1e4);}}return async function(e){if(e)return t();const n=await me(()=>G.find("WindowLayer","MailWindow")),i=n==null?void 0:n.feedbackBtn;if(!(i!=null&&i.textField))return !1;let{x:s,y:r,width:a,height:o,_labelColors:c,_labelPadding:d,textField:{fontSize:h,font:l,bold:u},constructor:g}=i,y=n.myFuncBtn||new g;return Object.assign(y,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:a,height:o,labelSize:h,labelFont:l,labelBold:u,_labelColors:c,_labelPadding:d}),y.pos(s-1.05*a,r),n.myFuncBtn||(y.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),n.addChild(n.myFuncBtn=y),n.myFuncBtn.on(Laya.Event.CLICK,n,t)),!0}})(),zt=(()=>{let t=null,e=0,n="",i,s;const r=d=>{var h,l,u,g;return ((h=d==null?void 0:d.selloutTex)==null?void 0:h.visible)==!1&&((g=(u=(l=d==null?void 0:d.limitCount)==null?void 0:l._innerHTML)==null?void 0:u.includes)==null?void 0:g.call(u,"0/"))};function a(){t=null,document.querySelectorAll('.left input[type="checkbox"]').forEach(d=>{d.checked=!1;});}function o(d=900,h=50){de.loop("seckill",()=>{var l;if(i=G.find("WindowLayer","ActivityWindow","","WelfareSeckillView")||G.get("WelfareSeckillView"),!((l=i==null?void 0:i.itemList)!=null&&l.length))return null;if(s=i.itemList.find((u,g)=>{var y;return g==t||((y=u.data)==null?void 0:y.goods_id)==t}),typeof(s==null?void 0:s.buyHpItemHandler)!="function")return !1;de.set("seckill",c,e+50),oe(`秒杀连点器启动！
${n}`);},h,d/h>>0,()=>oe(`未找到秒杀面板！
连点器秒杀失败！`));}function c(d=300){s==null||s.buyHpItemHandler(),de.loop("seckill",()=>{s==null||s.buyHpItemHandler(),r(s)||(a(),de.clear("seckill"));},d);}return (d,h,l="",u=1e3)=>{var g;if(d===!1)a(),de.clear("seckill"),oe("秒杀连点器已取消！");else if(d!==void 0&&d!==t){e=h||Date.now();let y=e-u,w=y-Date.now();t=d,n=l||((g=O.goodsID(d))==null?void 0:g.name)||"",w>1?(oe(`${(w/6e4).toFixed(1)}分钟后启动秒杀连点器！
${n}`),de.set("seckill",o,y)):o();}return t}})();async function Ft(t={},e="",n=null){let i=await me(()=>G.find("PromptLayer","ConfirmWindow"));if(!i)return null;Array.isArray(i)||(i=[i]),i.forEach(s=>{if(!(s!=null&&s.confirmData)||Object.entries(t).some(([a,o])=>s.confirmData[a]!=o))return;typeof n=="boolean"&&s.checkBox&&(s.checkBox.selected=n);let r=s.confirmData.buttonArr.find(a=>a.label==e);r.callBack&&r.thisObject&&r.callBack.apply(r.thisObject,r.callBackParams),s.confirmData.clickClose&&s.RemoveFromParent();});}function mn(t="浩铭er",e=!1){var i;const n=G.get("SzxyHelpWin");return n.enterWindow(t),(i=n==null?void 0:n.btnHelp)!=null&&i.enabled?(n.onClickHelp(),G.del("SzxyHelpWin"),!0):(e&&oe("助力已完成，非常感谢！"),G.del("SzxyHelpWin"),!1)}var gn="jsjiami.com.v7";function Ge(t,e){const n=Qe();return Ge=function(i,s){i=i-283;let r=n[i];if(Ge.zdEtZF===void 0){var a=function(l){const u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let g="",y="";for(let w=0,T,k,U=0;k=l.charAt(U++);~k&&(T=w%4?T*64+k:k,w++%4)?g+=String.fromCharCode(255&T>>(-2*w&6)):0)k=u.indexOf(k);for(let w=0,T=g.length;w<T;w++)y+="%"+("00"+g.charCodeAt(w).toString(16)).slice(-2);return decodeURIComponent(y)};const h=function(l,u){let g=[],y=0,w,T="";l=a(l);let k;for(k=0;k<256;k++)g[k]=k;for(k=0;k<256;k++)y=(y+g[k]+u.charCodeAt(k%u.length))%256,w=g[k],g[k]=g[y],g[y]=w;k=0,y=0;for(let U=0;U<l.length;U++)k=(k+1)%256,y=(y+g[k])%256,w=g[k],g[k]=g[y],g[y]=w,T+=String.fromCharCode(l.charCodeAt(U)^g[(g[k]+g[y])%256]);return T};Ge.Diplav=h,t=arguments,Ge.zdEtZF=!![];}const o=n[0],c=i+o,d=t[c];return d?r=d:(Ge.Vzrebh===void 0&&(Ge.Vzrebh=!![]),r=Ge.Diplav(r,s),t[c]=r),r},Ge(t,e)}function Qe(){const t=function(){return [gn,"qnyjghsCYjMiamViQ.McomU.IWv7fpeISKGkxSPE==","fmo9W7FcVmogWQD3pYtcRLJdUvO","kmkVbmkwl8oGCmoTjG","W5qqeCoyW5HcWRxdI27dN8o6","sCo0FY5YWQWbsmoQs8oAna","WRJcHr7cVaXItJJdPg7cJh4","W4JcNdZcTYzzE8or"].concat(function(){return ["WO4Mk8oUW5xdMWOK","p1RdHuVdHmo3BCoklqtdIH3cGG","ptuCWRmaW6b9WRxdRW","E0RcISoOeZpdPffRWOCG","uGxdMcmTzmk/B0VdPmoqWQ3cHa","WOhcOmkabCoaW49GuhXiW4W","sSokp8khuHRcLXO","W7BdQIZcRSoSmSoDWRbwymkR"].concat(function(){return ["WQfBWQZcMhxcK8knrJ0clG","ztBdS8oqW6FcLmkyW77cTZ8bcG","W6VcHmoEWOZcH8o4WROFWP/cVSkD","WRqDW57cNCkgifzgW5xdPmksv3e","yHr+ESoGwmo2CmoadLCYWQa"]}())}())}();return Qe=function(){return t},Qe()}((function(t,e,n,i,s,r,a){return t=t>>1,r="hs",a="hs",function(o,c,d,h,l){const u=Ge;h="tfi",r=h+r,l="up",a+=l,r=d(r),a=d(a),d=0;const g=o();for(;[]&&--i+c;)try{h=parseInt(u(295,"axVt"))/1+-parseInt(u(283,"u5Ld"))/2+parseInt(u(284,"bC)X"))/3*(parseInt(u(296,"e$!x"))/4)+parseInt(u(289,"oAX8"))/5*(parseInt(u(287,"[J0P"))/6)+-parseInt(u(301,"OylK"))/7+-parseInt(u(288,"66pA"))/8*(parseInt(u(285,"c3Vy"))/9)+-parseInt(u(286,"tVp$"))/10*(-parseInt(u(298,"pRYO"))/11);}catch{h=d;}finally{if(l=g[r](),t<=i)d?s?h=l:s=l:d=l;else if(d==s.replace(/[yVhgIeMYCPkqWQxfGKpSEnU=]/g,"")){if(h===c){g["un"+r](l);break}g[a](l);}}}(n,e,function(o,c,d,h,l,u,g){return c="split",o=arguments[0],o=o[c](""),d="reverse",o=o[d]("v"),h="join",o[h]("")})}))(376,849340,Qe,190),Qe&&(gn=Qe);const I={userID:0,account:"",nickname:"",inviteName:"",curOfficerLv:1,v:![],UsedGeneralSkinID:{UsedGeneralSkinID:{}},isFrameAdd:![],goods:[],lotteries:[],closeIframe:![],trialTime:0,autoBotStatus:30,autoBotInfinite:![],guildVIP:{},recGoods:{}};let xt=[["padding","PADDING",0],["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["skinPaperSwitch","SKIN_PAPER_SWITCH",!0],["allPaperSwitch","ALL_PAPER_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0],["CDKNotificationSwitch","CDK_NOTIFICATION_SWITCH",!0],["killEffectSwitch","KILL_EFFECT_SWITCH",!1]];const ce=new Proxy(Object.fromEntries(xt.map(([t,e,n])=>[t,Be(e,n)])),{set:function(t,e,n){let i=Object.fromEntries(xt)[e]??e;He(i,n);let s={};return s.username=I.userID,s.settingKey=e,s.value=n,Tt(Hn(s),300),t[e]=n,e=="padding"&&(window.padding=n),!0}}),F={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]},O={},Se={};function xn(t){Object.assign(Se,t);}const st=Be("gameRecord",{}),Ie={},de={tasks:{},shift:0,overdue:!0,async now(){if(!this.overdue)return Date.now()+this.shift;this.overdue=!1,this.delay("timer",()=>{this.overdue=!0;},18e5);const t=["https://worldtimeapi.org/api/timezone/Etc/UTC","https://timeapi.io/api/Time/current/zone?timeZone=UTC"];for(const e of t)try{const n=await fetch(e);if(!n.ok){console.error(`Error fetching time from ${e}: ${n.statusText}`);continue}const i=await n.json();let s;return i.utc_datetime?s=new Date(i.utc_datetime).getTime():i.dateTime&&(s=new Date(i.dateTime).getTime()),this.shift=s-Date.now(),s}catch(n){console.error(`Error fetching time from ${e}:`,n);continue}return oe("使用当前电脑时间"),Date.now()+this.shift},loop(t,e,n,i=1/0,s){this.clear(t);let r=setInterval(()=>{e(),--i<=0&&(this.clear(t),typeof s=="function"&&s());},n);return this.tasks[t]={intervalId:r,callback:e},this.tasks[t].intervalId},delay(t,e,n){this.clear(t);let i=setTimeout(()=>{this.clear(t),e();},n);return this.tasks[t]={timeoutId:i,callback:e},this.tasks[t].timeoutId},set(t,e,n,i=18e5){(async function s(){this.clear(t);const r=Date.now(),a=(n??r)-r;if(a>1){let o=setTimeout(s.bind(this),a<i?a:i);this.tasks[t]={timeoutId:o,callback:e};}else e();}).call(this);},trigger(t){if(!this.tasks[t])return null;let{timeoutId:e,callback:n}=this.tasks[t];return e&&(clearTimeout(e),delete this.tasks[t]),typeof n!="function"?!1:(n(),!0)},clear(t){Array.isArray(t)||(t=[t]),t.filter(e=>this.tasks[e]).map(e=>{if(!this.tasks[e])return null;let{intervalId:n,timeoutId:i}=this.tasks[e];return i?clearTimeout(i):n&&clearInterval(n),delete this.tasks[e],e});}},z=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce((t,e,n)=>(t[e]=t[n]=[],t),{}),end(t){(this.isGameStart&&!this.isPassed||t===!1)&&(this.isGameStart=!1,this.isPassed=!0,F.seatUIs=[],F.friendGeneral=0,Dt(null),Et(I.userID),G.reset(),document.querySelectorAll(".mizhu").forEach(e=>e.style.display="none"),console.warn("游戏已结束！")),t&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},H.reset(),console.warn("游戏已重置！游戏即将开始！"),Me(()=>G.init()));},ready(t){this.end(!0),H.cardList=t;let e=O.cardIDsOrder.filter(i=>t.includes(i)),n=e.concat(t.filter(i=>!e.includes(i))).filter(Boolean);ue.init(n),ee.init(n,"2-255"),H.isGuoZhan=t.includes(1150),H.isDouDiZhu=t.includes(13005),H.isShanHeTu=t.includes(20100),H.isShanHeTu&&(Ie.sanBanFu=0),Ci(),console.warn("牌堆初始化完成");},start(){this.isGameStart||!H.size||(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+H.seatIDs+"] > "+H.mySeats),wi(),Si(H.size),ee.draw());},enter(t,e,n){var i,s,r,a,o,c,d,h,l,u,g;if(t>0)this.turn=t,this.round=0,this.clear("turn"),t==1&&(this.clear("game"),this.start());else {e==0?(this.currentID=n,this.round++,this.phase=0,[7011,3090,2143,3271].forEach(T=>delete this.spellSpace[T]),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",this.clear("round"),I.autoBotSwitch===!0&&G.limit>0&&((a=(r=(s=(i=G.gamescene)==null?void 0:i.topMenu)==null?void 0:s.areaServerLabel)==null?void 0:r.text)!=null&&a.includes("身份"))&&(this.currentID==((u=(l=(h=(d=(c=(o=G.gamescene)==null?void 0:o.seatContainer)==null?void 0:c.seatUIs)==null?void 0:d.filter(T=>T.seat.currentHp>0))==null?void 0:h.map(T=>T.seat.index))==null?void 0:l.slice(-1))==null?void 0:u[0])?G.auto(3):this.currentID!=H.mySeats[0]&&G.auto(!0))):this.phase++,this.clear("phase");let y=document.getElementById("phrase"),w=parseInt((g=y.innerText.match(/\(([0-9])\)$/))==null?void 0:g[1]);this.phase==w?y.innerText=y.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][e]}($4)`):y.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][e]} (${this.phase})`;}},clear(t,e,n){let i=this.domContainer[t];for(let s=i.length-1;s>=0;s--)n===void 0&&e!==i[s].SpellID&&i[s].count--,(!(i[s].count>0)||e===i[s].SpellID&&n===i[s].SeatID)&&(i[s].element.remove(),i.splice(s,1));}},{ownKeys(t){return Reflect.ownKeys(t.spellSpace)},getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t.spellSpace,e)},deleteProperty(t,e){return Reflect.deleteProperty(t.spellSpace,e)},get(t,e,n){return e in t?t[e]:Reflect.get(t.spellSpace,e,t.spellSpace)},set(t,e,n,i){return e in t?t[e]=n:Reflect.set(t.spellSpace,e,n,t.spellSpace),!0}}),H={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos(t=8){return {0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[t]},dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(t,e)=>{t=parseInt(t),this.orderIDs.includes(t)||(this.firstID===void 0&&(this.firstID=t,console.warn("[PubGsCMoveCard]先手位置:"+t)),this.orderIDs.push(t),e>0&&!this.mySeats.includes(t)&&(this.mySeats.length?this.mySeats.push(t):this.setMyID(t)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(t){var i;if(this.seatUIs.length)return (i=this.seatUIs.find(s=>s.seatID==t))==null?void 0:i.order;let e=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n!==-1)return (n-e+this.size)%this.size},getIndex(t){if(this.seatUIs.length)return this.seatUIs.findIndex(s=>s.seatID==t);let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatIDs.indexOf(parseInt(t));if(n<0)return;let i=(n-e+this.size)%this.size;return this.seatPos()[i]},getID(t){var s;if(this.seatUIs.length)return (s=this.seatUIs[this.seatPos().indexOf(parseInt(t))])==null?void 0:s.seatID;let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,n=this.seatPos().indexOf(parseInt(t));if(n<0)return;let i=(n+e+this.size)%this.size;return this.seatIDs[i]},sequence(t){let e=this.seatIDs.indexOf(t);return e<0?[]:this.seatIDs.slice(e).concat(this.seatIDs.slice(0,e))},update(t,e=this.orderIDs){if(e=e.slice(),e.length>this.seatIDs.length||e.length==this.seatIDs.length&&t!==!1)this.seatIDs=e,this.size=e.length;else if(t){for(let n=e.length;n<this.size;n++)e.push(((e[n-1]??-1)+1)%this.size);this.seatIDs=e,this.size=e.length;}this.draw();},fromUI(){var e,n,i,s,r,a;let t=(s=(i=(n=(e=G.gamescene)==null?void 0:e.seatContainer)==null?void 0:n.seatUIs)==null?void 0:i.map(o=>o.seat))==null?void 0:s.filter(o=>!o.isHide);(r=t==null?void 0:t.filter(o=>o.fixedViewId))!=null&&r.length&&(this.seatUIs=t.map(({index:o,fixedViewId:c})=>({seatID:o,order:c-1})),this.size=this.seatUIs.length,this.firstID=((a=this.seatUIs.find(o=>o.order==0))==null?void 0:a.seatID)??this.firstID,this.seatIDs=this.seatUIs.map(o=>o.seatID),this.setMyID(this.seatUIs[0].seatID),this.draw());},setMyID(t){if(t!==void 0&&this.mySeats[0]!==t){let e=this.mySeats.indexOf(t);e>-1&&this.mySeats.splice(e,1),this.mySeats.unshift(t);}},setGeneral(t,e,n=0,i=!1){if(!O.generalDict[e])return;this.generals[t]||(this.generals[t]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[t][n]=e;let s=this.getOrder(t),r=document.getElementById(s+1);r&&r.style.setProperty("--No-content",`"${H.name(t)}"`);},find(t,e,n=!1){var i;return Array.isArray(e)||(e=[e]),(i=this.generals[t])==null?void 0:i.find(s=>e.find(r=>{var a;return n?(a=O.skinMap[s])==null?void 0:a.has(r):s==r}))},name(t,e){var s;let n=this.getOrder(t),i=(s=this.generals[t])==null?void 0:s.map(r=>O.generalDict[r]);return (i!=null&&i.some(Boolean)?i.map(r=>r||"暗").join("丨"):"一二三四五六七八"[n]+"号位")+(e?"":"丨"+"一二三四五六七八"[n])},draw(){this.seatIDs.forEach(t=>{let e=this.getOrder(t),n=document.getElementById(e+1);if(!n)return;let i=H.name(t);n.style.setProperty("--No-content",`"${i}"`);}),Dt();}},ue=new Proxy({name:{},color:Array.from({length:7},()=>new Set),number:Array.from({length:14},()=>new Set),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(t,e,n,i,s){this.id=t,this.name=e,this.color=n,this.number=i,this.type=s,this.key=-1;}plot(t){let e=this._button;if(!e){if(e=this._button=document.createElement("button"),e.className=this.color<=2?"shoupai R":"shoupai",!this.id)return e;e.id="Qcard"+this.id,e.innerHTML=`<span>${bn(this.color)+Ae(this.number)}</span><br>${this.name.substring(0,2)}`;}return (this.key!==t||t==1)&&(this.key=t,e.style.backgroundColor=t===0?"":t===1?"cyan":"#23201d",e.title=t===0?"牌堆":t===2?"弃牌堆":te.findKZ(this.id).zones.map(n=>{let[i,s,r]=n.split("-").map(a=>parseInt(a));return ee.name(s,i,null,r,r)}).join("/")),e}},[Symbol.iterator]:function*(){for(let t of this.cards)t!==void 0&&(yield t);},init(t){this.name={},this.color=Array.from({length:7},()=>new Set),this.number=Array.from({length:14},()=>new Set),this.type=Array.from({length:4},()=>new Set),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],t.forEach(e=>{let{name:n,color:i,number:s,type:r}=ae[e];n in this.name||(this.name[n]=new Set),this.name[n].add(e),this.color[i].add(e),this.number[s].add(e),this.type[r].add(e),i==3&&s>=2&&s<=9&&this.number[0].add(e),n.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,n,i,s,r);});},onquery(t,e){if(this.select[t].delete(e)){if(this.select[t].size){Array.from(this[t][e]).forEach(n=>this.query.delete(n)),this.draw();return}}else this.select[t].add(e);this.query=["name","number","color"].filter(n=>this.select[n].size).reduce((n,i)=>new Set(Array.from(this.select[i]).flatMap(s=>Array.from(this[i][s])).filter(s=>!n.size||n.has(s))),new Set),this.draw();},queryone(t,e){this.query=new Set(Array.from(this[t][e])),this.draw();},draw(){const t=document.getElementById("cardTypeDetail");if(t.innerHTML="",this.query.size==0)return;let e=new Set(ee.unknown),n=new Set(ee.qipai),i=O.cardIDsOrder.filter(s=>this.query.has(s)).reduce((s,r)=>(e.has(r)?s[0].push(r):n.has(r)?s[2].push(r):s[1].push(r),s),[[],[],[]]);[0,1,2].forEach(s=>i[s].forEach(r=>t.appendChild(this.cards[r].plot(s))));}},{get(t,e,n){return typeof e=="number"||typeof e=="string"&&!isNaN(e)?t.cards[e]:Reflect.get(...arguments)}}),K=class K{static label(e){if(K.groups.has(e))return K.groups.get(e);const n=K.LABELs.shift();return K.groups.set(e,n),n}constructor(e,n=null,i="12-255",s=null,r=null){var a;this._key=e,this.zone=i,this.id=n??((a=this.next)==null?void 0:a.id)??this.key,this.next=s,this.prev=r,K.nodes.has(e)||K.nodes.set(e,new Set),K.nodes.get(e).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(e){this._key!=e&&(K.nodes.get(this._key).delete(this),this._key=e,K.nodes.has(e)||K.nodes.set(e,new Set),K.nodes.get(e).add(this));}static get(e){return K.nodes.has(e)?Array.from(K.nodes.get(e)):[]}static init(e,n){return K.key=0,K.nodes=new Map,K.groups=new Map([[0,"?"]]),K.LABELs=Array.from({length:62},(i,s)=>String.fromCharCode(s+65)),e.map(i=>new K(0,i,n))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?ae[this.id].ncn:"？")}plot(e){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(e);let n=this._button;return n||(n=this._button=document.createElement("button"),n.className="shoupai"),n.disabled=this.key<=0&&this.key%2==0,(e||this.key!=((i=n==null?void 0:n.dataset)==null?void 0:i.key)||this.key<=0&&K.label(this.key)!=n.innerHTML)&&(n.className="shoupai",n.id="card"+this.id,n.dataset.key=this.key,this.key>0?(n.classList.remove("G"),ae[this.id].color>2?n.classList.remove("R"):ae[this.id].color>0&&n.classList.add("R"),n.style.color="",n.style.fontSize="",n.title=new ee("unknown").cards.has(this)?K.findKZ(this.id).zones.map(s=>{let[r,a,o]=s.split("-").map(c=>parseInt(c));return ee.name(a,r,null,o,o)}).join("/"):ae[this.id].ncn,n.innerHTML=`<span>${ae[this.id].cn}</span><br>${ae[this.id].name.substring(0,2)}`):(n.classList.add("G"),n.innerHTML="？")),n}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),ee.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),ee.draw(e.zone),this}create(e){const n=new K(this.key,this.id,this.zone,this.next,this);return this.key=e,this.next&&(this.next.prev=n),this.next=n,this}delete(){let e=!1;if(this.next){let n=this.next;return this.key=n.key,this.id=n.id,this.next=n.next,n.next?n.next.prev=this:new ee("unknown").cards.delete(n)&&(e=!0,this.prev&&new ee("unknown").cards.add(this)),K.nodes.get(n.key).delete(n),e}else return this.key===0?(this.key=this.id,It(this.id,this.key),!0):null}destroy(e){let n=!1,i=this.key;for(;i<0;)this.delete()&&(n=!0),K.unpack(i)&&(n=!0),i=this.key;return this.key!=e&&(this.key=e??this.id,It(this.id,this.key)),this.prev?K.unpack(this.prev.key):(this.plot(!0),ee.draw(this.zone)),n&&ee.draw("unknown"),this}identify(e,n=null){if(n!==null&&console.count("REidentify"+n+">"+this),this.id==e)return this.key>0?this:(n&&(this.end.id=n),this.destroy(),this);let i,s=new Set([this.key]),r=[[this.key,[]]];for(;r.length>0;){let[a,o]=r.shift();if(i=K.find(a,e),i){o.concat(i).reduce((c,d)=>c.swap(d).next,this);break}for(let c of K.get(a).filter(d=>d.next))s.has(c.next.key)||(s.add(c.next.key),r.push([c.next.key,o.concat(c)]));}if(i){if(n){let a=this;for(a.id=n;a.next;)a=a.next,a.id=n;}return this.destroy(),this}else {if(e>0)return this.identify(0,e);console.error("identify error: "+(e>0?e:n)+">"+this);}return null}static move(e,n){return Array.isArray(e)||(e=[e]),e==null||e.forEach(i=>i.zone=n),Array.from(new Set(e==null?void 0:e.map(i=>i.key))).filter(i=>i<=0).map(i=>K.unpack(i)).length?ee.draw("unknown"):Array.from(new Set(e==null?void 0:e.map(i=>i.key))).filter(i=>i>0&&ue.query.has(i)).forEach(i=>{ue[i].plot(n=="2-255"?2:1);}),e}static pack(e,n,i){if(!((e==null?void 0:e.length)>1&&(e!=null&&e.every(a=>a))))return;let s=new Set(e.map(a=>a.key));if(s.size===1)return [...s][0];K.key=K.key-1;let r;if(i){if(new Set(e.map(c=>c.head.zone)).size===1)return null;let o=Array.from(K.nodes.keys()).filter(c=>c<0);for(let c=0;c>=K.key;c--)if(!(o.includes(c*2-1)||o.includes(c*2-2))){r=c*2-i;break}o.filter(c=>c>r).sort((c,d)=>c-d).forEach(c=>{K.get(c).forEach(d=>{d.key=d.key-2,d.head.plot(!0);});}),r=-i;}else r=K.key*2-(n?2:1);return e.forEach(a=>{a.create(r),new ee("unknown").cards.delete(a),n||new ee("unknown").cards.add(a.end);}),ee.draw("unknown"),r}static unpack(e){if(e>0)return !0;const n=K.get(e);let i=new Set(n.map(r=>{var a;return (a=r.next)==null?void 0:a.key})),s=new Set(n.map(r=>r.head.zone));if(n.length===1||!s.has("1-255")&&(s.size===1||i.size===1&&e!==0)){K.groups.has(e)&&(K.LABELs.unshift(K.groups.get(e)),K.groups.delete(e));let r=n.map(a=>a.delete()).some(Boolean);return Array.from(new Set(n.filter(a=>a.prev).map(a=>a.prev.key))).forEach(a=>K.unpack(a)),n.filter(a=>!a.prev).forEach(a=>a.plot(!0)),Array.from(s).forEach(a=>ee.draw(a)),r}else return !1}static find(e,n){let i=K.get(e).find(s=>s.id==n);if(i===void 0&&e!=0){let s=K.get(0).find(r=>r.id==n);s&&(i=K.get(e).find(r=>r.end.key==0),i!==void 0&&s.swap(i.end));}return i}static findIDs(e,n=!1,i=new Set,s=new Set){return s.add(e),e>0||!n&&e==0?i.add(e):(n||e%2!=0)&&K.get(e).forEach(r=>{if(r.next){let a=r.next.key;s.has(a)||K.findIDs(a,n,i,s);}else n&&i.add(r.id);}),Array.from(i)}static findKZ(e,n=!1,i=new Set,s=new Set){let r=e;return !(r instanceof K)&&e>0&&(r=K.get(e)[0]),r instanceof K||(r=K.get(0).find(a=>a.id==e)),r instanceof K&&(!n&&r.key==0?(s.add(""),i.add(0)):(s.add(r.head.zone),i.has(r.key)||(i.add(r.key),(r.key<0||n&&r.key==0)&&K.get(r.key).forEach(a=>{a!=r&&K.findKZ(a,n,i,s);})),r.prev&&K.findKZ(r.prev,n,i,s))),{keys:Array.from(i),zones:Array.from(s)}}};je(K,"key",NaN),je(K,"nodes",new Map),je(K,"groups",new Map([[0,"?"]])),je(K,"LABELs",Array.from({length:50},(e,n)=>String.fromCodePoint(n<20?9312+n:n<35?12881-20+n:12977-35+n)));let te=K;const ge=class ge{static get paidui(){return Array.from(new Set(Array.from(te.get(0),({id:e})=>e).concat((ge.obj["1-255"]??[]).map(({id:e})=>e))))}static get qipai(){return (ge.obj["2-255"]??[]).filter(({key:e})=>e>0).map(({id:e})=>e)}static get unknown(){return Array.from(te.get(0),({id:e})=>e)}static shoupai(e){return (ge.obj["5-"+e]??[]).filter(({key:n})=>n>0).map(({id:n})=>n)}constructor(e,n=5,i=null,s=null,r=null,a=null){var o;typeof e=="number"?(this.id=e,this.zone=n,this.id==0&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),this.zone==9&&(this.zone=1),this.zone==4&&(this.id=this.id+"-"+(a||r||0)),this.zone==8&&(this.id="-"+(r||a||0)),this.zoneID=this.zone+"-"+this.id):typeof e=="string"?[this.zoneID,this.zone,this.id]=e.match(/(.*?)-(.*)/)??[e,e,""]:(o=e==null?void 0:e.every)!=null&&o.call(e,c=>c instanceof te),this.zoneID in ge.obj||(ge.obj[this.zoneID]=[]),this.pos=(i===65280||i===1?1:i===0||i===-1?-1:0)*(this.zone==1?-1:1),n!=1&&(this.pos=0),this.count=s;}show(e=[]){if(isNaN(te.key))return [];if(Array.isArray(e)||(e=[e]),e.filter(s=>s>0).length==0)return [];let n=[],i=e.slice();if(this.pos==-1)n=this.cards.slice(0,e.length).map(s=>s.identify(i.shift()));else if(this.pos==1)n=this.cards.slice(-e.length).map(s=>s.identify(i.shift()));else if(this.zone!=1){let s=i.map(r=>te.findKZ(r,!0).keys);this.cards.slice().sort((r,a)=>a.key-r.key).some(r=>{if(i.filter(a=>a>0).length==0)return !0;s.some((a,o)=>{if(a.includes(r.key))return n[o]=r.identify(i[o]),a.length=0,i[o]=null,!0});}),i.forEach((r,a)=>{var o,c,d,h;if(r&&(n[a]=(o=this.cards.find(l=>l.id==0))==null?void 0:o.identify(r),n[a]===void 0&&(n[a]=(c=this.cards.find(l=>l.key==0))==null?void 0:c.identify(r)),n[a]===void 0)){let l=te.get(r)[0];l?(n[a]=(h=(d=this.cards.find(u=>!n.includes(u)))==null?void 0:d.swap(l))==null?void 0:h.identify(r),console.error(this.zoneID+"SWAP Card ["+r+"] Shown")):(n[a]=new te(r,r,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+r+"] Shown"));}});}return ge.draw(this.zoneID),n}remove(e=[],n,i){if(isNaN(te.key))return [];Array.isArray(e)||(e=[e]),i&&(this.count=i);let s=[],r=e.slice();if(this.pos==-1)s=this.cards.splice(0,this.count);else if(this.pos==1)s=this.cards.splice(-this.count);else if(e.filter(c=>c>0).length>0){let c=r.map(h=>te.findKZ(h,!0).keys);this.cards.slice().reverse().sort((h,l)=>l.key-h.key).some(h=>{if(r.filter(l=>l>0).length==0)return !0;c.some((l,u)=>{if(l.includes(h.key))return s[u]=this.cards.splice(this.cards.indexOf(h),1)[0],l.length=0,r[u]=null,!0});}),r.forEach((h,l)=>{var g;if(!h)return;let u=this.cards.findIndex(y=>y.id==0);if(u===-1&&(u=this.cards.findIndex(y=>y.key==0)),u>-1)s[l]=this.cards.splice(u,1)[0];else {let y=te.get(h)[0],w=this.cards.findIndex(T=>!s.includes(T));y&&w>=0?(s[l]=(g=this.cards.splice(w,1)[0])==null?void 0:g.swap(y),console.error(this.zoneID+"SWAP Card ["+h+"] Moved")):(s[l]=new te(h,h,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+h+"] Moved"));}});}else if(this.count==this.length||this.size==1)s=this.cards.splice(0,this.count);else if(this.zone==1||this.zone==2){var a=[...this.cards.filter(c=>c.key<=0).sort((c,d)=>d.key-c.key),...this.cards.filter(c=>c.key>0)];if([11104,3488,862].includes(n)){var o=new Set(a.map(c=>c.key));n==11104?o=new Set(Array.from(o).filter(c=>te.get(c).some(d=>{var h;return (h=ue.type[3])==null?void 0:h.has(d.id)}))):n==3488?o=new Set(Array.from(o).filter(c=>te.get(c).some(d=>{var h,l,u;return ((h=ue.name.雷杀)==null?void 0:h.has(d.id))||((l=ue.name.火杀)==null?void 0:l.has(d.id))||((u=ue.name.冰杀)==null?void 0:u.has(d.id))}))):n==862&&(o=new Set(Array.from(o).filter(c=>te.get(c).some(d=>ue.number[6].has(d.id))))),a=a.filter(c=>o.has(c.key));}s=a.slice(0,this.count),s.some(c=>c.key>0||c.key%2)&&te.pack(a,!0),s.forEach(c=>this.cards.splice(this.cards.indexOf(c),1));}else te.pack(this.cards),s=this.cards.splice(0,this.count);return s.length!=this.count&&Array.from({length:this.count-s.length},()=>(console.error(this.zoneID+" New Card Moved"),s.push(new te(0,0,this.zoneID)))),e.filter(c=>c>0).length==this.count?e.forEach((c,d)=>{var h;return (h=s[d])==null?void 0:h.identify(c)}):s.filter(c=>c.key>0).length==this.count&&s.forEach(({id:c},d)=>{e[d]=c;}),ge.draw(this.zoneID),s}add(e){if(!isNaN(te.key))return this.pos==-1?ge.obj[this.zoneID]=te.move(e,this.zoneID).reverse().concat(this.cards):ge.obj[this.zoneID]=this.cards.concat(te.move(e,this.zoneID)),ge.draw(this.zoneID),e}set(e){isNaN(te.key)||(ge.obj[this.zoneID]=te.move(e,this.zoneID),ge.draw(this.zoneID));}get cards(){return ge.obj[this.zoneID]??[]}get length(){var e;return ((e=this.cards)==null?void 0:e.length)??0}get size(){var e;return new Set(((e=this.cards)==null?void 0:e.map(n=>n.key))??[]).size}static init(e,n){ge.obj={unknown:new Set},ge.obj[n]=te.init(e,n);}static draw(e){var d,h;if(isNaN(te.key))return;if(e===void 0){Object.keys(ge.obj).filter(l=>l.split("-")[0]=="5").forEach(l=>ge.draw(l));return}let n=null,i=null,[s,r,a]=((d=e.split("-"))==null?void 0:d.map(Number))??[];if(e=="unknown")n="knownCards";else if(s==1)n="paiduiCards";else if(s==5)n=String(H.getOrder(r)+1);else if(s==4&&a in O.markSpell)n="mark"+e;else return;i=document.getElementById(n);let o=Array.from(ge.obj[e]??[]);if(e=="unknown"&&(Array.from(new Set(o.map(l=>l.head.zone))).forEach(l=>ge.draw(l)),ue.draw()),!o||o.filter(l=>l.key>0||l.key%2!==0).length==0){i&&(i.classList.contains("markedCard")?i.remove():i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove()));return}if(i)i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove());else if(s==4)(h=document.getElementById(String(H.getOrder(r)+1)))==null||h.insertAdjacentHTML("beforeend",`<div id="${n}" class="markedCard"><span class = 'mark'>${O.markSpell[a]}</span></div>`),i=document.getElementById(n);else return;e!="1-255"&&o.sort((l,u)=>l.key>0&&u.key>0?0:u.key-l.key),s==4&&(i=i.firstElementChild||i);var c=1;o.map(l=>l.plot(e=="unknown")).reverse().forEach((l,u,g)=>{var y,w;if(l.dataset.key==((w=(y=g[u+1])==null?void 0:y.dataset)==null?void 0:w.key))c++;else {c>1&&(l.style.fontSize="",l.innerHTML=`<span>${l.innerHTML}×</span><br>${c}`);let T=parseInt(l.dataset.key);if(T<0){let k=te.findIDs(T).sort((U,Q)=>U>0&&Q>0?0:Q-U);l.title=c+"张："+k.map(U=>ae[U].ncn).join("/"),e!=="1-255"&&k.length<5&&(l.style.fontSize="",l.innerHTML=k.map(U=>{var Q,S;return ((S=(Q=te.get(U)[0])==null?void 0:Q.plot())==null?void 0:S.outerHTML)||""}).join(""));}s==4?i.insertAdjacentElement("afterend",l):i.insertAdjacentElement("afterbegin",l),c=1;}});}static name(e,n,i,s,r){var o;let a;if(isNaN(n))return "?";if(n==1&&e==0)return "牌堆(游戏开始前) ";if(n==1&&e==255)a="牌堆";else if(n==2)a="弃牌堆";else if(n==3)a="处理区";else if(n==4)a="标记";else if(n==5)a="手牌";else if(n==6)a="装备";else if(n==7)a="判定区";else if(n==8)a="弹窗";else {if(n==9)return "洗牌";n==10?a="交换临时区":n==11?a="弃牌临时区":n==12?a="回收区":n==0&&(a="游戏外");}return ([0,1,2,3,8,11,12].includes(n)?"":H.name(e,!0))+([4,8].includes(n)?"["+((o=O.spellDict[n==8?r:s||r||0])==null?void 0:o.name)+"]":"")+(a??"zone"+n)+({0:"底",65280:"顶",65282:"*"}[i]??(i?":"+i:""))}};je(ge,"obj",{unknown:new Set});let ee=ge;function Xn(t=[],e=[]){const n=new Map;return t.forEach(i=>{n.set(i.GoodsBaseID,i.ChangeCount);}),e.forEach(i=>{const{GoodsBaseID:s,ChangeCount:r}=i;n.has(s)?n.set(s,n.get(s)+r):n.set(s,r);}),Array.from(n,([i,s])=>({GoodsBaseID:i,ChangeCount:s}))}const yn={乐不思蜀:"乐",兵粮寸断:"兵",八卦阵:"八卦",爪黄飞电:"爪黄+1",的卢:"的卢+1",绝影:"绝影+1",骅骝:"骅骝+1",赤兔:"赤兔-1",大宛:"大宛-1",紫骍:"紫骍-1",紫騂:"紫骍-1",诸葛连弩:"连弩",木牛流马:"木马",顺手牵羊:"顺手",万箭齐发:"万箭",五谷丰登:"五谷",无中生有:"无中",过河拆桥:"过拆",桃园结义:"桃园",无懈可击:"无懈",南蛮入侵:"南蛮",借刀杀人:"借刀",铁索连环:"铁索",随机应变:"随机",远交近攻:"远交",以逸待劳:"逸劳",知己知彼:"知己",逐近弃远:"逐近",洞烛先机:"洞烛",出其不意:"出其",水淹七军:"水淹","无懈可击·国":"国无",挟天子以令诸侯:"挟令",方天画戟:"方天戟",雌雄双股剑:"雌雄剑",青龙偃月刀:"青龙刀",丈八蛇矛:"丈八矛",朱雀羽扇:"朱雀扇",白银狮子:"白银狮",三尖两刃刀:"三尖刀",乌铁锁链:"乌铁链",五行鹤翎扇:"五行扇",太公阴符:"太公符",无双方天戟:"无双戟",束发紫金冠:"紫金冠",玲珑狮蛮带:"玲珑带",红棉百花袍:"百花袍",红锦百花袍:"百花袍",四乘粮舆:"四乘舆",铁蒺玄舆:"铁蒺舆",飞轮战舆:"飞轮舆",鬼龙斩月刀:"鬼龙刀",国风玉袍:"国风袍",赤炎镇魂琴:"赤炎琴",奇门八阵:"奇门阵",绝尘金戈:"绝尘+1",修罗炼狱戟:"修罗戟",虚妄之冕:"虚妄冕",赤血青峰:"赤青锋",赤血青锋:"赤青锋",鸾凤和鸣剑:"鸾凤剑",七彩神鹿:"神鹿-1",金乌落日弓:"金乌弓",刑天破军斧:"刑天斧",长安大舰:"长安-2",禅让诏书:"诏书",镔铁双戟:"镔铁戟",继往开来:"继往",攻守兼备:"攻守",进退自如:"进退",洪荒之力:"洪荒",同舟共济:"同舟",力争上游:"力争",逆水行舟:"逆水",撒豆成兵:"撒豆",移花接木:"移花",联军盛宴:"联军",调虎离山:"调虎",火烧连营:"火烧",勠力同心:"勠力",调剂盐梅:"调剂",声东击西:"声东",增兵减灶:"增兵",草木皆兵:"草木",唯我独尊:"独尊",弃甲曳兵:"弃甲",金蝉脱壳:"金蝉",故步自封:"自封",金鼓笙旗:"金鼓",党同伐异:"伐异",燎原之火:"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮",商鞅变法:"变法",真龙长剑:"真龙剑",传国玉玺:"玉玺",厚积形:"厚积",桎梏形:"桎梏",盈冲形:"盈冲",背水形:"背水",整肃形:"整肃",寸兵形:"寸兵",雄黄酒:"酒"},ae=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let t in this.cards)yield this.cards[t];}},{get:function(t,e){var n;if(e in t)return t[e];if(!t.cards[e])if((n=O.cardDict)!=null&&n[e]){let{name:i,type:s,color:r,number:a,subType:o}=O.cardDict[e],c=bn(r),d=Ae(a);t.cards[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[o]||yn[i]||i,type:parseInt(s),color:parseInt(r),number:parseInt(a),ncn:i+c+d,cn:c+d,c,n:d};}else t.cards[e]=t.cards[0];return t.cards[e]}});function bn(t){return ["","♥","♦","♠","♣"][t]??""}function Ae(t,e=!0){return e&&parseInt(t)==1?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[t]??""}function Yn(){for(let e=11;e<=60;e++){const n=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=n,i.classList.add("face"),i.onmousedown=()=>Ke(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach((e,n)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>Ke(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);});}async function Ke(t,e){oe("复制成功！");var n={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(e&&Object.keys(n).forEach(s=>{t=t.replaceAll(s,n[s]);}),G.chat(t),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=t,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(s){return console.warn("Copy to clipboard failed.",s),prompt("Copy to clipboard: Ctrl+C, Enter",t)}finally{document.body.removeChild(i);}}}async function $n(t,e){if(ce.CDKNotificationSwitch){let s=Be("CDK");s||(s=[]);let r=t.filter(a=>!s.includes(a.cdk));await ye(1e4);for(let a of r)Ve(`找到兑换码！<br>${a.cdk}<br>点击即可兑换且关闭此条通知${a.rewards}<br>如不想要兑换码通知，可在设置中关闭`,"ac-tooltip",1e4,"green",function(){!s.includes(a.cdk)&&s.push(a.cdk),He("CDK",s),jt(a.cdk);});}var n=document.getElementById(e);n.innerText="",t.length==0&&e=="CDK"&&(t=["所有兑换码已经兑换","迟点再看看吧"],Ct("CDK"));for(let s of t){let r=document.createElement("button");r.className="calRes",r.innerText=typeof s=="object"?`${s.cdk}`:s,r.onmousedown=function(){jt(typeof s=="object"?s.cdk:s),r.innerText="已兑换",setTimeout(()=>{r.textContent=typeof s=="object"?`${s.cdk}`:s;},"500");},n.append(r);var i=document.createElement("br");n.append(i);}}function ei(t){var e=document.getElementById("storeDetail");e.innerText="",t.length==0&&(t=["暂无集市数据"]);for(let n of t){let i=document.createElement("button");i.className="storeDetail",i.innerText=n,e.append(i);}}let ti={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券"};function wn(t){return !ti[t]}function Sn(t,e,n,i){var s;if(document.getElementById("sec"+t)==null){let r=document.getElementById("lottery");const a=document.createElement("div"),o=document.createElement("div");o.innerHTML=O.secId[t].Name+"："+O.generalDict[O.secId[t].bigrewards]+"  次数："+i+"<br>",o.id="sec"+t+"+times",a.id="sec"+t,a.append(o),r.append(a),r.append(document.createElement("hr"));}if(typeof document.getElementById("sec"+t)<"u"&&document.getElementById(t+"+"+e)==null){const r=document.getElementById("sec"+t+"+times");r.innerHTML=O.secId[t].Name+"："+O.generalDict[O.secId[t].bigrewards]+"  次数："+i+"<br>";let a=document.getElementById("sec"+t);const o=document.createElement("div");o.className="suit",wn(e)&&o.classList.add("r");const c=document.createElement("span"),d=document.createElement("span");c.innerText=((s=O.goodsID(e))==null?void 0:s.name)+" * ",d.innerText=n,c.id=t+"+"+e,d.id=t+"+"+e+"+number",o.append(c),o.append(d),a.appendChild(o);}else if(typeof document.getElementById(t)<"u"&&document.getElementById(t+"+"+e)!=null){const r=document.getElementById("sec"+t+"+times");r.innerHTML=O.secId[t].Name+"："+O.generalDict[O.secId[t].bigrewards]+"  次数："+i+"<br>";let a=document.getElementById(t+"+"+e+"+number"),o=parseInt(a.innerText);o+=n,a.innerText=o;}}function qt(t){let e=document.getElementById("lastUseCard");const n=document.createElement("div");for(const s of t){if(s=="0")continue;var i=document.createElement("button");i.className=ae[s].color<=2?"shoupai R":"shoupai";let r=document.createElement("span");r.innerText=ae[s].cn,i.appendChild(r),i.appendChild(document.createElement("br")),i.innerHTML+=ae[s].name.substring(0,2),n.append(i);}e.innerHTML=n.innerHTML;}const Qt=new MutationObserver(t=>{t.forEach(e=>{const n=e.target,i=document.getElementById(n.id),s=document.getElementById("s"+n.id);if(s&&i&&(e.type==="childList"||e.type==="attributes")){const r=n.innerHTML;if(s.dataset.lastContent!==r){if(s){const a=n.cloneNode(!0);s.innerHTML=a.innerHTML,kn(s);}s.dataset.lastContent=r;}}});}),ni={attributes:!0,childList:!0,subtree:!0};function kn(t){t&&t instanceof HTMLElement&&(t.scrollHeight>40?t.classList.add("show-ellipsis"):t.classList.remove("show-ellipsis"));}function Tt(t,e){let n;function i(...s){clearTimeout(n),n=setTimeout(()=>t.apply(this,s),e);}return i.cancel=function(){clearTimeout(n),n=null;},i}const ii=Tt(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".sorder-body").forEach(e=>{kn(e);});});},500);window.addEventListener("resize",ii);function ct(){const t=document.getElementById("seatUI"),e=document.createDocumentFragment();for(let n of F.seatUIs)if(n.posY&&n.posX&&typeof n.actualSeatID<"u")if(document.getElementById("sor"+n.actualSeatID)==null){const i=document.createElement("div");i.className="sorderContainer",i.id="sor"+n.actualSeatID,i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(F.unscaledWidth+F.paddingRight)*F.scale+"px";const s=document.createElement("div");s.className="sorder-body",s.classList.add("sNo"+n.actualSeatID),s.id="s"+n.actualSeatID,i.appendChild(s);const r=document.getElementById(n.actualSeatID);r&&(Qt.observe(r,ni),e.appendChild(i));}else {const i=document.getElementById("sor"+n.actualSeatID);i.style.top=n.posY+"px",i.style.left=n.posX+"px",i.style.width=(F.unscaledWidth+F.paddingRight)*F.scale+"px";}if(F.seatUIs.length===0){Qt.disconnect();for(let n=1;n<=8;n++){const i=document.getElementById("sor"+n);i&&i.remove();}}t.appendChild(e);}async function yt(t,e){for(let s of t){const{x:r,y:a}=O.Rcity[s.id],o=F.centerX+r*SystemContext.gameScale/window.devicePixelRatio+"px",c=F.centerY+a*SystemContext.gameScale/window.devicePixelRatio+"px";if(document.getElementById("city"+s.id+s.event)==null){const d=document.createElement("div");if(d.id="city"+s.id+s.event,d.className="city",d.style.position="absolute",d.style.fontSize="15px",d.style.left=o,d.style.top=c,typeof O.Rfight[s.event]<"u"){let l=[];for(let u of O.Rfight[s.event].generals){let g=u.start?"[先行]":"",[y,w]=Jt(u,Ie.difficulty);w?l.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+u.generalname+g+" "+y.join(" ")+"</span>"):l.push(u.generalname+g);}d.innerHTML=O.text[s.event]+"<hr>"+l.join("<br>").replace(/\n/g," ")+"<hr>"+O.Rfight[s.event].get.replace(/\n/g,"<br>");}else {let l=[];for(let u=1;u<4;u++){let g=s.event+u.toString().padStart(2,"0"),y=[];if(O.Rchoose[g])if(O.Rchoose[g].generals)for(let w of O.Rchoose[g].generals){let T=w.start?"[先行]":"",[k,U]=Jt(w,Ie.difficulty);U?y.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+w.generalname+" "+T+k.join(" ")+"</span>"):y.push(w.generalname+T);}else y.push(O.Rchoose[g].lost)&&y.push("");l.push(y);}d.innerHTML=(O.text[s.event]!==void 0?O.text[s.event]+"<hr>":"")+((O.Rchoose[s.event+"01"]?(O.Rchoose[s.event+"01"].lost==""?"":l[0].join("<br>").replace(/\n/g," ")+"<hr>")+O.Rchoose[s.event+"01"].get.replace(/\n/g,"<br>"):"")+(O.Rchoose[s.event+"02"]?"<hr>"+(O.Rchoose[s.event+"02"].lost==""?"":l[1].join("<br>").replace(/\n/g," ")+"<hr>")+O.Rchoose[s.event+"02"].get.replace(/\n/g,"<br>"):"")+(O.Rchoose[s.event+"03"]?"<hr>"+(O.Rchoose[s.event+"03"].lost==""?"":l[2].join("<br>").replace(/\n/g," ")+"<hr>")+O.Rchoose[s.event+"03"].get.replace(/\n/g,"<br>"):""));}document.getElementById("rogueUI").appendChild(d);}else {const d=document.getElementById("city"+s.id+s.event);d.style.left=o,d.style.top=c;}}const n=t.map(s=>"city"+s.id+s.event);document.querySelectorAll("div.city").forEach(s=>{n.includes(s.id)||s.remove();});}function dt(t,e="点击复制",n=!0,i=!1,s=null){let r=document.createElement("button");return r.className="calRes",r.title=e,r.disabled=i,r.innerText=t,r.onclick=()=>{Ke(t,n),r.innerText="复制成功",setTimeout(()=>{r.textContent=t;},500);},r}async function Kt(t){let e=t.slice().sort((r,a)=>r-a),n=[];function i(r,a,o){if(o===13){n.push(r.slice());return}if(!(o>13))for(let c=a;c<e.length;c++)c>a&&e[c]===e[c-1]||(r.push(e[c]),i(r,c+1,o+e[c]),r.pop());}i([],0,0);let s=document.getElementById("result");s.innerHTML="";for(let r of n.sort((a,o)=>o.length-a.length))if(s.appendChild(dt(r.map(a=>Ae(a,!1)).join("+"))),s.children.length>=15)break;s.innerHTML===""&&(s.innerHTML='<span class="textRes">【资援】无解！</span>');}async function si(t,e=!1){function n(c,...d){let h=c.slice();for(let l=0;l<h.length;l++){for(let u=0;u<d.length;u++)if(h[l]-=d[u][l],h[l]<0)return !1;if(l>0&&h[l]>=2)return 0}return h}let i=t.reduce((c,d)=>(c[0]++,c[d]++,c),Array(14).fill(0)),s=Math.floor(i[14]/2),r=new Map([[0,[Array(14).fill(0)]]]);for(let c=1;c<=13;c++){let d=i[c];if(d!=0)for(let h of Array.from(r.keys()).sort((l,u)=>u-l)){let l=r.get(h);for(let u=1;u<=d;u++){let g=h+c*u;if(g>s)break;r.has(g)||r.set(g,[]);for(let y=0;y<l.length;y++){let w=l[y].slice();w[0]+=u,w[c]+=u,r.get(g).push(w);}}}}r.delete(0);let a=new Map;for(let c of Array.from(r.keys()).sort((d,h)=>h-d)){let d=r.get(c);for(let h=0;h<d.length;h++)for(let l=h;l<d.length;l++){let u=n(i,d[h],d[l]);u&&(a.has(u[0])||a.set(u[0],[]),d[h][0]<=d[l][0]?a.get(u[0]).push([d[h],d[l],u]):a.get(u[0]).push([d[l],d[h],u]));}}let o=document.getElementById("result");o.innerHTML="",Array.from(a.keys()).sort((c,d)=>c-d).some(c=>{if(a.get(c).sort((d,h)=>d[0][0]-h[0][0]).forEach(([d,h,l])=>{let u=document.createElement("button");u.className="calRes";let g=document.createElement("span"),y=document.createElement("span");g.innerText=d.flatMap((w,T)=>T>0?Array(w).fill(Ae(T,!1)):[]).join("+"),y.innerText=h.flatMap((w,T)=>T>0?Array(w).fill(Ae(T,!1)):[]).join("+"),u.appendChild(g),u.insertAdjacentHTML("beforeend","<span>=</span>"),u.appendChild(y),u.title="点击复制",u.onclick=function(){Ke(this.innerText,!0);},e&&(u.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",g.className="yanjiaospan",y.className="yanjiaospan",g.onclick=function(w){w.stopPropagation(),G.yanJiao([d,h,l],2);},y.onclick=function(w){w.stopPropagation(),G.yanJiao([d,h,l],0);}),o.appendChild(u);}),o.children.length>=5)return !0}),o.innerHTML===""?o.innerHTML='<span class="textRes">【严教】无解！</span>':e&&o.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function ai(t,e){if(!(t!=null&&t.length))return;let n=t.slice().sort((a,o)=>a-o),i=[];function s(a,o,c){if(!(c>13)){i.unshift(a.slice()),e&&(i[0].K=c===13?a.length:0);for(let d=o;d<n.length;d++)d>o&&n[d]===n[d-1]||(a.push(n[d]),s(a,d+1,c+n[d]),a.pop());}}s([],0,0);let r=document.getElementById("result");r.innerHTML="";for(let a of i.filter((o,c,d)=>!d.some(h=>o.length<h.length&&o.every(l=>h.includes(l)))).sort((o,c)=>c.K-o.K||c.length-o.length))r.appendChild(dt(a.map(o=>Ae(o,!1)).join("+"))),e&&a.K&&r.lastChild.classList.add("textRes");}async function Vt(t,e){function n(o,c,d,h,l){if(d.length===l+1){c.push([...d,...d.reduce((u,g)=>(u.splice(u.indexOf(g),1),u),o.slice())]);return}for(let u=h;u<o.length;u++)u>h&&o[u]===o[u-1]||(d.push(o[u]),d[0]+=o[u],n(o,c,d,u+1,l),d[0]-=d.pop());return c}let i=document.getElementById("result");if(i.innerHTML="",!(t!=null&&t.length)||!(e!=null&&e.length))return;let s=Math.max(t.length,e.length);t.sort((o,c)=>o-c),e.sort((o,c)=>o-c);for(let o=2;o<=s;o++){let c=n(t,[],[0],0,o);n(e,[],[0],0,o).forEach(d=>c.forEach(h=>{d[0]>h[0]&&d.slice(1,o+1).every(l=>!h.slice(1,o+1).includes(l))&&(s<3||Array.from({length:o}).some((l,u)=>d[u+1]<h[u+1]))&&i.appendChild(dt(d.slice(1,o+1).map(l=>Ae(l))+"→"+h.slice(1,o+1).map(l=>Ae(l)),"点击复制",!1));}));}let r=Array.from(new Set(e)),a=Array.from(new Set(t));r.forEach(o=>{let c=a.filter(d=>d<o);c.length&&i.appendChild(dt(Ae(o)+"→"+c.map(d=>Ae(d)).join("/"),"点击复制",!1));}),i.innerHTML===""&&(i.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function bt(t){var c,d,h;if(!(t!=null&&t.allData)){F.cities=[],yt(F.cities),document.getElementById("centerUI").classList.remove("show"),document.getElementById("centerUI").classList.add("hide");return}const e=document.getElementById("centerUI");e.classList.remove("hide"),e.classList.add("show");let n=t.allData,i=n.shopData,s=n.chapterData,r=n.generalpool;if(i){i.bShow=!0;let l=[];if(i.itemId&&O.Rplot)for(let u of i.itemId)O.Rplot[u]&&l.push(O.Rplot[u].name);ei(l);}if(r&&r.general_change&&r.general_change.length>0){let l=r.general_change.map(u=>O.generalDict[u]||`Unknown (${u})`);Ve(`小抄提示：可换将为${l.reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let a=n.seasonData,o=a&&a.difficulty;o&&(Ie.difficulty=o),Ie.general=((d=(c=n.gameData)==null?void 0:c.myGeneral)==null?void 0:d.uGeneralId)??0,Ie.itemId=((h=n.gameData)==null?void 0:h.itemId)??[],s&&s.locations&&(F.cities=s.locations.map(l=>({id:l.location,event:l.event})),O.Rcity&&yt(F.cities));}const ri=(()=>{class t{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(s){this.id=s.readUnsignedByte(),this.goods_id=s.readUnsignedInt(),this.goods_cnt=s.readUnsignedInt(),this.price_type=s.readUnsignedByte(),this.price_num=s.readUnsignedInt(),this.stock=s.readUnsignedInt(),this.buy_limit=s.readUnsignedByte(),this.ori_price=s.readUnsignedInt();}UpdateDate(s){this.goods_id=s.goods_id,this.goods_cnt=s.goods_cnt,this.price_type=s.price_type,this.price_num=s.price_num,this.stock=s.stock,this.buy_limit=s.buy_limit,this.ori_price=s.ori_price,this.all_bought_cnt=s.all_bought_cnt,this.self_bought_cnt=s.self_bought_cnt;}}function e(i){i.position=0;let s=[],r=i.readBoolean();if(i.Data.length<=1)return null;let a=i.readUnsignedInt(),o=i.readUnsignedInt(),c=new Date(a*1e3).toISOString().slice(5,16).replace("T"," "),d=new Date(o*1e3).toISOString().slice(5,16).replace("T"," "),h=i.readUnsignedInt();for(let l=0;l<h;l++){let u=new t;u.Read(i);let g=s.find(y=>y.id==u.id);g?g.UpdateDate(u):s.push(u);}h=i.readUnsignedInt();for(let l=0;l<h;l++){let u=i.readUnsignedInt(),g=i.readUnsignedInt(),y=s.find(w=>w.id==u);y&&(y.all_bought_cnt=g);}h=i.readUnsignedInt();for(let l=0;l<h;l++){let u=i.readUnsignedInt(),g=i.readUnsignedInt(),y=s.find(w=>w.id==u);y&&(y.self_bought_cnt=g);}return {commonVo:s,start_time:a,end_time:o,start:c,end:d,next:r}}let n=!1;return async i=>{if(n)return null;const s=document.querySelectorAll('.left input[type="checkbox"]');let r=e(i);if(!r)return null;let{commonVo:a,start_time:o,end_time:c,start:d,end:h,next:l}=r;if(l)return;o=(o-8*60*60)*1e3;let u=a.map(({goods_id:w,goods_cnt:T,price_type:k,price_num:U,stock:Q,buy_limit:S,ori_price:E,all_bought_cnt:M,self_bought_cnt:q},B)=>{var he;let j=U+["","通用元宝","元宝","银两"][k]+": "+((he=O.goodsID(w))==null?void 0:he.name)+(T>1?"*"+T:""),ie=`${d} ~ ${h} 共${Q}个`,le=M>=Q||q>=S;return Object.assign(s[B].dataset??{},{goods_id:w,start_time:o,goods:j}),{goods_id:w,goods:j,title:ie,disabled:le}}),g=document.getElementsByClassName("right")[0];g&&(g.innerHTML=u.map(({goods:w,title:T,disabled:k})=>`<span class="secKillDetailText${k?" gray":""}" title="${T}">${w}</span>`).join(""));let y=g.start-6e4;return y>Date.now()&&de.set("miaosha",()=>{oe(`${d}
秒杀即将开始！
`+u.map(({goods:w})=>w).join(`
`)),n=!0,setTimeout(()=>{n=!1;},66666);},y),i.Size==i.position}})();let oi=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇"];const ht={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function Jt(t,e){let n=[],i=!1,s=li(e);const r=ht[s];let a=Object.keys(ht).filter(o=>ht[o]<=r).map(o=>t[o]).filter(Boolean).join(";");a=a==null?void 0:a.split(";").map(o=>{var c;return ((c=O.spellDict[o])==null?void 0:c.name)||"无收录技能"});for(let o of a)oi.includes(o)&&(n.push(o),i=!0);return [n,i]}function li(t){switch(Math.floor((t-1)/5)){case 0:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY";default:return "getspell"}}var Ze=[],wt=[],Zt={290:"推锋",766:"匡弼"},Te=[],at={},rt={},Fe={},_e={},ot=new Map,ke=()=>({name:"加载中"}),we=[],St={},kt={},Ce={},ve={},ci={},vt={},Wt={};Object.assign(O,{cardDict:Ze,cardIDsOrder:wt,spellDict:Te,generalDict:at,skinSP:rt,skinDict:Fe,skinMap:_e,bigSkin:ot,goodsID:ke,rogejson:ve,gxjson:ci,Rfight:Ce,Rchoose:kt,Rcity:St,secId:vt,vskinMap:Wt,Rplot:we});async function di(t){return new Promise(e=>JSZipUtils.getBinaryContent(window.location.host==="test.sanguosha.com"?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,(n,i)=>JSZip.loadAsync(i).then(async s=>{var Q;var r=(S=>S.getFullYear().toString()+(S.getMonth()+1).toString().padStart(2,"0")+S.getDate().toString().padStart(2,"0"))(new Date);let a=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess"];var o=await Promise.all(a.map(S=>s.file(S+".sgs").async("arraybuffer").then(E=>JSON.parse(new TextDecoder().decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(E)).decompress()))))).then(S=>a.reduce((E,M,q)=>(E[M+".sgs"]=S[q],E),{}));function c(S,E){if(typeof S!="object")return S;let M={};for(let q in S){let B=E.get(q)||q;M[B]=S[q];}return M}var d=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),h=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce((S,E)=>(S.set(E.a,E),S),new Map),l=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce((S,{Short:E,Long:M})=>(S.set(E,M),S),new Map),u=o["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce((S,E)=>(S.has(E.a)||S.set(E.a,[]),S.get(E.a).push(E.d),S),new Map);ke=(()=>{var S={};return function(E){if(E=parseInt(E),S[E])return S[E];let M=c(h.get(E),l),q=o["sys_h5_shop.sgs"].root.itemtips.find(({a:j})=>j==E),B=(M==null?void 0:M.usedeffect)&&T(M==null?void 0:M.usedeffect);return S[E]={...M,...q&&{info:q.e},...B&&{effect:B}}}})();var g={};function y(S){var M;let E=S==null?void 0:S.replace(/([^0-9,\.])/g,"").split(",").map(q=>parseInt(q));return (E==null?void 0:E.length)<2?S:(g[E[0]]??(g[E[0]]=(M=h.get(E[0]))==null?void 0:M.b)??E[0])+(parseInt(E[1])>1?"*"+E[1]:"")}var w={};function T(S){let E=parseInt(S);if(E!=1e3&&Math.abs(E)>0)return w[E]??(w[E]=(u.get(Math.abs(E))??[]).map(M=>{var q;return ((q=h.get(M))==null?void 0:q.b)??T(M)}).join(E>0?"/":"&"))}Te=o["cha_spell.sgs"].GameSpells.spell.reduce((S,{a:E,c:M,o:q})=>{var j,ie;let B={name:M,spellid:E,desc:((ie=(j=q==null?void 0:q.replace(/<[^\<\>]*>/g,""))==null?void 0:j.replace(/#.*/g,""))==null?void 0:ie.replace(/[;\n]+$/g,""))||""};return (B.desc.includes("暗置")||B.desc.includes("扣置")||B.desc.includes("移出"))&&(Zt[E]=yn[B.name]??B.name),S[E]=B,S},[]);let k=o["sys_playcard.sgs"].abbreviation.reduce((S,{Short:E,Long:M})=>(S.set(E,M),S),new Map);if(Ze=o["sys_playcard.sgs"].GamePlayCards.card.map(S=>c(S,k)).reduce((S,E)=>{var M,q;return S[E.id]={...E,name:E.name??((M=Te[E.spellId])==null?void 0:M.name),desc:(q=Te[E.spellId])==null?void 0:q.desc},S},[]),wt=o["sys_playcard.sgs"].GamePlayCards.card.sort((S,E)=>S.c-E.c||S.d-E.d||S.h-E.h||S.m-E.m||S.g-E.g||S.f-E.f||S.a-E.a).map(({a:S})=>S),ot=new Map(o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map(S=>[String(S.a),[S.a,S.c,S.v||S.q,S.r]]).reverse()),Fe=o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce((S,{skinID:E,name:M,skinlevel:q,dongPoint:B})=>{let j=parseInt(E/100);return S[j]||(S[j]={}),S[j][E]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[q]||"未知",name:M,state:B!==void 0},S},{}),rt=o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter(S=>String(S.skinID).includes("_")).reduce((S,E)=>{let[M,q]=E.skinID.split("_").map(Number);return S[M]?S[M].includes(q)||S[M].push(q):S[M]=[q],S},{}),Object.entries(rt).forEach(([S,E])=>{var B,j;(B=ot.get(S))==null||B.push(E);let M=parseInt(S/100),q=(j=Fe[M])==null?void 0:j[S];q&&(delete Fe[M][S],E.forEach(ie=>{Fe[M][S+"_"+ie]={...q,name:q.name+ie};}));}),at=o["character.sgs"].GameCharacters.character.reduce((S,{a:E,ai:M,b:q})=>(S[E]=(M||"")+(q==null?void 0:q.replaceAll("&","")),S),{}),o["character.sgs"].GameCharacters.character.forEach(({a:S,v:E})=>{if(typeof E!="string"){_e[S]=new Set([S]);return}let M=[S,...E.split(";").map(B=>parseInt(B))],q=M.find(B=>B in _e);if(q){let B=_e[q];M.filter(j=>!B.has(j)).forEach(j=>(_e[j]=B).add(j));}else {let B=new Set(M);M.forEach(j=>_e[j]=B);}}),Wt=o["character.sgs"].WuJiangs.Spgroup.reduce((S,E)=>{const M=E.spgenerals?E.spgenerals.split(",").map(Number):[];return M.forEach(q=>{S[q]=new Set(M);}),S},{}),vt=o["ff_tiangong.sgs"].root.Common.reduce((S,E)=>(S[E.Id]=E,S),{}),typeof t!="string"){let S=o["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter(E=>E.c_allServerWord&&!E.platform&&(!E.level||E.level=="0,201")&&E.endtime>=r&&E.begintime<=r).sort((E,M)=>E.endtime-M.endtime).map(E=>{const M="<br>"+E.dataInfo.match(/\[(\d+),(\d+)\]/g).map(q=>{const[B,j,ie]=q.match(/\[(\d+),(\d+)\]/);return `${ke(j).name} * ${ie}`}).join("<br>");return {cdk:E.c_allServerWord||E.allServerWord,rewards:M}}).filter(Boolean);$n(S,"CDK");}if(Object.assign(O,{cardDict:Ze,cardIDsOrder:wt,markSpell:Zt,spellDict:Te,generalDict:at,skinSP:rt,skinDict:Fe,skinMap:_e,bigSkin:ot,goodsID:ke,secId:vt}),(typeof t!="string"||t=="roge")&&async function(S,E){St=S.Root.Level.reduce((f,{cityID:m,cityname:b,citypic:p,citycoordinate:C,startshow:x})=>{let[P,$]=C.split(",").map(Number);return f[m]={x:P,y:-$,boss:x,name:b??(p==null?void 0:p.replace(/^city_([0-9])_(.+)*\.png$/,(V,_,re)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"})[_+re]??V))},f},{}),S.Root.Tactics.forEach(({plot:f,plotname:m,plotdesc:b,school:p,money:C,level:x})=>{we[f]={name:m.replaceAll("·",""),desc:b.replaceAll(" ",""),school:p,money:C,level:x,type:2};}),S.Root.Spell.forEach(({id:f,spellid:m,money:b,level:p})=>{var C,x;we[f]={name:(C=Te[m])==null?void 0:C.name,desc:(x=Te[m])==null?void 0:x.desc,spellid:m,money:b,level:p,type:3};}),S.Root.Card.forEach(({id:f,cardid:m,isequip:b,money:p,level:C})=>{var x=Ze[m];we[f]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[x.subType]??x.name,desc:x.desc,color:x.color,number:x.number,money:p,level:C,type:4+b,rType:(x.type*10+x.subType)*100+b};});var M=S.Root.Roundid.reduce((f,{useSeason:m})=>m),q=new Map,B=S.Root.Text.reduce((f,{ID:m,text:b})=>(f[m]=b,f),[]);S.Root.General=(f=>S.Root.General.map(m=>c(m,f)))(S.root.abbreviation.reduce((f,{Short:m,Long:b})=>(f.set(m,b),f),new Map)),S.Root.Adventure.forEach(f=>{f.chapname=B[f.chapname]??f.chapname;});let j=S.Root.RewardGroup.reduce((f,{reward:m,rewarddesc:b,allreward:p,abandonmoney:C})=>{var x,P;return f[m]=(C?C+"铜币/":"")+((P=(x=p==null?void 0:p.split(";"))==null?void 0:x.flatMap($=>$==null?void 0:$.split(",")))==null?void 0:P.map($=>["随机","普通","稀有","史诗","传说"][$]).join("/"))+b.replace("多选一","自选"),f},S.Root.Other.reduce((f,{reward:m,rewardname:b})=>(f[m]=b,f),{}));var ie=S.Root.Chapter.reduce((f,{seasonID:m,chapter:b,cityName:p,bosslocation:C,location:x})=>(x.split(";").forEach(P=>{f[P]=`${m}-${b}${p}`;}),f[C]=`${m}-${b}${p}BOSS`,f),{}),le=S.Root.General.reduce((f,m)=>(f[m.generalgroup]||(f[m.generalgroup]=[]),f[m.generalgroup].push(m),m.generalname=m.generalname.replace("&",""),f),{});S.Root.General.forEach(f=>{f.GeneralRank||(f.GeneralRank=0),f.JumpStage&&(f.next=(([m,b])=>le[m][b-1]??le[m][0])(f.JumpStage.split(";"))),f.info={general:f.generalname,hp:f.hp,maxhp:f.maxhp,card:f.cardnum,draw:f.draw,sha:1+f.exshatimes,armor:f.armor,getarmor:f.getarmor,...f.next?{next:f.next.generalname}:{}},f.spells=["","_ZD","_KN","_EM","_LY"].flatMap((m,b)=>{var p;return (((p=f["getspell"+m])==null?void 0:p.split(";"))??[]).map(C=>Te[C]).filter(Boolean).map(C=>({...C,level:b}))}),f.spell=f.spells.map(({name:m})=>m).join(","),f.cards=["","_ZD","_KN","_EM","_LY"].flatMap((m,b)=>{var p,C;return [...((p=f["carddesc"+m])==null?void 0:p.split(";"))??[],...((C=f["equip"+m])==null?void 0:C.split(";"))??[]].map(x=>Ze[x]).filter(Boolean).map(({id:x})=>({id:x,ncn:ae[x].ncn,level:b}))}),f.card=f.cards.map(({ncn:m})=>m).join(",");}),Ce=S.Root.Fight.reduce((f,m)=>{function b(p,C,x=!1){p&&(m.fight+=L(p.info),m.lost+=(p.start?"[先手]":"")+p.generalname,p.next?(m.lost+=">",p.next.stage=C,p.next.info.pre=p.generalname,m.generals.push(p.next),b(p.next,C+1,x)):x||(m.fight+="+",m.lost+=" "));}if(m.generals=[...le[m.Ggroup]??[]],m.fight="",m.lost="",m.startnum){let p=m.generals.find(C=>C.generalID==m.startnum);p&&(p.start=!0);}return m.generals.forEach((p,C,x)=>b(p,1,C==x.length-1)),m.get=m.itemgroup+`铜币
`+(m.rewarditem?String(m.rewarditem).split(";"):[]).concat(String(m.reward).split(";")).map(p=>j[p]).join(`
`),m.text=B[m.text]??m.text,m.name=B[m.name]??m.name,f[m.fightID]=m,f},[]);for(let f in le)f in Ce||(Ce[f]={generals:le[f]});if(kt=S.Root.Choose.reduce((f,m)=>{var b;return m.type==7?(f[m.effectID]=Ce[m.event1],q.set(m.event1,(b=S.Root.Adventure.find(p=>p.ID===parseInt(m.effectID/10)))==null?void 0:b.chapname)):m.type==3&&m.event1=="2"?f[m.effectID]={get:"营地"}:f[m.effectID]={lost:(p=>p&&"失去 "+p)(D(m.lostitem,m.lostnum,m.effectID)),get:(p=>p&&m.showitem?p.replace("随机","特定"):p)(D(m.getitem,m.getnum,m.effectID))},f},[]),Object.assign(O,{Rfight:Ce,Rchoose:kt,Rcity:St,vskinMap:Wt,Rplot:we,text:B}),!t||t=="roge"){var he=Object.entries(le).reduce((f,[m,b])=>{var P,$,V,_,re;let p=m.length<6?m.slice(-3):m.slice(0,2)!=="99"?m.slice(-5,-2)+">":"*"+m.slice(-2),C=m.length<6?m.slice(0,-3)-2:m.slice(0,2)!=="99"?m.slice(0,-5)-2:m.slice(-3,-2)-m.slice(-4,-3)+9;if(["新年大吉"].includes(((P=Ce[m])==null?void 0:P.name)??(($=Ce[parseInt(p)+4e3])==null?void 0:$.name)))return f;f[p]||(f[p]={fight:((V=Ce[m])==null?void 0:V.name)??((_=Ce[parseInt(p)+4e3])==null?void 0:_.name)??"",generals:{}}),q.has(m)&&(f[p].event=q.get(m));let x=f[p].generals;return (((re=Ce[m])==null?void 0:re.generals)??b).forEach(X=>{let se=(p.startsWith("*")?C:"")+(X.stage||"")+"#"+X.generalID;for(;;){if(!x[se])x[se]={general:(X.info.pre?">":"")+X.generalname+(X.info.next?">":""),info:L(X.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};else if(x[se].levels.includes(C)){se+="@";continue}break}let xe=x[se];C%10<6&&C<20&&(xe.levels.push(C),X.start&&xe.start.push(C)),xe.infos[C]=X.info,X.otherad&&(xe.ad[C]=X.otherad),X.spells&&X.spells.forEach(fe=>{xe.spell[fe.spellid]||(xe.spell[fe.spellid]={...fe,levels:[],level:void 0}),C%10<6&&C<20&&xe.spell[fe.spellid].levels.push(C+(fe.level??0));}),X.cards&&X.cards.forEach(fe=>{xe.card[fe.id]||(xe.card[fe.id]={name:fe.ncn,levels:[],level:void 0}),C%10<6&&C<20&&xe.card[fe.id].levels.push(C+(fe.level??0));});}),f},{});Object.entries(he).forEach(([f,m])=>{he[f].shift=f.startsWith("*")&&Math.min(...Object.values(m.generals).flatMap(b=>b.levels))==1?1:0,m.generals=Object.values(m.generals).map(b=>(b.level=Math.min(...b.levels.sort((p,C)=>C-p))-he[f].shift,b.level=b.level,b.spell=Object.values(b.spell).map(p=>{let C=Math.min(...p.levels.sort((x,P)=>P-x));return p.levels.some((x,P,$)=>x<10&&!$.includes(x+10)&&(b.levels.includes(x+10)||b.levels.length==2&&b.levels.includes(10)))&&(p.level=[C]),p.levels.some(x=>x<10)&&(x=>{x.length&&(p.level=[C,x[x.length-1]]);})(p.levels.filter((x,P,$)=>x>=10&&!$.includes(x-10))),p.level=(p.level??C)-he[f].shift,delete p.levels,delete p.spellid,p}).sort((p,C)=>{let x=P=>P[1]>=10?P[1]:P[0]??P;return x(p.level)%10-x(C.level)%10||x(p.level)-x(C.level)}),b.card=Object.values(b.card).map(p=>{let C=Math.min(...p.levels.sort((x,P)=>P-x));return p.levels.some((x,P,$)=>x<10&&!$.includes(x+10)&&(b.levels.includes(x+10)||b.levels.length==2&&b.levels.includes(10)))&&(p.level=[C]),p.levels.some(x=>x<10)&&(x=>{x.length&&(p.level=[C,x[x.length-1]]);})(p.levels.filter((x,P,$)=>x>=10&&!$.includes(x-10))),p.level=(p.level??C)-he[f].shift,delete p.levels,p}).sort((p,C)=>{let x=P=>P[1]>=10?P[1]:P[0]??P;return x(p.level)%10-x(C.level)%10||x(p.level)-x(C.level)}),b.card.length||delete b.card,b.info=Object.values(b.infos).reduce((p,C)=>(Object.keys(p).forEach(x=>{C[x]>p[x]&&(p[x]=C[x]);}),p),{hp:0,card:0,draw:0,sha:0}),Object.keys(b.ad).length?Object.keys(b.ad).sort((p,C)=>C-p).forEach((p,C,x)=>{(p>=10&&b.ad[p]==b.ad[p%10]||b.ad[p]==b.ad[x[C+1]])&&delete b.ad[p];}):delete b.ad,b.start.length?b.start=Math.min(...b.start):delete b.start,delete b.infos,delete b.levels,b)).sort((b,p)=>b.level-p.level);});var W=S.Root.UniversalGroup.filter(f=>f.fightgroup!==void 0).reduce((f,m)=>{f[m.fightID]||(f[m.fightID]={});let b=String(m.fightgroup).slice(-3);return f[m.fightID][b]||(f[m.fightID][b]=[]),f[m.fightID][b].push(m),f},{}),A=Array.from(Array.from(S.Root.Level.reduce((f,{cityID:m,eventfight:b,universalfight:p,startshow:C})=>{var P,$;x(p),x(($=(P=b==null?void 0:b.split(";"))==null?void 0:P.map(V=>V.slice(-3)))==null?void 0:$.filter((V,_,re)=>!re.slice(_+1).includes(V)));function x(V){if(!V||V.length==0)return;let _=f.get(V);_?_.includes(ie[m])||_.push(ie[m]):f.set(V,[ie[m]]);}return f},new Map).entries()).reduce((f,[m,b])=>{let p=b.length>1&&new Set(b.map(C=>C.slice(0,3))).size<2?b.map((C,x)=>C.slice(x?3:0)).join("/"):String(b);return f.get(p)||f.set(p,new Set),(W[m]?Object.keys(W[m]):m).forEach(C=>f.get(p).add(C)),f},new Map).entries()).reduce((f,[m,b])=>(f[m]=Array.from(b,p=>he[p]),f),{});ve.jsbs=JSON.stringify(Object.entries(A).filter(f=>f[0].includes(M+"-")).reduce((f,[m,b])=>{let p=m.slice(2);return f[p]||(f[p]=[]),b.forEach(C=>{C.fight!="新年大吉"&&f[p].push(C);}),f},{})),ve.jsft=JSON.stringify(Object.values(he).filter(f=>["天涯故交","招兵买马","万众敬仰"].includes(f.event)&&f.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(f.event)).reduce((f,{event:m,generals:b,fight:p})=>(f[m]||(f[m]=[]),f[m].push({...p?{fight:p}:{},generals:b}),f),{})),ve.wscd=JSON.stringify(Object.values(E.Card.map(({CitationID:f,money:m})=>({...we[f],money:m})).reduce((f,{level:m,money:b,name:p,color:C,number:x,desc:P,rType:$})=>{let V=m+p+x;return f[V]||(f[V]={cl:[],level:b,name:p,number:x,type:$,desc:P}),f[V].cl.push(C),f},{})).sort(Pe("type","level"))),ve.wssp=JSON.stringify(E.Spell.map(({CitationID:f,money:m})=>({...we[f],money:m})).sort(Pe("money","level","spellid")).map(({level:f,money:m,name:b,desc:p})=>({level:m,name:b,desc:p}))),ve.wszf=JSON.stringify(E.Tactics.map(({CitationID:f,money:m})=>({...we[f],money:m})).filter(f=>{var m;return (f.name=(m=f.name)==null?void 0:m.replace("·新",""))&&!f.name.includes("废弃")&&!f.desc.includes("备用")&&!/(游戏|战斗)开始/.test(f.desc)}).sort((f,m)=>!f.money^!m.money?f.money?1:-1:f.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?f.name.slice(0,2).localeCompare(m.name.slice(0,2)):Pe("money","level","name.length")(f,m)).map(({level:f,money:m,name:b,desc:p})=>({level:m,name:b,desc:p})).filter((f,m,b)=>JSON.stringify(f)!=JSON.stringify(b[m+1]))),ve.jssp=JSON.stringify(we.filter(f=>(f==null?void 0:f.type)==3).sort(Pe("level","money","spellid")).map(({level:f,money:m,name:b,desc:p})=>({name:b,level:f,desc:p}))),ve.jscd=JSON.stringify(Object.values(we.filter(f=>(f==null?void 0:f.type)>=4).reduce((f,{level:m,money:b,name:p,color:C,number:x,type:P,desc:$,rType:V})=>{let _=m+p+x,re=[33,34].includes(Math.floor(V/100))||p=="诸葛连弩"&&m==4;return f[_]||(f[_]={cl:[],level:re?0:m,money:b,name:p,number:x,type:V+(re?6:0),desc:$}),f[_].cl.push(C),f},{})).sort(Pe("type","level","money")).sort((f,m)=>f.level>0&&m.level==0?-1:0)),ve.jssd=JSON.stringify(S.Root.seed.sort(Pe("level","seed")).map(({name:f,desc:m,level:b,huchijineng:p})=>{var x,P,$;let C=(x=m==null?void 0:m.match(/.*获得【([^【】]*)】.*/))==null?void 0:x[1];return C&&(m+=((P=Te[p])==null?void 0:P.desc)??(($=Te.find(V=>(V==null?void 0:V.name)==C))==null?void 0:$.desc)),{name:f,level:b,desc:m}})),ve.jssc=JSON.stringify(S.Root.school.map(({school:f,name:m,effect:b,needputong:p,needxiyou:C,needshishi:x,needchuanshuo:P})=>({school:f,name:m,need:[p,C,x,P],desc:we[b].desc.replaceAll(" ","")}))).replace("（","(").replace("）",")").replace("）",")"),ve.jszf=JSON.stringify(we.filter(f=>(f==null?void 0:f.type)==2).filter(f=>(f.school=parseInt(f.school||100),f.name=f.name.replace("·新",""),!f.name.includes("废弃")&&!f.desc.includes("备用")&&!f.name.includes("套装"))).sort((f,m)=>f.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?f.name.slice(0,2).localeCompare(m.name.slice(0,2)):Pe("level","money","name.length")(f,m)).map(({level:f,money:m,name:b,desc:p,school:C})=>({...C<100?{school:C}:{},name:b,level:f,desc:p})).filter((f,m,b)=>JSON.stringify(f)!=JSON.stringify(b[m+1]))),ve.jstf=JSON.stringify(S.Root.saijitianfu.filter(f=>f.seasonID==M).reduce((f,{tfid:m,ceng:b,type:p,cost:C,plot:x,preposition:P})=>(f[m]={id:m,x:p,y:b,cost:C,pre:(P==null?void 0:P.split(/,|;/))??[],...we[x]},f),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),e(ve);}function D(f,m,b){var p,C,x;return f?f.includes(",")?(([P,$])=>["随机","普通","稀有","史诗","传说"][$]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[P])(f.split(",")):j[f]?(m>1?m:"")+j[f]:we[f]?(p=we[f])==null?void 0:p.name:le[f]?(q.set(f,(C=S.Root.Adventure.find(P=>P.ID===parseInt(b/10)))==null?void 0:C.chapname),le[f].map(P=>P.generalname).join(`
`)):(x=S.Root.Card.find(P=>P.id==f))==null?void 0:x.name:""}function L({general:f,hp:m,maxhp:b,armor:p,getarmor:C,card:x,draw:P,sha:$,next:V,pre:_}){return (_?">":"")+f+m+(b!==m?"/"+b:"")+"血"+x+"牌摸"+P+"杀"+$+(V?">":"")}}(o["hd_roguelike.sgs"],o["hd_1v1_rogue.sgs"]),typeof t!="string"||t=="guanxing"){let he=function(W,A,D="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let L=D+W+".png";return fetch(L).then(f=>{if(f.ok)return {name:A,desc:`<a target="_blank" href="${L}"><img src="${L.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`};if(!D.includes("seat"))return he(W,A,D.replace("big/s","seat/s").replace("bigSkin","static"))})};O.gxjson={"结果为推演和预测，请以最终公告为准！更新时间":new Date().toLocaleString(),"【充值消费】":[]};let S=o["gn_dbs_quest.sgs"].TaskAll.Task.filter(({_attributes:W})=>W.clientTimeStart>=String(r)).map(({_attributes:W,Reward:A})=>{let D=",";return A.SelectReward&&(A=A.SelectReward,D="/"),A.RewardItem.length||(A.RewardItem=[A.RewardItem]),{id:W.id,time:W.timeStart.slice(0,8)+"—"+W.timeEnd.slice(0,8),desc:"【"+W.name+"】"+W.desc,reward:A.RewardItem.map(({_attributes:L})=>y(L.itemId+","+L.count)).join(D)}}).concat(o["sys_h5_quest.sgs"].root.Task.filter(W=>W.ClientTimeStart>=String(r)).map(({Id:W,Name:A,Desc:D,Rewards:L,Count:f,ClientTimeStart:m,ExtraRewards:b,ClientTimeEnd:p,SelectRewards:C})=>{let x=C?"/":",";return {id:W,time:m.slice(0,8)+"—"+p.slice(0,8),desc:"【"+A+"】"+D,reward:[L+","+f,...(b==null?void 0:b.split(";"))??[]].map(y).join(x)}})),E=o["sys_h5_task.sgs"].TaskAll.TaskNode.filter(({duration:W,quest_id:A})=>A&&(!W||(W==null?void 0:W.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(r))).reduce((W,{duration:A,quest_id:D,name:L})=>{var b,p;let f=D.split(";").map(C=>parseInt(C)).filter(C=>C>0),m=(((p=A||((b=S.find(({id:C,time:x})=>f.includes(C)&&x))==null?void 0:b.time))==null?void 0:p.slice(0,8))+"·【"+(L==null?void 0:L.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return f.forEach(C=>{C!=""&&(W[C]=m);}),W},{});S.forEach(({id:W,...A})=>{let D=E[W]??String(r)+"·【其它任务】";O.gxjson[D]||(O.gxjson[D]=[]),O.gxjson[D].push(A);}),(W=>{var A;W.length>1&&(O.gxjson[((A=W[0].time)==null?void 0:A.slice(0,8))+"·兑换【占星秘宝】"]=W);})(o["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter(({timeRange:W})=>(W==null?void 0:W.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).map(({Id:W,counts:A,exchangecount:D,timeRange:L})=>({time:L==null?void 0:L.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,(f,m,b)=>m+"-"+b),desc:"消耗·星石币*"+D,reward:y(W+","+A)}))),o["ff_exchange_new.sgs"].root.Common.filter(({duration:W})=>(W==null?void 0:W.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).forEach(({itemid:W,goods:A,rewardstype:D,duration:L})=>O.gxjson[L.slice(0,8)+"·【"+ke(W).name+"】兑换"]=A.sort((f,m)=>m.exchangecount1-f.exchangecount1).map(({exchangecount1:f,Id2:m,counts:b,limitcounts:p,itemid2:C,exchangecount2:x})=>{let P=String(b).split(";");return {time:L.slice(0,8)+"—"+L.slice(16,24),desc:"消耗·"+y((C??W)+","+(x??f))+(p?",限"+p+"次":""),reward:String(m).split(";").map(($,V)=>y($+","+P[V])).join("/")}})),o["sys_treasure_chest.sgs"].root.Common.filter(({duration:W})=>(W==null?void 0:W.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).forEach(({itemid:W,rewards:A,duration:D})=>O.gxjson[D.slice(0,8)+"·开启【"+ke(W).name+"】"]=A.map(L=>({time:D.slice(0,8)+"—"+D.slice(16,24),desc:"开启·"+y(W+","+L.counts),reward:JSON.stringify(L).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter(f=>(f==null?void 0:f.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0).map(f=>f.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,(m,b,p)=>y(b)+(p?"["+y(p)+"]":""))).join(L.rewardstype==2?"/":",")})));let M=[],q=[],B=[],j=o["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter(({BeginTime:W})=>W>String(r)).flatMap(({DropId:W,ExchangeId:A,BeginTime:D,EndTime:L})=>{let f=D.slice(0,8)+"-"+L.slice(0,8),m=(u.get(Math.abs(W))??[]).map(ke).filter(({name:x})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(x)),b=m.map(({ID:x})=>x),C=(u.get(Math.abs(A))??[]).map(ke).filter(({ID:x,name:P,TypeID:$})=>b.includes(x)||!($==43&&(P!=null&&P.endsWith("动态套装"))||$==36&&(P!=null&&P.startsWith("文和乱武*"))||$==25&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(P)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(P))).map(({ID:x,name:P})=>{let $=m.findIndex(({name:V})=>V==P);return $>=0&&b.splice($,1,x),x});return Array.from(new Set([...b,...C])).map(ke).map(({ID:x,TypeID:P,PicID:$,name:V,returngoods:_,usedeffect:re,info:X,fragment:se})=>{var fe;let xe={time:f,name:V,price:[...b.includes(x)?["四角"]:[],...C.includes(x)&&se?[se+"夺宝碎片"]:[]].join("/"),...(ne=>ne&&{desc:ne})(["祈福灯","圣魂玄晶","枭雄金印"].includes(V)?"":_&&_!="0"&&_.split(";").filter(ne=>(ne==null?void 0:ne.search(/[0-9]+,[0-9]+/))>=0).map(y).join(";")||(re==null?void 0:re.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&re.replace(/([0-9]+),[0-9,]+/g,y)||re&&T(re)||X)};return (P==36||((fe=xe.name)==null?void 0:fe.search(/\*[^0-9]/))>=0)&&B.push({name:V,res:$}),xe})});j.length&&(O.gxjson.夺宝行动=j,j=j.map(({name:W})=>W));let ie=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(W=>{var A;return ((A=W.x)==null?void 0:A.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)&&W.a!=834901}).map(({a:W,ah:A,l:D})=>{if(D&&D.replace(/([0-9]+),[0-9,]+/g,(L,f)=>(!A&&![100301,200101,1325201].includes(parseInt(f))&&M.push(parseInt(f)),L)),A)q.push(W);else return W}).filter(Boolean).concat(M).sort((W,A)=>W-A).filter((W,A,D)=>A==0||W!=D[A-1]);Array.from(new Set(o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter(W=>W.SellTime>String(r)).map(W=>W.baseID).concat(ie.concat(ie.filter((W,A,D)=>W-D[A-1]>1e3&&D[A+1]-W<1e3).map(W=>o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(A=>A.a-W>0&&A.a-W<1e4).map(A=>A.a)).reduce((W,A)=>[...W,...A],[])).sort((W,A)=>W-A)))).map(W=>ke(W)).filter(W=>W&&![...j,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(W.name)).forEach(({ID:W,TypeID:A,PicID:D,name:L,maxBuyCount:f,yuanbao:m,returngoods:b,SellTime:p,usedeffect:C,info:x,yuanbaoonly:P,fragment:$,exchange:V,shopvisual:_})=>{var X;let re={...p&&{time:p.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,(se,xe,fe)=>xe+"-"+fe)},name:L,...V!=null&&V.includes(",")?{price:y(V)}:_&&m!=999999&&{price:P?m+"通用元宝":m+"元宝",...f&&((se,xe)=>parseInt(se)>0?{max:xe+"个/"+(se==1?"":se)+"天"}:{})(...f.split(";"))},...(se=>se&&{desc:se})(["祈福灯","圣魂玄晶","枭雄金印"].includes(L)?"":b&&b!="0"&&b.split(";").filter(se=>(se==null?void 0:se.search(/[0-9]+,[0-9]+/))>=0).map(y).join(";")||(C==null?void 0:C.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&C.replace(/([0-9]+),[0-9,]+/g,y)||C&&T(C)||x)};(A==36||((X=re.name)==null?void 0:X.search(/\*[^0-9]/))>=0)&&B.push({name:L,res:D}),String(re.price).includes("夺宝")||String(re.price).includes("灵宝")?(O.gxjson.夺宝行动||(O.gxjson.夺宝行动=[]),O.gxjson.夺宝行动.push(re)):re.max?(O.gxjson.限购礼包||(O.gxjson.限购礼包=[]),O.gxjson.限购礼包.push(re)):(O.gxjson.其它道具||(O.gxjson.其它道具=[]),O.gxjson.其它道具.push(re));}),(Q=O.gxjson.其它道具)==null||Q.sort((W,A)=>W.price&&!A.price?-1:1),q.length&&(O.gxjson.祈福武将=Object.entries(q.map(W=>ke(W)).filter(({returngoods:W})=>{var A;return ((A=ke(W.split(";")[1].split(",")[0]))==null?void 0:A.TypeID)==25}).reduce((W,{name:A,lotteryPrice:D})=>(W[D]||(W[D]=[]),W[D].push(A.replace("武将","").replace(/\(.*?\)/g,"")),W),{})).sort((W,A)=>A[0]-W[0]).map(([W,A])=>({price:W+"同心结",reward:A.join("/")}))),(W=>{W.length&&(O.gxjson.祈愿台=W);})(o["ff_tiangong.sgs"].root.Drop.reduce((W,{Id:A,ItemId:D,MaxCount:L})=>(W[A]||(W[A]=[]),(f=>{["欢乐豆","手气卡","点将卡","灵宝经","换将卡","诏令天","校尉将","朱砂*","灵宝经","桃花*","功勋*","传世玉","大将军","夺宝券","水晶碎","圣魂玄"].includes(f.slice(0,3))||W[A].push(f);})(y(D+","+L)),W),[]).reduce((W,A)=>{if(A){let D=W.find(({reward:L})=>A.includes(L));D&&(D.reward=A.join(","));}return W},o["ff_tiangong.sgs"].root.Common.slice().reverse().reduce((W,{Id:A,Name:D,bigrewards:L,Duration2:f})=>{let m=parseInt(f.slice(0,8))+1;if(m<parseInt(r))return W;let b=W.find(({name:p})=>p==D);return b?b.time+=";"+m:W.push({name:D,reward:at[L],time:String(m)}),W},[]).reverse()));const le=(()=>{var W={};return function(A){return W[A]?W[A]:W[A]=o["ff_chess.sgs"].root.NewChess.filter(({PlanId2:D})=>D==A).reduce((D,{MaxFloors:L})=>D+parseInt(L),0)}})();(W=>{W.length&&(O.gxjson.绘卷=W);})(o["ff_chess.sgs"].root.Common.reduce((W,{GrandPrize:A,PlanID2:D,duration2:L})=>{var m;let f=parseInt(L.slice(0,8))+1;return f<parseInt(r)||W.push({reward:(m=ke(A))==null?void 0:m.name,预估价格:le(D)/2>>0,time:f+"-"+L.slice(16,24)}),W},[])),O.gxjson.新品皮肤=B.map(({name:W})=>({name:W})),Object.entries(O.gxjson).forEach(([W,A])=>O.gxjson[W]=Array.isArray(A)?A.map(D=>c(D,d)):c(A,d)),(!t||t=="guanxing")&&e(Promise.all(B.map(({name:W,res:A})=>he(A,W))).then(W=>O.gxjson.新品皮肤=W.filter(Boolean)).then(()=>(Object.entries(O.gxjson).forEach(([W,A])=>O.gxjson[W]=Array.isArray(A)?A.map(D=>c(D,d)):c(A,d)),O.gxjson)));}e(o),console.warn("[initMap] Config_w 解析完成");})))}function Pe(...t){return new Function("_a","_b","return "+t.map(e=>"((_a."+e+")-(_b."+e+"))").join("||"))}var ui=`<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;margin:0;padding:0;font-size:13px;width:100%;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-size:13px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center}.nav1{font-weight:bolder;height:20px;width:100%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, '座位号丨武将');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:'牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards{padding:5px;height:auto;width:94%;float:right;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.knownCards:after{text-align:center;content:'场上手牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:'权变牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:'宴戏牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:'牌堆类型详情';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:'第一张为牌堆顶';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:'第一张为牌堆底';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:10px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 10px;display:flex;width:100%}input:checked+.slider+.status:before{content:'开'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, '30');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, '关')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",'Noto Color Emoji';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url('https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed;transform-origin:0 0}.sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:'...';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.centerUI{width:18px;height:18px;background-color:#4e251f;border-radius:4px;display:flex;border:1px solid rgb(110 107 91);justify-content:center;align-items:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.3);visibility:hidden}.centerUI::after{content:"!";font-family:Arial,sans-serif;font-size:15px;color:#fff;font-weight:700}.centerUI:hover{background-color:rgb(134 74 58)}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div id="nav1"></div><div class="nav1" id="phrase">当前阶段提示</div></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:'神诸葛亮丨一'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:'卧龙诸葛丨二'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:'天候孔明丨三'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:'诸葛亮丨四'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:'武诸葛亮丨五'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:'卧龙凤雏丨六'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:'界卧龙诸葛丨七'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:'界诸葛亮丨八'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><div class="sha" id="sha">剩余出杀次数：指记入次数的杀</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉弥</button> <button class="cardType">天野</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机<span class="question-mark" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;打开开关即可助力脚本作者&#10;领取限时至十月九日的体验&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;">?</span></span> <label class="switch"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷<span class="question-mark" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;">?</span></span> <label class="switch"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">加入互助<span class="question-mark" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;">?</span></span> <label class="switch"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div><span id="sanBanFu">三板斧计数器</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">皮肤体验<span class="question-mark" data-tooltip="该功能仅限于体验皮肤&#10;喜欢还请购买支持画师&#10;此功能随时失效！！！">?</span></span> <label class="switch"><input id="skinSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="skinStateButton"><span class="explanation">动态皮肤</span> <label class="switch"><input id="skinStateSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽动态<span class="question-mark" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开">?</span></span> <label class="switch"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">皮肤壁纸 <span class="question-mark" data-tooltip="打开后进入皮肤详情界面进行设置&#10;可以将动静态皮肤设置为游戏壁纸&#10;也可以把静态皮肤图片保存到本地&#10;不建议与微端自定义背景同时使用">?</span> </span><label class="switch"><input id="skinPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="paperStateButton"><span class="explanation">全局壁纸<span class="question-mark" data-tooltip="对局外也将背景替换为皮肤壁纸">?</span></span> <label class="switch"><input id="allPaperSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框 <span class="question-mark" data-tooltip="明牌展示在武将下面">? </span></span><label class="switch"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效 <span class="question-mark" data-tooltip="其他角色显示五阶特效">? </span></span><label class="switch"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到 <span class="question-mark" data-tooltip="自动领取打卡签到的奖励">? </span></span><label class="switch"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡 <span class="question-mark" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取">? </span></span><label class="switch"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">领武将包<span class="question-mark" data-tooltip="每天登录，自动领取免费的武将包">?</span></span> <label class="switch"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">公会三敲<span class="question-mark" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉">?</span></span> <label class="switch"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">月卡奖励<span class="question-mark" data-tooltip="自动领取月卡奖励&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树<span class="question-mark" data-tooltip="每天登录自动砍树&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗<span class="question-mark" data-tooltip="跳过领取武将&#10;MVP结算&#10;出货弹窗&#10;老仙特效&#10;加快氪金速度">?</span></span> <label class="switch"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">击杀特效 <span class="question-mark" data-tooltip="屏蔽击杀特效">? </span></span><label class="switch"><input id="killEffectSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">兑换码通知<span class="question-mark" data-tooltip="关闭则不会显示兑换码通知">?</span></span> <label class="switch"><input id="CDKNotificationSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码&#13;&#10;当前激活码未激活"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" target="_blank">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/PBA8Mt4rCI" target="_blank">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://greasyfork.org/zh-CN/scripts/448004-%E4%B8%89%E5%9B%BD%E6%9D%80%E6%89%93%E5%B0%8F%E6%8A%84/versions" target="_blank">查看历史更新</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>`;let ze=null;const Xe=" "+"2.9.38.1".replace(/^2\.9\./,""),fi=`
修复小抄失效问题
`.replace(/；/g,"<br>");var an,rn;(rn=(an=document.getElementById("createSkinIframeSource"))==null?void 0:an.contentWindow)==null||rn.document;function hi(){return window.WDVerSion="1.0.0",window.padding=ce.padding||0,window.addEventListener("resize",vn),new Promise((t,e)=>{function n(){return new Promise(i=>{function s(){var r;typeof JSZipUtils<"u"&&typeof CtrUtil<"u"&&typeof((r=CtrUtil==null?void 0:CtrUtil.Ctr)==null?void 0:r.Ofb_Dec)<"u"&&typeof SystemContext<"u"&&document.getElementById("bgDiv")?Cn(!0).then(i):setTimeout(s,1e3);}s();})}Promise.all([n()]).then(t).catch(e);})}function pi(){var t,e,n,i;return window.removeEventListener("resize",vn),window.removeEventListener("resize",In),window.removeEventListener("SGSresize",Wn),(t=document.getElementById("seatUI"))==null||t.remove(),(e=document.getElementById("rogueUI"))==null||e.remove(),(n=document.getElementById("cusBGDiv"))==null||n.remove(),(i=document.getElementById("createIframe"))==null||i.remove(),I.isFrameAdd=!1,!0}function vn(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function Wn(){window.dispatchEvent(new Event("resize"));}let nt;function In(){nt&&clearTimeout(nt),nt=setTimeout(()=>{gi(),nt=null;},500);}async function Cn(t=!1){var e,n,i,s,r;if(t&&((e=document.getElementById("seatUI"))==null||e.remove(),(n=document.getElementById("rogueUI"))==null||n.remove(),(i=document.getElementById("cusBGDiv"))==null||i.remove(),(s=document.getElementById("createIframe"))==null||s.remove(),I.isFrameAdd=!1),!I.isFrameAdd){window.addEventListener("resize",In),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(a){this._gameScreenType!==a&&(this._gameScreenType=a,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(a){this._gameScale!==a&&(this._gameScale=a,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",Wn);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,(r=document.querySelector("link[rel=stylesheet]"))==null||r.remove();}catch{}return bi(),mi(),ki(),I.isFrameAdd=!0,di(!0)}}function mi(){var t=document.getElementById("bgDiv");if(t){var e=document.createElement("div");e.id="cusBGDiv",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.zIndex="0",e.style.pointerEvents="none";var n=document.createElement("video");n.className="bg-ani",n.id="sgsBgVideo",n.autoplay=!0,n.loop=!0,n.muted=!0,n.preload="auto",n.style.setProperty("object-fit","fill","important");var i=document.createElement("img");i.className="bg-ani",i.id="sgsBgIMG",i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.style.zIndex="1",i.style.position="absolute",i.style.top="0",i.style.left="0",e.appendChild(n),e.appendChild(i),t.appendChild(e),window.dispatchEvent(new Event("resize"));}}function gi(){if(!SystemContext)return;F.width=SystemContext.gameWidth*SystemContext.gameScale>>0,F.height=SystemContext.gameHeight*SystemContext.gameScale>>0,F.scale=SystemContext.gameScale,F.seatUIs&&F.seatUIs.length>0&&(En(),ct());let t={width:(SystemContext.gameWidth*SystemContext.gameScale>>0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale>>0)/window.devicePixelRatio};ce.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let e=document.getElementById("cusBGDiv"),n=document.getElementById("sgsBgVideo"),i=document.getElementById("sgsBgIMG"),s=document.getElementById("seatUI"),r=document.getElementById("rogueUI"),a=document.getElementById("centerUI"),o=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;e&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.left=window.innerWidth/2+"px",e.style.top=o+"px"),n.width=t.width,n.height=t.height,n.style.left=window.innerWidth/2+"px",n.style.top=o+"px",i.width=t.width,i.height=t.height,s.style.width=`${t.width}px`,s.style.height=`${t.height}px`,s.style.left=window.innerWidth/2+"px",s.style.top=o+"px",r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.left=window.innerWidth/2+"px",r.style.top=o+"px",F.centerX=window.innerWidth>t.width?t.width/2:window.innerWidth/2,F.centerY=t.height/2,a.style.left=210*SystemContext.gameScale/window.devicePixelRatio+"px",a.style.top=52*SystemContext.gameScale/window.devicePixelRatio+"px",F.cities.length>0&&yt(F.cities);}function En(){const t={ScaledHeight:F.selfSeatUiUnscaledHeight*F.scale};let e=F.unscaledWidth*F.scale,n=F.unscaledHeight*F.scale;F.ScaleWidth=e,F.ScaleHeight=n;let i=F.height,s=F.width;var r=t.ScaledHeight,a=0,o=0,c=F.seatUIs.length;if(c!=1){a=e,o=n;var d=[];d=F.seatUIs;var h=d.length-1,l=0,u=0,g=0;h<3?u=h:h==3?u=1:h==4||h==6?u=2:(h==5||h==7)&&(u=3),l=h-u>>1,g=h-l-u,H.isShanHeTu&&c==3&&F.friendGeneral==1&&(u=1,g=1);var y=1,w,T,k=0,U=0,Q=0,S=0,E=F.rightBarWidth*F.scale,M=0;if(l>0){var q=a,B=o*l;for(Q=(i-r-B)*.25>>0,F.verticalGap=Q,B+=(l-1)*Q,w=y+l,k=s-q-F.paddingRight*F.scale-E-M,U=(i-r-B-F.paddingTop*F.scale-F.paddingBottom>>1)+(F.paddingTop+10)*F.scale+B+F.leftRightTop;y<w;y+=1)T=d[y],U-=n,T.posX=(k-5>>0)/window.devicePixelRatio,T.posY=(U+n>>0)/window.devicePixelRatio,T.DisplayLocation="Right",U-=Q;}if(u>0){var j=a*u;for(S=(s-E-j)*.07>>0,F.horizontalGap=S,j+=(u-1)*S,w=y+u,k=(s-j-E)/2+j+(s<=1600?F.paddingLeftTopExtra:0),U=(F.paddingTop+10)*F.scale;y<w;y+=1)T=d[y],k-=e,T.posX=(k>>0)/window.devicePixelRatio,T.posY=(U+n>>0)/window.devicePixelRatio,T.DisplayLocation="Top",k-=S;}var ie=0;if(g>0){var le=o*g;for(Q=(i-r-le)*.25>>0,le+=(g-1)*Q,w=y+g,k=F.paddingLeft*F.scale,U=(i-r-le-F.paddingTop*F.scale-F.paddingBottom>>1)+(F.paddingTop+10)*F.scale+F.leftRightTop;y<w;y+=1)T=d[y],T&&(T.DisplayLocation="Left",T.posX=(k+ie>>0)/window.devicePixelRatio,T.posY=(U+n>>0)/window.devicePixelRatio),U+=o+Q;}}}function Dt(t){if(F.seatUIs=[],ct(),t===null)return;let e=H.sequence(H.mySeats[0]);F.seatUIs=e.map(n=>({actualSeatID:H.getOrder(n)+1})),En(),ct();}function xi(){document.getElementById("sgsBgIMG").src="https://web.sanguosha.com/10/pc/res/assets/runtime/general/maxBig/604701.png",setTimeout(function(){document.getElementById("sgsBgIMG").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";},2e4);}function yi(){var t=document.createElement("div");t.id="sidebarHint",t.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(t);}function bi(){var t=document.createElement("div");t.id="seatUI",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.pointerEvents="none",t.style.display="";var e=document.createElement("div");e.id="rogueUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="",ce.seatUISwitch?t.style.display="block":(t.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach(i=>i.style.display="none"));var n=document.createElement("div");n.id="centerUI",n.className="centerUI",n.style.position="absolute",n.style.pointerEvents="auto",n.onmouseover=function(){document.querySelectorAll("div.city").forEach(s=>{s.classList.remove("hide"),s.classList.add("show");});},n.onmouseout=function(){document.querySelectorAll("div.city").forEach(s=>{s.classList.remove("show"),s.classList.add("hide");});},e.appendChild(n),document.body.appendChild(t),document.body.appendChild(e);}function wi(){for(let t=0;t<=7;t++){let e="or"+(t+1);document.getElementById(e).style.display="block";}}function Si(t){for(let e=7;e>=t;e--){let n="or"+(e+1);document.getElementById(n).style.display="none";}}function ki(){let t=document.getElementById("createIframe");if(!t){t=document.createElement("div"),t.id="createIframe",t.id="createIframe",t.className="createIframe",t.style.position="fixed",t.style.overflow="hidden",t.style.resize="vertical",t.style.top="31px",t.style.right="155px",t.style.width="230px",t.style.height="500px",t.style.zIndex="10000000000",t.style.display="flex",t.style.flexDirection="column",t.style.color="#f2de9c",t.style.background="rgb(35, 32, 29)",t.style.userSelect="none",t.style.textAlign="left",t.style.transition="height 200ms",t.style.borderRadius="8px",t.style.transformOrigin="top right",t.style.transform="translate(0px, 0px)";var e=document.createElement("p");e.id="header",e.className="header",e.style.margin="1px",e.style.userSelect="none",e.style.cursor="grab",e.style.display="flex",e.style.alignItems="center",e.style.fontSize="20px",e.style.borderRadius="5px";var n=document.createElement("span");n.id="title",n.style="margin-right: auto;",n.innerText="三国杀打小抄"+Xe,t.appendChild(e),t.onmouseover=function(){document.querySelectorAll("div.city").forEach(d=>{d.classList.remove("hide"),d.classList.add("show");});},t.onmouseout=function(){document.querySelectorAll("div.city").forEach(d=>{d.classList.remove("show"),d.classList.add("hide");});};var i=document.createElement("button");i.innerText="-",i.id="toggle-me",i.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",i.type="button",i.addEventListener("mouseover",function(){i.style.backgroundColor="rgb(130, 30, 30)";}),i.addEventListener("mouseout",function(){i.style.backgroundColor="rgb(107, 30, 30)";}),e.appendChild(n),e.appendChild(i),localStorage.getItem("DXCVersion")!=Xe&&(Ve(`小抄已经更新到${Xe}<br>${fi}`,"acTooltip",1e4,"green"),localStorage.setItem("DXCVersion",Xe)),document.body.appendChild(t),ze=document.createElement("div"),ze.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",ze.id="iframe-source",t.append(ze),ze.innerHTML=ui,ze.querySelectorAll("script").forEach(c=>{const d=document.createElement("script");c.src?(d.src=c.src,d.async=c.async):d.textContent=c.textContent,document.body.appendChild(d),c.remove();});const r=document.querySelectorAll('input[id$="Switch"]'),a=document.querySelectorAll(".slider");r.forEach((c,d)=>{const h=a[d];c.addEventListener("change",l=>{const u=l.target.checked;try{gsap.to(h,{duration:.4,ease:"power2.inOut",css:{"--slider-position":u?"30px":"2px"},onStart:()=>{gsap.to(h,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(h,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(h,{duration:.4,ease:"power2.inOut",boxShadow:u?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:u?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(g){console.error("GSAP animation failed:",g);}});}),document.querySelectorAll(".panel-header").forEach(c=>{c.addEventListener("click",function(){const d=this.nextElementSibling;this.classList.toggle("active"),d.style.maxHeight?d.style.maxHeight=null:d.style.maxHeight=d.scrollHeight+"px";const h=new MutationObserver(()=>{d.style.maxHeight&&(d.style.maxHeight=d.scrollHeight+"px");});h.observe(d,{childList:!0,subtree:!0,characterData:!0}),d.style.maxHeight||h.disconnect();});}),document.querySelectorAll(".laya-header")[0].click(),document.querySelectorAll(".question-mark").forEach(function(c){c.addEventListener("mouseenter",function(d){let h=document.createElement("div");h.classList.add("tooltip","top"),h.textContent=c.getAttribute("data-tooltip"),document.body.appendChild(h);const l=c.getBoundingClientRect();h.style.left=`${l.left+window.scrollX+l.width/2-h.offsetWidth/2}px`,h.style.top=`${l.top+window.scrollY-h.offsetHeight-8}px`,h.classList.add("visible"),c.addEventListener("mouseleave",function(){h.classList.remove("visible"),setTimeout(()=>{h.remove();},100);});});});}yi(),vi(),Ii(),Yn();}function vi(){var t=document.getElementById("toggle-me");t.onclick=function(){I.closeIframe=!I.closeIframe,I.closeIframe?(document.getElementById("iframe-source").style.display="none",t.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",ce.padding&&(ce.padding=0,window.dispatchEvent(new Event("resize")),$t=0,en=0,draggable.style.transform=`translate(${$t}px, ${en}px)`)):(document.getElementById("iframe-source").style.display="block",t.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+Xe,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("click",n=>{var s;if(n.target.checked){var i=(s=document.getElementById("inviteName"))==null?void 0:s.value;typeof i=="string"&&i.length!==0&&(I.inviteName=i,He("INVITE_NAME",I.inviteName),oe(`为目前机器所有账号绑定助力${I.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),un(I.inviteName.trim()||I.nickname);}else Ct("INVITE_NAME");}),document.getElementById("guanxing").onmousedown=function(){const n=Xt(pt(O.gxjson),"myWindowGuanXing","观星");Yt(n);},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,Et(I.userID);Se.req;)await ye(500);this.disabled=!1,I.v&&await zn();const n=Xt(An(JSON.stringify(Se)),"myWindowGameRecord","游戏记录");Yt(n);},document.getElementById("mizhu").onmousedown=function(){let n=document.querySelectorAll(".mizhu");H.mySeats.length<=1?(n.forEach(i=>i.style.display="none"),Kt(Array.from(ee.shoupai(H.mySeats[0]),i=>ae[i].number))):H.mySeats.forEach((i,s)=>{n[s].style.display="block",n[s].innerText=H.name(i),n[s].onclick=()=>{Kt(Array.from(ee.shoupai(i),r=>ae[r].number));},s==0&&n[s].click();});};function e(n,i,o){var c,d,h,l;var r=n.target,a=r.checked,o=r.id;if(!(o==="autoBotSwitch"||o==="autoHGSwitch")){if(ce[o]=a,o=="skinSwitch")document.getElementById("skinStateButton").style.display=a?"block":"none";else if(o=="seatUISwitch")document.getElementById("seatUI").style.display=a?"block":"none";else if(o=="skinPaperSwitch"){let u=(d=(c=G.find("SceneLayer",null))==null?void 0:c.constructor)==null?void 0:d.name;document.getElementById("paperStateButton").style.display=a?"block":"none",tt.switch(a&&(Ne.includes(u)||ce.allPaperSwitch&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(u)));}else if(o=="allPaperSwitch"){let u=(l=(h=G.find("SceneLayer",null))==null?void 0:h.constructor)==null?void 0:l.name;tt.switch(a&&!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(u)||Ne.includes(u));}}}if(window.padding==0){console.warn("closesidebar");var t=document.getElementById("toggle-me");console.warn("toggle"),t.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach(n=>n.addEventListener("change",e)),document.getElementById("ACSubmit").onclick=ln,Wi();}function Wi(){let t=document.getElementById("openStore");t.onclick=function(){G.class("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),Ve("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function Xt(t,e,n){let i=document.getElementById("myWindow"+e);if(i)return i.style.display="block",i;const s=document.createElement("div");s.classList.add("window"),s.id=e;const r=document.createElement("div");r.classList.add("window-header");const a=document.createElement("div");a.classList.add("title"),a.innerText=n;const o=document.createElement("div");o.classList.add("controls");const c=document.createElement("button");c.innerText="⬜";const d=document.createElement("button");d.innerText="❌",o.appendChild(c),o.appendChild(d),r.appendChild(a),r.appendChild(o);const h=document.createElement("iframe");return h.classList.add("window-content"),h.srcdoc=`
    <html>
      <head><meta charset="utf-8" /><title>${e}</title></head>
      <body>${t}</body>
    </html>
  `,s.appendChild(r),s.appendChild(h),document.body.appendChild(s),{windowDiv:s,maximizeBtn:c,closeBtn:d}}function Yt(t){const{windowDiv:e,maximizeBtn:n,closeBtn:i}=t;let s=!1;n.addEventListener("click",()=>{s?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),s=!s;}),i.addEventListener("click",()=>{e.style.display="none";});}let $t=0,en=0;function Ii(){const t=document.getElementById("header"),e=document.getElementById("createIframe"),n=document.getElementById("sidebarHint");let i=!1,s=0,r=0,a=0,o=0,c=!1;const d=u=>{t.style.cursor="grabbing",i=!0,s=u.clientX||u.touches[0].clientX,r=u.clientY||u.touches[0].clientY,e.style.userSelect="none",e.style.willChange="transform",document.addEventListener("mousemove",h),document.addEventListener("mouseup",l),document.addEventListener("touchmove",h),document.addEventListener("touchend",l);};t.addEventListener("mousedown",d),t.addEventListener("touchstart",d);function h(u){if(!i)return;n.style.display="flex";const g=u.clientX||u.touches[0].clientX,y=u.clientY||u.touches[0].clientY,w=g-s,T=y-r;a+=w,o+=T,ce.padding&&(ce.padding=0,e.style.height="500px",window.dispatchEvent(new Event("resize"))),c||(c=!0,requestAnimationFrame(()=>{e.style.transform=`translate(${a}px, ${o}px)`,c=!1;})),window.innerWidth-g<25?n.style.backgroundColor="rgba(55, 40, 32, 1)":n.style.backgroundColor="rgba(55, 40, 32, 0.8)",s=g,r=y;}function l(u){n.style.display="none",t.style.cursor="grab",i=!1,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",l),e.style.willChange="auto",window.innerWidth-(u.clientX||u.touches[0].clientX)<25&&t.id==="header"&&(ce.padding||(I.closeIframe&&document.getElementById("toggle-me").click(),ce.padding=232,window.dispatchEvent(new Event("resize")),a=0,o=0,e.style.transform=`translate(${a}px, ${o}px)`));}}function It(t,e){let{name:n,number:i,color:s}=ae[t??0];if(t!==void 0&&(!t||!n||ue.name[n]===void 0))return;let r=ee.unknown;(t?[n]:Object.keys(ue.name)).forEach(a=>{let o=r.filter(d=>ue.name[a].has(d)).length,c=document.getElementById(a);c.textContent=o>1?o+a:a,c.disabled=o<=0;}),(t?[5,6].filter(a=>ue.color[a].has(t)).concat(s):[1,2,3,4,5,6]).forEach(a=>{var d;let o=r.filter(h=>ue.color[a].has(h)).length,c=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][a]);c.innerHTML=(d=c.innerHTML)==null?void 0:d.replace(/-?[0-9]+/,String(o));}),t?ue.query.has(t)&&ue[t].plot(e==0?0:1):ue.draw();}function Ci(){for(let t=1;t<=3;t++)document.getElementById("type"+t).innerHTML="";for(let t of document.getElementsByClassName("order-body"))t.innerHTML="",t.title="一二三四五六七八"[t.id.slice(-1)]??t.title;for(let t in ue.name){let e=document.getElementById("type"+ae[[...ue.name[t]][0]].type),n=document.createElement("button");n.id=t,n.className="cardType",n.innerText=t,n.onclick=()=>{ue.queryone("name",t);},e.appendChild(n);}F.seatUIs=[],ct(),bt();}var Ei=[1562902854,1678425373];const tn=function(){const t=typeof window.requestIdleCallback=="function";return console.warn("Use IdleCallback",t),function(e,n=500){if(t){const i=window.requestIdleCallback(e),s=setTimeout(()=>{window.cancelIdleCallback(i),e();},n);return ()=>clearTimeout(s)}else return setTimeout(e,0)}}();Tt(t=>{const e=I.recGoods[t.secId];if(e&&e.length>0){for(let n of e)cn(t.secId,n.GoodsBaseID,t.openTime,t.levelId,n.ChangeCount);delete I.recGoods[t.secId];}},6e4);function Ti(t){var s,r,a,o,c,d,h,l,u,g,y,w,T,k,U,Q,S,E,M,q,B,j,ie,le,he,W,A;try{if(!t)return;if((s=t.startsWith)!=null&&s.call(t,"socket连接关闭")){Ft({content:"您的二次密码认证错误，请稍后再试"},"确定");return}if((r=t.startsWith)!=null&&r.call(t,"SwitchScene"))tn(()=>{var N,R;let v=G.scene=t.slice(t.lastIndexOf("-")+1);z.end(Ne.includes(v)),ce.skinPaperSwitch&&tt.switch(ce.allPaperSwitch?!["RogueLikeBigMapScene","RogueSmallMapScene"].includes(v):Ne.includes(v)),v=="TableScene"?(Kn(),I.autoBotSwitch&&de.delay("auto",()=>Me(()=>I.autoBotSwitch&&G.readyStart(),20),8e3)):v=="HallScene"?I.autoBotSwitch===!0&&(oe("5秒后开始酒馆自动挂机"),de.delay("auto",()=>Me(()=>I.autoBotSwitch===!0&&G.newRoom(),10,1e3),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some(Z=>t.endsWith(Z))&&(I.autoBotSwitch===!0&&((N=document.getElementById("autoBotSwitch"))==null||N.click()),I.autoBotSwitch===9&&((R=document.getElementById("autoHGSwitch"))==null||R.click()));});else if(ce.skipWindowSwitch&&["TianShuWindow","RogueLike1v1ZhanJiWindow","GameResultWindow","GeneralOpenResultWindow","GetPropSpecialWindow","GameMvpWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin","VersionNoticeWindow","AdPushWindow"].includes(t)){let v=t=="GetPropSpecialWindow"?5:1,N=t=="TianShuWindow"?R=>{var Z;return (R==null?void 0:R.type)==6?(R.type=0,(Z=R.Close)==null?void 0:Z.call(R)):"false"}:t=="GetPropSpecialWindow"?R=>{var Z,Y;return (Z=R==null?void 0:R.Hide)==null||Z.call(R),(Y=R==null?void 0:R.Close)==null?void 0:Y.call(R)}:t=="RogueLike1v1ZhanJiWindow"?R=>{var Z;return (Z=R==null?void 0:R.onClickClose)==null?void 0:Z.call(R)}:R=>{var Z;return (Z=R==null?void 0:R.Close)==null?void 0:Z.call(R)};Me(()=>me(()=>G.find(null,t),10,200*v).then(R=>Array.isArray(R)?R.every(N):R!=null&&R.Close?N(R):"done"),v,1e3);}else if((a=t.endsWith)!=null&&a.call(t,"View"))t=="VuplexWebView"&&de.trigger("VuplexWebView");else if((o=t.endsWith)!=null&&o.call(t,"Window"))t=="MailWindow"?pn():t=="ChangeSkinWindow"?ce.skinSwitch&&me(()=>G.find("WindowLayer","ChangeSkinWindow","selectView","itemList"),50,100).then(v=>(v==null?void 0:v.length)>1&&(v==null?void 0:v.forEach(N=>{N.dynamicState=N.hasSkin?N.dynamicState?-1:-2:-3,N.hasSkin=N.bg.mouseEnabled=!0,N.blackbg.visible=N.isUsing=!1,N.timeBg.visible=N.composeBg.visible=N.composeIcon.visible=N.composeTxt1.visible=N.composeTxt2.visible=N.composeTxt.visible=N.timeLimiteTxt.visible=!1;}))):t=="SkinInfoWindow"?ce.skinPaperSwitch&&qn():t=="SelectSkinWindow"?I.autoBotSwitch!=9&&me(()=>G.find("WindowLayer",t)).then(v=>v==null?void 0:v.Close()):t=="SelectCardWindow"?G.flag===!0?Mt(!0,!0):I.v&&Mt():t=="WuGuFengDengWindow"&&G.flag===!0?G.wugu():["SelectGeneralWindow","SelectGeneralHappyWindow"].includes(t)&&I.autoBotSwitch?setTimeout(()=>{me(()=>G.find("WindowLayer",t)).then(v=>{var Z;if(!((Z=v==null?void 0:v.generalUis)!=null&&Z.length))return;let N=-1,R=null;v.generalUis.some(Y=>{var J;if(Y!=null&&Y.dianJiangSk)return R=Y;let pe=((J=Y==null?void 0:Y.generalInfo)==null?void 0:J.quality)||0;pe>N&&(N=pe,R=Y);}),R==null||R.sureBtnClick(),I.autoBotSwitch!=9&&setTimeout(()=>R==null?void 0:R.sureBtnClick(),500);});},3e3):t=="AdPushWindow"&&me(()=>G.find("WindowLayer",t)).then(v=>v.curViewList[0].closeClicker(),oe("小抄已经为你跳过广告和祈愿台出货播报"));else if(t.className===void 0&&!["ClientGeneralSkinReq"].includes((c=t.constructor)==null?void 0:c.name))return;ce.killEffectSwitch&&t.className=="CClientGameRewardPointNTF"&&(t.Type=0);let{ProtoObj:D,className:L,SeatID:f,SrcSeatID:m,targetSeatID:b,SpellID:p,Param:C,Params:x,Datas:P,DataCount:$,CardCount:V,CardIDs:_,FromID:re,FromZone:X,FromPosition:se,FromZoneParam:xe,ToID:fe,ToZone:ne,ToPosition:ut,ToZoneParam:Bt,MoveType:Le,Type:Oe}=t;if(L||(L=(d=t.constructor)==null?void 0:d.name),!I.userID&&t.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(L)){if(Object.assign(I,{userID:t.userID,nickname:t.Nickname||I.nickname||"",account:t.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||I.account||""}),I.UsedGeneralSkinID=Be(I.account+"::UsedGeneralSkinID",I.UsedGeneralSkinID),Object.assign(tt.res,Be(I.userID+"::paperRes",{},!0)),Ei.includes(I.userID))return;Promise.all([Cn(),me(()=>{var be;const v=G.get("QldjChooseRuleWindow");let{clientId:N,nickname:R,guildID:Z,guildName:Y,Level:pe,vipLevel:J}=((be=v==null?void 0:v.seat)==null?void 0:be.playerInfo)||{};return G.del("QldjChooseRuleWindow"),N!=I.userID||!R||!Y&&Z?null:(Object.assign(I,{nickname:R,guildID:Z,guildName:Y,Level:pe,vipLevel:J}),R)},30,1e3)]).then(()=>{ce.autoSignSwitch&&Zn(ce.autoSignSkipSwitch),Vn(I.userID);let v=document.getElementById("uuid");v.innerText="id："+I.userID,v.onclick=function(){Ke(I.userID,!1),v.innerText="复制成功",setTimeout(()=>{v.textContent="id："+I.userID;},"500");};let N=document.getElementById("nickName");N.innerText="昵称："+I.nickname,N.onclick=function(){Ke(I.nickname,!1),N.innerText="复制成功",setTimeout(()=>{N.textContent="昵称："+I.nickname;},"500");};let R=document.getElementById("guildID");R.innerText="公会数字ID："+I.guildID,On(),document.getElementById("inviteName").setAttribute("placeholder",I.nickname||""),Be("INVITE_NAME")&&Be("INVITE_NAME")!=I.Nickname&&(document.getElementById("inviteName").value=Be("INVITE_NAME"));async function Z(Y=2e4){var be;let J=0;for(;!I.nickname||!I.userID;)if(await new Promise(Re=>setTimeout(Re,2e3)),J+=2e3,J>=Y){oe("没办法获取到昵称用于助力 请重新登录");return}un(((be=I.inviteName)==null?void 0:be.trim())||I.nickname);}Date.now()<new Date("2024-12-15")&&ce.autoInviteSwitch&&Z();});}if(L=="ClientGeneralSkinRep"){H.mySeats[0]===void 0&&Oe==5&&t.ClientID<10&&(H.setMyID(t.ClientID),Dt());let v=t.GeneralSkinList[0],N=H.find(H.mySeats[0],v.GeneralID,!0);if(v.GeneralID!=N&&ce.skinStateBlockSwitch&&(v.state=0),ce.skinSwitch&&N){if([46,479].includes(v.GeneralID)&&xi(),I.UsedGeneralSkinID.UsedGeneralSkinID[N]){let[R,Z]=String(I.UsedGeneralSkinID.UsedGeneralSkinID[N]).split("_").map(Y=>parseInt(Y));v.SkinID=R,v.skin_type=Z||0;}v.state=ce.skinStateSwitch?1:0;}}else if(L=="ClientGeneralSkinReq"){if(ce.skinSwitch){let{RealGeneralID:v,SkinID:N,state:R}=t.SkinItem;if(!(R<0))return;R<-2&&(t.SkinItem.SkinID=0),t.SkinItem.state=R<-1?0:1;let[Z,Y]=String(I.UsedGeneralSkinID.UsedGeneralSkinID[v]).split("_").map(Number);if(Z==N)if(N in O.skinSP)N=N+"_"+O.skinSP[N][(Y||1)%O.skinSP[N].length];else return;I.UsedGeneralSkinID.UsedGeneralSkinID[v]=N,He(I.account+"::UsedGeneralSkinID",I.UsedGeneralSkinID);}}else if(L!="MsgReconnectGame"){if(L=="ClientOfficerInfoRep")I.curOfficerLv=t.curOfficerLv;else if(L=="decodeSSCChatmsgNtf")D.scene==11&&(D.scene=2);else if(L=="ClientRoleGeneralStarRep")ce.generalSwitch&&(t.Star>=0&&(t.Star=4),D.star>=0&&(D.star=4));else if(L=="ClientGameRecordInfoRep")(D==null?void 0:D.query_uid)==I.userID&&[26,35,44,5,7].includes(D==null?void 0:D.id)&&((h=Se==null?void 0:Se.req)==null||h.delete(D.id),((l=Se.req)==null?void 0:l.size)==0&&delete Se.req,(u=D==null?void 0:D.all_record)!=null&&u.length&&jn(D.id||0,D.all_record));else if(L=="DbsCcUserGoodshintNtf")Oe==2010&&typeof t.GoodsList=="object"&&(I.goods=Xn(I.goods,t.GoodsList));else if(L=="decodeClientSecretInfoRep"){if(Object.keys(I.goods).length>0){O.currentSec=D.secId;for(let v of I.goods)Sn(O.currentSec,v.GoodsBaseID,v.ChangeCount,D.openTime),(v.GoodsBaseID==11180||wn(v.GoodsBaseID))&&cn(D.secId,v.GoodsBaseID,D.openTime,D.levelId,v.ChangeCount);}I.goods=[];}else if(L=="decodeClientTavernInfoRep"){let v=((g=D==null?void 0:D.tavern_info)==null?void 0:g.day_quest_finished_cnt)??0;if(I.autoBotStatus=30-v,I.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${I.autoBotStatus.toString().padStart(2,"0")}"`),v>=30){let N=document.getElementById("autoBotSwitch");N!=null&&N.checked&&!I.autoBotInfinite&&N.click(),oe(`今日已获得亲密度：${v}<br>恭喜你完成任务~`);}else v>0&&oe(`今日已获得亲密度：${v}还差 ${30-v} 亲密度<br>继续努力吧~`);}else if(L=="ClientSecKillInfoRep")ri(t.Data);else if(L=="decodeRogueLikeDataSync")bt(D);else if(L=="ClientActivitysetDataRep")tn(()=>{bt();});else if(L=="decodeRogueLikeGameOverRep")document.getElementById("chongsheng").innerText="重生是否发动：是";else if(L=="SmsgGamePlayerDead")I.autoBotSwitch===!0&&!I.autoBotInfinite&&f==H.mySeats[0]&&setTimeout(()=>{var v,N,R,Z,Y;((R=(N=(v=G.gamescene)==null?void 0:v.seatContainer)==null?void 0:N.seatUIs)==null?void 0:R.reduce((pe,J,be,Re)=>{var Ue,At,Lt,Rt,Gt;return pe+(((Ue=J==null?void 0:J.seat)==null?void 0:Ue.figure)==Re[0].seat.figure||(Rt=(Lt=(At=J==null?void 0:J.seat)==null?void 0:At.playerInfo)==null?void 0:Lt.showName)!=null&&Rt.includes("金")?1:-1)*((Gt=J==null?void 0:J.seat)==null?void 0:Gt.currentHp)},0))<0&&((Y=(Z=G.gamescene)==null?void 0:Z.topMenu)==null||Y.onClickBack(),Ft({title:"退出游戏"},"确定",!0));},1e4);else if(L=="MsgGameDealCharacter"){if(I.userID==1099193522&&typeof Allows<"u"&&typeof Oe<"u"&&Oe==1){var e=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+e;}}else if(L=="GsCUpdateRoleDataNtf")H.mySeats[0]===void 0&&t.StateID===58&&(H.setMyID(f),console.warn(L,"游戏人数："+H.size+", 我的座位："+H.mySeats,H.seatIDs));else if(L=="GsCFirstPhaseRole")f!==void 0&&(H.firstID=f,console.warn("先手位置:"+H.firstID));else if(L=="MsgGameRoundNtf")t.isPassed&&(z.isPassed=t.isPassed);else if(!(L=="MsgGameOver"||L=="ClientRecommendShopItemRep"||L=="ClientLeavetableRep")){if(L=="decodeRougeBaseInfoRep")F.friendGeneral=((y=D==null?void 0:D.friendGeneral)==null?void 0:y.length)??F.friendGeneral;else if(L=="MsgGamePlayCardNtf")z.ready(t.CardList);else if(L=="SmsgGameSetCharacter")H.mySeats[0]===void 0&&H.isDouDiZhu&&t.Infos.length==1&&H.setMyID(t.Infos[0].SeatID),t.Infos.forEach(({SeatID:v,CharacterID:N})=>{H.setGeneral(v,N);});else if(L=="GsCGuoZhanSetCharacter")(w=t.GeneralData)==null||w.forEach(({index:v,cardID:N})=>{H.setGeneral(f,N,v);});else if(L=="MsgGameTurnNtf")z.enter(t.TurnCnt);else if(L=="GsCGamephaseNtf")z.enter(null,t.Round,f);else if(L=="GsCUpdateRoleDataExNtf")z.currentID==f&&t.DataID==1&&Array.isArray(t.Datas)&&(document.getElementById("sha").innerText="剩余出杀次数："+Math.max(0,P[2]-P[1]),f==H.mySeats[0]&&H.isShanHeTu&&Ie.itemId.includes(2042)&&(P[1]==0&&(Ie.previousData=0),Ie.sanBanFu+=P[1]-Ie.previousData,Ie.previousData=P[1],Ie.sanBanFu%3==0?document.getElementById("sanBanFu").innerText="三板斧计数器":document.getElementById("sanBanFu").innerText="三板斧计数器："+((Number(Ie.sanBanFu)-1)%3+1)));else if(L=="ClientHappyGetFriendHandcardRep")H.find(t.seatId,[7004,2087,3048])&&new ee(t.seatId).show(t.Cards);else if(L=="PubGsCUseCard")H.mySeats[0]==f&&qt([t.CardID]),z.currentID==f&&H.find(z.currentID,[7003,2086,3047])&&t.useType==1&&t.fromZone!=1&&!t.isSend?(z.spellSpace[7011]||(z.spellSpace[7011]={count:0,color:new Set}),ae[t.CardID].type!=3&&z.spellSpace[7011].count++,z.spellSpace[7011].color.add(ae[t.CardID].c),document.getElementById("suit").innerHTML="["+z.spellSpace[7011].count+"]"+Array.from(z.spellSpace[7011].color).join("")):z.currentID==f&&H.find(z.currentID,[330,1068])&&t.useType==1&&!t.isSend&&(document.getElementById("suit").innerHTML=ae[t.CardID].cn);else if(L=="PubGsCUseSpell")p==3324&&(document.getElementById("chongsheng").innerText="重生是否发动：是"),H.mySeats[0]==f&&_.length==1&&qt(_),p==2143?(z.spellSpace[p]||(z.spellSpace[p]=new Set),_.forEach(v=>z.spellSpace[p].add(ae[v].c)),document.getElementById("suit").innerHTML=Array.from(z.spellSpace[p]).join("")):[3157,3511].includes(p)&&_.filter(v=>v>0).length!=0&&(m==H.mySeats[0]||I.v)?z[p]=_:([3193,3185,3138].includes(p)||p==3161)&&z.phase--;else if(L=="GsCRoleOptTargetNtf")if(p==945&&C==0&&(x==null?void 0:x.length)>0)si(x.map(v=>ae[v].number),I.v&&f==H.mySeats[0]);else if(p==3440&&H.mySeats.includes(f)&&C==0&&(x==null?void 0:x.length)>0)Oe==28?Vt(x.map(v=>ae[v].number),new ee(f).cards.map(v=>ae[v.id].number)):Vt();else if(p==11003&&C==0&&(x==null?void 0:x.length)>0&&m!=H.mySeats[0]&&ce.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+x.map(v=>ae[v].ncn).join("<br>")+"</span>";else if([7016,7017].includes(p)&&(x==null?void 0:x.length)>0&&(m==H.mySeats[0]||I.v)){z[p]=x.slice();let v=Array.from(new Set(new ee(C).cards.map(({key:J})=>J))).sort((J,be)=>be-J),N=Array.from(new Set(new ee(255,1).cards.slice(0,H.isGuoZhan?void 0:2).map(({key:J})=>J))).sort((J,be)=>be-J),{yes:R,no:Z}=x.reduce((J,be)=>{let{keys:Re}=te.findKZ(be);return v.find(Ue=>Re.includes(Ue))!==void 0&&J.yes.push(be),N.find(Ue=>Re.includes(Ue))!==void 0&&J.no.push(be),J},{yes:[],no:[]}),Y=document.getElementById("result");Z.length==2?R=x.filter(J=>!Z.includes(J)):R.length==1&&(Z=x.filter(J=>!R.includes(J))),R.length==1||R.length==2?(Y.innerHTML='<span class="textRes">【宴戏】'+R.map(J=>ae[J].ncn).join("/")+"</span>",z[p]=R.concat(x.filter(J=>!R.includes(J)))):Y.innerHTML='<span class="textRes">【宴戏】未知</span>';let pe=new ee(C).show(z[p][0]).concat(new ee(255,1,H.isGuoZhan?null:1).show(z[p].slice(-2)));R.length==3?te.pack(pe):R.length==1?te.pack(pe.slice(1,3)):R.length==2&&(te.pack(pe.slice(0,2)),te.pack(pe.slice(1,3))),x.forEach(J=>{Y.innerHTML+='<span class="textRes'+(R.length<3&&R.includes(J)?" textRes":"")+'">'+ae[J].ncn+"："+[[R,"手牌"],[Z,"牌堆"]].filter(([be,Re])=>be.includes(J)).map(([be,Re])=>Re).join("/")+"</span><br>";});}else [4,5,921,372,811,357,3119,501,3437].includes(p)&&(x==null?void 0:x.length)>0?b!==void 0&&b!==255&&new ee(b).show(x):[851,361,774,3310].includes(p)&&C==0&&(x==null?void 0:x.length)>0?b!==void 0&&b!==255&&new ee(b).show(x):p==943&&C==0&&(x==null?void 0:x.length)==1?new ee(255,1,1).show(x):p==898&&C==0&&(x==null?void 0:x.length)>2?m!==void 0&&m!==255&&new ee(m).show(x.slice(1,x[0]+1)):(p==987||p==988)&&C==1&&(x==null?void 0:x.length)>2?b!==void 0&&b!==255&&(m==H.mySeats[0]||I.v)&&new ee(b).show(x.slice(-x[1])):p==3266&&C==0&&(x==null?void 0:x.length)>0?b!==void 0&&(m==H.mySeats[0]||I.v)&&new ee(b,b==255?1:5,1).show(x.filter((v,N)=>N%3==1)):p==3483&&C==1?(x==null?void 0:x.length)>2&&b!==void 0&&b!==255?new ee(b).show(x.slice(-x[1])):x[0]>0&&(z[p]=x[0]):(p==7010||p==7011)&&(x==null?void 0:x.length)>0&&b==255?(z.spellSpace[7009]=x.slice(),(m==H.mySeats[0]||I.v)&&te.pack(new ee(255,1,1).show(x))):p==2900&&Oe==28&&H.setGeneral(b,x[2],x[1],!0);else if(L=="CGsRoleSpellOptRep")p==2022?H.setGeneral(f,P[0],P[1],!0):p==7009?((T=z[7009])==null||T.pop(),(k=z[7009])!=null&&k.length||new ee(255,1,1).show(P)):p==3336?new ee(255,1,-1).show((U=P==null?void 0:P.slice())==null?void 0:U.reverse()):P.length>0&&p==15&&Oe==10&&Nn(ae[P[0]].color==1);else if(L=="PubGsCMoveCard"){if(_=_.slice(),V===0||Le===0||ne===11||t.isSend)return;if(p==713&&Le==21&&V==_.length-2){let v=_.splice(0,1)[0];_.splice(v,1);}_.filter(v=>v>0).length!=V&&_.filter(v=>v>0).length!=0&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+_+"]"),console.error(t),_=[]),X==1&&se==65282&&[3208,7011].includes(p)&&(se=65280,_.reverse()),X==1&&se==65282&&Le==13&&V==1&&(se=65280),X==1&&se==65282&&ne==4&&Le==8&&p==795&&V==1&&(se=65280),X==1&&se==65282&&ne==5&&p==3101&&V==1&&(se=0),X==1&&se==65282&&ne==5&&!H.isGuoZhan&&[7016,7017].includes(p)&&V==1&&(se=65280),ne==1&&fe==255&&ut==65280&&(_=_.filter(v=>v!=4400&&v!=4401));var n=new ee(re,X,se,V,p,xe),i=new ee(fe,ne,ut,V,p,Bt);if(ne==12||X==12)ne!=12?i.add(_.concat(Array(V-_.length).fill(0)).map(v=>new te(v,v,i.zoneID))):X!=12&&X!=0&&n.remove(_,p);else if(X==5&&ne==1&&fe==0)i.add(n.remove(_.filter(v=>v>0)).map(v=>v.destroy(0)));else if(X==2&&ne==9&&re==0&&fe==0)z.isGameStart&&!z.isPassed&&te.pack(te.get(0).map(v=>v.destroy()),!1,1),i.set(i.cards.concat(n.cards.map(v=>v.destroy(0)))),n.set([]),It(),z.isPassed=!1;else if(Le!==255){if(X==1&&ne==5&&H.dealCard(fe,_[0]),ne==2&&(z.spellSpace[3090]||(z.spellSpace[3090]=new Set),_.forEach(v=>z.spellSpace[3090].add(ae[v].c)),document.getElementById("boTu").innerHTML=Array.from(z.spellSpace[3090]).join("")),(X==5||ne==5)&&(fe==((Q=H.mySeats)==null?void 0:Q[0])||re==((S=H.mySeats)==null?void 0:S[0]))){let v=Array.from(ee.shoupai(H.mySeats[0]));ne==5?v.push(..._):X==5&&(v=v.filter(Z=>!_.includes(Z))),v=v.map(Z=>ae[Z]);const{countType2:N,countSha:R}=[...v].reduce((Z,Y)=>(Y.type===2&&!["乐","兵","闪电"].includes(Y.name)&&Z.countType2++,["杀","火杀","雷杀","冰杀"].includes(Y.name)&&Z.countSha++,Z),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+R+"："+N+"</span>";}if([441,3492].includes(p)&&ne==8&&Le==6&&ai(_.map(v=>ae[v].number),p==3492&&I.v),p==3033&&X==1&&ne==8&&_.filter(v=>v>0).length==1){let v=ae[_[0]].number,N=0,R=0,Z=0;ee.paidui.forEach(Y=>{let pe=ae[Y].number;pe===v?Z++:pe>v?N++:R++;}),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(N>R?"大":"小")+'</span><br><span class="textRes">跟'+v+"比，"+N+"张大		"+R+"张小		"+Z+"平</span>";}if(p==3329&&re==z.currentID){let v=ae[_[0]].number,N=ee.paidui,R=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap(Y=>N.filter(pe=>{var J;return (J=ue.name[Y])==null?void 0:J.has(pe)})).reduce((Y,pe)=>{let J=ae[pe].number;return J>v?Y.g++:J<v?Y.l++:Y.e++,Y},{g:0,l:0,e:0}),Z=["五谷","桃园","火攻","借刀","撒豆"].flatMap(Y=>N.filter(pe=>{var J;return (J=ue.name[Y])==null?void 0:J.has(pe)})).reduce((Y,pe)=>{let J=ae[pe].number;return J>v?Y.g++:J<v?Y.l++:Y.e++,Y},{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(R.g>R.l?"大":R.g<R.l?"小":Z.g>Z.l?"大":Z.g<Z.l?"小":"平")+'</span><br><span class="textRes">'+R.g+"."+Z.g+"大		"+R.l+"."+Z.l+"小</span>";}else p==3488&&X==5&&ne==5&&Le==21&&_.filter(v=>v>0).length==1?(z[p]||(z[p]={}),z[p][re]=_.find(v=>v>0)):p==3488&&X==5&&ne==10&&Le==11&&_.filter(v=>v>0).length==0?(_[0]=((E=z[p])==null?void 0:E[re])||0,z[p].stack=_[0]):p==3488&&X==10&&(ne==1||ne==2)&&Le==11&&_.filter(v=>v>0).length==0&&(_[0]=((M=z[p])==null?void 0:M.stack)||0,(q=z[p])==null||delete q.stack);if([3157,3511].includes(p)&&X==2&&ne==5&&V==((B=z[p])==null?void 0:B.length)&&_.filter(v=>v>0).length==0&&z[p].forEach((v,N)=>_[N]=v),[7016,7017].includes(p)&&ne==5&&V==1&&(m==H.mySeats[0]||I.v)&&(_[0]&&((j=z[p])!=null&&j.includes(_[0]))?z[p].splice(z[p].indexOf(_[0]),1):X==5||((ie=z[p])==null?void 0:ie.length)==2||((le=z[p])==null?void 0:le.length)==1?_[0]=((he=z[p])==null?void 0:he.shift())||0:H.isGuoZhan),re==fe&&X==ne&&(se==ut||ne!=1)&&(xe==Bt||ne!=4))n.show(_);else if(p==3208&&X==10&&ne==5&&_.filter(v=>v>0).length===0)n.pos=-1,te.pack(n.cards.slice(0,n.length-1)),i.add(n.remove(_));else if(p==3483)if(X==10&&ne==10)_.filter(v=>v>0).length===0&&(n.pos=-1,i.pos=1),i.add(n.remove(_));else if(X==1&&ne==10&&se==65282)z[p]&&te.pack(n.cards.slice(0,z[p])),_.filter(v=>v>0).length==0&&(n.pos=-1),i.add(n.remove(_));else if(X==5&&ne==10)z[p]=i.add(n.remove(_));else if(X==10&&ne==1&&se==65282){if(_.filter(v=>v>0).length==0&&((W=z[p])==null?void 0:W.length)==V&&z[p].every(v=>n.cards.includes(v))){let v=z[p].flatMap(R=>n.cards.splice(n.cards.indexOf(R),1));te.pack(i.add(v));let N=v.map(R=>R.key);N.every(R=>R>0)&&_.splice(0,V,...N);}else i.add(n.remove(_));delete z[p];}else i.add(n.remove(_));else if(p==780&&X==5&&se==65282&&V==1)if(ne==5&&re==z.currentID)z[p]=i.add(n.remove(_))[0];else if(ne==1&&re!=z.currentID&&n.cards.includes(z[p])){let v=(A=i.add(n.cards.splice(n.cards.indexOf(z[p]),1))[0])==null?void 0:A.key;v>0&&_.filter(N=>N>0).length==0&&(_[0]=v),delete z[p];}else i.add(n.remove(_));else i.add(n.remove(_,p));}}}}}catch(D){console.error(D);}}function nn(){let t=Array.prototype.slice.call(arguments);try{return t[0]==="INIT"?hi():t[0]==="EXIT"?pi():Ti(t[t.length-1])}catch(e){console.error(e.message),console.error(e.stack);const[,n,i]=e.stack.match(/(\d+):(\d+)/);console.error("Line:",n),console.error("Column:",i),oe("小抄GG了，联系作者解决");}}typeof SGSMODULE<"u"&&(Object.defineProperty(window.console,"log",{get(){return console.info},set(){}}),window.SGSMODULE.forEach(t=>t("EXIT")),delete window.SGSMODULE);console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;");window.SGSMODULE=[];Object.defineProperty(window.console,"log",{get(){return function(...t){(window._debug||window.isLogAllClass)&&console.debug(...t),window.SGSMODULE.forEach(e=>e==null?void 0:e(...t));}},set(){}});nn("INIT").then(t=>{t&&window.SGSMODULE.push(nn);});

})();