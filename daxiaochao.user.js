// ==UserScript==
// @name         三国杀打小抄
// @namespace    https://greasyfork.org/scripts/448004
// @version      2.9.33
// @author       小麦 孤独尊
// @description  打小抄支持网页版和微端，微端文件请加群 830137048
// @icon         https://i0.hdslb.com/bfs/new_dyn/17ec41a0ca79633b77399065ab80da3f2138912.png
// @match        *://game.4399iw2.com/yxsgs/*
// @match        *://my.4399.com/yxsgs/*
// @match        *://*.sanguosha.com/*
// @match        *://web.kuaiwan.com/kwsgsn/*
// @match        *://wan.baidu.com/microend?gameId=19793595/*
// @match        *://www.7k7k.com/special/sgs/?*
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  'use strict';

  var Lt=Object.freeze,Bt=Object.defineProperty;var Wn=(n,e,t)=>e in n?Bt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _e=(n,e,t)=>(Wn(n,typeof e!="symbol"?e+"":e,t),t);var Rt=(n,e)=>Lt(Bt(n,"raw",{value:Lt(e||n.slice())}));function Re(n,e=null,t=!0){let i;return !i&&typeof localStorage<"u"&&(i=localStorage.getItem(n)),i?JSON.parse(i):e}async function je(n,e,t=!0){typeof localStorage<"u"&&localStorage.setItem(n,JSON.stringify(e));}async function nn(n,e=!0){typeof localStorage<"u"&&localStorage.removeItem(n);}function ft(n,e=0){let t="";const i="  ".repeat(e);if(Array.isArray(n))n.every(r=>typeof r!="object"||!r)?t+=`${i}${n.join("	")}
`:(t+=`${i}<ol>
`,n.forEach(r=>{t+=`${i}  <li>
`,t+=ft(r,e+2),t+=`${i}  </li>
`;}),t+=`${i}</ol>
`);else if(typeof n=="object"&&n!==null)if(Object.values(n).every(r=>typeof r!="object"||!r))t+=`${i}${Object.entries(n).map(([r,a])=>`<strong>${r}:</strong> ${a}`).join(", ")}
`;else {t+=`${i}<ul>
`;for(const r in n)t+=`${i}  <li>
`,t+=`${i}    <strong>${r}:</strong>
`,t+=ft(n[r],e+2),t+=`${i}  </li>
`;t+=`${i}</ul>
`;}else t+=`${i}  ${n}
`;return t}const ht=[];let et=!1,dt=null;function Ye(n,e="acTooltip",t=1e4,i="",s=null,r=!1){r?In(n,e,t,i):(ht.push({text:n,id:e,duration:t,className:i,clickCallback:s}),et||pt());}function In(n,e,t,i){let s=document.getElementById(e);s||(s=document.createElement("div"),s.id=e,s.className="ac-tooltip "+i,document.body.appendChild(s)),s.innerHTML=n,s.className="ac-tooltip "+i,s.addEventListener("click",()=>{at(uniqueId);}),setTimeout(()=>{s.classList.remove("hide"),s.classList.add("show"),s.style.top="20px";},50),dt&&clearTimeout(dt),dt=setTimeout(()=>at(e),t);}function oe(n){if(ChannelUtils!=null&&ChannelUtils.openQQBuy){ChannelUtils.openQQBuy({ret:!0,msg:n});return}}function pt(n){if(ht.length===0){et=!1;return}et=!0;const{text:e,id:t,duration:i,className:s,clickCallback:r}=ht.shift();let a=document.getElementById(t);a&&a.remove();let o=t+"-"+new Date().getTime(),c=document.createElement("div");c.id=o,c.className="ac-tooltip "+s,c.innerHTML=e,document.body.appendChild(c),r&&typeof r=="function"&&c.addEventListener("click",r),c.addEventListener("click",()=>{at(o),pt();}),setTimeout(()=>{c.classList.remove("hide"),c.classList.add("show"),c.style.top="20px";},50),i?setTimeout(()=>{at(o),pt();},i):et=!1;}function at(n){let e=document.getElementById(n);e&&(e.classList.remove("show"),e.classList.add("hide"),setTimeout(()=>{e&&e.remove();},300));}var $t,Cn=function(n){return String.raw($t||($t=Rt([`
<html><head><meta charset="utf-8" /><title>战绩胜率统计</title><style>
table { margin-right: 8px; border-collapse: collapse; }
th, td { text-align: center; border: 1px solid black; font-size: 24px; box-sizing: border-box; }
td { padding: 2px 5px; }
.nav, thead { background: white; position: sticky;; }
.rate { margin: 5px; font-size: 28px;}
.button {  display: none; } 
.button[name=mode] ~ .label { display: inline-block; font-size: 30px; user-select: none; border: solid 1px black; border-radius: 5px; padding: 5px; margin: 5px; }
th .button ~ .label { display: inline-block; width: 100%; height: 100%;}
th .button:checked ~ .label::after { content: "↓"; }
th.reverse .button:checked ~ .label::after { content: "↑"; }
.button:checked ~ .label { background: rgb(64,160,255); } 
.s0 { background: white; }
.s1 { background: rgb(221,0,0); }
.s2 { background: rgb(255, 200, 0); }
.s3 { background: rgb(0, 136, 68); }
.s4 { background: rgb(0, 94, 183); }
.s5 { background: rgb(255, 0, 255); }
</style></head><body style="margin: 0 8px;">
<div class="nav" style="top: 0; height: 136px; z-index: 3"><div id="modeTab"></div><div id="summary"></div></div>
<div style="display: flex; align-items: flex-start; flex-wrap: wrap;"><table id="detail"><thead style="top: 135px; z-index: 1"></thead><tbody></tbody></table>
<table id="record"><thead style="top: 135px; z-index: 2"></thead><tbody></tbody></table></div>

<script>
const data = Object.entries(`,`).reduce((acc,[mode, records]) => {
acc[mode] = Object.entries(records).reverse().map(([time, record]) => ({timestamp:parseInt(time), time: new Date(time*1000).toISOString().slice(0,16).replace('T',' '), ...record, durationstr: formatSeconds(record.duration)}));
return acc;
},{});
const modeName = {1: '八人标准', 2: '六人身份', 3: '八人军争', 4: '应变身份', 5: '八人至尊', 6: '身份老友房', 7: '国战', 8: '应变国战', 9: '国战老友房', 10: '新1V1', 11: '欢乐', 12: '应变欢乐', 13: '欢乐老友房', 14: '统率', 15: '4V4演武', 16: '应变演武', 17: '欢乐演武', 18: '国战演武', 19: '统率排位', 20: '欢乐排位', 21: '智斗三国', 22: '欢乐新手', 23: '欢乐新手', 24: '六人新手', 25: '六人新手', 26: '排位赛', 27: '主公杀', 28: '1v1面杀练习场', 29: '五人匹配', 30: '排位赛', 31: '欢乐33', 32: '33老友房', 33: '武将试炼', 34: '武将试炼', 35: '斗地主', 36: '线上赛事', 37: '山河图', 38: '王战练习', 39: 'SCL练习', 40: '斗地主练习', 42: '八人匹配', 43: '个人挑战1V1', 44: '单骑无双'};
const sfName = {5:{0: '综合', 1: '主公', 2: '忠臣', 3: '反贼', 4: '内奸'},7:{0: '综合', 1: '魏国', 2: '蜀国', 3: '吴国', 4: '群雄', 5:'晋国'},26:{0:'综合',2:'先手',3:'后手'},35:{0:'综合',1:'地主',3:'农民'},44:{0:'综合',1:'先手',4:'后手'}};
colors=['white','rgb(221,0,0)','rgb(255, 200, 0)','rgb(0, 136, 68)','rgb(0, 94, 183)','rgb(255, 0, 255)','black'];
const modeTab = document.getElementById('modeTab');
[26,35,44,5,7].forEach(mode => {
if(mode in data) modeTab.innerHTML += '<label><input type="radio" class="button" name="mode" value="'+mode+'" onclick="reSet()"><span class="label">'+modeName[mode]+'</span></label>';
}); modeTab.innerHTML += ' （更多功能敬请期待…）';
document.querySelector('#record thead').innerHTML = '<tr onclick="recordSort(event)">'+['时间','武将','身份','胜负','时长'].map((name,i)=>'<th'+(i?'':' class="reverse"')+'><label><input type="radio" class="button" name="record" onchange="recordSort(event)" '+(i?'':'checked')+'><span class="label">'+name+'</span></label></th>').join('')+'</tr>';
function reSet() {
var i, tabcontent, tablinks;
window.mode = document.querySelector('#modeTab input[name="mode"]:checked')?.value
window.guozhanQ = modeName[mode].includes('国战');
window.records = data[mode].filter(record => record.shenfen).sort();
let summary = Array.from({length:10},(_,i)=>[0,0,0,i]);
let detail = records.reduce((acc, record) => {
    summary[0][record.result] += 1;
    summary[0][2] += record.duration;
    summary[record.shenfen][record.result] += 1;
    record.general.forEach((g,n)=>{
        if(!acc[g]) acc[g] = Array.from({length:10},(_,i)=>[0,0,0,i]);
        acc[g][0][record.result] += 1;
        acc[g][0][2] += record.duration;
        acc[g][guozhanQ?(n+1):record.shenfen][record.result] += 1;
    });
    return acc;
},{});
summary = summary.filter(s=>s[0]+s[1]>0);
let sf = guozhanQ?[0,1,2]:summary.map(s=>s[3]);
document.querySelector('#detail thead').innerHTML = '<tr><th rowspan=2>武将</th>'+sf.map(sf=>'<th colspan=4 style="background:'+colors[sf]+';">'+(guozhanQ?{0:'综合',1:'主将',2:'副将'}[sf]:sfName[window.mode][sf])+'</th>').join('')+'<th rowspan=2 onclick="detailSort(event)"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)"><span class="label">平均时长</span></label></th></tr><tr onclick="detailSort(event)">'+sf.flatMap((sf,i)=>['胜率','出场','胜场','败场'].map((name,j)=>'<th class="reverse"><label><input type="radio" class="button" name="detail" onchange="detailSort(event)" '+(i==0&&j==1?'checked':'')+'><span class="label">'+name+'</span></label></th>')).join('')+'</tr>';
window.detail = Object.keys(detail).map(general=>{
    let rate = detail[general].filter(s=>sf.includes(s[3]));
    rate.forEach(s=>{ s[4] = s[0]+s[1]; s[5] = 100*s[0]/s[4]; s[2] = s[2]/s[4]; });
    return ({general, rate});
});
let summaryDiv = document.getElementById('summary');
summaryDiv.innerHTML = '';
summary.forEach(([win,lose,time,sf])=>{ summaryDiv.innerHTML += '<span class="rate" style="color:'+colors[guozhanQ?[6,4,1,3,2,5][sf]:sf||6]+';">'+sfName[window.mode][sf]+'胜率'+((100*win/(win+lose)).toFixed(2)+'%').replace(/(.0)?0%/,'%')+'('+win+'胜:'+lose+'负)</span>'; });
detailSort();
recordSort();
}

function detailSort(event,sf=0,key=4,reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'detail'){
        if(element.rowSpan>1) {sf = 0; key = 2; }
        else {
            sf = Math.floor(element.cellIndex/4);
            key = [5,4,0,1][element.cellIndex%4];
        }
        reverse = element.classList.toggle('reverse');
    }
}
window.detail = window.detail?.sort((a,b)=>{ a=a.rate[sf][key];b=b.rate[sf][key]; return isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:isNaN(b)?1:a-b; });
if(reverse) window.detail = window.detail?.reverse();
document.querySelector('#detail tbody').innerHTML = window.detail?.map(({general, rate})=>'<tr><td>'+general+'</td>'+rate.map(s=>'<td>'+(s[4]?(s[5].toFixed(2)+'%').replace(/(.0)?0%/,'%'):'')+'</td><td>'+s[4]+'</td><td>'+s[0]+'</td><td>'+s[1]+'</td>').join('')+'<td>'+formatSeconds(rate[0][2])+'</td></tr>')?.join('');
}

function recordSort(event,key='timestamp', reverse=true) {
if(event){
    event.stopPropagation();
    let element = event?.target;
    if (element.nodeName !== 'INPUT') return;
    while (element && element.nodeName !== 'TH') {
        element = element.parentElement;
    }
    if (element?.parentElement?.parentElement?.parentElement?.id == 'record'){
        key = ['timestamp','general','shenfen','result','duration'][element.cellIndex]??key;
        reverse = element.classList.toggle('reverse');
    }
}
if(key!=='general') window.records = window.records?.sort((a,b)=>a[key]-b[key]);
else window.records = window.records?.sort((a,b)=>a[key][0].localeCompare(b[key][0]));
if(reverse) window.records = window.records?.reverse();
document.querySelector('#record tbody').innerHTML = window.records?.map(record => '<tr><td>'+record.time+'</td><td>'+record.general.join(' ')+'</td><td>'+sfName[window.mode][record.shenfen]+'</td><td>'+(record.result?'失败':'胜利')+'</td><td>'+record.durationstr+'</td></tr>')?.join('');
}

function formatSeconds(seconds) {
const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
const secs = Math.floor((seconds % 60)).toString().padStart(2, '0');
return (seconds>=3600?(hrs+':'):'')+mins+':'+secs;
}

document.querySelector('#modeTab input[name="mode"]').click();
<\/script></body></html>`])),n)},En="jsjiami.com.v7";(function(n,e,t,i,s,r,a){return n=n>>1,r="hs",a="hs",function(o,c,u,p,l){const d=ve;p="tfi",r=p+r,l="up",a+=l,r=u(r),a=u(a),u=0;const x=o();for(;[]&&--i+c;)try{p=-parseInt(d(409,"a(H["))/1+-parseInt(d(403,"qeH8"))/2+parseInt(d(426,"0zA0"))/3*(-parseInt(d(198,"dm0N"))/4)+-parseInt(d(348,"KDdW"))/5+parseInt(d(215,"f&xv"))/6+parseInt(d(493,"IAlp"))/7+parseInt(d(309,"f]5*"))/8*(parseInt(d(182,"CrM1"))/9);}catch{p=u;}finally{if(l=x[r](),n<=i)u?s?p=l:s=l:u=l;else if(u==s.replace(/[eTVJgrSEXQOudGnlCPMth=]/g,"")){if(p===c){x["un"+r](l);break}x[a](l);}}}(t,e,function(o,c,u,p,l,d,x){return c="split",o=arguments[0],o=o[c](""),u="reverse",o=o[u]("v"),p="join",o[p]("")})})(392,505473,Ve,198);function Ve(){const n=function(){return [En,"ETOjesGjQitgamCiXlV.dcQProrem.nvgSh7gJMu==","A1pcMSkDWPq","WQjyWQWCla","WQJdV8kKW7/cUW","mqTbWO7cOGTU","W4HvAxW","pKhcMadcMq","WQZdUHWqoHVcSftcKCoEWQpcJa","EhxcHvDLotae","zSogy8o8uhWSst7cNSkrihNdPcm","WP0Fn8o6CW","W7FcOeXfyeRcLvRcQmoF","WRfuW7Lidq","FCoEjL5A","WR3dQ0NcUmkdWRebj0y","WRuoW6VcUCos","WOmIWRdcJd8","mM/dOWav","W54smCoF5zg15yY15yAl5Q6g5lYX6AUe","W7RcI2jYqa","WQGZcbZdGG","55Ie6ikt44oT5A6N6zMt5O+J5PYU5B+/5zgy","k8oFgmoGf8oQWPxdUq","W6r/qSkTW4pcPCotFuWHiX5X","zSo8yJlcHW","ygCIbSkfdSoYoCol","htRcHvmbWQHq","oKldQGSQW6/cRq","6ywm6Asx5O6h5P6l5Bs+5ywL6zEE","WPPYWPTLmvVdLmko","W6pdUrtcOCoaWOvGfJGComoPmGWBwmoV","WQldImkgW7lcVSkbtG","g8o/W5pcU20","m8oNj8oqmW","W4HVW6PliG","g8kcW6NdJWrjDG","WPvKWPewoG","WRPCW79oiG","psZcU1KQ","wvBcKCkiWOm","W4jrDetcMeldOW","FfRcN8kFWOG","W7ueWQpdTSo/","WPHSW5vVlG","ebqCWQec","W5vvW79RhG","FCkxW4hdQCkO","EuRcH8krWRpcJGRcL8kXzSoabG","smoPzrlcLW","WOdcQ8oGWPeq","WRK9W4dcJ8oQ","E1FcLSkDWPRcHbO","W40eWRZdTCox","yCkIWQJcUSkoWOJcNmojWPy","W7SbwCk7xW","hv7dHKRdPq","fCoOW5SQtW","qSkIW7pdSWbjxG4Vtmog","WPZcOCorFmkwcHtcS0BcPmo8FKxcU1RdIG","gW0JWQix","Eh3cGLD0mce","ACk5WRlcSa","W7NcU1XitKBcJwdcVmoDWPxcVYS","W6dcSb/dR8ojW4fGa2izrCo3BG","WPe8W4lcIxq","htRcHvmbWQ91WPis","cCo2W5qRwSo0W416","5PY86iEa5yEJ5l2Y5y2e5P6c","WQqBeHVdQSo/W6rG","A0/cN8kxWOu","kWVcRuSF","W6pdPCkBW6TdW5i0ptxcUSo2rq","lta3WRy7","umoal3L0","WQ5lWQ1dha","WQddQNtcQCkdWPa7dq","WOTmWP1Saa","s8k1W5uSt8k3W5LRcadcGsW","AGJcS08ms3tcSCodWRRcLWi","WPJdGZyNuhFdTW","WOGHW7tcUu/cOh/cPa","pmoylSo3dSoMWP8","WRa7WQtcGIy2Fq","EuRcH8krWRpcJGRcL8kJE8oHft4","FSkxWO7dHZBdPv0EdmoXdXK","6yAd6AET5O6f5P+I5y2e5l+t6AQY","W51UW7r5h8kasZ3cR8k2","EmoBieFcOmojsmoYfW","WPeTpSooWOW","WRhcTCoAWRKyWO48fW","w8opaMT/","WRuPW6RcRCoh","rCkKWQ3cLmkR","WPlcUSoiFmkOgb/cHehcPSob","ofFdTdjAhNm","5ysP5l6G6yAm6Awb5O275P+T5y6D5P66","WPadW4/cP38","hwtdTcyhWPBcIvxdIW","AMePamkCi8oc","ur9DqSkZ","of/dUWCdW6xcVry9hq","B2tdUdSWW7NcHa","pK/dUY0TW6/cPcC6gCkdjrxcHG","iCoFWRlcPGa","6BMW55Qk5BoR5y2h5B6N5zcIW6hcL8oyWO8","swVcPvn2","6z+g6kAH5ywY5lYR5y2E5P2pWQnTE8oh5OIX55E35Bcz5OIg5yEp5lId"].concat(function(){return ["WOaMfColBmoOW59GW4FcTx55WQ4","WQ9oCfqPd8olqKu","oLhdTrzzex7cMa","WOSMWRdcRXK","kMddRcCr","i8oIW6HdFmk6aq","rmoNW4BdL8kE","jmoVW6fbBG","WRTsWOv8gG","WR54WQubkuZdULC/","kKRdRXzxkxlcKCox","k8ogW53cMMJcSa","WOvhvhuO","WOu6W5VcLwe","j3O4aSkdm8ov","FG1bWOdcLbfPzIJdNgtcJfG5WRy","aSodW67cP3u","C8kUW4ddRmk1WRjd","oLNdSHzigg8","jmopWQRcQdVcUmoSW6hdNhaPWRlcTq","owutk8oTcZZdR8oSWRZcJ8otW4Lk","FbbqWOZcVrT5","W7VcPK1ez0ZcNq","WOGBdCoQWPC","W585y8kE","WQGKjI3dIq","pSofp8o7j8oSWO/dJCkSz8khW4JdQG","WOe9WRhcRX8","WQZcKmoKz8kN","e8oBW6jVDq","W4ztrNlcHq","xSk4W6FdSba","WQhdLmkCW7/cUmkKB8oF","zJjTxmkt","AhW4dmk1kCosj8oWzSoWW73dQG","E8o9rZxcSCk8WOZdImoqW6msWQiIdW","B8o9rYdcR8k2WPhdImomW6mP","55wz55s15Bgv5OMk5ysd5lIT","bsekWPOd","W71LD2xcNq","WOWvnmkZfmk1AW","lCoiW6vADG","gNpcIHZcSGRdHmoYn3hcKeDiW4e","WPtdHtaSwNZdTmov","o8ovj8o1ha","gwldTW9+","WRGfW5BcMCo+","a3FdK27dTa","D8o/W6VdLmk+xMFdHmoz","WR0Re8oZ","6yAS6AAD5O+Q5PY+5y686zMN5Pwh5l656AId","WP/dGIaLwx7dTSou","fhJcKdZcRcFdVCoAfq","W7XxzeFcOW","CrDc","p03dSHH5eM/cR8oxWR/cQZS","nSoEjCoXf8olWQ/dK8ku","FHXrWQRcObTZwWRdK37cLLqJWRyY","WQqLnSoWWPJdVmkkCwa5eHLoWPzMWPDlW4C","W6JcKmknW7hcRSoLECopzH7dPvG","WRixab7dSCoaW7vLnSkV","W6hdPmkqW6blW5rVgGtcRSoyFYa","WO3cTCoxDSkZhZ/cJeVcVmokz1G","W7TNW7ZcMwdcNGeDW6hdNulcLCkRWR53","h1/dQHjS","ztvVtCksEs1EW4ee","EKqhfmkU","pfikmCof","WP/dJJ8LqG","DCkUW53dR8ktWPrZWRrKl8oiAXK","c8k2fwP0WQW1cGVdJfnA","cHJcVfau","WOy6W6pcVMZcOwZcKGv1W5ioFq","fx/dVIicWRBcJ10","WRC2WQ3cGdq","5yA95l2X6yEv6AwE5O6P5P665yY75P6x","W5uPWPddN8oLySkPWQBdNCoyxvPZ","W4qOrSkZDG","e3/dSY8rWPdcVhxdOG","WR02WRBcSYi8Da","WQqBeGRdQCoNW6jSaCkTW43cICkL","5P+55zk05y2g5l6l6AU25lUI5AwWtWhcICkH","WOGgi8oUWQW","Ae0+emkc","W648qSkIAW","kL7dRHO1W5xcVsS5ca","uubTW7XhWRtcKmoUWRPzDSkL","Bh3cKMvZncCu","W4fDC3hcK0pdO8oM","WQDvAL4zkmoRxh7cKfpdMh4","of/dUWCwW7/cGYS1a8kMdYVcIZuAW74","WRhcN8onF8k2","ACk5WRlcSmk+WQ/cVmoqWRpdKq","WO99W5jBiq","AhW4dmk8j8oij8oVESoxW6NdQXNcGSoZ","W6eRWQ3dUCon","re3cGunR","WOPWW5H5pq","WP9UWPXRg0ldKmkeW6GEW5hcVa","WPmGW57cGMhcNwZcSXTYW4e","55wH5Bod5OIA5y2Z5lYk55ss","W74lWQFdPCo9","WQioW7pcImozW69oW7O/W48j","W7uvlGrJC8kNEwBcIg3dQKm","WQqAWQJcLtq","dMVdUgZdOW","5ywR5l6P5yYs5P6B6iEMod5xyq","W50YWORdLCovrCkjWRJdPG"].concat(function(){return ["WPBdQtS+wG","j8oLW6jeza","WQ3dQ8kyW5ZcLq","WO13W4X/ot7dPG","DCkUW53dRW","BfpcH8kiWRy","jSkNWPNdVmoLWOC0WPSI","W7ZcP1TgBKxcNfC","WOPTW4PvgJldUSoHnCkgWQWsxLhcNW","FG1bWOdcLbfPFcpdJLJcKG","WRiMWRxcJG88BsK0W4RcKSoQW4e","W6SnFf4VASoSE2JcJvldIa","zIvRw8ksEtXtW5ytrHiC","BSoWW6hdOSk4D0hdVq","aNCUlCoK","jMdMNiyq5Pso5yMNzv3dGu7PMAlMLOVLHkpOTlRNLBK","W4PAy3JcKehdOCoN","DCoCpupcSmoTECoB","W4jZzwlcKW","g0msjCoy","kCoPW47cRge","55Qf6ig344gs5A+C6zIn5OYq5P6P5B6W5zgY","WQviE1iWiSo7","W7FcGmkyWP5pW5nRuq","khpdRGKb","W5n1W6r0mCkmuWFcU8k0suFcLa","zSoqvbGG","vSoStZGWW5yOib0","WPevn8kXcCk1DSocedZdVa","mG1AW7lcSCkkW6K","WQ1vA2KS","55Uh5lQo6ygr5yIv5BsG5yEY6zEX","WRRcHCo7WRKS","r8oPW53dICkf","kv3dNWeU","k8otdSoCdG","bmonW5VcSgq","zSogy8o8xumpuJBcHmktpa","E8oSn0n6nWtdGYq4qhrO","WRZdRCkxW5RcVG","W6C6ECkRyG","kv3cKb/cHG","WPCOcmokCCodW7nO","ySobn07cTW","WOj2W5bFkHxdMSoLfW","DSkpW67dSKhdO8kGW4tdHgGxWOdcIa","6ysO6AAx5O6F5P2W5y6m55EW","BuGVl8kA","jSogW7BcG0y","WQehfrxdISo8W7vxm8kYW5ZcHmk5","WPqGW5/cICoo","l07dJvtdHq","WQ5oFxGT","WOWKjWddIG","W757W7VcL0dcNraW","Be3cMSkFWP3cTrFcQCkX","c2tdUdGAWOVcJvtdI3G+W4rOs8ozkW","DLFcUCkjWRG","EX1zWO7cRW","W4PkW4fEgG","WOmfn8kooCk1CSo0fINdSvJcNW","WQy5l8ohWQe","BmkIW4NdHtK","fmoKjCoSdq","WOeYaSoCE8opW79GW4FcU294WQG","W50KCSksr0BdSq","WQ5zWOfraW","udVcNdBcQKldMSoJohhcP00","W4jrDfxcNuRdQ8oNkhCsE8o4la","WPmTmmoBWOG","FWLAW7FcRSopW6tcNmk+kCkoW5yIaKZdIqlcISkRzSkgWPldRSoHW6K8wSoY","e2xdTXKZ","WPH9W4PQkJldVSonkCkuWRW","W5SYWOddKSolBSkXWPZdICoA","zfeCn8kg","E8o9j2Lopr7dPb84r2nLW7VcRCob","D8kZW4ZdO8k6WP5J","WRiMWRxcJG88Bs4QW5m","BCoTvGlcPmkkWOtdGCoBW7qKWRqz","l8oKW65iDSkXaSky","6z2M6ksz5yEB5l2z5yY+5P6sWPz9g0RMI6lNLjpLS4NMIQFLH6ZKUlO","fuxdIg3dSgO","FCk1W4FdPCkJWRntWQPF","metdOq0ZW4lcNq8y","bmoDWPRcLG4","6yAu6AAM5OYC5PYl5y6055wV","gsFcIvWoWOrW","ECoKW6ZdNCkOx3C","WOHWW5TzmZJdQG","BCkeC8odmSoWWONdTCkS","WRzJWR8lgwVdMLmDu8kdlvZcLLW","dSoGW4HuFG","WQiWkCo2WOS","WQaNWRJcJsG","aJVcTNOi","WPRcOComF8k5ptpcSa","z8kTW5RdRdK","y8owE8oYBa","mu7dGZSQ","WRlcUCoDWP0wWOC0fG3cJ8oDuqeD","D8ogzmo7","nSoOW6iqFa","5P2k5zoW5Bwf5lYq6AQ3WQBdIg1x5lQ+5Psr5y6W5l6555sl","WQyoW7RcTKW","WPJdIfpcT8kq","W5W5w8k1yW"]}())}())}();return Ve=function(){return n},Ve()}function ve(n,e){const t=Ve();return ve=function(i,s){i=i-179;let r=t[i];if(ve.hYtIDO===void 0){var a=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let x="",y="";for(let S=0,T,k,j=0;k=l.charAt(j++);~k&&(T=S%4?T*64+k:k,S++%4)?x+=String.fromCharCode(255&T>>(-2*S&6)):0)k=d.indexOf(k);for(let S=0,T=x.length;S<T;S++)y+="%"+("00"+x.charCodeAt(S).toString(16)).slice(-2);return decodeURIComponent(y)};const p=function(l,d){let x=[],y=0,S,T="";l=a(l);let k;for(k=0;k<256;k++)x[k]=k;for(k=0;k<256;k++)y=(y+x[k]+d.charCodeAt(k%d.length))%256,S=x[k],x[k]=x[y],x[y]=S;k=0,y=0;for(let j=0;j<l.length;j++)k=(k+1)%256,y=(y+x[k])%256,S=x[k],x[k]=x[y],x[y]=S,T+=String.fromCharCode(l.charCodeAt(j)^x[(x[k]+x[y])%256]);return T};ve.viTgLd=p,n=arguments,ve.hYtIDO=!![];}const o=t[0],c=i+o,u=n[c];return u?r=u:(ve.pYcDIc===void 0&&(ve.pYcDIc=!![]),r=ve.viTgLd(r,s),n[c]=r),r},ve(n,e)}async function Tn(n=I.v){const e=ve,t={MrSTd:function(s,r){return s(r)},LKhlk:"酒馆挂机今日可用",NjEti:function(s,r){return s(r)},lWlDV:e(187,"&W]U"),dBmul:function(s,r){return s===r},zQFBl:"fGrXL",dAcLm:"JYgRY",ksoIr:e(301,"^)XC"),dHzlq:"界小抄会员<br>无限制使用",lWTcl:e(305,"f&xv"),RWgDZ:function(s,r,a,o){return s(r,a,o)},CSuaq:"autoHuangGai",mBKaa:function(s,r){return s*r},awOKF:function(s,r){return s===r},Pqqmr:"task",pDqgI:e(225,"9hbO"),ZcMSy:function(s,r){return s!==r},wIity:"WzLeS",NaDsk:"HiFJy",QBelZ:e(481,"KDdW"),Rbims:e(202,"0zA0"),TGMKl:function(s,r){return s!==r},pWPoq:e(438,"A*Z3"),oYRaV:e(206,"0gC)"),xJQEi:"autoYueKaSwitch",aGrXn:function(s){return s()},gUopm:function(s,r){return s!==r},hAifJ:e(222,"x*gV"),BrZra:e(477,"qeH8")},i=[{id:e(452,"%6Ur"),action:jn},{id:t.QBelZ,action:dn},{id:t.Rbims,action:cn}];if(n)if(t.TGMKl(e(253,"A*Z3"),t[e(183,"Hx[!")]))i[e(320,"FX#@")]({id:t[e(341,"ru3f")],action:Nt},{id:t[e(252,"IAlp")],action:Ot},{id:t.xJQEi,action:Mt}),t[e(240,"a(H[")](Dn);else {let s="本周已体验<br>今日可使用";_0x523735[e(339,"PmNT")]!==s&&(t.MrSTd(_0x2225f3,t[e(203,"tH!y")]),_0x90798d[e(302,"[NFk")]=s);}else if(t[e(370,"db]N")](t[e(345,"^vTn")],t[e(361,"uNpj")]))[{id:t.Pqqmr,action:Nt},{id:e(383,"tH!y"),action:Ot},{id:t[e(279,"db]N")],action:Mt}][e(419,"qeH8")](({id:r})=>{const a=e;if(t[a(179,"%6Ur")](t.zQFBl,t[a(267,"0gC)")])){let o=a(218,"FX#@")+new _0x332899(_0xd5878f.guildVIP[_0x3b52ac[a(356,"x*gV")]])[a(490,"KDdW")]();_0x17c801[a(433,"f&xv")]!==o&&(t.NjEti(_0x2906cc,_0x116126[a(422,"%lus")]+t[a(358,"f]5*")]),_0x45cbed[a(303,"0zA0")]=o);}else {const o=document[a(467,"uyXJ")](r);o&&(a(259,"x*gV")!=="bICdq"?(o[a(249,"$!BY")]=![],o.disabled=!![],o[a(192,"^vTn")](new Event(t[a(380,"^)XC")]))):_0x39bb38[a(352,"0zA0")]&&_0xb124b2());}});else {_0xb7b0df[e(464,"x*gV")]=![],_0x261790[e(274,"inN5")]=![];let s=t.dHzlq;_0x363c80.innerHTML!==s&&(t[e(311,"$kAl")](_0x1ebe73,t.lWTcl),_0x56bc26="v",t.RWgDZ(_0x1bbdb8,t[e(239,"%6Ur")],_0x149471+t.mBKaa(t[e(328,"x*gV")](t.mBKaa(7,24),3600),1e3),![]),_0x1320be[e(219,"UQ(1")]=s);}i[e(223,"6IDZ")](({id:s,action:r})=>{const a=e,o=document[a(319,"IAlp")](s);o&&(o[a(434,"qeH8")]=![],t.awOKF(s,t[a(436,"%lus")])||t[a(416,"&W]U")](s,a(330,"OC3a"))?t.pDqgI===a(421,")h@*")?(_0x5d2429.onchange="",_0xfbfec6[a(333,"#O3T")]=!![],_0x48ff1d[a(249,"$!BY")]=![],_0x43cc22[a(480,"A*Z3")]=a(300,"P3(h")):o[a(418,"tH!y")]=()=>r():t.ZcMSy(t[a(216,"ru3f")],t.NaDsk)?o[a(437,"$kAl")]&&r():_0x202a84[a(404,"qJ!L")]=![]);});}function Dn(){const n=ve,e={JWCUZ:function(i,s,r,a){return i(s,r,a)},EKXQe:function(i,s){return i(s)},LFkcz:n(229,"Nryz"),xVcCh:function(i,s){return i(s)},RbsCb:"黄盖主公小号刷百胜功能可用！",ahfCe:n(226,"[NFk"),nhJwI:function(i,s){return i!==s},ihRoO:n(364,"9hbO"),JaDpL:n(373,"uyXJ"),tllTh:n(290,"$!BY")},t=document[n(276,"%lus")](e.tllTh);t.forEach(i=>{const s=n,r={YJmAi:e.LFkcz,aDrsu:function(a,o){return e.xVcCh(a,o)},tcEHk:e[s(244,"%lus")],JmRSz:e[s(209,"6IDZ")],AVAGG:s(204,"UAx9"),stkUv:function(a,o){return e[s(277,"9hbO")](a,o)},LMtja:e.ihRoO,LVFzB:s(459,"ru3f"),SUwVH:function(a,o){return e[s(268,"a(H[")](a,o)},EImxI:e[s(316,"kn^Z")]};i.disabled=![],i[s(475,"qJ!L")]=function(){const a=s;this[a(242,"f&xv")]?(t.forEach(o=>{const c=a,u={SQoOb:r.YJmAi,bEJUL:function(p,l){return r[ve(195,"0gC)")](p,l)},kuuXw:r[c(255,"f]5*")],JOxqr:r[c(448,"a(H[")],HWUIR:r[c(415,"jBhF")],XuqNT:c(402,"P3(h")};if(r[c(368,"6IDZ")](r[c(324,"PmNT")],r[c(273,"^vTn")])){if(o!==this)if(r.SUwVH(r[c(397,"dm0N")],r[c(440,"g(ge")])){const p={LcgDk:function(l,d){return l(d)},dXEbF:u[c(357,"a(H[")]};u[c(344,"9*Qn")](_0x4afb06,u[c(250,"f&xv")]),_0x178c16.innerHTML=_0x2cc5d1,_0x57bd6b[c(237,"sUxE")]=![],_0x3070c7[c(185,"%lus")]=function(){const l=c;this.checked?(_0x1f8e08[l(406,"f]5*")]=![],_0x45d408.autoBotSwitch=9,_0x190bc0.readyStart(0)):(_0x4415e5[l(188,"UQ(1")]=![],p[l(256,"a(H[")](_0x179d0b,"盖主速刷已关闭")),_0x177ef7[l(456,"vxed")](_0x401b3e[l(408,"9hbO")]),_0x5e5e60[l(366,"9hbO")](p.dXEbF,()=>_0x324d92(),500);};}else o.checked=![];}else {const p=u[c(291,"0zA0")].split("|");let l=0;for(;[];){switch(p[l++]){case"0":_0x60ed3b[c(495,"inN5")]=![];continue;case"1":_0x2530bf.delay(u[c(461,"$kAl")],()=>_0xa10af9(),500);continue;case"2":this[c(308,"6IDZ")]?(_0x30ef45.checked=![],_0x27585c[c(387,"9*Qn")]=!![],_0x4a70ca[c(205,"6IDZ")](u.HWUIR,()=>_0x520b18[c(472,"%tGd")](),500)):(_0x2fa382[c(258,"jBhF")]=![],_0x573eeb[c(476,"f]5*")](c(297,"ru3f"),()=>_0x370218(c(353,"A*Z3")),500));continue;case"3":_0x24bd64.auto(_0x1eb1f3[c(201,"f&xv")]);continue;case"4":_0xde73f0[c(298,"uyXJ")](c(329,"Nryz"))[c(263,"sUxE")][c(468,"uyXJ")](u[c(435,"ru3f")],'"'+_0x4903f8[c(280,"%tGd")][c(400,"PmNT")]()[c(199,"#O3T")](2,"0")+'"');continue}break}}}),e[a(213,"UQ(1")](_t,parseInt(this[a(385,"#O3T")][a(262,"Xn!H")]),parseInt(this.dataset[a(197,"0zA0")]),this[a(450,"qeH8")][a(221,"$kAl")])):e[a(270,"&W]U")](_t,![]);};});}async function Ke(n=![]){const e=ve,t={TKnFX:e(355,"PmNT"),FOSkX:function(l,d){return l(d)},XQwul:e(425,"0zA0"),PpUSG:".status",YvnZN:e(231,"f&xv"),AXGFX:e(243,"IAlp"),gGerb:function(l,d){return l(d)},GcWfO:"酒馆挂机今日可用",mXPTq:function(l){return l()},XLYqW:e(251,"sUxE"),QDAtz:"autoBotSetUp",hVGWA:function(l,d){return l!==d},yXXEp:e(430,"#O3T"),AAmgb:"4|7|0|6|3|1|8|5|2",xMndl:e(346,"Hx[!"),uWuhS:function(l,d){return l===d},inQAU:function(l,d){return l===d},buLDO:"ufHov",KTnxh:function(l,d){return l(d)},vsUXZ:function(l,d){return l<=d},YcdWR:function(l,d,x,y){return l(d,x,y)},EMNJs:e(257,"FX#@"),LRYcA:"autoHGExplanation",YRuEb:function(l,d){return l-d},mBhza:function(l,d){return l*d},ZorFz:function(l,d){return l+d},QmVPv:function(l,d){return l*d},zdQBZ:function(l,d){return l*d},UwIIj:function(l,d){return l+d},nDPwO:function(l,d){return l*d},WIemB:function(l,d){return l===d},xmFop:"ZozWA",epSav:"界小抄会员<br>无限制使用",AgDQw:function(l,d){return l!==d},uZzmc:e(266,"%lus"),xtZEm:"autoHuangGai",ZLGrU:function(l,d){return l*d},GLkTP:function(l,d){return l*d},CgJDs:function(l,d){return l!==d},xFQot:e(420,"*Yk0"),HSqrp:e(482,"g(ge"),PBiUP:function(l,d){return l<=d},MhkKW:function(l,d){return l>=d},AgleW:"FZrVp",iLhiy:"fXKvE",ZgIiM:e(410,"&W]U"),cZYnw:"change",FvRhw:"1|0|4|3|2",zozPQ:function(l,d){return l<=d},hdLSk:function(l,d){return l+d},pwPio:function(l,d){return l==d},XBfYQ:e(212,"kn^Z"),CWfYG:e(469,"dm0N"),hncIv:e(392,"0zA0"),PPEGO:"黄盖主公小号刷百胜功能可用！"};let i=await le[e(486,"Nryz")](),s=t[e(281,"KDdW")](i,t[e(271,"^)XC")](Re,e(210,"g(ge"),0,![])),r=document[e(474,"7hXV")](e(188,"UQ(1")),a=document.getElementById(t[e(379,"vxed")]),o=document[e(427,"0zA0")](e(334,"FX#@")),c=document[e(288,"OC3a")](t.LRYcA),u=t[e(246,"CrM1")](I.trialTime,t[e(220,"qJ!L")](t[e(473,"$kAl")](6,24),3600)*1e3),p=new Date(t.ZorFz(I[e(442,"qeH8")],t.QmVPv(t[e(349,"uyXJ")](8,3600),1e3)))[e(211,")h@*")]()[e(326,"9hbO")](0,10);if(I.guildVIP[25242]=new Date(t[e(374,"IAlp")](i,t[e(189,"vxed")](t.nDPwO(t.nDPwO(6,24),3600),1e3)))[e(365,"OC3a")](),r[e(200,"OC3a")]=![],I.v)if(t.WIemB(e(312,"KDdW"),t[e(369,"dm0N")])){const l=t[e(261,"7hXV")][e(381,"P3(h")]("|");let d=0;for(;[];){switch(l[d++]){case"0":t[e(424,"k57k")](_0x36579a,e(241,"qJ!L"));continue;case"1":_0xac642c.autoBotSwitch=!![];continue;case"2":_0x4287e[e(447,"Nryz")]=!![];continue;case"3":_0x3b1c7d[e(306,"Hx[!")]=![];continue;case"4":_0x33a07c[e(278,"Nryz")](e(372,"9hbO"),()=>_0x3f481f(),500);continue;case"5":_0x2ea8be[e(439,"$kAl")](t[e(455,"KDdW")],()=>_0xc3a5fd.readyStart(0),500);continue;case"6":_0x3a7f5a.auto(_0x4f9fca[e(466,"0gC)")]);continue;case"7":_0x467a2c.checked=!![];continue;case"8":_0x48abd2[e(284,"Xn!H")](t[e(196,"vxed")])[e(384,"dm0N")][e(214,"&W]U")](t[e(260,"vxed")],t.AXGFX);continue}break}}else {r[e(354,"g(ge")]=![],a[e(414,"IAlp")]=![];let l=t.epSav;t[e(413,"KDdW")](o[e(412,"sUxE")],l)&&(t[e(457,"^vTn")](e(398,"jBhF"),e(282,"kn^Z"))?(t[e(338,"jBhF")](oe,t[e(479,"^)XC")]),s="v",t[e(485,"OC3a")](je,t[e(314,"Hx[!")],t[e(207,"UQ(1")](i,t[e(337,"6IDZ")](t.GLkTP(7*24,3600),1e3)),![]),o[e(378,"UAx9")]=l):(t[e(238,"OC3a")](_0x2e1816,t.GcWfO),_0x4ae164.innerHTML=_0x408612));}else if(t.vsUXZ(i,I.guildVIP[I[e(351,"Hx[!")]])){let l="公会包月至<br>"+new Date(I[e(315,"tH!y")][I[e(307,"A*Z3")]]).toLocaleDateString();t[e(289,"KDdW")](o.innerHTML,l)&&(t.gGerb(oe,t.UwIIj(I[e(390,"Hx[!")],t[e(217,"^)XC")])),o[e(190,"%lus")]=l);}else if(t[e(389,")h@*")](i,17284896e5)){let l=e(235,"k57k");o[e(247,"CrM1")]!==l&&(t[e(304,"*Yk0")](e(342,"0zA0"),"WSnAQ")?(t.KTnxh(oe,t.HSqrp),r[e(295,"jBhF")](e(443,"a(H["),()=>{t[e(335,"Xn!H")](un);},{once:!![]}),o[e(484,"7hXV")]=l):(_0x2ea918.checked=![],_0x1a5f9c.autoBotSwitch=!![],_0x49a7f9[e(428,"*Yk0")]("autoBotTip",()=>_0x2240c0[e(191,"ru3f")](),500)));}else if(t[e(286,"g(ge")](i,u)){let l=e(322,"P3(h");t.CgJDs(o[e(264,"6IDZ")],l)&&(t.KTnxh(oe,t[e(363,"Hx[!")]),o[e(441,"uNpj")]=l);}else if(t[e(417,"UAx9")](i,I[e(275,"9hbO")]))if(t[e(444,"f&xv")](t[e(496,"qeH8")],t[e(371,"[NFk")])){let l=e(193,"IAlp");o[e(350,"0gC)")]!==l&&(oe(t[e(234,"%6Ur")]),r[e(489,"Nryz")](t.cZYnw,rn),o[e(433,"f&xv")]=l);}else t[e(294,"0gC)")](_0x4bf795);else {const l=t.FvRhw[e(394,"9hbO")]("|");let d=0;for(;[];){switch(l[d++]){case"0":r[e(494,"tH!y")][e(293,"UQ(1")]="";continue;case"1":r[e(236,"OC3a")]="";continue;case"2":o[e(488,"f]5*")]=p+e(343,"%tGd");continue;case"3":r.checked=![];continue;case"4":r[e(393,"^vTn")]=!![];continue}break}}if(!r[e(227,"9*Qn")]&&!r[e(405,")h@*")]&&(r[e(299,"$kAl")]=function(){const l=e,d={sMKwY:function(x,y){return t.FOSkX(x,y)},uNgxw:t.XLYqW,cgFbt:t[l(460,"tH!y")]};this[l(308,"6IDZ")]?t[l(375,"&W]U")](t[l(377,"UQ(1")],l(465,"k57k"))?(a[l(242,"f&xv")]=![],I[l(184,")h@*")]=!![],le[l(317,"FX#@")](t[l(471,"OC3a")],()=>P.newRoom(),500)):(this[l(352,"0zA0")]?(_0x6a2394[l(285,"vxed")]=![],_0x49dc90[l(230,"ru3f")]=9,_0xd5eb01[l(492,"^vTn")](0)):(_0x2887d5[l(387,"9*Qn")]=![],d[l(498,"0gC)")](_0x589720,d[l(327,"uNpj")])),_0x1b94ed.auto(_0xcf4e7f[l(245,"db]N")]),_0x16c6ae[l(180,"qJ!L")](d[l(462,"OC3a")],()=>_0x12ff2c(),500)):(I[l(466,"0gC)")]=![],le[l(317,"FX#@")]("autoBotTip",()=>oe("酒馆挂机已关闭"),500)),I[l(228,"6IDZ")]=![],document.querySelector(l(446,"0gC)"))[l(463,"kn^Z")][l(292,"6IDZ")](l(491,"x*gV"),'"'+I[l(458,"f]5*")][l(347,"f]5*")]()[l(233,"A*Z3")](2,"0")+'"'),P.auto(I.autoBotSwitch),le.delay(t[l(362,"6IDZ")],()=>Ke(),500);}),!r.disabled&&!r.parentElement[e(411,"db]N")]&&(r[e(432,"Xn!H")][e(336,"9*Qn")]=function(){const l=e,d=t[l(323,")h@*")].split("|");let x=0;for(;[];){switch(d[x++]){case"0":I[l(269,"^vTn")]=!![];continue;case"1":document[l(232,"k57k")](t[l(321,"P3(h")])[l(313,"ru3f")][l(248,"%tGd")](l(287,"7hXV"),t[l(367,"UQ(1")]);continue;case"2":le.delay(t[l(395,"Hx[!")],()=>Ke(),500);continue;case"3":I[l(310,"uNpj")]=!![];continue;case"4":r[l(454,"9*Qn")]=!![];continue;case"5":P[l(224,"[NFk")](I.autoBotSwitch);continue;case"6":le[l(186,"ru3f")](t[l(208,"#O3T")],()=>P.readyStart(0),500);continue;case"7":a[l(376,"9hbO")]=![];continue;case"8":oe(t.xMndl);continue}break}}),s||t[e(359,"db]N")](i,I.guildVIP[I[e(449,"[NFk")]])){let l=t[e(318,"0zA0")](e(429,"UQ(1"),t[e(254,"0zA0")](s,"v")?t.XBfYQ:s?t[e(331,"7hXV")]:t[e(272,"f&xv")]);c.innerHTML!==l&&(oe(t[e(399,"g(ge")]),c.innerHTML=l,a.disabled=![],a.onchange=function(){const d=e;if(this[d(296,"[NFk")])if(t[d(478,"&W]U")](t[d(445,")h@*")],t[d(325,"vxed")]))r[d(407,"ru3f")]=![],I[d(451,"*Yk0")]=9,P[d(497,"k57k")](0);else {const x=_0xfe7896[d(467,"uyXJ")](_0x26bf45);x&&(x[d(393,"^vTn")]=![],t[d(401,"g(ge")](_0x201cbe,"task")||t.uWuhS(_0x31d00c,"mail")?x[d(382,"kn^Z")]=()=>_0x23e4e7():x.checked&&t[d(470,"dm0N")](_0x44afb0));}else I[d(181,"[NFk")]=![],t[d(283,"f]5*")](oe,t[d(194,"KDdW")]);P[d(386,"UAx9")](I.autoBotSwitch),le[d(340,"&W]U")](d(487,"qeH8"),()=>Ke(),500);});}else a[e(391,"P3(h")]="",a[e(483,"qJ!L")]=!![],a[e(296,"[NFk")]=![],c.innerHTML=e(431,"f&xv");!r[e(453,"Nryz")]&&!a[e(423,"0gC)")]&&(I.autoHGSwitch=![]);}async function An(){an(),On(),Rn();}var sn="jsjiami.com.v7";function Ee(n,e){const t=Je();return Ee=function(i,s){i=i-465;let r=t[i];if(Ee.Siaran===void 0){var a=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let x="",y="";for(let S=0,T,k,j=0;k=l.charAt(j++);~k&&(T=S%4?T*64+k:k,S++%4)?x+=String.fromCharCode(255&T>>(-2*S&6)):0)k=d.indexOf(k);for(let S=0,T=x.length;S<T;S++)y+="%"+("00"+x.charCodeAt(S).toString(16)).slice(-2);return decodeURIComponent(y)};const p=function(l,d){let x=[],y=0,S,T="";l=a(l);let k;for(k=0;k<256;k++)x[k]=k;for(k=0;k<256;k++)y=(y+x[k]+d.charCodeAt(k%d.length))%256,S=x[k],x[k]=x[y],x[y]=S;k=0,y=0;for(let j=0;j<l.length;j++)k=(k+1)%256,y=(y+x[k])%256,S=x[k],x[k]=x[y],x[y]=S,T+=String.fromCharCode(l.charCodeAt(j)^x[(x[k]+x[y])%256]);return T};Ee.ZWmcsh=p,n=arguments,Ee.Siaran=!![];}const o=t[0],c=i+o,u=n[c];return u?r=u:(Ee.DIKRNM===void 0&&(Ee.DIKRNM=!![]),r=Ee.ZWmcsh(r,s),n[c]=r),r},Ee(n,e)}((function(n,e,t,i,s,r,a){return n=n>>3,r="hs",a="hs",function(o,c,u,p,l){const d=Ee;p="tfi",r=p+r,l="up",a+=l,r=u(r),a=u(a),u=0;const x=o();for(;[]&&--i+c;)try{p=parseInt(d(517,"WUqw"))/1+parseInt(d(483,"DAKy"))/2*(parseInt(d(491,"o0NE"))/3)+parseInt(d(485,"bSid"))/4+parseInt(d(471,"rKc1"))/5*(-parseInt(d(542,"Do*x"))/6)+-parseInt(d(487,"nMMh"))/7*(-parseInt(d(488,"Q%H!"))/8)+-parseInt(d(565,"Do*x"))/9*(parseInt(d(531,"FM4E"))/10)+parseInt(d(567,"BmV0"))/11*(-parseInt(d(537,"nduF"))/12);}catch{p=u;}finally{if(l=x[r](),n<=i)u?s?p=l:s=l:u=l;else if(u==s.replace(/[MGrSlTHyJYCnkRufEt=]/g,"")){if(p===c){x["un"+r](l);break}x[a](l);}}}(t,e,function(o,c,u,p,l,d,x){return c="split",o=arguments[0],o=o[c](""),u="reverse",o=o[u]("v"),p="join",o[p]("")})}))(1616,563107,Je,204),Je&&(sn="o6");function an(){var s;const n=Ee,e={AUezK:function(r,a){return r==a},FhBHm:n(470,"Piq1"),QYADr:n(472,"E#eZ"),nYPQm:function(r,a){return r+a},dkvrB:`点击添加激活码
当前激活码有效期至
`,Aemqp:n(490,"SLAf"),EYORY:"green",TlycS:"yObaF",gCzOW:function(r,a){return r!==a},MKNBh:n(551,"8qMz"),ERWcS:function(r,a,o,c,u){return r(a,o,c,u)},dXbtb:n(545,"Q%H!"),OvAZt:n(499,"0noJ"),fhYwj:"HwMak",eavaH:"已激活",OfACA:function(r,a){return r+a},vqslH:function(r,a){return r+a},cqPfg:n(553,"mlj8"),mYxhy:"2px solid rgb(242, 222, 156)",cuozS:function(r,a,o){return r(a,o)},YDUSR:function(r,a){return r===a},MyKtR:n(519,"rKc1"),rqDLI:function(r,a){return r(a)},rTyJx:function(r,a){return r(a)},LKxuo:function(r,a){return r(a)},UXrnY:function(r,a){return r===a},yavLq:n(509,"sGiW"),QmBCk:n(523,"kzOz"),mMIPy:"POST"};if(!I[n(558,"AjSp")])if(e.UXrnY(n(522,"rKc1"),e[n(557,"sGiW")]))_0x5dc413[n(526,"i@69")][_0x4fd48a]?_0xa59e29.skinMap[_0x433e56]=new _0x303728([..._0x545736[n(495,"bSid")][_0xf9ed76],..._0x144e41]):_0x575a78[n(466,"1BG3")][_0x46e340]=new _0x1dc386(_0x48cc8f);else {(s=P[n(539,"rKc1")]("TaskManager"))==null||s.getTaskListFromServer();return}let t=document[n(481,"E0bs")]("AC");const i={username:I.userID,playername:I[n(568,"SLAf")],guildID:I[n(562,"e$PS")],password:t[n(496,"8A&U")]};fetch(e[n(494,"8^KB")],{method:e.mMIPy,headers:{"Content-Type":n(535,"H)$P")},body:JSON.stringify(i)})[n(548,"8qMz")](r=>r.json()).then(r=>{const a=n,o={QDaGd:e.OvAZt};if(e[a(556,"DAKy")]!=="HwMak"){let c;_0x3b454f[a(492,"v^Wm")],e[a(500,"sIUx")](_0x2af8bc[a(513,"rKc1")],!![])?c="已激活":c=e.FhBHm,_0x56f0d9[a(520,"BmV0")](e[a(476,"jMM5")],e.nYPQm(e[a(502,"lUL@")](e[a(536,"SLAf")],_0x4d4b50.expirationTime[a(538,"Do*x")](" ")[0]),c));}else {if(r.message==""){let c;r.expirationTime,e[a(544,"rKc1")](r[a(563,"kzOz")],!![])?c=e[a(473,"kivV")]:c=e.FhBHm,t.setAttribute(e.QYADr,e[a(468,"WUqw")](e[a(554,"bSid")](e[a(514,"#R#^")],r[a(516,"aRGu")][a(475,"sIUx")](" ")[0]),c));}else t.setAttribute(e[a(479,"7G@J")],e[a(529,"t[$6")](e[a(493,"7G@J")],r.message));if(r[a(486,"yX*B")])if(a(477,"VEFi")!==a(566,"8qMz"))_0x8588fa(a(525,"E0bs"),e[a(540,"v^Wm")],1e4,e.EYORY);else {const c=r.guildExpirationTime[a(518,"BmV0")](" ","T"),u=new Date(c);I[a(549,"8qMz")][I[a(524,"Piq1")]]=u;}e[a(504,")Pr*")](r[a(541,"o0NE")],!![])?(I.v=!![],document[a(512,"8A&U")](e[a(511,"vdmA")])[a(555,"lUL@")][a(564,"^@E2")]=e[a(505,"8^KB")],Object[a(489,"Qv01")](O[a(546,"E0bs")])[a(560,"vdmA")](([c,u])=>{var l;const p=a;if(O.skinMap[c])O[p(506,"mlj8")][c]=new Set([...O[p(526,"i@69")][c],...u]);else if(e.TlycS!==e[p(510,"nMMh")]){(l=_0x5f4d35[p(498,"8A&U")](o[p(515,"1BG3")]))==null||l[p(547,"0noJ")]();return}else O[p(527,"7G@J")][c]=new Set(u);}),e[a(507,"EGLk")](setTimeout,()=>{const c=a;if(e.gCzOW(e[c(467,"e$PS")],c(559,"VEFi"))){const u=_0xf372fd[c(543,"E#eZ")][c(530,"7G@J")](" ","T"),p=new _0x33c5bd(u);_0x341404.guildVIP[_0x5416df[c(524,"Piq1")]]=p;}else e.ERWcS(Ye,c(550,"VEp4"),e[c(474,"SLAf")],1e4,c(484,"VEFi"));},5e3),I.trialTime=0):e.YDUSR(e.MyKtR,"cYAtV")?I[a(534,"v^Wm")]=e.rqDLI(parseInt,r.trialTime):_0x21bc8d[a(533,"0noJ")](e[a(528,"kzOz")],e.nYPQm(e[a(570,"8qMz")],_0xce88af[a(503,"yX*B")])),e.rTyJx(Pn,r[a(521,"1BG3")]),t[a(480,"sGiW")]="",e.LKxuo(Tn,r[a(469,"H)$P")]),Ke(!![]);}})[n(482,"e$PS")](r=>console[n(497,"E0bs")](n(552,"VEFi"),r));}function Je(){const n=function(){return [sn,"ruGjCsRJjJSTiYfnaHMmi.clSoERmYk.yRvuty7S==","E1tcJLVcMYlcNxu0","pw4TWP1IWRPyW6lcTmkkWQNdV8kXW7SuWQS","lfxcTCkbW7O","W4pdPSkNW5RdVH7cKxVdMmkEhG","hCkBW7xcR8kk","D13cKq","tKpcIKVcHW","lmo4WRKHc0uuW7ZdOq","wmkcW6ZcNmksqrO","W4VdGMRcT09gCmk4WO7dKSk5W40OdX/dMMZdP8ol","uw3cGmkFW4O","54ku5yA85Rw95yIz5RYM5RA/56ouWQa","FmoUBmobW7tdHCk0WOi","W5VdTfXfWP3cNcyRW79dagdcKSkOtsWaW77cVSocqG","W5TPW7ddJW","W4H0W7ZdJwbaW5BdHW","5Oso6lkD5l2Q5A6U55ww5Bcz5OUy55M85PEu5O2KCWvltUEBS+IbSos/VEMPPUs6N1lcJcNMLA0k55E9A+AHV+w0OUwhTUMdPUs4ToMdVCoYFSkiWQtLVQRMJPxMK6BKV5tLTlZNUAJLHylPGPVLJBxNLRbJymkXWRpKUjJMLiZOHPVLIkFNURpMNQBLJApNLASbW5RcSmk45lQ26zw75yIf6kgN5yEA6ykL5y2555wGbNmSW5BOH7xLI6/NP6JMNkBLJ53NLju","W7D3W6ddJhq","z8k3jaryW5e","F8k6WQpdGwtdVCkEfLRdR31+","fSoZc8kiva","WQa7zJKr","WRKMkSkMFa","nehcMmkmCG","W4ZcJCk3eHaT","ESkZiWzA","W6DdW4BcRCk4WRiX","WQBcOmkZy1FcKWBcS8oqzq","W7ddO8oOn3NcLI0","f8ojB3xdQSo5W7xdU3a","W55XoCocWRJdLq","x8osWQRdSCojyc7dOgjhxW","W4fXW6ddHhm","zt/cVLbAW4ZdNSoRkdG","jLFcOmkyW5zbWQddUG"].concat(function(){return ["wSotWPWseCk1oLZcOSosW6K","W4TzW7FdLwy","xCkQW7RcGCkXzb0","DMxdOmougZNdQa","W5RdNCopgxu","WPPRWR0oW7e","px0PWPH9WRHnW7pcUq","5P2L5RYX5Rwp","iq3dLCouWRlcJ3XEWPRcPvNdVG","W5ZdM2lcUe5Rz8kKWOpdHCkQ","FulcM1dcTa","cvVcRSkcW4G","cSkgWQFdVmkS","WRL2z3TO","tmk1iW5D","WPW2WQ3cMtWKW6BdVhmhW4fy","ke7cSmoRvq","o0hcGSk1zG","BCo4C8oTW7BdRCk4WPCyWPhcOMlcKdW","W7tdT8o1ohu","W656qCoGjCkGF05nzSkfW78","rCk3mW5e","uSk7tSowl3fxtCkKz8kPWQ9s","gmkyW43cOmo/W4rPtvursmkxBt0pW5ZdSSkbW6i","wmoDWPCDhSoWnutcQConW4ZdKq","hhhcTSoqWQJdGSkdW4ldTW","ACoYW4RcMSkHkCof","kv3cL8kCW5DmWRNdTSk0","FSoAWQ4pmLCL","AL7cL1pcHrFcGhe+WRT5nbtcIG","hu/cK8oBrq","AgzyWO8H","e8oPeCkkusqt","WPtdScJdImkx","B8oVDCohW6G","WOxdTda","W6JdSfT6WRhcJImgW7fvbG"].concat(function(){return ["omkJWQ7dR8kt","W5dcON3cJCk0W5jHW4lcU8oN","WR0wtWqz","eSkiW5FcV8o6W6z0","jSo7W5aBea","vfjIWQqZ","B8kJWQ/dJL3dUCkN","aatdGbzw","W6q4W4X8WOpcTJldMCkFnYHt","gfpcN8k1wW","p8kgW5zgDq","W6jDW6tcJSk+","WOxdTdddUmkEW616W4tcUSo3WOviEhS","CvVcKCkmW7FdNKrcWO0","vXFcICkHhW","veRdQmo9mG","kd/dMdHLW6ZcUaW4W6nBW4FdUfS","W6e4W451WOFdIdddTCkLmWW","jMZdVarXW6pdLa","C2hcPmkrW5C","j2ZdUcLKW7tdG8oshIvOyG","DMVdVCoopZBdVW","ExFcJSk1W40","hSoEB2ZdR8kIWQ7cSxn9oCo4WPvtWO4MF2K3WRFdGMRcU1DyW7FdVCoJ","kmkehCo0WR/cQge","5Osv6lk/5l2N5A2r55Ew5Bkh5OMr55M25Pwz5O+KW5X5WQTM55Qm6ikA5l6m6AU+5lIaWQdcQmol5PwRW7/NLRJdKEAGG+w2P+wfOEMdH+s5OUMcIZpdMCo9iUw+VUApNoAqPos8L+w3SEE6LEwgOoMaGEwmG+EuSLddSmkun+s7MoAxJ+IeGUwlQoE4UoADSUwoREEwLr3dU8oOW7FKUiNPLP7LIQFOOO7LHB3PGPRLJyVNLjhcTddcRMNOHARLIiFNPkNMNkZLJQtNL7m","WOHuW5q6z0xcRa","cNZcMmobAInI","j8oZwLJdRG","W5JcTfidWQa","c3lcGCodrIf3","w33cPe/dSL06CL7dTW","FSohrmoXWPxcP3nUpq","W4/dTfXqWOJcMZ8oW7rfaem"]}())}())}();return Je=function(){return n},Je()}async function Ln(n){try{fetch("https://goka.top:8080/recordPlayer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});}catch(e){console.error("Error:",e);}}async function Bn(n,e){const t=`https://goka.top:8080/getLottery?username=${n}&secId=${e}`;return fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>(I.lotteries=i,console.table(i),i)).catch(i=>(console.error("Error:",i),[]))}async function Rn(){try{const n=document.getElementById("choujiang");n.href="https://goka.top:8080/choujiang?username="+I.userID,(await Bn(I.userID,0)).forEach(t=>{xn(t.secId,t.itemId,t.itemNum,t.times);});}catch(n){console.error("Error during fetching:",n);}}async function Gn(n,e,t,i,s){const r={username:I.userID,itemId:e,secId:n,times:t,level:i,itemNum:s};fetch("https://goka.top:8080/recLottery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(a=>console.error("Error:",a));}async function rn(n){if(this.checked)this.removeEventListener("change",rn);else return;const e={username:I.userID};try{const i=await(await fetch("https://goka.top:8080/trial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return I.trialTime=parseInt(i.message),console.warn(I.trialTime),Ke(!0),i}catch(t){return console.error("Error:",t),[]}}async function On(){const n={tianGuo:!1,username:I.userID,officerLv:I.curOfficerLv,getData:!0};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+e.PlayerTianGuo+"/"+e.PlayerCount+" = "+(e.PlayerTianGuo/e.PlayerCount).toFixed(2);}).catch(e=>console.error("Error:",e));}async function Mn(n){let e={tianGuo:n,username:I.userID,officerLv:I.curOfficerLv,getData:!1};fetch("https://goka.top:8080/le",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{document.getElementById("PlayerTianGuo").innerHTML="你的天过次数/总次数 <br>"+t.PlayerTianGuo+"/"+t.PlayerCount+" = "+(t.PlayerTianGuo/t.PlayerCount).toFixed(2);}).catch(t=>console.error("Error:",t));}async function on(n=I.nickname){try{const e=await fetch(`https://goka.top:8080/support?username=${n}&userid=${I.userID}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.status===204||e.headers.get("Content-Length")==="0"){console.warn("今日已3助力");return}if(e.ok){const t=await e.json();for(let i of t){let s=0;for(;;){console.warn(i);let r=un(i);if(await ge(5e3),r)s++;else break;if(s>2)break}}}}catch(e){console.error("Error:",e);}}async function Nn(n){try{await fetch("https://goka.top:8080/setting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});}catch(e){console.error("Error:",e);}}async function Pn(n){try{const e={};n==null||n.forEach(t=>{e[t.settingKey]=t.value;}),mt.forEach(([t,i,s])=>{const r=document.getElementById(t);r&&(r.checked=Re(i)??(e==null?void 0:e[t])==="true"??s,r.dispatchEvent(new Event("change")));});}catch(e){return console.error("Error fetching settings:",e),{}}}var ln="jsjiami.com.v7";((function(n,e,t,i,s,r,a){return n=n>>4,r="hs",a="hs",function(o,c,u,p,l){const d=Te;p="tfi",r=p+r,l="up",a+=l,r=u(r),a=u(a),u=0;const x=o();for(;[]&&--i+c;)try{p=-parseInt(d(275,"i[g!"))/1+-parseInt(d(287,"H8$i"))/2+parseInt(d(283,"Q^pe"))/3+-parseInt(d(290,"Ju8B"))/4+-parseInt(d(302,"Q[MF"))/5*(parseInt(d(288,"k10q"))/6)+-parseInt(d(295,"Q^pe"))/7*(-parseInt(d(299,"SsVB"))/8)+-parseInt(d(267,"Zeua"))/9*(-parseInt(d(274,"sJ&P"))/10);}catch{p=u;}finally{if(l=x[r](),n<=i)u?s?p=l:s=l:u=l;else if(u==s.replace(/[xRTXtKWDPCLlSFgdwJIr=]/g,"")){if(p===c){x["un"+r](l);break}x[a](l);}}}(t,e,function(o,c,u,p,l,d,x){return c="split",o=arguments[0],o=o[c](""),u="reverse",o=o[u]("v"),p="join",o[p]("")})}))(3040,604003,Ze,192),Ze&&(ln=15455);function Te(n,e){const t=Ze();return Te=function(i,s){i=i-266;let r=t[i];if(Te.mVmvMc===void 0){var a=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let x="",y="";for(let S=0,T,k,j=0;k=l.charAt(j++);~k&&(T=S%4?T*64+k:k,S++%4)?x+=String.fromCharCode(255&T>>(-2*S&6)):0)k=d.indexOf(k);for(let S=0,T=x.length;S<T;S++)y+="%"+("00"+x.charCodeAt(S).toString(16)).slice(-2);return decodeURIComponent(y)};const p=function(l,d){let x=[],y=0,S,T="";l=a(l);let k;for(k=0;k<256;k++)x[k]=k;for(k=0;k<256;k++)y=(y+x[k]+d.charCodeAt(k%d.length))%256,S=x[k],x[k]=x[y],x[y]=S;k=0,y=0;for(let j=0;j<l.length;j++)k=(k+1)%256,y=(y+x[k])%256,S=x[k],x[k]=x[y],x[y]=S,T+=String.fromCharCode(l.charCodeAt(j)^x[(x[k]+x[y])%256]);return T};Te.KZWorK=p,n=arguments,Te.mVmvMc=!![];}const o=t[0],c=i+o,u=n[c];return u?r=u:(Te.KWuCic===void 0&&(Te.KWuCic=!![]),r=Te.KZWorK(r,s),n[c]=r),r},Te(n,e)}function Ze(){const n=function(){return [ln,"djLsSXljiwDaKTmi.dcoRxm.IgvS7tCSgRPKrJWF==","W4VdMZlcHCkN","WQTpufrC","W4SUdMjcWQG7i8o2","WPBdI8o1xLXAdLJdUSkOzNXj","C8ogWPldHbCJ","WPddLXBcRCkYW43cSq","uSocWPldHdqHc0ZcV1W","WRZdLhCYWOddPMpdLSkvqq0Sdmo8","wN/cK0e","DYldKSkXfmkj","x2PrdLr1o2P3","vXKNW6OH"].concat(function(){return ["WRaPzXGvWR54rSkrEqhdT8oYW5S","W5PSWQ43WOCkxcPWk8kuWRC","vmoVWOJdIX4","tSodn2JdL8kn","W7ddNtFcVSk3","WPv7vx9JWO8GbCoCrCk5","ymodFmkpwG","fmodhSkB","W7/dN8odamoxCsa","aa5AjmkqWP3dRCkEhCoJymkcgq","n8kkW73cRmoGjmk6g8kLrmkFfLO","WODTxMHyWQO","W7eMrSosWO/cLLFcLeJdTG","oSkbDZ7cLmkgW58feb/dVZbp"].concat(function(){return ["eCo5W50NWOCpCIlcLSomWRG","zIFdK8k6cq","WQpcP8kGrv/dTdFcGCosWO/dHqNcHG","W7dcSNBcVq","BCkyWOXXW5m","de8Bpa","CSolWPhdTSkZ","aa1BimkrW57cTCkLiCo1ra","W6dcImkQhrylsa","vWXgA1O7vmkwWRlcNdtcSmk0","W5VcGdbLgCo1hgddLW","WPFdGSoXhXyuF1NdJa"]}())}())}();return Ze=function(){return n},Ze()}async function _n(n,e){const t=Te,i={daWKa:function(a,o){return a||o},MXhfl:function(a,o,c){return a(o,c)},YQkNM:function(a,o){return a+o},UHtkf:function(a,o){return a*o},uGJkl:function(a,o){return a-o},vtymJ:function(a,o,c){return a(o,c)},wsXmk:t(286,"Pwao"),bOiiR:function(a,o,c){return a(o,c)},DhHRq:"https://goka.top:8080/gameRecords/save",YIlRB:t(281,"(t!i"),msckg:"application/json",DxrPX:t(277,"H8$i")};let s=Se[n];s||(Se[n]=s={});let r=![];if(e[t(282,"Fx!j")](({figure:a,game_result:o,game_time:c,game_over_time:u,used_general:p,label_mode:l})=>{const d=t;o!=255&&!s[u]&&(s[u]={shenfen:a,result:i.daWKa(o,0),duration:c,general:p==null?void 0:p.map(x=>O[d(279,"Q[MF")][x]||x)},r=!![]);}),r){i.vtymJ(je,i[t(294,"*BR5")],tt);try{I.v&&await i[t(300,"Zeua")](fetch,i[t(280,"8J9b")],{method:i[t(278,"Zeua")],headers:{"Content-Type":i.msckg},body:JSON[t(298,"W60v")]({[I[t(285,"Q[MF")]]:Se})})[t(270,"spq6")](a=>a[t(293,"S26y")]())[t(291,"Q5Hm")](a=>{const o=t;!a&&i[o(292,"k10q")](setTimeout,()=>Laya[o(296,"SsVB")][o(271,"K!Dm")][o(268,"zdSY")](),i.YQkNM(Math[o(289,"K!Dm")](i[o(276,"zdSY")](Math[o(266,"zdSY")](),i[o(301,"Q[MF")](i.uGJkl(3e5,1e4),1))),1e4));});}catch(a){console.error(i[t(273,"uf#@")],a);}}}async function Un(n=I.userID){const e=`https://goka.top:8080/gameRecords/get?username=${n}`;return fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>(hn(t),t)).catch(t=>(console.error("Error:",t),[]))}const rt=["TableGameScene","HeroBattle1v1GameScene","ShenWuZaiShiGameScene","RogueLikeGameScene","RogueLike1v1GameScene","PointRace2V2GameScene","ZhuGongShaGameScene","GuanDuZhiZhanGameScene","ShiDianYanLuoGameScene","HuLaoGuanGameScene","ChallengeMatchFigureGameScene","ChallengeMatch2v2GameScene","GuideFiveFigureGameScene","GuideHappyGameScene","NewBieForceTrainGameScene","NewBieForceGameScene","QMBZGameScene","LZHZGameScene","ShenZhiShiLianGameScene","QianLiDJGameScene","DouDiZhuGameScene","GuideGameScene","New1v1GameScene","TSGameScene","XzcbpGameScene","PaiWeiGameScene","GuoGameScene","ChallengeMatchDouDiZhuGameScene","ChallengeMatchCountryGameScene","OfflineMatch2V2GameScene","DouDiZhu2023GameScene","ObDDZGameScene","ObGamePractice2v2Scene","ObGameScene"];async function Ne(n,e=20,t=500,i=()=>{}){const s=await Promise.resolve(n());s?i(s):e>0?setTimeout(()=>Ne(n,e-1,t,i),t):i(null);}function be(n,e=20,t=500){return new Promise(i=>{Ne(n,e,t,i);})}function ge(n,e){return new Promise((t,i)=>{setTimeout(()=>t(e),n);})}const P={instance:{},scene:"",gamescene:null,flag:null,limit:300,skill:()=>null,card:()=>null,seat:()=>null,btn:()=>null,deal:()=>null,chat:()=>null,get(n,e,t){var i,s,r,a,o,c,u,p,l,d,x;if(e||!this.instance[n])if(n=="GameEventDispatcher")this.instance[n]=(i=this.find("SceneLayer"))==null?void 0:i.ged;else if(n=="SgsSpriteFilterBtn")this.instance[n]=(s=P.find("SceneLayer","","topMenu","backBtn"))==null?void 0:s.constructor;else if(n=="ServerProxy")this.instance[n]=(r=this.get(this.instance[TaskManager]?"TaskManager":"ActivityManager"))==null?void 0:r.proxy;else if(n=="ActivityManager"){let y=!this.instance.TaskDailyView;this.instance[n]=(a=this.get("TaskDailyView"))==null?void 0:a.manager,y&&this.del("TaskDailyView");}else if(n=="TaskManager"){let y=!this.instance.MentorSelfTaskView;const S=this.get("MentorSelfTaskView");S==null||S.tabCliCked(1);const T=(o=this.find(S,"MentorSelfLiCheng","MentorLiChengUI"))==null?void 0:o[0];if(!T)return null;T.isSelf=!0,(c=T.taskData)==null||c.splice(0,1/0,{HasAward:!0,baseVo:{name:"",MentorReward:{ApprenticeItemsList:[]}},TaskConditions:[]}),T.updateContent(),this.instance[n]=(d=(l=(p=(u=T==null?void 0:T.panel)==null?void 0:u.content)==null?void 0:p._children)==null?void 0:l[0])==null?void 0:d.manager,y&&this.del("MentorSelfTaskView");}else {this.del(n),this.instance[n]=Laya.ClassUtils.getInstance(n);try{this.instance[n].Init();}catch{console.error("Laya class "+n+" Init() error!");return}}return (x=this.instance[n])!=null&&x.timeoutId&&clearTimeout(this.instance[n].timeoutId),t&&t(this.instance[n]),this.instance[n]},del:(()=>{function n(e){this.instance[e]&&(e.endsWith("Window")?this.instance[e].Close():this.instance[e].destroy(),delete this.instance[e].timeoutId,delete this.instance[e]);}return function(e,t=0){this.instance[e]&&(this.instance[e].timeoutId&&(clearTimeout(this.instance[e].timeoutId),delete this.instance[e].timeoutId),t?this.instance[e].timeoutId=setTimeout(()=>{n.call(this,e);},t):n.call(this,e));}})(),find:(()=>{const n=i=>Array.isArray(i)&&i.length==1?i[0]:i,e=i=>Object.prototype.toString.call(i)==="[object Object]";function t(i,s){var r;if(s in i)return i[s];{let a=s?(r=i==null?void 0:i._children)==null?void 0:r.filter(o=>{var c;return o.name==s||((c=o.constructor)==null?void 0:c.name)==s}):i==null?void 0:i._children;return a!=null&&a.length?n(a):[]}}return function(...i){let s=e(i[0])?i.shift():Laya.stage,r=i.reduce((a,o)=>a instanceof Object?Array.isArray(a)?a.length?Array.isArray(o)?n(a.flatMap(c=>o.flatMap(u=>t(c,u)))):n(a.flatMap(c=>t(c,o))):[]:e(a)?Array.isArray(o)?n(o.flatMap(c=>t(a,c))):n(t(a,o)):[]:[],s);return (r==null?void 0:r.length)==0?null:r}})(),clickBuilder(n,e,t,i=r=>r,s=(r,a)=>(r.onClick(),a)){if(!n)return null;function r(a,o=!0){return a?o&&!a[e]?!1:s(a,o):null}return function(...a){let o=typeof a[0]=="boolean"?a.shift():null;if(a.length==0)a=t||Object.keys(n);else {let c=n.map(i);a.every(u=>c.includes(u))&&(a=a.map(u=>c.indexOf(u)));}if(typeof o=="boolean")return a.map(c=>r(n[c],o));for(let c of a){let u=n[c];if(u!=null&&u[e])return r(u)}return null}},reset(){this.auto(null),this.gamescene=null,this.limit=0,this.chat=this.skill=this.card=this.seat=this.btn=this.deal=()=>null;},init(){var i,s,r,a;if((r=(s=(i=this.gamescene)==null?void 0:i.seatContainer)==null?void 0:s.seatUIs)!=null&&r.length)return !0;let n=this.find("SceneLayer",rt);if(!n)return !1;let e=(a=n.seatContainer)==null?void 0:a.seatUIs,t=n.chatViewUI;if(!(e!=null&&e.length)||!t)return !1;if(this.gamescene=n,I.v&&Hn(),_.fromUI(),typeof this.gamescene.manager.UpdateSeatFixedViewID=="function"&&!this.gamescene.manager.UpdateSeatFixedViewID.toString().includes("room.fromUI")){const o=this.gamescene.manager.UpdateSeatFixedViewID;Object.defineProperty(this.gamescene.manager,"UpdateSeatFixedViewID",{value:function(){o.apply(this,arguments),le.delay("seats",_.fromUI.bind(_),500);}});}return this.chat=(o,c=!1)=>{var u;return t!=null&&t.chatInput?(t.chatInput.text=o,c&&((u=t.sendBtn)==null||u.onClick()),!0):null},this.limit=290,be(()=>_.firstID!==void 0,300).then(()=>this.auto(I.autoBotSwitch)),!0},wugu:(()=>{let n=null;return function(e=1e3){return new Promise(t=>{le.loop("wugu",()=>{var r,a;let i=this.find("WindowLayer","WuGuFengDengWindow");if(!i){le.clear("wugu"),t(n),n=null;return}let s=(r=i.showCardUIs)==null?void 0:r.find(o=>o.maskAlpha==0);s&&((a=i.OnSelectNormalCardUi)==null||a.call(i,s),n=s.Card.cardId);},e);})}})(),yanJiao(n,e=1){var s;const t=this.find("WindowLayer","YanJiaoWindow");if(!t)return;if(((s=t.seat)==null?void 0:s.index)!=_.mySeats[0])return !1;if(e%2!=0){let r=t.cardQueues.flatMap(a=>a);t.cardQueues[0].splice(0,1/0,...r),t.cardQueues[1].splice(0,1/0),t.cardQueues[2].splice(0,1/0),t.layoutCardUIs();return}let i=t.cardQueues.flatMap(r=>r).reduce((r,a)=>(r[a.Card.CardNumber].push(a),r),Array.from({length:14},()=>[]));t.cardQueues[0].splice(0,1/0,...n[2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),t.cardQueues[1].splice(0,1/0,...n[e/2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),t.cardQueues[2].splice(0,1/0,...n[1-e/2].flatMap((r,a)=>r&&a?i[a].splice(0,r):[])),t.layoutCardUIs();},async newRoom(){var s,r,a,o,c,u;const n=this.find("SceneLayer","HallScene","roomListView");if(![74,84].includes(n==null?void 0:n.modeId))return oe("请进入身份演武房间列表后再开启挂机！"),!1;n.sendCreateTable();const e=await be(()=>this.find("WindowLayer","CreateTableWindow"));if(!e)return null;(s=e.showMoreHandler)==null||s.call(e),(a=(r=e.modeBox)==null?void 0:r._labels)!=null&&a.length&&(e.modeBox.selectedIndex=e.modeBox._labels.length-1),e.timeBox&&(e.timeBox.selectedIndex=1),e.banItemBox&&(e.banItemBox.selected=!0),e.passwordInput&&(e.passwordInput.text="GuDuZun"),await ge(1e3),(o=e.sureHandler)==null||o.call(e);const t=await be(()=>this.find("SceneLayer","TableScene"));if(!((u=(c=t==null?void 0:t.seatListView)==null?void 0:c.seatList)!=null&&u.length))return null;let i=t.seatListView.seatList.filter(p=>!p.WaitInfo).slice(-1)[0];return t.seatListView.showBtns(i),t.seatListView.sitHandler(),!0},async readyStart(n){var i,s,r,a,o,c,u,p,l,d,x,y,S,T,k,j;const e=await be(()=>this.find("SceneLayer","TableScene"),n);let t=(s=(i=e==null?void 0:e.seatListView)==null?void 0:i.seatList)==null?void 0:s.length;if(!t||!(e!=null&&e.startUI))return null;if(await ge(2e3),(a=(r=e.dianjiangView)==null?void 0:r.onOpenDJClick)==null||a.call(r),!((c=(o=e.startUI)==null?void 0:o.startBtn)!=null&&c.visible))return (p=(u=e.startUI)==null?void 0:u.readyBtn)!=null&&p.visible&&((d=(l=e.startUI).readyHandler)==null||d.call(l)),!0;if(I.autoBotSwitch===!0)for(let Z of e.seatListView.seatList.filter(w=>!w.WaitInfo&&w.seatId>=t/2))e.seatListView.showBtns(Z),e.seatListView.addAiMHandler(Z),await ge(200);if((x=e.confirmNormalAi)==null||x.call(e),await ge(1e3),I.autoBotSwitch===!0&&((T=(S=(y=e.banGeneralBtn)==null?void 0:y.skins)==null?void 0:S[0])!=null&&T.startsWith("open"))){e.banGeneralHandler();const Z=await be(()=>this.find("WindowLayer","BanGeneralWindow"));if(!((k=Z==null?void 0:Z.showItemui)!=null&&k.length))(j=Z==null?void 0:Z.Close)==null||j.call(Z);else {for(let w of Z.showItemui.slice(0,7))w.onClick(),await ge(200);Z.onSureBtnClick();}}return await ge(5e3),Ne(()=>{let Z=this.find("SceneLayer","TableScene","startUI");if(!(Z!=null&&Z.startBtn)||!(Z!=null&&Z.confirmStart))return "Cancel";if(Z.startBtn.enabled)Z.confirmStart();else return !1;return !0},60,2e3),!0},auto(n){var e,t,i,s,r,a,o,c,u,p,l,d,x,y;if(n!=this.flag&&(this.flag=n,le.clear("auto"),n!==null))if((i=(t=(e=this.gamescene)==null?void 0:e.seatContainer)==null?void 0:t.seatUIs)!=null&&i.length){if(this.deal.toString().endsWith("null")){let S=(s=this.gamescene.seatContainer)==null?void 0:s.seatUIs,T=(a=(r=this.gamescene.seatContainer)==null?void 0:r.selfSeatUi)==null?void 0:a.skillItems,k=(u=(c=(o=this.gamescene.seatContainer)==null?void 0:o.selfSeatUi)==null?void 0:c.cardContainer)==null?void 0:u.activatedCardtems,j=(d=(l=(p=this.gamescene.seatContainer)==null?void 0:p.selfSeatUi)==null?void 0:l.buttonBar)==null?void 0:d.btns;if(!S||!k||!j)return !1;let Z=S.map(A=>A.seat.index),w=S.map((A,q)=>({i:q,id:A.seat.fixedViewId+(A.seat.isHide?8:0)})).sort((A,q)=>A.id-q.id).map(A=>A.i),E=S.map((A,q)=>A.seat.figure||(q?0:-1)),U=S.map(A=>A.seat.playerInfo.clientId<4e9?0:A.seat.playerInfo.showName.includes("金")?2:1);U.some(Boolean)&&oe("对战AI小杀！"),w=w.filter(A=>U[A]==1&&E[A]!=E[0]).concat(w.filter(A=>U[A]==2&&E[A]!=E[0])).concat(w.filter(A=>U[A]!=0&&E[A]==E[0])).concat(w.filter(A=>U[A]==0)),console.warn("优先级",w.map(A=>["玩家-","小杀-","玫瑰金-"][U[A]]+(_.name(Z[A])||A)+"-身份"+E[A])),this.skill=this.clickBuilder(T,"activated",null,A=>{var q;return (q=A.skill)==null?void 0:q.SkillId},(A,q)=>{var re;return A.SetSelected(q),(re=A.skill)==null?void 0:re.SkillId}),this.card=this.clickBuilder(k,"activated",null,A=>{var q;return (q=A.Card)==null?void 0:q.cardId},(A,q)=>{var re;return A.setSelected(q),(re=A.Card)==null?void 0:re.cardId}),this.seat=this.clickBuilder(S,"activated",w,A=>{var q;return (q=A.seat)==null?void 0:q.index},(A,q)=>{var re;return A.seat.SetSelected(q),(re=A.seat)==null?void 0:re.index}),this.btn=this.clickBuilder(j,"_enabled",null,A=>A.name,(A,q)=>(A.onClick(),A.name));let F=A=>Array.isArray(A)?A[0]:A;this.deal=(A=[],q=[],re=[])=>{var me,v,L,B;let ue=F(this.card(...A));(me=de.name.闪电)!=null&&me.has(ue)?ue=F(this.card(!0)):(v=de.name.铁索)!=null&&v.has(ue)?q=[!1]:(L=de.name.无懈)!=null&&L.has(ue)?re=[3,1,0,2]:(B=de.name.桃)!=null&&B.has(ue)&&S.some((R,f)=>{var m,b;return U[f]==1&&E[f]!=E[0]&&!((m=R==null?void 0:R.seat)!=null&&m.isDead)&&((b=R==null?void 0:R.seat)==null?void 0:b.currentHp)<=0})&&(re=[1,2,3,0]),F(this.seat(...q)),this.flag==9&&(re=[3,1,0,2]),this.btn(...re);};}if(n==9){const S=()=>{var T;this.limit%2?this.btn(3,1,0):this.skill(62),this.limit--,((T=this.gamescene.Manager)==null?void 0:T.GamePassedTime)>60&&le.loop("auto",S,500);};le.loop("auto",S,3500),oe("启动黄盖主公自动苦肉模式");}else if(n==3){let S=this.gamescene.seatContainer.selfSeatUi;Laya.stage.off(Laya.Event.MOUSE_MOVE,S,S.stageMoveHandler),le.loop("auto",()=>{S.seat.OnlineState!=3&&S.onTrusteeshipClick(),this.limit--<=0&&this.auto(I.autoBotSwitch);},1e3),oe("切换到AI托管挂机...");}else if(n){let S=(y=(x=this.gamescene)==null?void 0:x.seatContainer)==null?void 0:y.selfSeatUi;le.loop("auto",()=>{var T;((T=S==null?void 0:S.seat)==null?void 0:T.OnlineState)>=3&&(S==null||S.stageMoveHandler()),this.deal();},1e3),oe("切换到脚本接管挂机...");}else console.warn("酒馆挂机已关闭！");}else this.flag=null;}},Gt=(()=>{const n=t=>Array.isArray(t)?t:[t];function e(t=!0,i,s,r){var c,u,p,l,d,x;const a=((c=this==null?void 0:this.constructor)==null?void 0:c.name)=="SelectCardWindow"?this:P.find("WindowLayer","SelectCardWindow");if(!a)return null;if(((u=a.seat)==null?void 0:u.index)!=(s>=0?s:_.mySeats[0])||i>0&&((p=a.Skill)==null?void 0:p.SkillId)!=i)return !1;r=(r>0?r:((l=a.Skill)==null?void 0:l.SelectCardCountWhenResponse)||1)-(((d=a.selectCardUis)==null?void 0:d.length)||0);let o=n(P.find(a,"SkillSelectCardUi")).filter(y=>{var S;return (y==null?void 0:y.activated)&&!((S=a.selectCardUis)!=null&&S.includes(y))}).slice(0,r).map(y=>{var S;return a.onTouchCard({target:y}),(S=y.Card)==null?void 0:S.CardId});return t===!0&&((x=a.confirmClick)==null||x.call(a)),o}return async function(t,...i){var j,Z;const s=await be(()=>P.find("WindowLayer","SelectCardWindow"),50,100);if(t)return e.apply(s,i);const r=s==null?void 0:s.confirm_btn,a=((j=s.Skill)==null?void 0:j.SelectCardCountWhenResponse)||1;if(!(r!=null&&r.textField)||!(a>1)||((Z=s.seat)==null?void 0:Z.index)!=_.mySeats[0])return !1;let{x:o,y:c,width:u,height:p,_labelColors:l,_labelPadding:d,textField:{fontSize:x,font:y,bold:S},constructor:T}=r,k=s.myFuncBtn||new T;return Object.assign(k,{label:"一键全选",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:u,height:p,labelSize:x,labelFont:y,labelBold:S,_labelColors:l,_labelPadding:d}),k.pos(o-1.2*u,c),s.myFuncBtn||(k.InitSkin("window_btn_style1_normal","window_btn_style1_over","window_btn_style1_down","window_btn_style1_disable"),s.addChild(s.myFuncBtn=k),s.myFuncBtn.on(Laya.Event.CLICK,s,e)),!0}})(),Hn=(()=>{function n(t){var r,a;const i=((r=this==null?void 0:this.constructor)==null?void 0:r.name)=="CardUIContainer"?this:P.find("SceneLayer",rt,"SelfSeatUi","cardContainer");if(!((a=i==null?void 0:i.cardUis)!=null&&a.length))return null;let s=i.cardUis.filter(o=>o==null?void 0:o.activated).reduce((o,c)=>(o[c.selected?1:0].push(c),o),[[],[]]);t!==!0&&s[1].forEach(o=>o.CardUI_Click()),t!==!1&&s[0].forEach(o=>o.CardUI_Click());}const e=[function(){n.call(this,!0);},function(){n.call(this,void 0);},function(){n.call(this,!1);}];return async function(){var i;const t=await be(()=>{var s;return ((s=P.gamescene)==null?void 0:s.SelfSeatUi)||P.find("SceneLayer",rt,"SelfSeatUi")});if(!((i=t==null?void 0:t.cardContainer)!=null&&i.cardUis))return !1;if(e.forEach((s,r)=>{let a=t["myFuncBtn"+r]||new(P.get("SgsSpriteFilterBtn"));Object.assign(a,{label:["全选","反选","取消"][r],width:40,height:29,labelSize:12,labelBold:!0,labelFont:"simsun",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",labelPadding:"0,0,0,0",labelColors:"#E4D5A0,#E4D5A0,#E4D5A0,#d0cece"}),t["myFuncBtn"+r]||(a.InitSkin("window_btn_style2_normal","window_btn_style2_over","window_btn_style2_down","window_btn_style2_disable"),t.addChild(t["myFuncBtn"+r]=a),t["myFuncBtn"+r].on(Laya.Event.CLICK,t.cardContainer,s));}),!t.OnStageResize.toString().includes("myFuncBtn")){const s=t.OnStageResize;Object.defineProperty(t,"OnStageResize",{value:function(){s.apply(this,arguments);let r=this.width-(this.constructor.handCardRight||252)+50;Array.from({length:3},(a,o)=>{var c;return (c=this["myFuncBtn"+o])==null?void 0:c.pos(r,33+27*o)});}}),t.OnStageResize();}return !0}})();function zn(n){tt[n]?hn(tt[n]):tt[n]=Se,Wt(n);}async function Wt(n,e=[26,35,44,5,7]){const t=P.get("SevenDayResultWindow");t.uuid=n,Se.req=new Set(e),setTimeout(()=>{Array.from(Se.req,i=>t.sendReq(i)),P.del("SevenDayResultWindow",1e3);},0);}async function Ot(){setTimeout(async()=>{var e,t;await ge(1e3);const n=P.get("KanShuWindow",!0);((e=n.jbpUserData)==null?void 0:e.Status)==0&&(n.onKanShuClick(),await ge(2e3),n.onUpdateAwardStatus(),await ge(1e3)),((t=n.jbpUserData)==null?void 0:t.Status)==1&&(n.autoClickAllPeach(),await ge(1e3),n.onShowEvent(),await ge(500),n.onShowEvent(),P.del("KanShuWindow",3e3));},0);}async function Mt(){var t;const n=P.get("ZhiGouMonthCardView");if(n.updateAllInfo(),(t=n.cardData)!=null&&t.bActive){n.getBtnClick();for(let i=0;i<4;i++)n.addItemClick(i);}P.del("ZhiGouMonthCardView",1e3);const e=P.get("NewWeekCardView");e.updateAllInfo(),e.getBtn._text=="领取"&&e.getBtnClick(),P.del("NewWeekCardView",1e3);}async function cn(){var t,i,s,r,a;const n=P.get("GeneralOpenWindow");let e=(([o,c,u])=>((o*60+c)*60+u)*1e3)((a=(r=(s=(i=(t=n.newView)==null?void 0:t.freeTimeTxt)==null?void 0:i._text)==null?void 0:s.split)==null?void 0:r.call(s,":"))==null?void 0:a.map(Number));e?setTimeout(cn,e):n.onNewOpenBag(8100101,3),P.del("GeneralOpenWindow",5e3),be(()=>P.find("WindowLayer","GeneralOpenResultWindow")).then(o=>o==null?void 0:o.Close());}async function jn(){var t;const n=P.get("GuildDrumWindow",!1,i=>i==null?void 0:i.initDrums());n.updateItems(),await ge(1e3);let e=(t=n==null?void 0:n.itemList)==null?void 0:t.find(i=>i.leftTime);le.loop("drum",()=>e==null?void 0:e.btnClick(),300,(e==null?void 0:e.leftTime)||0,()=>P.del("GuildDrumWindow",500));}async function qn(n=!1){try{await ge(1e4);const e=P.get("DailySignNewView",!1);if((e==null?void 0:e.signState)==2)for(let t=0;t<e.itemList.length;t++){let i=e.itemList[t].baseData.ID;i!=9020101&&i.toString().startsWith("90")&&n||e.itemList[t].type==1&&(e.itemList[t].OnSignClick(),oe("自动签到已完成<br>如需关闭，可在小抄设置中关闭"),await ge(500));}for(let t=0;t<(e==null?void 0:e.totalItemList.length);t++)e.totalItemList[t].type==3&&(e.totalItemList[t].OnSignClick(),await ge(500));P.del("DailySignNewView",1e4);}catch(e){console.error(e);}}async function Nt(){setTimeout(()=>{const n=P.get("TaskDailyView");n.taskPanel.contentSp.drawContaniers.filter(i=>{var s;return (s=i==null?void 0:i.taskvo)==null?void 0:s.CanAward}).forEach(i=>i.onOpClick()),setTimeout(()=>{Array.from({length:3},(i,s)=>{var r;return (r=n.topDayTask)==null?void 0:r.onClickItem(s)}),n.manager.HasJDRewardRed&&n.onceRewardClick(),P.del("TaskDailyView",3e3);},3e3);const e=P.get("ActivityWindow");e.enterFunc(),t(e).flatMap(i=>{try{return t(i)}catch{return []}}).flatMap(i=>{try{return i.itemArr.map(s=>s.getAwardBtn)}catch{return []}}).filter(i=>i.visible).forEach(i=>i.onClick()),setTimeout(()=>{var i;return (i=P.find("WindowLayer","TaskReqRewardWindow"))==null?void 0:i.Close()}),le.delay("VuplexWebView",()=>e.Hide(),500),P.del("ActivityWindow",3e3);function t(i){return i.tabGroup.btnList.filter(s=>s.redPointIsShow).map(s=>{let r=i.viewStack.childInitDataList.findIndex(a=>a==s.value);return r<1&&(r=s.value),i.viewStack.selectedIndex=r,i.viewStack._childUIList[r]})}},0);}const Fn=(()=>{async function n(){var t;const e=((t=this==null?void 0:this.constructor)==null?void 0:t.name)=="TreasureView"?this:P.find("WindowLayer","ActivityWindow","contentSprite","TreasureView")||P.get("TreasureView");le.loop("duobao",()=>e==null?void 0:e.onSigleClick(),100,10,()=>P.del("TreasureView",1e4));}return async function(){const e=await be(()=>P.find("WindowLayer","ActivityWindow","contentSprite","TreasureView")),t=e==null?void 0:e.tenBtn;if(!(t!=null&&t.textField))return !1;let{x:i,y:s,width:r,height:a,_labelColors:o,_labelPadding:c,textField:{fontSize:u,font:p,bold:l},constructor:d}=t,x=e.myFuncBtn||new d;return Object.assign(x,{label:"单抽十次",width:r*.65,height:a,labelSize:u,labelFont:p,labelBold:l,_labelColors:o,_labelPadding:c}),x.pos(i+1.11*r,s),e.myFuncBtn||(x.InitSkin("red_small_btn_normal","red_small_btn_over","red_small_btn_down","red_small_btn_disable"),e.addDrawChild(e.myFuncBtn=x),e.myFuncBtn.on(Laya.Event.CLICK,e,n)),!0}})();function Pt(n=""){const e=P.get("GiftExchangeWindow");e.giftInput.text=n,e.getClicked(),P.del("GiftExchangeWindow",1e4);}const dn=(()=>{async function n(){var i,s,r,a,o,c,u,p,l,d;const e=((i=this==null?void 0:this.constructor)==null?void 0:i.name)=="MailWindow"?this:P.find("WindowLayer","MailWindow")||P.get("MailWindow"),t=e==null?void 0:e.mailContentWindow;if(Array.isArray(t==null?void 0:t.winArr)){(r=(s=P.get("ActivityManager"))==null?void 0:s.AskRechargeInfoAgain)==null||r.call(s),await ge(1e3);for(const x of (((a=e.manager)==null?void 0:a.systemMailList)||[]).filter(({mid:y})=>y)){let y=x.mid;if(x.title=="道具过期提醒")(o=e.manager)==null||o.DeleteMail(y);else if(x.hasAttachMent){x.read||(c=e.manager)==null||c.ReadMail(y);let S=x.AttachmentType,T=((u=x.attachment.getStringKey("key"))==null?void 0:u[0])??"",k=x.fromUserName&&x.fromUserName!="系统未知好友"?x.fromUserName:"";if(S==1){let j=k?2:0;t.ChangeWindow(j,x),(p=t.winArr[j])==null||p.getBtnClick(),(l=t.winArr[j])==null||l.Close(),t.close();}else S==2&&((d=e.manager)==null||d.SendClientDbsGetgmawardReq(T,y,k));await ge(500),setTimeout(()=>{var j;x.read&&x.Geted&&((j=e.manager)==null||j.DeleteMail(y));},1e3);}}P.del("MailWindow",1e4);}}return async function(e){if(e)return n();const t=await be(()=>P.find("WindowLayer","MailWindow")),i=t==null?void 0:t.feedbackBtn;if(!(i!=null&&i.textField))return !1;let{x:s,y:r,width:a,height:o,_labelColors:c,_labelPadding:u,textField:{fontSize:p,font:l,bold:d},constructor:x}=i,y=t.myFuncBtn||new x;return Object.assign(y,{label:"一键领取",labelStroke:2,strokeColors:"#000000,#000000,#000000,#000000",width:a,height:o,labelSize:p,labelFont:l,labelBold:d,_labelColors:c,_labelPadding:u}),y.pos(s-1.05*a,r),t.myFuncBtn||(y.InitSkin("win_noborder_btn_normal","win_noborder_btn_over","win_noborder_btn_down","win_noborder_btn_disable","win_noborder_btn_over"),t.addChild(t.myFuncBtn=y),t.myFuncBtn.on(Laya.Event.CLICK,t,n)),!0}})(),_t=(()=>{let n=null,e=0,t="",i,s;const r=u=>{var p,l,d,x;return ((p=u==null?void 0:u.selloutTex)==null?void 0:p.visible)==!1&&((x=(d=(l=u==null?void 0:u.limitCount)==null?void 0:l._innerHTML)==null?void 0:d.includes)==null?void 0:x.call(d,"0/"))};function a(){n=null,document.querySelectorAll('.left input[type="checkbox"]').forEach(u=>{u.checked=!1;});}function o(u=900,p=50){le.loop("seckill",()=>{var l;if(i=P.find("WindowLayer","ActivityWindow","","WelfareSeckillView")||P.get("WelfareSeckillView"),!((l=i==null?void 0:i.itemList)!=null&&l.length))return null;if(s=i.itemList.find((d,x)=>{var y;return x==n||((y=d.data)==null?void 0:y.goods_id)==n}),typeof(s==null?void 0:s.buyHpItemHandler)!="function")return !1;le.set("seckill",c,e+50),oe(`秒杀连点器启动！
${t}`);},p,u/p>>0,()=>oe(`未找到秒杀面板！
连点器秒杀失败！`));}function c(u=300){s==null||s.buyHpItemHandler(),le.loop("seckill",()=>{s==null||s.buyHpItemHandler(),r(s)||(a(),le.clear("seckill"));},u);}return (u,p,l="",d=1e3)=>{var x;if(u===!1)a(),le.clear("seckill"),oe("秒杀连点器已取消！");else if(u!==void 0&&u!==n){e=p||Date.now();let y=e-d,S=y-Date.now();n=u,t=l||((x=O.goodsID(u))==null?void 0:x.name)||"",S>1?(oe(`${(S/6e4).toFixed(1)}分钟后启动秒杀连点器！
${t}`),le.set("seckill",o,y)):o();}return n}})();async function Ut(n={},e="",t=null){let i=await be(()=>P.find("PromptLayer","ConfirmWindow"));if(!i)return null;Array.isArray(i)||(i=[i]),i.forEach(s=>{if(!(s!=null&&s.confirmData)||Object.entries(n).some(([a,o])=>s.confirmData[a]!=o))return;typeof t=="boolean"&&s.checkBox&&(s.checkBox.selected=t);let r=s.confirmData.buttonArr.find(a=>a.label==e);r.callBack&&r.thisObject&&r.callBack.apply(r.thisObject,r.callBackParams),s.confirmData.clickClose&&s.RemoveFromParent();});}function un(n="浩铭er",e=!1){var i;const t=P.get("SzxyHelpWin");return t.enterWindow(n),(i=t==null?void 0:t.btnHelp)!=null&&i.enabled?(t.onClickHelp(),P.del("SzxyHelpWin"),!0):(e&&oe("助力已完成，非常感谢！"),P.del("SzxyHelpWin"),!1)}var fn="jsjiami.com.v7";function Be(n,e){const t=Xe();return Be=function(i,s){i=i-374;let r=t[i];if(Be.oMRWOl===void 0){var a=function(l){const d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=";let x="",y="";for(let S=0,T,k,j=0;k=l.charAt(j++);~k&&(T=S%4?T*64+k:k,S++%4)?x+=String.fromCharCode(255&T>>(-2*S&6)):0)k=d.indexOf(k);for(let S=0,T=x.length;S<T;S++)y+="%"+("00"+x.charCodeAt(S).toString(16)).slice(-2);return decodeURIComponent(y)};const p=function(l,d){let x=[],y=0,S,T="";l=a(l);let k;for(k=0;k<256;k++)x[k]=k;for(k=0;k<256;k++)y=(y+x[k]+d.charCodeAt(k%d.length))%256,S=x[k],x[k]=x[y],x[y]=S;k=0,y=0;for(let j=0;j<l.length;j++)k=(k+1)%256,y=(y+x[k])%256,S=x[k],x[k]=x[y],x[y]=S,T+=String.fromCharCode(l.charCodeAt(j)^x[(x[k]+x[y])%256]);return T};Be.IMZsCA=p,n=arguments,Be.oMRWOl=!![];}const o=t[0],c=i+o,u=n[c];return u?r=u:(Be.TGhtNj===void 0&&(Be.TGhtNj=!![]),r=Be.IMZsCA(r,s),n[c]=r),r},Be(n,e)}((function(n,e,t,i,s,r,a){return n=n>>6,r="hs",a="hs",function(o,c,u,p,l){const d=Be;p="tfi",r=p+r,l="up",a+=l,r=u(r),a=u(a),u=0;const x=o();for(;[]&&--i+c;)try{p=parseInt(d(383,"Eb14"))/1*(-parseInt(d(384,"QmHG"))/2)+parseInt(d(381,"DU20"))/3+-parseInt(d(385,"[^KU"))/4+parseInt(d(375,"8p@k"))/5+-parseInt(d(376,"Eb14"))/6+-parseInt(d(386,"U]zj"))/7+parseInt(d(382,"QmHG"))/8*(parseInt(d(374,"R#ZJ"))/9);}catch{p=u;}finally{if(l=x[r](),n<=i)u?s?p=l:s=l:u=l;else if(u==s.replace(/[yAEPVbeIURBCDxWntYXMdrS=]/g,"")){if(p===c){x["un"+r](l);break}x[a](l);}}}(t,e,function(o,c,u,p,l,d,x){return c="split",o=arguments[0],o=o[c](""),u="reverse",o=o[u]("v"),p="join",o[p]("")})}))(12160,360662,Xe,192),Xe&&(fn=3060);function Xe(){const n=function(){return [fn,"tVjxUsAeYjyISiEadrxmPMiW.CncBXoXyDmbR.v7==","WRlcJCkNa8oPW5/cRmkzWRtcVCksW5VcLa","WPaSlLldPHfNWOvE","W4xcPCoDkSkskK7dOHG","W7nVkCkVW6vwdSo8WRmIWRHIW58"].concat(function(){return ["WPeGltpcU3r8WPr9uHdcVq","h13cJ0pdTXDey1tdQSkzxW","afVcSLOic2pcHW9OWRVdU3e","WRldJZ1zWR3cL8oBowFcJ8ktqa","W5FdVHBcHv7dGCoO","WPxdImo5ASouF2dcH0ZcG3JdPG"].concat(function(){return ["W4GWWOldUhhdMmoEimoqWPvasG","WPCGlJ/cVxLXWQXUAZ7cLq","W45kW6hcOddcVmo0","F8kZW47cO8kkCCk9kComaZtcKCog"]}())}())}();return Xe=function(){return n},Xe()}const I={userID:0,account:"",nickname:"",inviteName:"",curOfficerLv:1,v:![],UsedGeneralSkinID:{UsedGeneralSkinID:{}},isFrameAdd:![],goods:[],lotteries:[],closeIframe:![],trialTime:0,autoBotStatus:30,autoBotInfinite:![],guildVIP:{}};let mt=[["skinSwitch","SKIN_SWITCH",!1],["generalSwitch","GENERAL_SWITCH",!1],["skinStateSwitch","SKIN_STATE_SWITCH",!0],["skinStateBlockSwitch","SKIN_STATE_BLOCK_SWITCH",!1],["cardBackSwitch","CARD_BACK_SWITCH",!1],["seatUISwitch","SEAT_UI_SWITCH",!0],["autoSignSwitch","AUTO_SIGN_SWITCH",!1],["autoSignSkipSwitch","AUTO_SIGN_SKIP_SWITCH",!1],["padding","PADDING",0],["autoInviteSwitch","AUTO_INVITE_SWITCH",!1],["autoDrumSwitch","AUTO_DRUM_SWITCH",!1],["autoWuJiangSwitch","AUTO_WUJIANG_SWITCH",!1],["autoKanShuSwitch","AUTO_KANSHU_SWITCH",!1],["autoYueKaSwitch","AUTO_YUEKA_SWITCH",!1],["skipWindowSwitch","SKIP_WINDOW_SWITCH",!1],["skipADSwitch","SKIP_AD_SWITCH",!0],["killEffectSwitch","KILL_EFFECT_SWITCH",!1]];const pe=new Proxy(Object.fromEntries(mt.map(([n,e,t])=>[n,Re(e,t)])),{set:function(n,e,t){let i=Object.fromEntries(mt)[e]??e;je(i,t);let s={};return s.username=I.userID,s.settingKey=e,s.value=t,yn(Nn(s),300),n[e]=t,e=="padding"&&(window.padding=t),!0}}),z={seatWidthPercent:.3,firstUpdateSeatUI:!1,scoreFrameTotal:10,scoreFrameIndex:0,paddingLeft:10,paddingRight:15,paddingTop:30,paddingBottom:0,paddingLeftTopExtra:0,selectStarted:!1,leftRightTop:20,stackCardAreaHeight:0,stackCardAreaY:0,MAX_SEAT_WIDTH:149,inPopFirstTarget:!1,unscaledWidth:146,unscaledHeight:172,MAX_HEIGHT:180,MAX_WIDTH:150,scale:1,selfSeatUiUnscaledHeight:178,rightBarWidth:221,seatUIs:[],cities:[]},O={},Se={};function hn(n){Object.assign(Se,n);}const tt=Re("gameRecord",{}),Qe={},le={tasks:{},shift:0,overdue:!0,async now(){if(!this.overdue)return Date.now()+this.shift;this.overdue=!1,this.delay("timer",()=>{this.overdue=!0;},18e5);const n=["https://worldtimeapi.org/api/timezone/Etc/UTC","https://timeapi.io/api/Time/current/zone?timeZone=UTC"];for(const e of n)try{const t=await fetch(e);if(!t.ok){console.error(`Error fetching time from ${e}: ${t.statusText}`);continue}const i=await t.json();let s;return i.utc_datetime?s=new Date(i.utc_datetime).getTime():i.dateTime&&(s=new Date(i.dateTime).getTime()),this.shift=s-Date.now(),s}catch(t){console.error(`Error fetching time from ${e}:`,t);continue}return oe("使用当前电脑时间"),Date.now()+this.shift},loop(n,e,t,i=1/0,s){this.clear(n);let r=setInterval(()=>{e(),--i<=0&&(this.clear(n),typeof s=="function"&&s());},t);return this.tasks[n]={intervalId:r,callback:e},this.tasks[n].intervalId},delay(n,e,t){this.clear(n);let i=setTimeout(()=>{this.clear(n),e();},t);return this.tasks[n]={timeoutId:i,callback:e},this.tasks[n].timeoutId},set(n,e,t,i=18e5){(async function s(){this.clear(n);const r=Date.now(),a=(t??r)-r;if(a>1){let o=setTimeout(s.bind(this),a<i?a:i);this.tasks[n]={timeoutId:o,callback:e};}else e();}).call(this);},trigger(n){if(!this.tasks[n])return null;let{timeoutId:e,callback:t}=this.tasks[n];return e&&(clearTimeout(e),delete this.tasks[n]),typeof t!="function"?!1:(t(),!0)},clear(n){Array.isArray(n)||(n=[n]),n.filter(e=>this.tasks[e]).map(e=>{if(!this.tasks[e])return null;let{intervalId:t,timeoutId:i}=this.tasks[e];return i?clearTimeout(i):t&&clearInterval(t),delete this.tasks[e],e});}},H=new Proxy({turn:0,round:0,phase:0,currentID:void 0,isGameStart:!0,isPassed:!1,spellSpace:{},domContainer:["temp","phase","round","turn","game","long"].reduce((n,e,t)=>(n[e]=n[t]=[],n),{}),end(n){(this.isGameStart&&!this.isPassed||n===!1)&&(this.isGameStart=!1,this.isPassed=!0,z.seatUIs=[],z.friendGeneral=0,It(null),Wt(I.userID),P.reset(),document.querySelectorAll(".mizhu").forEach(e=>e.style.display="none"),console.warn("游戏已结束！")),n&&this.isPassed&&(this.isPassed=!1,this.turn=0,this.round=0,this.phase=0,this.currentID=void 0,this.spellSpace={},_.reset(),console.warn("游戏已重置！游戏即将开始！"),Ne(()=>P.init()));},ready(n){this.end(!0),_.cardList=n;let e=O.cardIDsOrder.filter(i=>n.includes(i)),t=e.concat(n.filter(i=>!e.includes(i))).filter(Boolean);de.init(t),ee.init(t,"2-255"),_.isGuoZhan=n.includes(1150),_.isDouDiZhu=n.includes(13005),_.isShanHeTu=n.includes(20100),ki(),console.warn("牌堆初始化完成");},start(){this.isGameStart||!_.size||(this.isGameStart=!0,this.isPassed=!1,console.warn("游戏开始！["+_.seatIDs+"] > "+_.mySeats),xi(),gi(_.size),ee.draw());},enter(n,e,t){var i,s,r,a,o,c,u,p,l,d,x;if(n>0)this.turn=n,this.round=0,this.clear("turn"),n==1&&(this.clear("game"),this.start());else {e==0?(this.currentID=t,this.round++,this.phase=0,[7011,3090,2143,3271].forEach(T=>delete this.spellSpace[T]),document.getElementById("suit").innerText="",document.getElementById("boTu").innerText="",document.getElementById("result").innerHTML="",this.clear("round"),I.autoBotSwitch===!0&&P.limit>0&&((a=(r=(s=(i=P.gamescene)==null?void 0:i.topMenu)==null?void 0:s.areaServerLabel)==null?void 0:r.text)!=null&&a.includes("身份"))&&(this.currentID==((d=(l=(p=(u=(c=(o=P.gamescene)==null?void 0:o.seatContainer)==null?void 0:c.seatUIs)==null?void 0:u.filter(T=>T.seat.currentHp>0))==null?void 0:p.map(T=>T.seat.index))==null?void 0:l.slice(-1))==null?void 0:d[0])?P.auto(3):this.currentID!=_.mySeats[0]&&P.auto(!0))):this.phase++,this.clear("phase");let y=document.getElementById("phrase"),S=parseInt((x=y.innerText.match(/\(([0-9])\)$/))==null?void 0:x[1]);this.phase==S?y.innerText=y.innerText.replace(/(回合)?(.{2,3})(阶段)? ?\(([0-9])\)$/,`$2>${["开始时","准备","判定","摸牌","出牌","弃牌","结束","结束时","结束后"][e]}($4)`):y.innerText=`${["回合开始时","准备阶段","判定阶段","摸牌阶段","出牌阶段","弃牌阶段","结束阶段","回合结束时","回合结束后"][e]} (${this.phase})`;}},clear(n,e,t){let i=this.domContainer[n];for(let s=i.length-1;s>=0;s--)t===void 0&&e!==i[s].SpellID&&i[s].count--,(!(i[s].count>0)||e===i[s].SpellID&&t===i[s].SeatID)&&(i[s].element.remove(),i.splice(s,1));}},{ownKeys(n){return Reflect.ownKeys(n.spellSpace)},getOwnPropertyDescriptor(n,e){return Object.getOwnPropertyDescriptor(n.spellSpace,e)},deleteProperty(n,e){return Reflect.deleteProperty(n.spellSpace,e)},get(n,e,t){return e in n?n[e]:Reflect.get(n.spellSpace,e,n.spellSpace)},set(n,e,t,i){return e in n?n[e]=t:Reflect.set(n.spellSpace,e,t,n.spellSpace),!0}}),_={cardList:[],seatUIs:[],seatIDs:[],orderIDs:[],mySeats:[],generals:{},shift:0,isShanHeTu:!1,isGuoZhan:!1,isDouDiZhu:!1,size:void 0,firstID:void 0,seatPos(n=8){return {0:[],1:[0],2:[0,4],3:[0,3,5],4:[0,1,4,7],5:[0,1,3,5,7],6:[0,1,3,4,5,7],7:[0,1,2,3,5,6,7],8:[0,1,2,3,4,5,6,7]}[n]},dealCard:()=>null,reset(){this.cardList=[],this.seatUIs=[],this.seatIDs=[],this.orderIDs=[],this.mySeats=[],this.generals={},this.shift=0,this.isShanHeTu=!1,this.isGuoZhan=!1,this.isDouDiZhu=!1,this.size=void 0,this.firstID=void 0,this.dealCard=(n,e)=>{n=parseInt(n),this.orderIDs.includes(n)||(this.firstID===void 0&&(this.firstID=n,console.warn("[PubGsCMoveCard]先手位置:"+n)),this.orderIDs.push(n),e>0&&!this.mySeats.includes(n)&&(this.mySeats.length?this.mySeats.push(n):this.setMyID(n)),this.update(!1,this.orderIDs)),this.orderIDs.length==this.size&&(this.dealCard=()=>null);};},getOrder(n){var i;if(this.seatUIs.length)return (i=this.seatUIs.find(s=>s.seatID==n))==null?void 0:i.order;let e=this.seatIDs.indexOf(this.firstID??this.seatIDs[0])%this.size,t=this.seatIDs.indexOf(parseInt(n));if(t!==-1)return (t-e+this.size)%this.size},getIndex(n){if(this.seatUIs.length)return this.seatUIs.findIndex(s=>s.seatID==n);let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,t=this.seatIDs.indexOf(parseInt(n));if(t<0)return;let i=(t-e+this.size)%this.size;return this.seatPos()[i]},getID(n){var s;if(this.seatUIs.length)return (s=this.seatUIs[this.seatPos().indexOf(parseInt(n))])==null?void 0:s.seatID;let e=(this.seatIDs.indexOf(this.mySeats[0])+this.shift)%this.size,t=this.seatPos().indexOf(parseInt(n));if(t<0)return;let i=(t+e+this.size)%this.size;return this.seatIDs[i]},sequence(n){let e=this.seatIDs.indexOf(n);return e<0?[]:this.seatIDs.slice(e).concat(this.seatIDs.slice(0,e))},update(n,e=this.orderIDs){if(e=e.slice(),e.length>this.seatIDs.length||e.length==this.seatIDs.length&&n!==!1)this.seatIDs=e,this.size=e.length;else if(n){for(let t=e.length;t<this.size;t++)e.push(((e[t-1]??-1)+1)%this.size);this.seatIDs=e,this.size=e.length;}this.draw();},fromUI(){var e,t,i,s,r,a;let n=(s=(i=(t=(e=P.gamescene)==null?void 0:e.seatContainer)==null?void 0:t.seatUIs)==null?void 0:i.map(o=>o.seat))==null?void 0:s.filter(o=>!o.isHide);(r=n==null?void 0:n.filter(o=>o.fixedViewId))!=null&&r.length&&(this.seatUIs=n.map(({index:o,fixedViewId:c})=>({seatID:o,order:c-1})),this.size=this.seatUIs.length,this.firstID=((a=this.seatUIs.find(o=>o.order==0))==null?void 0:a.seatID)??this.firstID,this.seatIDs=this.seatUIs.map(o=>o.seatID),this.setMyID(this.seatUIs[0].seatID),this.draw());},setMyID(n){if(n!==void 0&&this.mySeats[0]!==n){let e=this.mySeats.indexOf(n);e>-1&&this.mySeats.splice(e,1),this.mySeats.unshift(n);}},setGeneral(n,e,t=0,i=!1){if(!O.generalDict[e])return;this.generals[n]||(this.generals[n]=Array(this.isGuoZhan?2:1).fill(0)),this.generals[n][t]=e;let s=this.getOrder(n),r=document.getElementById(s+1);r&&r.style.setProperty("--No-content",`"${_.name(n)}"`);},find(n,e,t=!1){var i;return Array.isArray(e)||(e=[e]),(i=this.generals[n])==null?void 0:i.find(s=>e.find(r=>{var a;return t?(a=O.skinMap[s])==null?void 0:a.has(r):s==r}))},name(n,e){var s;let t=this.getOrder(n),i=(s=this.generals[n])==null?void 0:s.map(r=>O.generalDict[r]);return (i!=null&&i.some(Boolean)?i.map(r=>r||"暗").join("丨"):"一二三四五六七八"[t]+"号位")+(e?"":"丨"+"一二三四五六七八"[t])},draw(){this.seatIDs.forEach(n=>{let e=this.getOrder(n),t=document.getElementById(e+1);if(!t)return;let i=_.name(n);t.style.setProperty("--No-content",`"${i}"`);}),It();}},de=new Proxy({name:{},color:Array.from({length:7},()=>new Set),number:Array.from({length:14},()=>new Set),query:new Set,select:{name:new Set,color:new Set,number:new Set},cards:[],QCARD:class{constructor(n,e,t,i,s){this.id=n,this.name=e,this.color=t,this.number=i,this.type=s,this.key=-1;}plot(n){let e=this._button;if(!e){if(e=this._button=document.createElement("button"),e.className=this.color<=2?"shoupai R":"shoupai",!this.id)return e;e.id="Qcard"+this.id,e.innerHTML=`<span>${mn(this.color)+De(this.number)}</span><br>${this.name.substring(0,2)}`;}return (this.key!==n||n==1)&&(this.key=n,e.style.backgroundColor=n===0?"":n===1?"cyan":"#23201d",e.title=n===0?"牌堆":n===2?"弃牌堆":te.findKZ(this.id).zones.map(t=>{let[i,s,r]=t.split("-").map(a=>parseInt(a));return ee.name(s,i,null,r,r)}).join("/")),e}},[Symbol.iterator]:function*(){for(let n of this.cards)n!==void 0&&(yield n);},init(n){this.name={},this.color=Array.from({length:7},()=>new Set),this.number=Array.from({length:14},()=>new Set),this.type=Array.from({length:4},()=>new Set),this.query=new Set,this.select={name:new Set,color:new Set,number:new Set},this.cards=[],n.forEach(e=>{let{name:t,color:i,number:s,type:r}=se[e];t in this.name||(this.name[t]=new Set),this.name[t].add(e),this.color[i].add(e),this.number[s].add(e),this.type[r].add(e),i==3&&s>=2&&s<=9&&this.number[0].add(e),t.match(/^(冰|火|雷)?杀$/)&&this.color[Math.ceil(i/2)+4].add(e),this.cards[e]=new this.QCARD(e,t,i,s,r);});},onquery(n,e){if(this.select[n].delete(e)){if(this.select[n].size){Array.from(this[n][e]).forEach(t=>this.query.delete(t)),this.draw();return}}else this.select[n].add(e);this.query=["name","number","color"].filter(t=>this.select[t].size).reduce((t,i)=>new Set(Array.from(this.select[i]).flatMap(s=>Array.from(this[i][s])).filter(s=>!t.size||t.has(s))),new Set),this.draw();},queryone(n,e){this.query=new Set(Array.from(this[n][e])),this.draw();},draw(){const n=document.getElementById("cardTypeDetail");if(n.innerHTML="",this.query.size==0)return;let e=new Set(ee.unknown),t=new Set(ee.qipai),i=O.cardIDsOrder.filter(s=>this.query.has(s)).reduce((s,r)=>(e.has(r)?s[0].push(r):t.has(r)?s[2].push(r):s[1].push(r),s),[[],[],[]]);[0,1,2].forEach(s=>i[s].forEach(r=>n.appendChild(this.cards[r].plot(s))));}},{get(n,e,t){return typeof e=="number"||typeof e=="string"&&!isNaN(e)?n.cards[e]:Reflect.get(...arguments)}}),K=class K{static label(e){if(K.groups.has(e))return K.groups.get(e);const t=K.LABELs.shift();return K.groups.set(e,t),t}constructor(e,t=null,i="12-255",s=null,r=null){var a;this._key=e,this.zone=i,this.id=t??((a=this.next)==null?void 0:a.id)??this.key,this.next=s,this.prev=r,K.nodes.has(e)||K.nodes.set(e,new Set),K.nodes.get(e).add(this);}get head(){let e=this;for(;e.prev;)e=e.prev;return e}get end(){let e=this;for(;e.next;)e=e.next;return e}get key(){return this._key}set key(e){this._key!=e&&(K.nodes.get(this._key).delete(this),this._key=e,K.nodes.has(e)||K.nodes.set(e,new Set),K.nodes.get(e).add(this));}static get(e){return K.nodes.has(e)?Array.from(K.nodes.get(e)):[]}static init(e,t){return K.key=0,K.nodes=new Map,K.groups=new Map([[0,"?"]]),K.LABELs=Array.from({length:62},(i,s)=>String.fromCharCode(s+65)),e.map(i=>new K(0,i,t))}toString(){return this.next?this.prev?this.key+"<"+this.next.toString():this.zone+":"+this.key+"<"+this.next.toString():"["+this.id+"]"+(this.key>0?se[this.id].ncn:"？")}plot(e){var i;if(this.key<0&&this.key%2==0&&this.next)return this.next.plot(e);let t=this._button;return t||(t=this._button=document.createElement("button"),t.className="shoupai"),t.disabled=this.key<=0&&this.key%2==0,(e||this.key!=((i=t==null?void 0:t.dataset)==null?void 0:i.key)||this.key<=0&&K.label(this.key)!=t.innerHTML)&&(t.className="shoupai",t.id="card"+this.id,t.dataset.key=this.key,this.key>0?(t.classList.remove("G"),se[this.id].color>2?t.classList.remove("R"):se[this.id].color>0&&t.classList.add("R"),t.style.color="",t.style.fontSize="",t.title=new ee("unknown").cards.has(this)?K.findKZ(this.id).zones.map(s=>{let[r,a,o]=s.split("-").map(c=>parseInt(c));return ee.name(a,r,null,o,o)}).join("/"):se[this.id].ncn,t.innerHTML=`<span>${se[this.id].cn}</span><br>${se[this.id].name.substring(0,2)}`):(t.classList.add("G"),t.innerHTML="？")),t}swap(e){if(!e||e==this)return this;for([this.key,e.key]=[e.key,this.key],[this.id,e.id]=[e.id,this.id],[this.next,e.next]=[e.next,this.next],this.next&&(this.next.prev=this),e.next&&(e.next.prev=e);e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;for(e.plot(!0),ee.draw(e.zone),e=this;e.prev&&e.prev.id!==e.id;)e.prev.id=e.id,e=e.prev;return e.plot(!0),ee.draw(e.zone),this}create(e){const t=new K(this.key,this.id,this.zone,this.next,this);return this.key=e,this.next&&(this.next.prev=t),this.next=t,this}delete(){let e=!1;if(this.next){let t=this.next;return this.key=t.key,this.id=t.id,this.next=t.next,t.next?t.next.prev=this:new ee("unknown").cards.delete(t)&&(e=!0,this.prev&&new ee("unknown").cards.add(this)),K.nodes.get(t.key).delete(t),e}else return this.key===0?(this.key=this.id,vt(this.id,this.key),!0):null}destroy(e){let t=!1,i=this.key;for(;i<0;)this.delete()&&(t=!0),K.unpack(i)&&(t=!0),i=this.key;return this.key!=e&&(this.key=e??this.id,vt(this.id,this.key)),this.prev?K.unpack(this.prev.key):(this.plot(!0),ee.draw(this.zone)),t&&ee.draw("unknown"),this}identify(e,t=null){if(t!==null&&console.count("REidentify"+t+">"+this),this.id==e)return this.key>0?this:(t&&(this.end.id=t),this.destroy(),this);let i,s=new Set([this.key]),r=[[this.key,[]]];for(;r.length>0;){let[a,o]=r.shift();if(i=K.find(a,e),i){o.concat(i).reduce((c,u)=>c.swap(u).next,this);break}for(let c of K.get(a).filter(u=>u.next))s.has(c.next.key)||(s.add(c.next.key),r.push([c.next.key,o.concat(c)]));}if(i){if(t){let a=this;for(a.id=t;a.next;)a=a.next,a.id=t;}return this.destroy(),this}else {if(e>0)return this.identify(0,e);console.error("identify error: "+(e>0?e:t)+">"+this);}return null}static move(e,t){return Array.isArray(e)||(e=[e]),e==null||e.forEach(i=>i.zone=t),Array.from(new Set(e==null?void 0:e.map(i=>i.key))).filter(i=>i<=0).map(i=>K.unpack(i)).length?ee.draw("unknown"):Array.from(new Set(e==null?void 0:e.map(i=>i.key))).filter(i=>i>0&&de.query.has(i)).forEach(i=>{de[i].plot(t=="2-255"?2:1);}),e}static pack(e,t,i){if(!((e==null?void 0:e.length)>1&&(e!=null&&e.every(a=>a))))return;let s=new Set(e.map(a=>a.key));if(s.size===1)return [...s][0];K.key=K.key-1;let r;if(i){if(new Set(e.map(c=>c.head.zone)).size===1)return null;let o=Array.from(K.nodes.keys()).filter(c=>c<0);for(let c=0;c>=K.key;c--)if(!(o.includes(c*2-1)||o.includes(c*2-2))){r=c*2-i;break}o.filter(c=>c>r).sort((c,u)=>c-u).forEach(c=>{K.get(c).forEach(u=>{u.key=u.key-2,u.head.plot(!0);});}),r=-i;}else r=K.key*2-(t?2:1);return e.forEach(a=>{a.create(r),new ee("unknown").cards.delete(a),t||new ee("unknown").cards.add(a.end);}),ee.draw("unknown"),r}static unpack(e){if(e>0)return !0;const t=K.get(e);let i=new Set(t.map(r=>{var a;return (a=r.next)==null?void 0:a.key})),s=new Set(t.map(r=>r.head.zone));if(t.length===1||!s.has("1-255")&&(s.size===1||i.size===1&&e!==0)){K.groups.has(e)&&(K.LABELs.unshift(K.groups.get(e)),K.groups.delete(e));let r=t.map(a=>a.delete()).some(Boolean);return Array.from(new Set(t.filter(a=>a.prev).map(a=>a.prev.key))).forEach(a=>K.unpack(a)),t.filter(a=>!a.prev).forEach(a=>a.plot(!0)),Array.from(s).forEach(a=>ee.draw(a)),r}else return !1}static find(e,t){let i=K.get(e).find(s=>s.id==t);if(i===void 0&&e!=0){let s=K.get(0).find(r=>r.id==t);s&&(i=K.get(e).find(r=>r.end.key==0),i!==void 0&&s.swap(i.end));}return i}static findIDs(e,t=!1,i=new Set,s=new Set){return s.add(e),e>0||!t&&e==0?i.add(e):(t||e%2!=0)&&K.get(e).forEach(r=>{if(r.next){let a=r.next.key;s.has(a)||K.findIDs(a,t,i,s);}else t&&i.add(r.id);}),Array.from(i)}static findKZ(e,t=!1,i=new Set,s=new Set){let r=e;return !(r instanceof K)&&e>0&&(r=K.get(e)[0]),r instanceof K||(r=K.get(0).find(a=>a.id==e)),r instanceof K&&(!t&&r.key==0?(s.add(""),i.add(0)):(s.add(r.head.zone),i.has(r.key)||(i.add(r.key),(r.key<0||t&&r.key==0)&&K.get(r.key).forEach(a=>{a!=r&&K.findKZ(a,t,i,s);})),r.prev&&K.findKZ(r.prev,t,i,s))),{keys:Array.from(i),zones:Array.from(s)}}};_e(K,"key",NaN),_e(K,"nodes",new Map),_e(K,"groups",new Map([[0,"?"]])),_e(K,"LABELs",Array.from({length:50},(e,t)=>String.fromCodePoint(t<20?9312+t:t<35?12881-20+t:12977-35+t)));let te=K;const he=class he{static get paidui(){return Array.from(new Set(Array.from(te.get(0),({id:e})=>e).concat((he.obj["1-255"]??[]).map(({id:e})=>e))))}static get qipai(){return (he.obj["2-255"]??[]).filter(({key:e})=>e>0).map(({id:e})=>e)}static get unknown(){return Array.from(te.get(0),({id:e})=>e)}static shoupai(e){return (he.obj["5-"+e]??[]).filter(({key:t})=>t>0).map(({id:t})=>t)}constructor(e,t=5,i=null,s=null,r=null,a=null){var o;typeof e=="number"?(this.id=e,this.zone=t,this.id==0&&[0,1,2,3,9,12].includes(this.zone)&&(this.id=255),this.zone==9&&(this.zone=1),this.zone==4&&(this.id=this.id+"-"+(a||r||0)),this.zone==8&&(this.id="-"+(r||a||0)),this.zoneID=this.zone+"-"+this.id):typeof e=="string"?[this.zoneID,this.zone,this.id]=e.match(/(.*?)-(.*)/)??[e,e,""]:(o=e==null?void 0:e.every)!=null&&o.call(e,c=>c instanceof te),this.zoneID in he.obj||(he.obj[this.zoneID]=[]),this.pos=(i===65280||i===1?1:i===0||i===-1?-1:0)*(this.zone==1?-1:1),t!=1&&(this.pos=0),this.count=s;}show(e=[]){if(isNaN(te.key))return [];if(Array.isArray(e)||(e=[e]),e.filter(s=>s>0).length==0)return [];let t=[],i=e.slice();if(this.pos==-1)t=this.cards.slice(0,e.length).map(s=>s.identify(i.shift()));else if(this.pos==1)t=this.cards.slice(-e.length).map(s=>s.identify(i.shift()));else if(this.zone!=1){let s=i.map(r=>te.findKZ(r,!0).keys);this.cards.slice().sort((r,a)=>a.key-r.key).some(r=>{if(i.filter(a=>a>0).length==0)return !0;s.some((a,o)=>{if(a.includes(r.key))return t[o]=r.identify(i[o]),a.length=0,i[o]=null,!0});}),i.forEach((r,a)=>{var o,c,u,p;if(r&&(t[a]=(o=this.cards.find(l=>l.id==0))==null?void 0:o.identify(r),t[a]===void 0&&(t[a]=(c=this.cards.find(l=>l.key==0))==null?void 0:c.identify(r)),t[a]===void 0)){let l=te.get(r)[0];l?(t[a]=(p=(u=this.cards.find(d=>!t.includes(d)))==null?void 0:u.swap(l))==null?void 0:p.identify(r),console.error(this.zoneID+"SWAP Card ["+r+"] Shown")):(t[a]=new te(r,r,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+r+"] Shown"));}});}return he.draw(this.zoneID),t}remove(e=[],t,i){if(isNaN(te.key))return [];Array.isArray(e)||(e=[e]),i&&(this.count=i);let s=[],r=e.slice();if(this.pos==-1)s=this.cards.splice(0,this.count);else if(this.pos==1)s=this.cards.splice(-this.count);else if(e.filter(c=>c>0).length>0){let c=r.map(p=>te.findKZ(p,!0).keys);this.cards.slice().reverse().sort((p,l)=>l.key-p.key).some(p=>{if(r.filter(l=>l>0).length==0)return !0;c.some((l,d)=>{if(l.includes(p.key))return s[d]=this.cards.splice(this.cards.indexOf(p),1)[0],l.length=0,r[d]=null,!0});}),r.forEach((p,l)=>{var x;if(!p)return;let d=this.cards.findIndex(y=>y.id==0);if(d===-1&&(d=this.cards.findIndex(y=>y.key==0)),d>-1)s[l]=this.cards.splice(d,1)[0];else {let y=te.get(p)[0],S=this.cards.findIndex(T=>!s.includes(T));y&&S>=0?(s[l]=(x=this.cards.splice(S,1)[0])==null?void 0:x.swap(y),console.error(this.zoneID+"SWAP Card ["+p+"] Moved")):(s[l]=new te(p,p,this.zoneID),this.zone!=12&&console.error(this.zoneID+" No Card ["+p+"] Moved"));}});}else if(this.count==this.length||this.size==1)s=this.cards.splice(0,this.count);else if(this.zone==1||this.zone==2){var a=[...this.cards.filter(c=>c.key<=0).sort((c,u)=>u.key-c.key),...this.cards.filter(c=>c.key>0)];if([11104,3488,862].includes(t)){var o=new Set(a.map(c=>c.key));t==11104?o=new Set(Array.from(o).filter(c=>te.get(c).some(u=>{var p;return (p=de.type[3])==null?void 0:p.has(u.id)}))):t==3488?o=new Set(Array.from(o).filter(c=>te.get(c).some(u=>{var p,l,d;return ((p=de.name.雷杀)==null?void 0:p.has(u.id))||((l=de.name.火杀)==null?void 0:l.has(u.id))||((d=de.name.冰杀)==null?void 0:d.has(u.id))}))):t==862&&(o=new Set(Array.from(o).filter(c=>te.get(c).some(u=>de.number[6].has(u.id))))),a=a.filter(c=>o.has(c.key));}s=a.slice(0,this.count),s.some(c=>c.key>0||c.key%2)&&te.pack(a,!0),s.forEach(c=>this.cards.splice(this.cards.indexOf(c),1));}else te.pack(this.cards),s=this.cards.splice(0,this.count);return s.length!=this.count&&Array.from({length:this.count-s.length},()=>(console.error(this.zoneID+" New Card Moved"),s.push(new te(0,0,this.zoneID)))),e.filter(c=>c>0).length==this.count?e.forEach((c,u)=>{var p;return (p=s[u])==null?void 0:p.identify(c)}):s.filter(c=>c.key>0).length==this.count&&s.forEach(({id:c},u)=>{e[u]=c;}),he.draw(this.zoneID),s}add(e){if(!isNaN(te.key))return this.pos==-1?he.obj[this.zoneID]=te.move(e,this.zoneID).reverse().concat(this.cards):he.obj[this.zoneID]=this.cards.concat(te.move(e,this.zoneID)),he.draw(this.zoneID),e}set(e){isNaN(te.key)||(he.obj[this.zoneID]=te.move(e,this.zoneID),he.draw(this.zoneID));}get cards(){return he.obj[this.zoneID]??[]}get length(){var e;return ((e=this.cards)==null?void 0:e.length)??0}get size(){var e;return new Set(((e=this.cards)==null?void 0:e.map(t=>t.key))??[]).size}static init(e,t){he.obj={unknown:new Set},he.obj[t]=te.init(e,t);}static draw(e){var u,p;if(isNaN(te.key))return;if(e===void 0){Object.keys(he.obj).filter(l=>l.split("-")[0]=="5").forEach(l=>he.draw(l));return}let t=null,i=null,[s,r,a]=((u=e.split("-"))==null?void 0:u.map(Number))??[];if(e=="unknown")t="knownCards";else if(s==1)t="paiduiCards";else if(s==5)t=String(_.getOrder(r)+1);else if(s==4&&a in O.markSpell)t="mark"+e;else return;i=document.getElementById(t);let o=Array.from(he.obj[e]??[]);if(e=="unknown"&&(Array.from(new Set(o.map(l=>l.head.zone))).forEach(l=>he.draw(l)),de.draw()),!o||o.filter(l=>l.key>0||l.key%2!==0).length==0){i&&(i.classList.contains("markedCard")?i.remove():i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove()));return}if(i)i.querySelectorAll(":scope>.shoupai").forEach(l=>l.remove());else if(s==4)(p=document.getElementById(String(_.getOrder(r)+1)))==null||p.insertAdjacentHTML("beforeend",`<div id="${t}" class="markedCard"><span class = 'mark'>${O.markSpell[a]}</span></div>`),i=document.getElementById(t);else return;e!="1-255"&&o.sort((l,d)=>l.key>0&&d.key>0?0:d.key-l.key),s==4&&(i=i.firstElementChild||i);var c=1;o.map(l=>l.plot(e=="unknown")).reverse().forEach((l,d,x)=>{var y,S;if(l.dataset.key==((S=(y=x[d+1])==null?void 0:y.dataset)==null?void 0:S.key))c++;else {c>1&&(l.style.fontSize="",l.innerHTML=`<span>${l.innerHTML}×</span><br>${c}`);let T=parseInt(l.dataset.key);if(T<0){let k=te.findIDs(T).sort((j,Z)=>j>0&&Z>0?0:Z-j);l.title=c+"张："+k.map(j=>se[j].ncn).join("/"),e!=="1-255"&&k.length<5&&(l.style.fontSize="",l.innerHTML=k.map(j=>{var Z,w;return ((w=(Z=te.get(j)[0])==null?void 0:Z.plot())==null?void 0:w.outerHTML)||""}).join(""));}s==4?i.insertAdjacentElement("afterend",l):i.insertAdjacentElement("afterbegin",l),c=1;}});}static name(e,t,i,s,r){var o;let a;if(isNaN(t))return "?";if(t==1&&e==0)return "牌堆(游戏开始前) ";if(t==1&&e==255)a="牌堆";else if(t==2)a="弃牌堆";else if(t==3)a="处理区";else if(t==4)a="标记";else if(t==5)a="手牌";else if(t==6)a="装备";else if(t==7)a="判定区";else if(t==8)a="弹窗";else {if(t==9)return "洗牌";t==10?a="交换临时区":t==11?a="弃牌临时区":t==12?a="回收区":t==0&&(a="游戏外");}return ([0,1,2,3,8,11,12].includes(t)?"":_.name(e,!0))+([4,8].includes(t)?"["+((o=O.spellDict[t==8?r:s||r||0])==null?void 0:o.name)+"]":"")+(a??"zone"+t)+({0:"底",65280:"顶",65282:"*"}[i]??(i?":"+i:""))}};_e(he,"obj",{unknown:new Set});let ee=he;function Kn(n){const e=new Map;I.goods.forEach(t=>{e.set(t.GoodsBaseID,t.ChangeCount);}),n.forEach(t=>{const{GoodsBaseID:i,ChangeCount:s}=t;e.has(i)?e.set(i,e.get(i)+s):e.set(i,s);}),I.goods=Array.from(e,([t,i])=>({GoodsBaseID:t,ChangeCount:i}));}const pn={乐不思蜀:"乐",兵粮寸断:"兵",八卦阵:"八卦",爪黄飞电:"爪黄+1",的卢:"的卢+1",绝影:"绝影+1",骅骝:"骅骝+1",赤兔:"赤兔-1",大宛:"大宛-1",紫骍:"紫骍-1",紫騂:"紫骍-1",诸葛连弩:"连弩",木牛流马:"木马",顺手牵羊:"顺手",万箭齐发:"万箭",五谷丰登:"五谷",无中生有:"无中",过河拆桥:"过拆",桃园结义:"桃园",无懈可击:"无懈",南蛮入侵:"南蛮",借刀杀人:"借刀",铁索连环:"铁索",随机应变:"随机",远交近攻:"远交",以逸待劳:"逸劳",知己知彼:"知己",逐近弃远:"逐近",洞烛先机:"洞烛",出其不意:"出其",水淹七军:"水淹","无懈可击·国":"国无",挟天子以令诸侯:"挟令",方天画戟:"方天戟",雌雄双股剑:"雌雄剑",青龙偃月刀:"青龙刀",丈八蛇矛:"丈八矛",朱雀羽扇:"朱雀扇",白银狮子:"白银狮",三尖两刃刀:"三尖刀",乌铁锁链:"乌铁链",五行鹤翎扇:"五行扇",太公阴符:"太公符",无双方天戟:"无双戟",束发紫金冠:"紫金冠",玲珑狮蛮带:"玲珑带",红棉百花袍:"百花袍",红锦百花袍:"百花袍",四乘粮舆:"四乘舆",铁蒺玄舆:"铁蒺舆",飞轮战舆:"飞轮舆",鬼龙斩月刀:"鬼龙刀",国风玉袍:"国风袍",赤炎镇魂琴:"赤炎琴",奇门八阵:"奇门阵",绝尘金戈:"绝尘+1",修罗炼狱戟:"修罗戟",虚妄之冕:"虚妄冕",赤血青峰:"赤青锋",赤血青锋:"赤青锋",鸾凤和鸣剑:"鸾凤剑",七彩神鹿:"神鹿-1",金乌落日弓:"金乌弓",刑天破军斧:"刑天斧",长安大舰:"长安-2",禅让诏书:"诏书",镔铁双戟:"镔铁戟",继往开来:"继往",攻守兼备:"攻守",进退自如:"进退",洪荒之力:"洪荒",同舟共济:"同舟",力争上游:"力争",逆水行舟:"逆水",撒豆成兵:"撒豆",移花接木:"移花",联军盛宴:"联军",调虎离山:"调虎",火烧连营:"火烧",勠力同心:"勠力",调剂盐梅:"调剂",声东击西:"声东",增兵减灶:"增兵",草木皆兵:"草木",唯我独尊:"独尊",弃甲曳兵:"弃甲",金蝉脱壳:"金蝉",故步自封:"自封",金鼓笙旗:"金鼓",党同伐异:"伐异",燎原之火:"燎原","八卦阵(复制)":"八卦","仁王盾(复制)":"仁王盾","藤甲(复制)":"藤甲","白银狮子(复制)":"白银狮",商鞅变法:"变法",真龙长剑:"真龙剑",传国玉玺:"玉玺",厚积形:"厚积",桎梏形:"桎梏",盈冲形:"盈冲",背水形:"背水",整肃形:"整肃",寸兵形:"寸兵",雄黄酒:"酒"},se=new Proxy({cards:{0:{name:"",type:0,color:0,number:0,ncn:"?",cn:"0",c:"",n:0}},[Symbol.iterator]:function*(){for(let n in this.cards)yield this.cards[n];}},{get:function(n,e){var t;if(e in n)return n[e];if(!n.cards[e])if((t=O.cardDict)!=null&&t[e]){let{name:i,type:s,color:r,number:a,subType:o}=O.cardDict[e],c=mn(r),u=De(a);n.cards[e]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[o]||pn[i]||i,type:parseInt(s),color:parseInt(r),number:parseInt(a),ncn:i+c+u,cn:c+u,c,n:u};}else n.cards[e]=n.cards[0];return n.cards[e]}});function mn(n){return ["","♥","♦","♠","♣"][n]??""}function De(n,e=!0){return e&&parseInt(n)==1?"A":{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"}[n]??""}function Qn(){for(let e=11;e<=60;e++){const t=`https://web.sanguosha.com/220/h5_2/res/runtime/pc/Face/${e}.png`,i=document.createElement("img");i.src=t,i.classList.add("face"),i.onmousedown=()=>ze(`#${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);}["昏君，昏君啊","主公，别开枪，自己人","能不能快一点儿呀，兵贵神速啊","小内再不跳，后面还怎么玩儿啊","小内啊，您老悠着点儿","不好意思，刚才卡了","你可以打的再烂一点儿吗","哥们儿，给力点儿行吗","你们怎么忍心就这么让我酱油了","我，我惹你们了吗","姑娘，你真是条汉子","三十六计，走为上，容我去去便回","人心散了，队伍不好带啊","风吹鸡蛋壳，牌去人安乐","哥，交个朋友吧","妹子，交个朋友吧","我从未见过如此厚颜无耻之人","你随便杀，闪不了算我输","这波不亏","请收下我的膝盖","你咋不上天呢","放开我的队友，冲我来","见证奇迹的时刻到了"].forEach((e,t)=>{const i=document.createElement("span");i.classList.add("calRes"),i.textContent=e,i.onmousedown=()=>ze(`${e}`,!1),document.getElementsByClassName("chat-body")[0].appendChild(i);});}async function ze(n,e){oe("复制成功！");var t={1:"⒈",2:"⒉",3:"⒊",4:"⒋",5:"⒌",6:"⒍",7:"⒎",8:"⒏",9:"⒐",J:"Ⓙ",Q:"Ⓠ",K:"Ⓚ","+":" ",10:"⒑"};if(e&&Object.keys(t).forEach(s=>{n=n.replaceAll(s,t[s]);}),P.chat(n),window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",n);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var i=document.createElement("textarea");i.textContent=n,i.style.position="fixed",document.body.appendChild(i),i.select();try{return document.execCommand("copy")}catch(s){return console.warn("Copy to clipboard failed.",s),prompt("Copy to clipboard: Ctrl+C, Enter",n)}finally{document.body.removeChild(i);}}}async function Vn(n,e){let t=Re("CDK");t||(t=[]);let i=n.filter(a=>!t.includes(a));await ge(1e4);for(let a of i)Ye(`找到兑换码！<br>${a}<br>点击该通知即可兑换`,"ac-tooltip",1e4,"green",function(){!t.includes(a)&&t.push(a),je("CDK",t),Pt(a);});var s=document.getElementById(e);s.innerText="",n.length==0&&e=="CDK"&&(n=["所有兑换码已经兑换","迟点再看看吧"],nn("CDK"));for(let a of n){let o=document.createElement("button");o.className="calRes",o.innerText=a,o.onmousedown=function(){Pt(a),o.innerText="已兑换",setTimeout(()=>{o.textContent=a;},"500");},s.append(o);var r=document.createElement("br");s.append(r);}}function Jn(n){var e=document.getElementById("storeDetail");e.innerText="",n.length==0&&(n=["暂无集市数据"]);for(let t of n){let i=document.createElement("button");i.className="storeDetail",i.innerText=t,e.append(i);}}let Zn={9020101:"欢乐豆",100301:"手气卡",100201:"点将卡",1150001:"灵宝经诰",100401:"换将卡",200201:"诏令天下",112301:"校尉将印",112101:"朱砂",12119999:"桃花",111801:"功勋",1111801:"水晶碎片",1114301:"圣魂玄晶",112501:"大将军印",1142901:"夺宝券"};function Xn(n){return !Zn[n]}function xn(n,e,t,i){var s;if(document.getElementById("sec"+n)==null){let r=document.getElementById("lottery");const a=document.createElement("div"),o=document.createElement("div");o.innerHTML=O.secId[n].Name+" 次数："+i+"<br>",o.id="sec"+n+"+times",a.id="sec"+n,a.append(o),r.append(a),r.append(document.createElement("hr"));}if(typeof document.getElementById("sec"+n)<"u"&&document.getElementById(n+"+"+e)==null){const r=document.getElementById("sec"+n+"+times");r.innerHTML=O.secId[n].Name+" 次数："+i+"<br>";let a=document.getElementById("sec"+n);const o=document.createElement("div");o.className="suit",Xn(e)&&o.classList.add("r");const c=document.createElement("span"),u=document.createElement("span");c.innerText=((s=O.goodsID(e))==null?void 0:s.name)+" * ",u.innerText=t,c.id=n+"+"+e,u.id=n+"+"+e+"+number",o.append(c),o.append(u),a.appendChild(o);}else if(typeof document.getElementById(n)<"u"&&document.getElementById(n+"+"+e)!=null){const r=document.getElementById("sec"+n+"+times");r.innerHTML=O.secId[n].Name+" 次数："+i+"<br>";let a=document.getElementById(n+"+"+e+"+number"),o=parseInt(a.innerText);o+=t,a.innerText=o;}}function Ht(n){let e=document.getElementById("lastUseCard");const t=document.createElement("div");for(const s of n){if(s=="0")continue;var i=document.createElement("button");i.className=se[s].color<=2?"shoupai R":"shoupai";let r=document.createElement("span");r.innerText=se[s].cn,i.appendChild(r),i.appendChild(document.createElement("br")),i.innerHTML+=se[s].name.substring(0,2),t.append(i);}e.innerHTML=t.innerHTML;}const zt=new MutationObserver(n=>{n.forEach(e=>{const t=e.target,i=document.getElementById(t.id),s=document.getElementById("s"+t.id);if(s&&i&&(e.type==="childList"||e.type==="attributes")){const r=t.innerHTML;if(s.dataset.lastContent!==r){if(s){const a=t.cloneNode(!0);s.innerHTML=a.innerHTML,gn(s);}s.dataset.lastContent=r;}}});}),Yn={attributes:!0,childList:!0,subtree:!0};function gn(n){n&&n instanceof HTMLElement&&(n.scrollHeight>40?n.classList.add("show-ellipsis"):n.classList.remove("show-ellipsis"));}function yn(n,e){let t;return function(...i){clearTimeout(t),t=setTimeout(()=>n.apply(this,i),e);}}const $n=yn(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".sorder-body").forEach(e=>{gn(e);});});},500);window.addEventListener("resize",$n);function ot(){const n=document.getElementById("seatUI"),e=document.createDocumentFragment();for(let t of z.seatUIs)if(t.posY&&t.posX&&typeof t.actualSeatID<"u")if(document.getElementById("sor"+t.actualSeatID)==null){const i=document.createElement("div");i.className="sorderContainer",i.id="sor"+t.actualSeatID,i.style.top=t.posY+"px",i.style.left=t.posX+"px",i.style.width=(z.unscaledWidth+z.paddingRight)*z.scale+"px";const s=document.createElement("div");s.className="sorder-body",s.classList.add("sNo"+t.actualSeatID),s.id="s"+t.actualSeatID,i.appendChild(s);const r=document.getElementById(t.actualSeatID);r&&(zt.observe(r,Yn),e.appendChild(i));}else {const i=document.getElementById("sor"+t.actualSeatID);i.style.top=t.posY+"px",i.style.left=t.posX+"px",i.style.width=(z.unscaledWidth+z.paddingRight)*z.scale+"px";}if(z.seatUIs.length===0){zt.disconnect();for(let t=1;t<=8;t++){const i=document.getElementById("sor"+t);i&&i.remove();}}n.appendChild(e);}async function xt(n,e){for(let s of n){const{x:r,y:a}=O.Rcity[s.id],o=z.centerX+r*SystemContext.gameScale/window.devicePixelRatio+"px",c=z.centerY+a*SystemContext.gameScale/window.devicePixelRatio+"px";if(document.getElementById("city"+s.id+s.event)==null){const u=document.createElement("div");if(u.id="city"+s.id+s.event,u.className="city",u.style.position="absolute",u.style.fontSize="15px",u.style.left=o,u.style.top=c,typeof O.Rfight[s.event]<"u"){let l=[];for(let d of O.Rfight[s.event].generals){let x=d.start?"[先行]":"",[y,S]=Ft(d,Qe.difficulty);S?l.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+d.generalname+x+" "+y.join(" ")+"</span>"):l.push(d.generalname+x);}u.innerHTML=l.join("<br>").replace(/\n/g," ")+"<hr>"+O.Rfight[s.event].get.replace(/\n/g,"<br>");}else {let l=[];for(let d=1;d<4;d++){let x=s.event+d.toString().padStart(2,"0"),y=[];if(O.Rchoose[x])if(O.Rchoose[x].generals)for(let S of O.Rchoose[x].generals){let T=S.start?"[先行]":"",[k,j]=Ft(S,Qe.difficulty);j?y.push('<span style="color: rgb(240, 65, 85); font-weight: bolder">'+S.generalname+" "+T+k.join(" ")+"</span>"):y.push(S.generalname+T);}else y.push(O.Rchoose[x].lost)&&y.push("");l.push(y);}u.innerHTML=(O.Rchoose[s.event+"01"]?(O.Rchoose[s.event+"01"].lost==""?"":l[0].join("<br>").replace(/\n/g," ")+"<hr>")+O.Rchoose[s.event+"01"].get.replace(/\n/g,"<br>"):"")+(O.Rchoose[s.event+"02"]?"<hr>"+(O.Rchoose[s.event+"02"].lost==""?"":l[1].join("<br>").replace(/\n/g," ")+"<hr>")+O.Rchoose[s.event+"02"].get.replace(/\n/g,"<br>"):"")+(O.Rchoose[s.event+"03"]?"<hr>"+(O.Rchoose[s.event+"03"].lost==""?"":l[2].join("<br>").replace(/\n/g," ")+"<hr>")+O.Rchoose[s.event+"03"].get.replace(/\n/g,"<br>"):"");}document.getElementById("rogueUI").appendChild(u);}else {const u=document.getElementById("city"+s.id+s.event);u.style.left=o,u.style.top=c;}}const t=n.map(s=>"city"+s.id+s.event);document.querySelectorAll("div.city").forEach(s=>{t.includes(s.id)||s.remove();});}function lt(n,e="点击复制",t=!0,i=!1,s=null){let r=document.createElement("button");return r.className="calRes",r.title=e,r.disabled=i,r.innerText=n,r.onclick=()=>{ze(n,t),r.innerText="复制成功",setTimeout(()=>{r.textContent=n;},500);},r}async function jt(n){let e=n.slice().sort((r,a)=>r-a),t=[];function i(r,a,o){if(o===13){t.push(r.slice());return}if(!(o>13))for(let c=a;c<e.length;c++)c>a&&e[c]===e[c-1]||(r.push(e[c]),i(r,c+1,o+e[c]),r.pop());}i([],0,0);let s=document.getElementById("result");s.innerHTML="";for(let r of t.sort((a,o)=>o.length-a.length))if(s.appendChild(lt(r.map(a=>De(a,!1)).join("+"))),s.children.length>=15)break;s.innerHTML===""&&(s.innerHTML='<span class="textRes">【资援】无解！</span>');}async function ei(n,e=!1){function t(c,...u){let p=c.slice();for(let l=0;l<p.length;l++){for(let d=0;d<u.length;d++)if(p[l]-=u[d][l],p[l]<0)return !1;if(l>0&&p[l]>=2)return 0}return p}let i=n.reduce((c,u)=>(c[0]++,c[u]++,c),Array(14).fill(0)),s=Math.floor(i[14]/2),r=new Map([[0,[Array(14).fill(0)]]]);for(let c=1;c<=13;c++){let u=i[c];if(u!=0)for(let p of Array.from(r.keys()).sort((l,d)=>d-l)){let l=r.get(p);for(let d=1;d<=u;d++){let x=p+c*d;if(x>s)break;r.has(x)||r.set(x,[]);for(let y=0;y<l.length;y++){let S=l[y].slice();S[0]+=d,S[c]+=d,r.get(x).push(S);}}}}r.delete(0);let a=new Map;for(let c of Array.from(r.keys()).sort((u,p)=>p-u)){let u=r.get(c);for(let p=0;p<u.length;p++)for(let l=p;l<u.length;l++){let d=t(i,u[p],u[l]);d&&(a.has(d[0])||a.set(d[0],[]),u[p][0]<=u[l][0]?a.get(d[0]).push([u[p],u[l],d]):a.get(d[0]).push([u[l],u[p],d]));}}let o=document.getElementById("result");o.innerHTML="",Array.from(a.keys()).sort((c,u)=>c-u).some(c=>{if(a.get(c).sort((u,p)=>u[0][0]-p[0][0]).forEach(([u,p,l])=>{let d=document.createElement("button");d.className="calRes";let x=document.createElement("span"),y=document.createElement("span");x.innerText=u.flatMap((S,T)=>T>0?Array(S).fill(De(T,!1)):[]).join("+"),y.innerText=p.flatMap((S,T)=>T>0?Array(S).fill(De(T,!1)):[]).join("+"),d.appendChild(x),d.insertAdjacentHTML("beforeend","<span>=</span>"),d.appendChild(y),d.title="点击复制",d.onclick=function(){ze(this.innerText,!0);},e&&(d.title="点击“=”左侧或右侧的数字，将被点击一侧的数字分配给自己，另一侧的分配给张昌蒲",x.className="yanjiaospan",y.className="yanjiaospan",x.onclick=function(S){S.stopPropagation(),P.yanJiao([u,p,l],2);},y.onclick=function(S){S.stopPropagation(),P.yanJiao([u,p,l],0);}),o.appendChild(d);}),o.children.length>=5)return !0}),o.innerHTML===""?o.innerHTML='<span class="textRes">【严教】无解！</span>':e&&o.insertAdjacentHTML("afterbegin","界小抄：点下方数字可以自动分配牌<br>点击想要分配给自己的一组数字即可");}async function ti(n,e){if(!(n!=null&&n.length))return;let t=n.slice().sort((a,o)=>a-o),i=[];function s(a,o,c){if(!(c>13)){i.unshift(a.slice()),e&&(i[0].K=c===13?a.length:0);for(let u=o;u<t.length;u++)u>o&&t[u]===t[u-1]||(a.push(t[u]),s(a,u+1,c+t[u]),a.pop());}}s([],0,0);let r=document.getElementById("result");r.innerHTML="";for(let a of i.filter((o,c,u)=>!u.some(p=>o.length<p.length&&o.every(l=>p.includes(l)))).sort((o,c)=>c.K-o.K||c.length-o.length))r.appendChild(lt(a.map(o=>De(o,!1)).join("+"))),e&&a.K&&r.lastChild.classList.add("textRes");}async function qt(n,e){function t(o,c,u,p,l){if(u.length===l+1){c.push([...u,...u.reduce((d,x)=>(d.splice(d.indexOf(x),1),d),o.slice())]);return}for(let d=p;d<o.length;d++)d>p&&o[d]===o[d-1]||(u.push(o[d]),u[0]+=o[d],t(o,c,u,d+1,l),u[0]-=u.pop());return c}let i=document.getElementById("result");if(i.innerHTML="",!(n!=null&&n.length)||!(e!=null&&e.length))return;let s=Math.max(n.length,e.length);n.sort((o,c)=>o-c),e.sort((o,c)=>o-c);for(let o=2;o<=s;o++){let c=t(n,[],[0],0,o);t(e,[],[0],0,o).forEach(u=>c.forEach(p=>{u[0]>p[0]&&u.slice(1,o+1).every(l=>!p.slice(1,o+1).includes(l))&&(s<3||Array.from({length:o}).some((l,d)=>u[d+1]<p[d+1]))&&i.appendChild(lt(u.slice(1,o+1).map(l=>De(l))+"→"+p.slice(1,o+1).map(l=>De(l)),"点击复制",!1));}));}let r=Array.from(new Set(e)),a=Array.from(new Set(n));r.forEach(o=>{let c=a.filter(u=>u<o);c.length&&i.appendChild(lt(De(o)+"→"+c.map(u=>De(u)).join("/"),"点击复制",!1));}),i.innerHTML===""&&(i.innerHTML='<span class="textRes">【易城】无法交换！</span>');}async function gt(n){var c,u,p;if(!(n!=null&&n.allData)){z.cities=[],xt(z.cities),document.getElementById("centerUI").classList.remove("show"),document.getElementById("centerUI").classList.add("hide");return}const e=document.getElementById("centerUI");e.classList.remove("hide"),e.classList.add("show");let t=n.allData,i=t.shopData,s=t.chapterData,r=t.generalpool;if(i){i.bShow=!0;let l=[];if(i.itemId&&O.Rplot)for(let d of i.itemId)O.Rplot[d]&&l.push(O.Rplot[d].name);Jn(l);}if(r&&r.general_change&&r.general_change.length>0){let l=r.general_change.map(d=>O.generalDict[d]||`Unknown (${d})`);Ye(`小抄提示：可换将为${l.reverse().join(", ")}`,"acTooltip",1e4,"green",null,!0);}let a=t.seasonData,o=a&&a.difficulty;o&&(Qe.difficulty=o),Qe.general=((u=(c=t.gameData)==null?void 0:c.myGeneral)==null?void 0:u.uGeneralId)??0,Qe.itemId=((p=t.gameData)==null?void 0:p.itemId)??[],s&&s.locations&&(z.cities=s.locations.map(l=>({id:l.location,event:l.event})),O.Rcity&&xt(z.cities));}const ni=(()=>{class n{constructor(){this.id=0,this.goods_id=0,this.goods_cnt=0,this.price_type=0,this.price_num=0,this.stock=0,this.buy_limit=0,this.ori_price=0,this.all_bought_cnt=0,this.self_bought_cnt=0;}Read(s){this.id=s.readUnsignedByte(),this.goods_id=s.readUnsignedInt(),this.goods_cnt=s.readUnsignedInt(),this.price_type=s.readUnsignedByte(),this.price_num=s.readUnsignedInt(),this.stock=s.readUnsignedInt(),this.buy_limit=s.readUnsignedByte(),this.ori_price=s.readUnsignedInt();}UpdateDate(s){this.goods_id=s.goods_id,this.goods_cnt=s.goods_cnt,this.price_type=s.price_type,this.price_num=s.price_num,this.stock=s.stock,this.buy_limit=s.buy_limit,this.ori_price=s.ori_price,this.all_bought_cnt=s.all_bought_cnt,this.self_bought_cnt=s.self_bought_cnt;}}function e(i){i.position=0;let s=[],r=i.readBoolean();if(i.Data.length<=1)return null;let a=i.readUnsignedInt(),o=i.readUnsignedInt(),c=new Date(a*1e3).toISOString().slice(5,16).replace("T"," "),u=new Date(o*1e3).toISOString().slice(5,16).replace("T"," "),p=i.readUnsignedInt();for(let l=0;l<p;l++){let d=new n;d.Read(i);let x=s.find(y=>y.id==d.id);x?x.UpdateDate(d):s.push(d);}p=i.readUnsignedInt();for(let l=0;l<p;l++){let d=i.readUnsignedInt(),x=i.readUnsignedInt(),y=s.find(S=>S.id==d);y&&(y.all_bought_cnt=x);}p=i.readUnsignedInt();for(let l=0;l<p;l++){let d=i.readUnsignedInt(),x=i.readUnsignedInt(),y=s.find(S=>S.id==d);y&&(y.self_bought_cnt=x);}return {commonVo:s,start_time:a,end_time:o,start:c,end:u,next:r}}let t=!1;return async i=>{if(t)return null;const s=document.querySelectorAll('.left input[type="checkbox"]');let r=e(i);if(!r)return null;let{commonVo:a,start_time:o,end_time:c,start:u,end:p,next:l}=r;if(l)return;o=(o-8*60*60)*1e3;let d=a.map(({goods_id:S,goods_cnt:T,price_type:k,price_num:j,stock:Z,buy_limit:w,ori_price:E,all_bought_cnt:U,self_bought_cnt:F},A)=>{var me;let q=j+["","通用元宝","元宝","银两"][k]+": "+((me=O.goodsID(S))==null?void 0:me.name)+(T>1?"*"+T:""),re=`${u} ~ ${p} 共${Z}个`,ue=U>=Z||F>=w;return Object.assign(s[A].dataset??{},{goods_id:S,start_time:o,goods:q}),{goods_id:S,goods:q,title:re,disabled:ue}}),x=document.getElementsByClassName("right")[0];x&&(x.innerHTML=d.map(({goods:S,title:T,disabled:k})=>`<span class="secKillDetailText${k?" gray":""}" title="${T}">${S}</span>`).join(""));let y=x.start-6e4;return y>Date.now()&&le.set("miaosha",()=>{oe(`${u}
秒杀即将开始！
`+d.map(({goods:S})=>S).join(`
`)),t=!0,setTimeout(()=>{t=!1;},66666);},y),i.Size==i.position}})();let ii=["巳蛇","灵动","八门","盾弓","智迟","持盈","卫主","不死","刚烈","觉醒","悲鸣","断肠","节命","先机","悲鸣","忘魂","雅士","挥泪","不屈","封冻","灵躯","武魂","已蛇"];const ut={getspell:0,getspell_ZD:1,getspell_KN:2,getspell_EM:3,getspell_LY:4};function Ft(n,e){let t=[],i=!1,s=si(e);const r=ut[s];let a=Object.keys(ut).filter(o=>ut[o]<=r).map(o=>n[o]).filter(Boolean).join(";");a=a==null?void 0:a.split(";").map(o=>{var c;return ((c=O.spellDict[o])==null?void 0:c.name)||"无收录技能"});for(let o of a)ii.includes(o)&&(t.push(o),i=!0);return [t,i]}function si(n){switch(Math.floor((n-1)/5)){case 0:return "getspell";case 1:return "getspell_ZD";case 2:return "getspell_KN";case 3:return "getspell_EM";case 4:return "getspell_LY";default:return "getspell"}}var qe=[],yt=[],Kt={290:"推锋",766:"匡弼"},Ce=[],nt={},it={},He={},Me={},st=new Map,We=()=>({name:"加载中"}),we=[],bt={},wt={},Ie={},ke={},ai={},St={},kt={};Object.assign(O,{cardDict:qe,cardIDsOrder:yt,spellDict:Ce,generalDict:nt,skinSP:it,skinDict:He,skinMap:Me,bigSkin:st,goodsID:We,rogejson:ke,gxjson:ai,Rfight:Ie,Rchoose:wt,Rcity:bt,secId:St,vskinMap:kt,Rplot:we});async function ri(n){return new Promise(e=>JSZipUtils.getBinaryContent(window.location.host==="test.sanguosha.com"?"https://test.sanguosha.com/h5/res/config//Config_w.sgs":"https://web.sanguosha.com/220/h5_2/res/config/Config_w.sgs?v="+window.resourceVersion,(t,i)=>JSZip.loadAsync(i).then(async s=>{var Z;var r=(w=>w.getFullYear().toString()+(w.getMonth()+1).toString().padStart(2,"0")+w.getDate().toString().padStart(2,"0"))(new Date);let a=["sys_playcard","cha_spell","character","hd_roguelike","hd_1v1_rogue","sys_h5_shop","sys_gs_dbs_fs_goodsbaseinfo","sys_server_item_drops_templete_config","sys_h5_dbs_clientserverpub","cha_gs_dbs_fs_skininfo","gn_dbs_quest","sys_h5_quest","sys_h5_task","ff_dbs_lottery_new","ff_exchange_new","sys_treasure_chest","gn_dbs_giftbag","ff_tiangong","ff_chess"];var o=await Promise.all(a.map(w=>s.file(w+".sgs").async("arraybuffer").then(E=>JSON.parse(new TextDecoder().decode(new Zlib.Gunzip(CtrUtil.Ctr.Ofb_Dec(E)).decompress()))))).then(w=>a.reduce((E,U,F)=>(E[U+".sgs"]=w[F],E),{}));function c(w,E){if(typeof w!="object")return w;let U={};for(let F in w){let A=E.get(F)||F;U[A]=w[F];}return U}var u=new Map([["id","编号"],["name","名称"],["time","时间"],["desc","说明"],["reward","奖励"],["price","价格"],["max","限购"],["effect","效果"],["info","信息"]]),p=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.reduce((w,E)=>(w.set(E.a,E),w),new Map),l=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.abbreviation.field.reduce((w,{Short:E,Long:U})=>(w.set(E,U),w),new Map),d=o["sys_server_item_drops_templete_config.sgs"].AllDrop.DropTemplete.DropGroup.DropItem.reduce((w,E)=>(w.has(E.a)||w.set(E.a,[]),w.get(E.a).push(E.d),w),new Map);We=(()=>{var w={};return function(E){if(E=parseInt(E),w[E])return w[E];let U=c(p.get(E),l),F=o["sys_h5_shop.sgs"].root.itemtips.find(({a:q})=>q==E),A=U.usedeffect&&T(U.usedeffect);return w[E]={...U,...F&&{info:F.e},...A&&{effect:A}}}})();var x={};function y(w){var U;let E=w==null?void 0:w.replace(/([^0-9,\.])/g,"").split(",").map(F=>parseInt(F));return (E==null?void 0:E.length)<2?w:(x[E[0]]??(x[E[0]]=(U=p.get(E[0]))==null?void 0:U.b)??E[0])+(parseInt(E[1])>1?"*"+E[1]:"")}var S={};function T(w){let E=parseInt(w);if(E!=1e3&&Math.abs(E)>0)return S[E]??(S[E]=(d.get(Math.abs(E))??[]).map(U=>{var F;return ((F=p.get(U))==null?void 0:F.b)??T(U)}).join(E>0?"/":"&"))}Ce=o["cha_spell.sgs"].GameSpells.spell.reduce((w,{a:E,c:U,o:F})=>{var q,re;let A={name:U,spellid:E,desc:((re=(q=F==null?void 0:F.replace(/<[^\<\>]*>/g,""))==null?void 0:q.replace(/#.*/g,""))==null?void 0:re.replace(/[;\n]+$/g,""))||""};return (A.desc.includes("暗置")||A.desc.includes("扣置")||A.desc.includes("移出"))&&(Kt[E]=pn[A.name]??A.name),w[E]=A,w},[]);let k=o["sys_playcard.sgs"].abbreviation.reduce((w,{Short:E,Long:U})=>(w.set(E,U),w),new Map);if(qe=o["sys_playcard.sgs"].GamePlayCards.card.map(w=>c(w,k)).reduce((w,E)=>{var U,F;return w[E.id]={...E,name:E.name??((U=Ce[E.spellId])==null?void 0:U.name),desc:(F=Ce[E.spellId])==null?void 0:F.desc},w},[]),yt=o["sys_playcard.sgs"].GamePlayCards.card.sort((w,E)=>w.c-E.c||w.d-E.d||w.h-E.h||w.m-E.m||w.g-E.g||w.f-E.f||w.a-E.a).map(({a:w})=>w),st=new Map(o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.items.item.map(w=>[String(w.a),[w.a,w.c,w.v||w.q,w.r]]).reverse()),He=o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.reduce((w,{skinID:E,name:U,skinlevel:F,dongPoint:A})=>{let q=parseInt(E/100);return w[q]||(w[q]={}),w[q][E]={level:{"0,0":"普通","0,1":"稀有","0,2":"史诗","0,3":"传说","0,4":"限定"}[F]||"未知",name:U,state:A!==void 0},w},{}),it=o["cha_gs_dbs_fs_skininfo.sgs"].generalskin.speciaSkin.filter(w=>String(w.skinID).includes("_")).reduce((w,E)=>{let[U,F]=E.skinID.split("_").map(Number);return w[U]?w[U].includes(F)||w[U].push(F):w[U]=[F],w},{}),Object.entries(it).forEach(([w,E])=>{var A,q;(A=st.get(w))==null||A.push(E);let U=parseInt(w/100),F=(q=He[U])==null?void 0:q[w];F&&(delete He[U][w],E.forEach(re=>{He[U][w+"_"+re]={...F,name:F.name+re};}));}),nt=o["character.sgs"].GameCharacters.character.reduce((w,{a:E,ai:U,b:F})=>(w[E]=(U||"")+(F==null?void 0:F.replaceAll("&","")),w),{}),o["character.sgs"].GameCharacters.character.forEach(({a:w,v:E})=>{if(typeof E!="string"){Me[w]=new Set([w]);return}let U=[w,...E.split(";").map(A=>parseInt(A))],F=U.find(A=>A in Me);if(F){let A=Me[F];U.filter(q=>!A.has(q)).forEach(q=>(Me[q]=A).add(q));}else {let A=new Set(U);U.forEach(q=>Me[q]=A);}}),kt=o["character.sgs"].WuJiangs.Spgroup.reduce((w,E)=>{const U=E.spgenerals?E.spgenerals.split(",").map(Number):[];return U.forEach(F=>{w[F]=new Set(U);}),w},{}),St=o["ff_tiangong.sgs"].root.Common.reduce((w,E)=>(w[E.Id]=E,w),{}),typeof n!="string"){let w=o["gn_dbs_giftbag.sgs"].giftsys.gifts.giftsItem.Item.filter(E=>E.allServerWord&&!E.platform&&(!E.level||E.level=="0,201")&&E.endtime>=r&&E.begintime<=r).sort((E,U)=>E.endtime-U.endtime).map(({c_allServerWord:E,allServerWord:U})=>E||U).filter(Boolean);Vn(w,"CDK");}if(Object.assign(O,{cardDict:qe,cardIDsOrder:yt,markSpell:Kt,spellDict:Ce,generalDict:nt,skinSP:it,skinDict:He,skinMap:Me,bigSkin:st,goodsID:We,secId:St}),(typeof n!="string"||n=="roge")&&async function(w,E){bt=w.Root.Level.reduce((f,{cityID:m,cityname:b,citypic:h,citycoordinate:C,startshow:g})=>{let[N,Y]=C.split(",").map(Number);return f[m]={x:N,y:-Y,boss:g,name:b??(h==null?void 0:h.replace(/^city_([0-9])_(.+)*\.png$/,(Q,M,ae)=>({"1jjy":"将军营","1jl":"箭楼","1wl":"望楼","1fht1":"烽火台(左)","1ck":"仓库","1yf":"营房","1fht2":"烽火台(右)","1sjc":"神君祠","2xsj":"西市集","2wl":"望楼","2dsj":"东市集","2wk":"武库","2hgl":"挥公陵","2sdg":"舜帝宫","2gcm":"干城门","2ywt":"演武台","3ds":"东市","3gg":"桂宫","3bg":"北宫","3wyg":"未央宫","3wk":"武库","3mgg":"明光宫","3clg":"长乐宫","4js":"金市","4lyt":"凌云台","4hly":"华林园","4tc":"太仓","4tx":"碳墟","4smm":"司马门","4wk":"武库","4sz":"石址","5my":"梅园","5fhl":"凤凰林","5lt":"龙亭","5wk":"武库","5wl":"望楼","5cm":"城门","5ql":"谯楼","5clg":"陈留宫","6jkg":"建康宫","6ql":"戚里","6wl":"望楼","6ycq":"邺城桥","6ywt":"演武台","6sg":"书馆","6wfl":"万福楼","6wk":"武库","6tqt":"铜雀台"})[M+ae]??Q))},f},{}),w.Root.Tactics.forEach(({plot:f,plotname:m,plotdesc:b,school:h,money:C,level:g})=>{we[f]={name:m.replaceAll("·",""),desc:b.replaceAll(" ",""),school:h,money:C,level:g,type:2};}),w.Root.Spell.forEach(({id:f,spellid:m,money:b,level:h})=>{var C,g;we[f]={name:(C=Ce[m])==null?void 0:C.name,desc:(g=Ce[m])==null?void 0:g.desc,spellid:m,money:b,level:h,type:3};}),w.Root.Card.forEach(({id:f,cardid:m,isequip:b,money:h,level:C})=>{var g=qe[m];we[f]={name:{6:"火杀",7:"雷杀",11:"冰杀",12:"闪闪"}[g.subType]??g.name,desc:g.desc,color:g.color,number:g.number,money:h,level:C,type:4+b,rType:(g.type*10+g.subType)*100+b};});var U=w.Root.Roundid.reduce((f,{useSeason:m})=>m),F=new Map,A=w.Root.Text.reduce((f,{ID:m,text:b})=>(f[m]=b,f),[]);w.Root.General=(f=>w.Root.General.map(m=>c(m,f)))(w.root.abbreviation.reduce((f,{Short:m,Long:b})=>(f.set(m,b),f),new Map)),w.Root.Adventure.forEach(f=>{f.chapname=A[f.chapname]??f.chapname;});let q=w.Root.RewardGroup.reduce((f,{reward:m,rewarddesc:b,allreward:h,abandonmoney:C})=>{var g,N;return f[m]=(C?C+"铜币/":"")+((N=(g=h==null?void 0:h.split(";"))==null?void 0:g.flatMap(Y=>Y==null?void 0:Y.split(",")))==null?void 0:N.map(Y=>["随机","普通","稀有","史诗","传说"][Y]).join("/"))+b.replace("多选一","自选"),f},w.Root.Other.reduce((f,{reward:m,rewardname:b})=>(f[m]=b,f),{}));var re=w.Root.Chapter.reduce((f,{seasonID:m,chapter:b,cityName:h,bosslocation:C,location:g})=>(g.split(";").forEach(N=>{f[N]=`${m}-${b}${h}`;}),f[C]=`${m}-${b}${h}BOSS`,f),{}),ue=w.Root.General.reduce((f,m)=>(f[m.generalgroup]||(f[m.generalgroup]=[]),f[m.generalgroup].push(m),m.generalname=m.generalname.replace("&",""),f),{});w.Root.General.forEach(f=>{f.GeneralRank||(f.GeneralRank=0),f.JumpStage&&(f.next=(([m,b])=>ue[m][b-1]??ue[m][0])(f.JumpStage.split(";"))),f.info={general:f.generalname,hp:f.hp,maxhp:f.maxhp,card:f.cardnum,draw:f.draw,sha:1+f.exshatimes,armor:f.armor,getarmor:f.getarmor,...f.next?{next:f.next.generalname}:{}},f.spells=["","_ZD","_KN","_EM","_LY"].flatMap((m,b)=>{var h;return (((h=f["getspell"+m])==null?void 0:h.split(";"))??[]).map(C=>Ce[C]).filter(Boolean).map(C=>({...C,level:b}))}),f.spell=f.spells.map(({name:m})=>m).join(","),f.cards=["","_ZD","_KN","_EM","_LY"].flatMap((m,b)=>{var h,C;return [...((h=f["carddesc"+m])==null?void 0:h.split(";"))??[],...((C=f["equip"+m])==null?void 0:C.split(";"))??[]].map(g=>qe[g]).filter(Boolean).map(({id:g})=>({id:g,ncn:se[g].ncn,level:b}))}),f.card=f.cards.map(({ncn:m})=>m).join(",");}),Ie=w.Root.Fight.reduce((f,m)=>{function b(h,C,g=!1){h&&(m.fight+=R(h.info),m.lost+=(h.start?"[先手]":"")+h.generalname,h.next?(m.lost+=">",h.next.stage=C,h.next.info.pre=h.generalname,m.generals.push(h.next),b(h.next,C+1,g)):g||(m.fight+="+",m.lost+=" "));}if(m.generals=[...ue[m.Ggroup]??[]],m.fight="",m.lost="",m.startnum){let h=m.generals.find(C=>C.generalID==m.startnum);h&&(h.start=!0);}return m.generals.forEach((h,C,g)=>b(h,1,C==g.length-1)),m.get=m.itemgroup+`铜币
`+(m.rewarditem?String(m.rewarditem).split(";"):[]).concat(String(m.reward).split(";")).map(h=>q[h]).join(`
`),m.text=A[m.text]??m.text,m.name=A[m.name]??m.name,f[m.fightID]=m,f},[]);for(let f in ue)f in Ie||(Ie[f]={generals:ue[f]});if(wt=w.Root.Choose.reduce((f,m)=>{var b;return m.type==7?(f[m.effectID]=Ie[m.event1],F.set(m.event1,(b=w.Root.Adventure.find(h=>h.ID===parseInt(m.effectID/10)))==null?void 0:b.chapname)):m.type==3&&m.event1=="2"?f[m.effectID]={get:"营地"}:f[m.effectID]={lost:(h=>h&&"失去 "+h)(B(m.lostitem,m.lostnum,m.effectID)),get:(h=>h&&m.showitem?h.replace("随机","特定"):h)(B(m.getitem,m.getnum,m.effectID))},f},[]),Object.assign(O,{Rfight:Ie,Rchoose:wt,Rcity:bt,vskinMap:kt,Rplot:we}),!n||n=="roge"){var me=Object.entries(ue).reduce((f,[m,b])=>{var N,Y,Q,M,ae;let h=m.length<6?m.slice(-3):m.slice(0,2)!=="99"?m.slice(-5,-2)+">":"*"+m.slice(-2),C=m.length<6?m.slice(0,-3)-2:m.slice(0,2)!=="99"?m.slice(0,-5)-2:m.slice(-3,-2)-m.slice(-4,-3)+9;if(["新年大吉"].includes(((N=Ie[m])==null?void 0:N.name)??((Y=Ie[parseInt(h)+4e3])==null?void 0:Y.name)))return f;f[h]||(f[h]={fight:((Q=Ie[m])==null?void 0:Q.name)??((M=Ie[parseInt(h)+4e3])==null?void 0:M.name)??"",generals:{}}),F.has(m)&&(f[h].event=F.get(m));let g=f[h].generals;return (((ae=Ie[m])==null?void 0:ae.generals)??b).forEach(X=>{let ie=(h.startsWith("*")?C:"")+(X.stage||"")+"#"+X.generalID;for(;;){if(!g[ie])g[ie]={general:(X.info.pre?">":"")+X.generalname+(X.info.next?">":""),info:R(X.info),levels:[],start:[],infos:{},spell:{},card:{},ad:{}};else if(g[ie].levels.includes(C)){ie+="@";continue}break}let xe=g[ie];C%10<6&&C<20&&(xe.levels.push(C),X.start&&xe.start.push(C)),xe.infos[C]=X.info,X.otherad&&(xe.ad[C]=X.otherad),X.spells&&X.spells.forEach(fe=>{xe.spell[fe.spellid]||(xe.spell[fe.spellid]={...fe,levels:[],level:void 0}),C%10<6&&C<20&&xe.spell[fe.spellid].levels.push(C+(fe.level??0));}),X.cards&&X.cards.forEach(fe=>{xe.card[fe.id]||(xe.card[fe.id]={name:fe.ncn,levels:[],level:void 0}),C%10<6&&C<20&&xe.card[fe.id].levels.push(C+(fe.level??0));});}),f},{});Object.entries(me).forEach(([f,m])=>{me[f].shift=f.startsWith("*")&&Math.min(...Object.values(m.generals).flatMap(b=>b.levels))==1?1:0,m.generals=Object.values(m.generals).map(b=>(b.level=Math.min(...b.levels.sort((h,C)=>C-h))-me[f].shift,b.level=b.level,b.spell=Object.values(b.spell).map(h=>{let C=Math.min(...h.levels.sort((g,N)=>N-g));return h.levels.some((g,N,Y)=>g<10&&!Y.includes(g+10)&&(b.levels.includes(g+10)||b.levels.length==2&&b.levels.includes(10)))&&(h.level=[C]),h.levels.some(g=>g<10)&&(g=>{g.length&&(h.level=[C,g[g.length-1]]);})(h.levels.filter((g,N,Y)=>g>=10&&!Y.includes(g-10))),h.level=(h.level??C)-me[f].shift,delete h.levels,delete h.spellid,h}).sort((h,C)=>{let g=N=>N[1]>=10?N[1]:N[0]??N;return g(h.level)%10-g(C.level)%10||g(h.level)-g(C.level)}),b.card=Object.values(b.card).map(h=>{let C=Math.min(...h.levels.sort((g,N)=>N-g));return h.levels.some((g,N,Y)=>g<10&&!Y.includes(g+10)&&(b.levels.includes(g+10)||b.levels.length==2&&b.levels.includes(10)))&&(h.level=[C]),h.levels.some(g=>g<10)&&(g=>{g.length&&(h.level=[C,g[g.length-1]]);})(h.levels.filter((g,N,Y)=>g>=10&&!Y.includes(g-10))),h.level=(h.level??C)-me[f].shift,delete h.levels,h}).sort((h,C)=>{let g=N=>N[1]>=10?N[1]:N[0]??N;return g(h.level)%10-g(C.level)%10||g(h.level)-g(C.level)}),b.card.length||delete b.card,b.info=Object.values(b.infos).reduce((h,C)=>(Object.keys(h).forEach(g=>{C[g]>h[g]&&(h[g]=C[g]);}),h),{hp:0,card:0,draw:0,sha:0}),Object.keys(b.ad).length?Object.keys(b.ad).sort((h,C)=>C-h).forEach((h,C,g)=>{(h>=10&&b.ad[h]==b.ad[h%10]||b.ad[h]==b.ad[g[C+1]])&&delete b.ad[h];}):delete b.ad,b.start.length?b.start=Math.min(...b.start):delete b.start,delete b.infos,delete b.levels,b)).sort((b,h)=>b.level-h.level);});var v=w.Root.UniversalGroup.filter(f=>f.fightgroup!==void 0).reduce((f,m)=>{f[m.fightID]||(f[m.fightID]={});let b=String(m.fightgroup).slice(-3);return f[m.fightID][b]||(f[m.fightID][b]=[]),f[m.fightID][b].push(m),f},{}),L=Array.from(Array.from(w.Root.Level.reduce((f,{cityID:m,eventfight:b,universalfight:h,startshow:C})=>{var N,Y;g(h),g((Y=(N=b==null?void 0:b.split(";"))==null?void 0:N.map(Q=>Q.slice(-3)))==null?void 0:Y.filter((Q,M,ae)=>!ae.slice(M+1).includes(Q)));function g(Q){if(!Q||Q.length==0)return;let M=f.get(Q);M?M.includes(re[m])||M.push(re[m]):f.set(Q,[re[m]]);}return f},new Map).entries()).reduce((f,[m,b])=>{let h=b.length>1&&new Set(b.map(C=>C.slice(0,3))).size<2?b.map((C,g)=>C.slice(g?3:0)).join("/"):String(b);return f.get(h)||f.set(h,new Set),(v[m]?Object.keys(v[m]):m).forEach(C=>f.get(h).add(C)),f},new Map).entries()).reduce((f,[m,b])=>(f[m]=Array.from(b,h=>me[h]),f),{});ke.jsbs=JSON.stringify(Object.entries(L).filter(f=>f[0].includes(U+"-")).reduce((f,[m,b])=>{let h=m.slice(2);return f[h]||(f[h]=[]),b.forEach(C=>{C.fight!="新年大吉"&&f[h].push(C);}),f},{})),ke.jsft=JSON.stringify(Object.values(me).filter(f=>["天涯故交","招兵买马","万众敬仰"].includes(f.event)&&f.shift||["突来危机","擂台比武","战事推演","为民除害","赛前演习","宵小叫嚣"].includes(f.event)).reduce((f,{event:m,generals:b,fight:h})=>(f[m]||(f[m]=[]),f[m].push({...h?{fight:h}:{},generals:b}),f),{})),ke.wscd=JSON.stringify(Object.values(E.Card.map(({CitationID:f,money:m})=>({...we[f],money:m})).reduce((f,{level:m,money:b,name:h,color:C,number:g,desc:N,rType:Y})=>{let Q=m+h+g;return f[Q]||(f[Q]={cl:[],level:b,name:h,number:g,type:Y,desc:N}),f[Q].cl.push(C),f},{})).sort(Oe("type","level"))),ke.wssp=JSON.stringify(E.Spell.map(({CitationID:f,money:m})=>({...we[f],money:m})).sort(Oe("money","level","spellid")).map(({level:f,money:m,name:b,desc:h})=>({level:m,name:b,desc:h}))),ke.wszf=JSON.stringify(E.Tactics.map(({CitationID:f,money:m})=>({...we[f],money:m})).filter(f=>{var m;return (f.name=(m=f.name)==null?void 0:m.replace("·新",""))&&!f.name.includes("废弃")&&!f.desc.includes("备用")&&!/(游戏|战斗)开始/.test(f.desc)}).sort((f,m)=>!f.money^!m.money?f.money?1:-1:f.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?f.name.slice(0,2).localeCompare(m.name.slice(0,2)):Oe("money","level","name.length")(f,m)).map(({level:f,money:m,name:b,desc:h})=>({level:m,name:b,desc:h})).filter((f,m,b)=>JSON.stringify(f)!=JSON.stringify(b[m+1]))),ke.jssp=JSON.stringify(we.filter(f=>(f==null?void 0:f.type)==3).sort(Oe("level","money","spellid")).map(({level:f,money:m,name:b,desc:h})=>({name:b,level:f,desc:h}))),ke.jscd=JSON.stringify(Object.values(we.filter(f=>(f==null?void 0:f.type)>=4).reduce((f,{level:m,money:b,name:h,color:C,number:g,type:N,desc:Y,rType:Q})=>{let M=m+h+g,ae=[33,34].includes(Math.floor(Q/100))||h=="诸葛连弩"&&m==4;return f[M]||(f[M]={cl:[],level:ae?0:m,money:b,name:h,number:g,type:Q+(ae?6:0),desc:Y}),f[M].cl.push(C),f},{})).sort(Oe("type","level","money")).sort((f,m)=>f.level>0&&m.level==0?-1:0)),ke.jssd=JSON.stringify(w.Root.seed.sort(Oe("level","seed")).map(({name:f,desc:m,level:b,huchijineng:h})=>{var g,N,Y;let C=(g=m==null?void 0:m.match(/.*获得【([^【】]*)】.*/))==null?void 0:g[1];return C&&(m+=((N=Ce[h])==null?void 0:N.desc)??((Y=Ce.find(Q=>(Q==null?void 0:Q.name)==C))==null?void 0:Y.desc)),{name:f,level:b,desc:m}})),ke.jssc=JSON.stringify(w.Root.school.map(({school:f,name:m,effect:b,needputong:h,needxiyou:C,needshishi:g,needchuanshuo:N})=>({school:f,name:m,need:[h,C,g,N],desc:we[b].desc.replaceAll(" ","")}))).replace("（","(").replace("）",")").replace("）",")"),ke.jszf=JSON.stringify(we.filter(f=>(f==null?void 0:f.type)==2).filter(f=>(f.school=parseInt(f.school||100),f.name=f.name.replace("·新",""),!f.name.includes("废弃")&&!f.desc.includes("备用")&&!f.name.includes("套装"))).sort((f,m)=>f.name.slice(0,2).localeCompare(m.name.slice(0,2))!=0?f.name.slice(0,2).localeCompare(m.name.slice(0,2)):Oe("level","money","name.length")(f,m)).map(({level:f,money:m,name:b,desc:h,school:C})=>({...C<100?{school:C}:{},name:b,level:f,desc:h})).filter((f,m,b)=>JSON.stringify(f)!=JSON.stringify(b[m+1]))),ke.jstf=JSON.stringify(w.Root.saijitianfu.filter(f=>f.seasonID==U).reduce((f,{tfid:m,ceng:b,type:h,cost:C,plot:g,preposition:N})=>(f[m]={id:m,x:h,y:b,cost:C,pre:(N==null?void 0:N.split(/,|;/))??[],...we[g]},f),[{id:0,x:0,y:0,cost:0,pre:[],name:"",level:0,type:0}])),e(ke);}function B(f,m,b){var h,C,g;return f?f.includes(",")?(([N,Y])=>["随机","普通","稀有","史诗","传说"][Y]+{2:"战法",3:"技能",4:"手牌",5:"装备"}[N])(f.split(",")):q[f]?(m>1?m:"")+q[f]:we[f]?(h=we[f])==null?void 0:h.name:ue[f]?(F.set(f,(C=w.Root.Adventure.find(N=>N.ID===parseInt(b/10)))==null?void 0:C.chapname),ue[f].map(N=>N.generalname).join(`
`)):(g=w.Root.Card.find(N=>N.id==f))==null?void 0:g.name:""}function R({general:f,hp:m,maxhp:b,armor:h,getarmor:C,card:g,draw:N,sha:Y,next:Q,pre:M}){return (M?">":"")+f+m+(b!==m?"/"+b:"")+"血"+g+"牌摸"+N+"杀"+Y+(Q?">":"")}}(o["hd_roguelike.sgs"],o["hd_1v1_rogue.sgs"]),typeof n!="string"||n=="guanxing"){let me=function(v,L,B="https://web.sanguosha.com/220/h5_2/res/runtime/pc/general/big/bigSkin/"){let R=B+v+".png";return fetch(R).then(f=>{if(f.ok)return {name:L,desc:`<a target="_blank" href="${R}"><img src="${R.replace("bigSkin","static").replace("big/s","seat/s")}"></a>`};if(!B.includes("seat"))return me(v,L,B.replace("big/s","seat/s").replace("bigSkin","static"))})};O.gxjson={"结果为推演和预测，请以最终公告为准！更新时间":new Date().toLocaleString(),"【充值消费】":[]};let w=o["gn_dbs_quest.sgs"].TaskAll.Task.filter(({_attributes:v})=>v.clientTimeStart>=String(r)).map(({_attributes:v,Reward:L})=>{let B=",";return L.SelectReward&&(L=L.SelectReward,B="/"),L.RewardItem.length||(L.RewardItem=[L.RewardItem]),{id:v.id,time:v.timeStart.slice(0,8)+"—"+v.timeEnd.slice(0,8),desc:"【"+v.name+"】"+v.desc,reward:L.RewardItem.map(({_attributes:R})=>y(R.itemId+","+R.count)).join(B)}}).concat(o["sys_h5_quest.sgs"].root.Task.filter(v=>v.ClientTimeStart>=String(r)).map(({Id:v,Name:L,Desc:B,Rewards:R,Count:f,ClientTimeStart:m,ExtraRewards:b,ClientTimeEnd:h,SelectRewards:C})=>{let g=C?"/":",";return {id:v,time:m.slice(0,8)+"—"+h.slice(0,8),desc:"【"+L+"】"+B,reward:[R+","+f,...(b==null?void 0:b.split(";"))??[]].map(y).join(g)}})),E=o["sys_h5_task.sgs"].TaskAll.TaskNode.filter(({duration:v,quest_id:L})=>L&&(!v||(v==null?void 0:v.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6})?.*"),"$1"))>=String(r))).reduce((v,{duration:L,quest_id:B,name:R})=>{var b,h;let f=B.split(";").map(C=>parseInt(C)).filter(C=>C>0),m=(((h=L||((b=w.find(({id:C,time:g})=>f.includes(C)&&g))==null?void 0:b.time))==null?void 0:h.slice(0,8))+"·【"+(R==null?void 0:R.replace(/.*盲盒.*/,"盲盒福利"))+"】").replace(/.*(充值|消费).*/,"【充值消费】");return f.forEach(C=>{C!=""&&(v[C]=m);}),v},{});w.forEach(({id:v,...L})=>{let B=E[v]??String(r)+"·【其它任务】";O.gxjson[B]||(O.gxjson[B]=[]),O.gxjson[B].push(L);}),(v=>{var L;v.length>1&&(O.gxjson[((L=v[0].time)==null?void 0:L.slice(0,8))+"·兑换【占星秘宝】"]=v);})(o["ff_dbs_lottery_new.sgs"].root.ShopGoods.filter(({timeRange:v})=>(v==null?void 0:v.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).map(({Id:v,counts:L,exchangecount:B,timeRange:R})=>({time:R==null?void 0:R.replace(/.*?([0-9]+)T[0-9]+,([0-9]+)T[0-9]+/,(f,m,b)=>m+"-"+b),desc:"消耗·星石币*"+B,reward:y(v+","+L)}))),o["ff_exchange_new.sgs"].root.Common.filter(({duration:v})=>(v==null?void 0:v.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).forEach(({itemid:v,goods:L,rewardstype:B,duration:R})=>O.gxjson[R.slice(0,8)+"·【"+We(v).name+"】兑换"]=L.sort((f,m)=>m.exchangecount1-f.exchangecount1).map(({exchangecount1:f,Id2:m,counts:b,limitcounts:h,itemid2:C,exchangecount2:g})=>{let N=String(b).split(";");return {time:R.slice(0,8)+"—"+R.slice(16,24),desc:"消耗·"+y((C??v)+","+(g??f))+(h?",限"+h+"次":""),reward:String(m).split(";").map((Y,Q)=>y(Y+","+N[Q])).join("/")}})),o["sys_treasure_chest.sgs"].root.Common.filter(({duration:v})=>(v==null?void 0:v.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)).forEach(({itemid:v,rewards:L,duration:B})=>O.gxjson[B.slice(0,8)+"·开启【"+We(v).name+"】"]=L.map(R=>({time:B.slice(0,8)+"—"+B.slice(16,24),desc:"开启·"+y(v+","+R.counts),reward:JSON.stringify(R).split(/,"goodsid[0-9]+":" *([0-9,;]+) *"/).filter(f=>(f==null?void 0:f.search(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/))>=0).map(f=>f.replace(/([0-9]+,[0-9]+);?([0-9]+,[0-9]+)?/,(m,b,h)=>y(b)+(h?"["+y(h)+"]":""))).join(R.rewardstype==2?"/":",")})));let U=[],F=[],A=[],q=o["sys_h5_dbs_clientserverpub.sgs"].client.DuoBao[0].item.filter(({BeginTime:v})=>v>String(r)).flatMap(({DropId:v,ExchangeId:L,BeginTime:B,EndTime:R})=>{let f=B.slice(0,8)+"-"+R.slice(0,8),m=(d.get(Math.abs(v))??[]).map(We).filter(({name:g})=>!["夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(g)),b=m.map(({ID:g})=>g),C=(d.get(Math.abs(L))??[]).map(We).filter(({ID:g,name:N,TypeID:Y})=>b.includes(g)||!(Y==43&&(N!=null&&N.endsWith("动态套装"))||Y==36&&(N!=null&&N.startsWith("文和乱武*"))||Y==25&&["赵襄","沙摩柯(SP)","孙尚香(界限突破)"].includes(N)||["枭雄金印","水晶碎片","圣魂玄晶","史诗皮肤锦囊","传说皮肤锦囊","至臻皮肤礼盒","谋定水晶自选礼盒"].includes(N))).map(({ID:g,name:N})=>{let Y=m.findIndex(({name:Q})=>Q==N);return Y>=0&&b.splice(Y,1,g),g});return Array.from(new Set([...b,...C])).map(We).map(({ID:g,TypeID:N,PicID:Y,name:Q,returngoods:M,usedeffect:ae,info:X,fragment:ie})=>{var fe;let xe={time:f,name:Q,price:[...b.includes(g)?["四角"]:[],...C.includes(g)&&ie?[ie+"夺宝碎片"]:[]].join("/"),...(ne=>ne&&{desc:ne})(["祈福灯","圣魂玄晶","枭雄金印"].includes(Q)?"":M&&M!="0"&&M.split(";").filter(ne=>(ne==null?void 0:ne.search(/[0-9]+,[0-9]+/))>=0).map(y).join(";")||(ae==null?void 0:ae.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&ae.replace(/([0-9]+),[0-9,]+/g,y)||ae&&T(ae)||X)};return (N==36||((fe=xe.name)==null?void 0:fe.search(/\*[^0-9]/))>=0)&&A.push({name:Q,res:Y}),xe})});q.length&&(O.gxjson.夺宝行动=q,q=q.map(({name:v})=>v));let re=o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(v=>{var L;return ((L=v.x)==null?void 0:L.replace(new RegExp(".*?(?<![0-9])([0-9]{8}T[0-9]{6}).*"),"$1"))>=String(r)&&v.a!=834901}).map(({a:v,ah:L,l:B})=>{if(B&&B.replace(/([0-9]+),[0-9,]+/g,(R,f)=>(!L&&![100301,200101,1325201].includes(parseInt(f))&&U.push(parseInt(f)),R)),L)F.push(v);else return v}).filter(Boolean).concat(U).sort((v,L)=>v-L).filter((v,L,B)=>L==0||v!=B[L-1]);Array.from(new Set(o["cha_gs_dbs_fs_skininfo.sgs"].root.manu.item.filter(v=>v.SellTime>String(r)).map(v=>v.baseID).concat(re.concat(re.filter((v,L,B)=>v-B[L-1]>1e3&&B[L+1]-v<1e3).map(v=>o["sys_gs_dbs_fs_goodsbaseinfo.sgs"].root.goodslist.goods.filter(L=>L.a-v>0&&L.a-v<1e4).map(L=>L.a)).reduce((v,L)=>[...v,...L],[])).sort((v,L)=>v-L)))).map(v=>We(v)).filter(v=>v&&![...q,"夺宝碎片","夺宝重置券","绑定元宝","桃花","功勋","武将包","皮肤包","稀有皮肤包","豪华皮肤包","普通将印宝箱","稀有将印宝箱","史诗将印宝箱","大将军印"].includes(v.name)).forEach(({ID:v,TypeID:L,PicID:B,name:R,maxBuyCount:f,yuanbao:m,returngoods:b,SellTime:h,usedeffect:C,info:g,yuanbaoonly:N,fragment:Y,exchange:Q,shopvisual:M})=>{var X;let ae={...h&&{time:h.replace(/.*?([0-9]+)T[0-9]+;([0-9]+)T[0-9]+/,(ie,xe,fe)=>xe+"-"+fe)},name:R,...Q!=null&&Q.includes(",")?{price:y(Q)}:M&&m!=999999&&{price:N?m+"通用元宝":m+"元宝",...f&&((ie,xe)=>parseInt(ie)>0?{max:xe+"个/"+(ie==1?"":ie)+"天"}:{})(...f.split(";"))},...(ie=>ie&&{desc:ie})(["祈福灯","圣魂玄晶","枭雄金印"].includes(R)?"":b&&b!="0"&&b.split(";").filter(ie=>(ie==null?void 0:ie.search(/[0-9]+,[0-9]+/))>=0).map(y).join(";")||(C==null?void 0:C.search(/^([0-9]+,[0-9]+;?)+$/))>=0&&C.replace(/([0-9]+),[0-9,]+/g,y)||C&&T(C)||g)};(L==36||((X=ae.name)==null?void 0:X.search(/\*[^0-9]/))>=0)&&A.push({name:R,res:B}),String(ae.price).includes("夺宝")||String(ae.price).includes("灵宝")?(O.gxjson.夺宝行动||(O.gxjson.夺宝行动=[]),O.gxjson.夺宝行动.push(ae)):ae.max?(O.gxjson.限购礼包||(O.gxjson.限购礼包=[]),O.gxjson.限购礼包.push(ae)):(O.gxjson.其它道具||(O.gxjson.其它道具=[]),O.gxjson.其它道具.push(ae));}),(Z=O.gxjson.其它道具)==null||Z.sort((v,L)=>v.price&&!L.price?-1:1),F.length&&(O.gxjson.祈福武将=Object.entries(F.map(v=>We(v)).filter(({returngoods:v})=>{var L;return ((L=We(v.split(";")[1].split(",")[0]))==null?void 0:L.TypeID)==25}).reduce((v,{name:L,lotteryPrice:B})=>(v[B]||(v[B]=[]),v[B].push(L.replace("武将","").replace(/\(.*?\)/g,"")),v),{})).sort((v,L)=>L[0]-v[0]).map(([v,L])=>({price:v+"同心结",reward:L.join("/")}))),(v=>{v.length&&(O.gxjson.祈愿台=v);})(o["ff_tiangong.sgs"].root.Drop.reduce((v,{Id:L,ItemId:B,MaxCount:R})=>(v[L]||(v[L]=[]),(f=>{["欢乐豆","手气卡","点将卡","灵宝经","换将卡","诏令天","校尉将","朱砂*","灵宝经","桃花*","功勋*","传世玉","大将军","夺宝券","水晶碎","圣魂玄"].includes(f.slice(0,3))||v[L].push(f);})(y(B+","+R)),v),[]).reduce((v,L)=>{if(L){let B=v.find(({reward:R})=>L.includes(R));B&&(B.reward=L.join(","));}return v},o["ff_tiangong.sgs"].root.Common.slice().reverse().reduce((v,{Id:L,Name:B,bigrewards:R,Duration2:f})=>{let m=parseInt(f.slice(0,8))+1;if(m<parseInt(r))return v;let b=v.find(({name:h})=>h==B);return b?b.time+=";"+m:v.push({name:B,reward:nt[R],time:String(m)}),v},[]).reverse()));const ue=(()=>{var v={};return function(L){return v[L]?v[L]:v[L]=o["ff_chess.sgs"].root.NewChess.filter(({PlanId2:B})=>B==L).reduce((B,{MaxFloors:R})=>B+parseInt(R),0)}})();(v=>{v.length&&(O.gxjson.绘卷=v);})(o["ff_chess.sgs"].root.Common.reduce((v,{GrandPrize:L,PlanID2:B,duration2:R})=>{var m;let f=parseInt(R.slice(0,8))+1;return f<parseInt(r)||v.push({reward:(m=We(L))==null?void 0:m.name,预估价格:ue(B)/2>>0,time:f+"-"+R.slice(16,24)}),v},[])),O.gxjson.新品皮肤=A.map(({name:v})=>({name:v})),Object.entries(O.gxjson).forEach(([v,L])=>O.gxjson[v]=Array.isArray(L)?L.map(B=>c(B,u)):c(L,u)),(!n||n=="guanxing")&&e(Promise.all(A.map(({name:v,res:L})=>me(L,v))).then(v=>O.gxjson.新品皮肤=v.filter(Boolean)).then(()=>(Object.entries(O.gxjson).forEach(([v,L])=>O.gxjson[v]=Array.isArray(L)?L.map(B=>c(B,u)):c(L,u)),O.gxjson)));}e(o),console.warn("[initMap] Config_w 解析完成");})))}function Oe(...n){return new Function("_a","_b","return "+n.map(e=>"((_a."+e+")-(_b."+e+"))").join("||"))}var oi=`<head><title>三国杀打小抄</title><meta charset="UTF-8"><style>::-webkit-scrollbar{width:5px;height:12px}::-webkit-scrollbar-track{border:1px solid #050505}::-webkit-scrollbar-thumb{background:#5f563f}::-webkit-scrollbar-thumb:hover{background:#2c2c2c}.body{width:100%;margin:0;padding:0;font-size:13px;width:100%;background:#23201d;background-size:cover;color:#f2de9c;display:flex;flex-direction:column;margin:1px;user-select:none;max-width:100vw;overflow-x:hidden;font-size:13px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,Arial,sans-serif}.nav{width:100%;background:#23201d;text-align:center}.nav1{font-weight:bolder;height:20px;width:100%;color:#f2de9c;background:#23201d;margin-right:15px;display:block}#nav1:empty{display:none}.nav2{height:20px;width:49%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.nav2:hover{color:#f2de9c;background:#372820;border:1px solid #f2de9c}.nav2:focus{background:#372820;box-shadow:1px 1px 3px #f2de9c}.content{margin:1px}.AC-head{font-weight:bolder;height:66px;width:13%;float:right;text-align:center;color:#f2de9c;background:#23201d;margin:1px;border-radius:5px;border:1px #23201d solid;box-shadow:1px 0 3px;overflow:hidden}.AC-head:hover{background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.AC-body{height:60px;width:79%;float:left;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.invite-body{height:40px;width:92%;float:left;display:flex;box-shadow:1px 0 3px;border:1px #23201d solid;color:#f2de9c;margin:5px;overflow:hidden;border-radius:5px;background:#23201d;resize:none}.orderContainer{text-align:right;vertical-align:bottom}.order-head{font-weight:bolder;width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.order-body:empty{height:35px}.order-body{position:relative;padding:5px;height:auto;width:94%;display:block;box-shadow:1px 1px 3px;z-index:1;margin:1px;overflow:hidden;border-radius:5px}.order-body:after{text-align:center;content:var(--No-content, '座位号丨武将');position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownShouPai{border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.knownCardsInHand{text-align:center;position:relative;overflow:hidden;display:none;height:auto}.knownCards:empty{text-align:center;position:relative;overflow:hidden;display:none}.knownCards{width:94%;text-align:center;position:relative;overflow:hidden;height:auto}@keyframes blink{50%{border-color:#f2de9c}}.paiduiCards:after{text-align:center;content:'牌堆';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.knownCards{padding:5px;height:auto;width:94%;float:right;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.knownCards:after{text-align:center;content:'场上手牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#quanBian:after{text-align:center;content:'权变牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}#yanXi:after{text-align:center;content:'宴戏牌';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardTypeDetail:after{text-align:center;content:'牌堆类型详情';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.ding{text-align:center;width:100%;position:relative;height:auto;display:none}.dingCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.dingCards:after{content:'第一张为牌堆顶';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.di{text-align:center;width:100%;position:relative;height:auto;display:none}.diCards{text-align:center;position:relative;height:auto;min-height:60px;display:none}.diCards:after{content:'第一张为牌堆底';position:absolute;bottom:0;right:5px;z-index:-1;font:800 20px 'Arial Black';-webkit-text-fill-color:transparent;-webkit-text-stroke-width:1px}.cardDetail{width:100%;overflow:hidden;display:block}.type{width:100%;float:left}.cardTypeContainer{width:100%;overflow:hidden;display:block}.type-head{width:10%;float:left;text-align:center;color:#f2de9c;margin-left:3px;display:block;overflow:hidden;cursor:pointer}.type-body{padding:5px;width:94%;display:block;box-shadow:1px 1px 3px;margin:1px;overflow:hidden;border-radius:5px}.cardType{font-size:12px;width:25%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.cardType:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.storeDetail{font-size:12px;width:50%;height:22px;float:left;text-align:center;border:1px;margin:0;background:#d2c8a0;box-shadow:inset 1px 1px 1px #000}.detail{width:100%;float:left;overflow:hidden}.detail-head{width:10%;height:25px;float:left;text-align:center;color:#f2de9c;margin-left:3px}.detail-body{min-height:40px;padding:5px;width:94%;float:left;display:block;box-shadow:1px 1px 3px;margin:1px;border-radius:5px;overflow:hidden}.panel-header{background:#23201d;color:#f2de9c;padding:3px;text-align:left;border:none;width:100%;cursor:pointer;display:flex;align-items:center;border-radius:5px;border:1px transparent solid}.triangle{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:6px solid #f2de9c;margin-right:10px;transition:transform .3s ease}.panel-content{max-height:0;width:100%;float:left;display:block;color:#f2de9c;margin:1px;overflow:hidden;border-radius:5px;background:#23201d;transition:max-height .3s ease-out}.panel-header.active .triangle{transform:rotate(90deg)}.panel-header.active{color:#f2de9c;background:#372820}.panel-header:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.r{color:#f04155}.suitRec{width:50%;float:right;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",Tahoma,Arial,sans-serif;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7)}.suit{width:50%;float:left}.phrase{float:left}.face{width:12.5%;display:block;float:left}.face:hover{width:12.5%;display:block;float:left;background:#f2de9c}#shandian{width:100%;float:left}.function{width:50%;margin:1px}.jizhan{width:100%;float:left}.yanjiao{width:50%;float:left}.yanjiaospan{border:1px solid #0000;box-sizing:border-box}.yanjiaospan:hover{border:1px solid #f2de9c;cursor:pointer}.calRes{width:98%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px;font-size:13px;margin:1px}.secKillDetailText{width:100%;height:26px;float:left;text-align:center;color:#f2de9c;background:#23201d;display:block;border-radius:5px;line-height:26px;margin-top:17px}.calRes:not(:disabled):hover{font-size:12px;color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhuBTN{width:48%;height:20px;text-align:center;color:#f2de9c;background:#23201d;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhuBTN:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.mizhu{width:100%;height:20px;float:left;text-align:center;color:#f2de9c;background:#23201d;margin-left:3px;border:1px solid #f2de9c;display:block;border-radius:5px}.mizhu:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#mySeatID1{width:48%}#mySeatID2{width:48%}.res{width:100%;float:left}a:link,a:visited{color:inherit;text-decoration:none;display:inline-flex;text-decoration:underline;border-radius:5px;cursor:pointer;align-items:center;justify-content:center}a:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}#donate{position:relative;color:#f2de9c;display:block;text-align:center}.uuid{position:relative;color:#f2de9c;display:block;text-align:center;cursor:pointer}.uuid:hover{color:#f2de9c;background:#372820;border:1px #23201d solid;animation:blink 2s;animation-iteration-count:infinite}.uuid:active{background:#372820}.width{width:100%;height:5px;clear:both}.switch-container{display:flex}.switch{position:relative;display:block;margin-left:10px;width:56px;height:26px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#23201d;-webkit-transition:.4s;transition:.4s;border-radius:34px;border:1px solid #f2de9c;--slider-position:2px}.slider:before{position:absolute;content:"";height:20px;width:20px;left:var(--slider-position,2px);bottom:2px;background-color:#f2de9c;-webkit-transition:.4s;transition:.4s;border-radius:50%}input:checked+.slider{background-color:#372820}input:focus+.slider{box-shadow:0 0 1px #372820}.status{position:absolute;top:50%;transform:translateY(-50%);left:5px;color:#555}.explanation{margin:0 10px;display:flex;width:100%}input:checked+.slider+.status:before{content:'开'}input:checked+.slider+#autoBotStatus:before{content:var(--bot-status, '30');color:#f2de9c}input+.slider+#autoBotStatus:before{content:var(--bot-status, '关')}input+.slider+.status:before{content:"关"}.calRes:disabled{background-color:#ccc;color:#666;cursor:not-allowed}.markedCard{display:inline-flex;align-items:center;border-radius:5px;border:1px solid #000;width:auto;background-color:#372820;color:#f2de9c}.mark{writing-mode:vertical-rl;margin-right:0;color:#f2de9c}.markedCard>.mark:only-child{display:none}.shoupai{color:#000;--shoupai-width:33px;padding:0;font-weight:bolder;margin-right:calc(32px - var(--shoupai-width));float:left;width:var(--shoupai-width);min-width:var(--shoupai-width);height:38px;border:1px solid #000;text-align:center;background:rgba(210,200,160,.5);border-radius:5px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI Emoji",'Noto Color Emoji';white-space:nowrap;text-shadow:1px 0 0 rgba(255,255,255,.7),0 1px 0 rgba(255,255,255,.7),-1px 0 0 rgba(255,255,255,.7),0 -1px 0 rgba(255,255,255,.7);font-size:13px}.shoupai.R{color:red}.shoupai.G{background:0}.shoupai.G .shoupai{background:0;pointer-events:none}.order-body:not(#paiduiCards) .shoupai:disabled{display:none}.order-body:not(#paiduiCards) .shoupai.G{width:auto}.left{width:30%;float:left}.right{width:70%;float:right}input[type=checkbox]:disabled+.slider{background-color:gray;cursor:not-allowed}.question-mark{display:inline-block;position:relative;width:15px;height:15px;line-height:15px;text-align:center;border:1px solid #f2de9c;border-radius:50%;margin-left:2px;transition:background-color .3s}.question-mark:hover{background-color:#372820;cursor:pointer}.tooltip{position:relative;background-color:#333;text-align:center;padding:5px;border-radius:5px;max-width:200px;white-space:pre-line;z-index:10000000001;opacity:0;pointer-events:none;transition:opacity .1s ease-in-out;color:#f2de9c;font-size:13px}.tooltip.visible{opacity:1;pointer-events:auto}.tooltip.top{margin-left:50px}#sidebarHint{position:fixed;top:0;right:0;width:25px;height:100%;background-color:rgba(55,40,32,.8);color:#f2de9c;display:none;justify-content:center;align-items:center;font-size:20px;writing-mode:vertical-rl;text-orientation:upright}:root{--my-background-image:url('https://web.sanguosha.com/220/h5_2/res/assets/bigPng/propGet.png')}.sorderContainer{font-size:13px;width:100%;display:flex;align-items:center;width:146px;z-index:10000000000;user-select:none;text-align:left;transition:height .2s;position:fixed}transformOrigin = 0 0 .sorder-head{display:flex;align-items:center;justify-content:center;font-weight:bolder;width:10%;height:25px;text-align:center;color:#f2de9c;margin-left:3px}.sorder-body{pointer-events:auto;height:auto;width:100%;float:right;display:flex;flex-wrap:wrap;overflow:hidden;z-index:1;max-height:48px}.sorder-body.show-ellipsis::after{content:'...';position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center;color:#f2de9c;font-weight:700;height:20px;background:linear-gradient(to bottom,rgba(255,255,255,0),rgb(0 0 0 / 80%));width:inherit}.sorder-body:hover{max-height:none;overflow:visible}.sorder-body:hover::after{display:none}.sorder-body:not(#paiduiCards) .shoupai:disabled{display:none}.sorder-body:not(#paiduiCards) .shoupai.G{width:auto}@keyframes fadeInLeftToRight{0%{clip-path:inset(0 100% 0 0);opacity:0}100%{clip-path:inset(0 0 0 0);opacity:1}}@keyframes fadeOutRightToLeft{0%{clip-path:inset(0 0 0 0);opacity:1}100%{clip-path:inset(0 100% 0 0);opacity:0}}.ac-tooltip{position:fixed;top:100px;left:45%;background-color:transparent;background-image:var(--my-background-image);cursor:pointer;background-size:100% 100%;color:#f44336;font-size:16px;border-radius:4px;z-index:9999;overflow:hidden;white-space:nowrap;padding:16px 32px;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transform:translateX(0);transition:opacity 1s ease-in-out,visibility 1s ease-in-out}.ac-tooltip.green{background-color:transparent;color:#f2de9c}.city{visibility:hidden;transition:opacity 1s ease-in-out,visibility 1s ease-in-out;background-color:rgba(55,52,39,.7);color:#f2de9c;align-items:center;justify-content:center;border-radius:5px;text-align:center;flex-direction:column;padding:5px}hr{width:100%;margin:0}@keyframes blink{50%{border-color:#f2de9c}}.centerUI{width:18px;height:18px;background-color:#4e251f;border-radius:4px;display:flex;border:1px solid rgb(110 107 91);justify-content:center;align-items:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.3);visibility:hidden}.centerUI::after{content:"!";font-family:Arial,sans-serif;font-size:15px;color:#fff;font-weight:700}.centerUI:hover{background-color:rgb(134 74 58)}.show{animation:fadeInLeftToRight 1s forwards,blink 2s infinite;visibility:visible}.hide{animation:fadeOutRightToLeft 1s forwards;visibility:hidden}.window{width:1024px;height:600px;border:2px solid #333;border-radius:8px;box-shadow:0 0 15px rgba(0,0,0,.5);position:relative;background-color:#f5f5f5;overflow:hidden}.window-header{display:flex;justify-content:space-between;align-items:center;background-color:#23201d;color:#fff;padding:5px;cursor:move}.window-header .title{font-weight:700;padding-left:10px}.window-header .controls{display:flex;gap:5px}.window-header .controls button{background:0 0;border:none;color:#fff;cursor:pointer;padding:5px}.window-header .controls button:hover{background-color:rgba(255,255,255,.2)}.window-content{width:100%;height:calc(100% - 40px);border:none}.fullscreen{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-5C3C11THB3"><\/script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5C3C11THB3")<\/script></head><div class="body"><div class="nav"><div id="nav1"></div><div class="nav1" id="phrase">当前阶段提示</div></div><div class="content" id="content"><div class="orderAndShouPai" id="orderAndShouPai"><button class="panel-header"><span class="triangle"></span> <b>武将手牌</b></button><div class="panel-content order" id="button"><div class="orderContainer" id="or1"><div class="order-body No1" id="1" style="--No-content:'神诸葛亮丨一'"><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button><div class="markedCard"><span class="mark">木马</span> <button class="shoupai G">♥10<br>测试</button> <button class="shoupai R">♦K<br>测试</button></div><button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button> <button class="shoupai">♣Q<br>测试</button></div></div><div class="orderContainer" id="or2"><div class="order-body No2" id="2" style="--No-content:'卧龙诸葛丨二'"><button class="shoupai G">♥10<br>暗牌</button> <button class="shoupai G">♥10<br>样式</button></div></div><div class="orderContainer" id="or3" style="--No-content:'天候孔明丨三'"><div class="order-body No3" id="3"></div></div><div class="orderContainer" id="or4" style="--No-content:'诸葛亮丨四'"><div class="order-body No4" id="4"></div></div><div class="orderContainer" id="or5" style="--No-content:'武诸葛亮丨五'"><div class="order-body No5" id="5"></div></div><div class="orderContainer" id="or6" style="--No-content:'卧龙凤雏丨六'"><div class="order-body No6" id="6"></div></div><div class="orderContainer" id="or7" style="--No-content:'界卧龙诸葛丨七'"><div class="order-body No7" id="7"></div></div><div class="orderContainer" id="or8" style="--No-content:'界诸葛亮丨八'"><div class="order-body No8" id="8"></div></div></div><div><div class="orderContainer"><div class="knownCards" id="knownCards"></div></div><div class="orderContainer"><div class="order-body paiduiCards" id="paiduiCards"></div></div><div class="orderContainer"><div class="knownCards quanBianYanXi" id="quanBian"></div><div class="knownCards quanBianYanXi" id="yanXi"></div></div></div></div><div class="width"></div><div class="cardDetail" id="cardDetail"><div class="space"></div><div class="detail"><div class="detail-body"><div class="suit r" id="heart">♥红桃 × 0</div><div class="suit" id="spade">♠黑桃 × 0</div><div class="suit" id="club">♣梅花 × 0</div><div class="suit r" id="diamond">♦方片 × 0</div><div class="suit r" id="hongsha">红杀 × 0</div><div class="suit" id="heisha" n>黑杀 × 0</div><div class="sha" id="sha">剩余出杀次数：指记入次数的杀</div><span>乱击/权变</span><div class="suitRec" id="suit"></div><br><span>博图</span><div class="suitRec" id="boTu"></div><br><span>上一张使用的牌</span><br><button class="shoupai R" id="lastUseCard">＾＾<br>•ω•</button><br><br><br><div id="guhuo" style="display:none">蛊惑牌</div><div class="function yanjiao" id="yanjiao">严教小抄</div><button class="function mizhuBTN" id="mizhu">糜竺小抄</button> <button class="function mizhu mySeatID" id="mySeatID1">座位：1</button> <button class="function mizhu mySeatID" id="mySeatID2">座位：2</button><div class="function res" id="result">结果样式：1 1 1 1 = 4</div></div></div><div class="width"></div><div class="type"><div class="cardTypeContainer"><div class="type-body type1" id="type1"><button class="cardType" id="test1">小抄</button> <button class="cardType">开发</button> <button class="cardType">小伙伴</button></div></div><div class="cardTypeContainer"><div class="type-body type2" id="type2"><button class="cardType">霜迟</button> <button class="cardType">孤独尊</button> <button class="cardType">无所谓</button> <button class="cardType">埃城</button> <button class="cardType">辉弥</button> <button class="cardType">天野</button> <button class="cardType">人富</button></div></div><div class="cardTypeContainer"><div class="type-body type3" id="type3"></div></div><div class="orderContainer"><div class="knownCards cardTypeDetail" id="cardTypeDetail"></div></div></div></div><div class="width"></div><div class="width"></div><div class="laya" id="laya"><div class="space"></div><button class="panel-header laya-header"><span class="triangle"></span> <b>快捷操作</b></button><div class="panel-content" id="layaDiv"><div class="switch-container"><div id="autoBotSwitchContainer"><span class="explanation">自动挂机<span class="question-mark" data-tooltip="AI接管挂机刷酒馆30亲密度&#10;自动创建演武房间开始对战&#10;建议点将张辽禁将只留标风&#10;禁用其它SP武将可提高胜率&#10;到身份演武房间列表后开启&#10;打开开关即可助力脚本作者&#10;领取限时至十月九日的体验&#10;界小抄用户可以无限制使用&#10;开关数字表示酒馆剩余时间&#10;双击打开官阶百胜无尽挂机&#10;">?</span></span> <label class="switch"><input id="autoBotSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoBotStatus"></span></label></div><div><span class="explanation" id="autoExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">盖主速刷<span class="question-mark" data-tooltip="主公点将黄盖一分钟苦肉自杀速刷&#10;可用来刷武将百胜战功和官阶任务&#10;保证已激活的账号在 7 天内登录过&#10;一：登录小号创建自选身份密码房&#10;二：多开大号加入房间点自动挂机&#10;三：大号需双击自动挂机开始锁定&#10;四：小号点将黄盖，打开盖主速刷&#10;五：大号准备并保持两窗口在前台&#10;">?</span></span> <label class="switch"><input id="autoHGSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status" id="autoHGStatus"></span></label></div><div><span class="explanation" id="autoHGExplanation"></span></div></div><div class="switch-container"><div><span class="explanation">加入互助<span class="question-mark" data-tooltip="点击加入小抄互相助力小组&#10;每天自动助力三位小抄玩家&#10;同时收到三位小抄玩家助力&#10;默认为小抄给当前玩家助力&#10;右侧可输入想要助力的玩家&#10;“再”打开《加入互助》开关&#10;该玩家可收到三个小抄助力&#10;">?</span></span> <label class="switch"><input id="autoInviteSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><textarea class="invite-body" type="text" id="inviteName" required maxlength="10" size="10" placeholder="大西瓜"></textarea></div></div><button class="calRes" id="guanxing">自助观星</button> <button class="calRes" id="mail" disabled="disabled">一键领取邮箱物品</button> <button class="calRes" id="task" disabled="disabled">一键领取所有任务奖励</button></div></div><div class="store" id="store"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>山河图</b></button><div class="panel-content"><div><button class="calRes" id="openStore">点击打开商店换装备->跳奇遇</button></div><div><span id="chongsheng">重生是否发动：否</span></div><div id="storeDetail"><button class="storeDetail">集市霸王·壹300</button> <button class="storeDetail">集市霸王·贰200</button> <button class="storeDetail">集市霸王·叁100</button> <button class="storeDetail">会员商店·肆1100</button> <button class="storeDetail">稳定承载1100</button> <button class="storeDetail">极奢1100</button></div></div></div><div class="secKill" id="secKill"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>秒杀连点器（悬停查看详情）</b></button><div class="panel-content" id="secKillDetail"><div class="left"><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem1Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem2Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br><div><label class="switch" title="秒杀连点器，界小抄可用，不保证成功率"><input id="secKillItem3Switch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><br></div><div class="right"><span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span> <span class="secKillDetailText">暂无数据</span></div></div></div><div class="chat" id="chat"><div class="space"></div><button class="panel-header"><span class="triangle"></span> <b>聊天（点击自动输入）</b></button><div class="panel-content chat-body"></div></div><div class="CDK"><button class="panel-header"><span class="triangle"></span> <b>兑换码（点击即兑换）</b></button><div class="panel-content"><div class="function res" id="CDK"><button class="calRes">小麦好帅</button></div></div></div><div class="tianguo"><button class="panel-header"><span class="triangle"></span> <b>统计</b></button><div class="panel-content"><button id="gamerecord" class="calRes" style="text-align:center">战绩胜率统计</button><div id="PlayerTianGuo" style="text-align:center">你的天过次数/总次数</div><div><div id="lottery"><a href="https://goka.top:8080/choujiang?username=" target="_blank" class="calRes" id="choujiang">点击查看祈愿台数据</a></div></div></div></div><button class="panel-header"><span class="triangle"></span> <b>设置</b></button><div class="setting panel-content"><div class="switch-container"><div><span class="explanation">皮肤体验<span class="question-mark" data-tooltip="该功能仅限于体验皮肤&#10;喜欢还请购买支持画师&#10;此功能随时失效！！！">?</span></span> <label class="switch"><input id="skinSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div id="skinStateButton" style="display:none"><span class="explanation">动态皮肤</span> <label class="switch"><input id="skinStateSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">屏蔽动态<span class="question-mark" data-tooltip="屏蔽其他人的动态皮肤&#10;电脑卡顿的话可以打开">?</span></span> <label class="switch"><input id="skinStateBlockSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div style="display:none"><span class="explanation">金色卡背</span> <label class="switch"><input id="cardBackSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">明牌框框 <span class="question-mark" data-tooltip="明牌展示在武将下面">? </span></span><label class="switch"><input id="seatUISwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">五阶特效 <span class="question-mark" data-tooltip="其他角色显示五阶特效">? </span></span><label class="switch"><input id="generalSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">自动签到 <span class="question-mark" data-tooltip="自动领取打卡签到的奖励">? </span></span><label class="switch"><input id="autoSignSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">跳体验卡 <span class="question-mark" data-tooltip="签到会有体验武将&#10;如领取会污染将池&#10;开启按钮跳过领取&#10;月底记得手动领取">? </span></span><label class="switch"><input id="autoSignSkipSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">领武将包<span class="question-mark" data-tooltip="每天登录，自动领取免费的武将包">?</span></span> <label class="switch"><input id="autoWuJiangSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">公会三敲<span class="question-mark" data-tooltip="每天自动公会三敲&#10;无惧公会长的诫厉">?</span></span> <label class="switch"><input id="autoDrumSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">月卡奖励<span class="question-mark" data-tooltip="自动领取月卡奖励&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoYueKaSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">自动砍树<span class="question-mark" data-tooltip="每天登录自动砍树&#10;界小抄先行体验">?</span></span> <label class="switch"><input id="autoKanShuSwitch" type="checkbox" disabled="disabled"> <span class="slider"></span> <span class="status"></span></label></div></div><div class="switch-container"><div><span class="explanation">跳过弹窗<span class="question-mark" data-tooltip="跳过领取武将&#10;MVP结算&#10;出货弹窗&#10;加快氪金速度">?</span></span> <label class="switch"><input id="skipWindowSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div><div><span class="explanation">击杀特效 <span class="question-mark" data-tooltip="屏蔽击杀特效">? </span></span><label class="switch"><input id="killEffectSwitch" type="checkbox"> <span class="slider"></span> <span class="status"></span></label></div></div></div><div class="width"></div><div class="ACContainer"><textarea class="AC-body" type="text" id="AC" name="AC" required placeholder="点击添加激活码&#13;&#10;当前激活码未激活"></textarea> <button class="AC-head" type="submit" id="ACSubmit">激活</button></div><div style="text-align:center"><a href="https://afdian.com/@yimadaO_o" target="_blank">开发不易 如您喜欢 不妨支持小抄</a><div class="width"></div><a href="https://qm.qq.com/q/PBA8Mt4rCI" target="_blank">加群一起玩</a><div class="width"></div><a href="https://support.qq.com/products/664780/" target="_blank">提需求</a><div class="width"></div><a href="https://greasyfork.org/zh-CN/scripts/448004-%E4%B8%89%E5%9B%BD%E6%9D%80%E6%89%93%E5%B0%8F%E6%8A%84/versions" target="_blank">查看历史更新</a><div class="width"></div><div class="uuid id" id="uuid">id：</div><div class="width"></div><div class="uuid nickName" id="nickName">昵称：</div><div class="width"></div><div class="uuid guildID" id="guildID">公会数字ID：</div><div class="width"></div><div class="width"></div></div></div><script><\/script></div>`;let Ue=null;const Fe=" "+"2.9.33".replace(/^2\.9\./,""),li="适配新版山河图奇遇事件提示；网页端增加屏蔽击杀特效开关，感谢霜迟大佬提供的思路；界小抄秒杀优化".replace(/；/g,"<br>");var en,tn;(tn=(en=document.getElementById("createSkinIframeSource"))==null?void 0:en.contentWindow)==null||tn.document;function ci(){return window.WDVerSion="1.0.0",window.padding=pe.padding||0,window.addEventListener("resize",bn),new Promise((n,e)=>{function t(){var i;typeof JSZipUtils<"u"&&typeof CtrUtil<"u"&&typeof((i=CtrUtil==null?void 0:CtrUtil.Ctr)==null?void 0:i.Ofb_Dec)<"u"&&typeof SystemContext<"u"&&document.getElementById("bgDiv")?kn(!0).then(n):setTimeout(t,1e3);}t();})}function di(){var n,e,t,i;return window.removeEventListener("resize",bn),window.removeEventListener("resize",Sn),window.removeEventListener("SGSresize",wn),(n=document.getElementById("seatUI"))==null||n.remove(),(e=document.getElementById("rogueUI"))==null||e.remove(),(t=document.getElementById("cusBGDiv"))==null||t.remove(),(i=document.getElementById("createIframe"))==null||i.remove(),I.isFrameAdd=!1,!0}function bn(){window.innerWidth=document.documentElement.clientWidth-window.padding;}function wn(){window.dispatchEvent(new Event("resize"));}let $e;function Sn(){$e&&clearTimeout($e),$e=setTimeout(()=>{fi(),$e=null;},500);}async function kn(n=!1){var e,t,i,s,r;if(n&&((e=document.getElementById("seatUI"))==null||e.remove(),(t=document.getElementById("rogueUI"))==null||t.remove(),(i=document.getElementById("cusBGDiv"))==null||i.remove(),(s=document.getElementById("createIframe"))==null||s.remove(),I.isFrameAdd=!1),!I.isFrameAdd){window.addEventListener("resize",Sn),SystemContext._gameScreenType=SystemContext.gameScreenType,SystemContext._gameScale=SystemContext.gameScale,Object.defineProperty(SystemContext,"gameScreenType",{get:function(){return this._gameScreenType},set:function(a){this._gameScreenType!==a&&(this._gameScreenType=a,window.dispatchEvent(new Event("SGSresize")));}}),Object.defineProperty(SystemContext,"gameScale",{get:function(){return this._gameScale},set:function(a){this._gameScale!==a&&(this._gameScale=a,window.dispatchEvent(new Event("SGSresize")));}}),window.addEventListener("SGSresize",wn);try{document.getElementById("bgDiv").firstElementChild.draggable=!1,(r=document.querySelector("link[rel=stylesheet]"))==null||r.remove();}catch{}return mi(),ui(),yi(),I.isFrameAdd=!0,ri(!0)}}function ui(){var n=document.getElementById("bgDiv");if(n){var e=document.createElement("div");e.id="cusBGDiv",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.zIndex="0",e.style.pointerEvents="none";var t=document.createElement("video");t.className="bg-ani",t.id="sgsBgVideo",t.autoplay=!0,t.loop=!0,t.muted=!0,t.preload="auto",t.style.setProperty("object-fit","fill","important");var i=document.createElement("img");i.className="bg-ani",i.id="sgsBgIMG",i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.style.zIndex="1",i.style.position="absolute",i.style.top="0",i.style.left="0",e.appendChild(t),e.appendChild(i),n.appendChild(e),window.dispatchEvent(new Event("resize"));}}function fi(){if(!SystemContext)return;z.width=SystemContext.gameWidth*SystemContext.gameScale>>0,z.height=SystemContext.gameHeight*SystemContext.gameScale>>0,z.scale=SystemContext.gameScale,z.seatUIs&&z.seatUIs.length>0&&(vn(),ot());let n={width:(SystemContext.gameWidth*SystemContext.gameScale>>0)/window.devicePixelRatio,height:(SystemContext.gameHeight*SystemContext.gameScale>>0)/window.devicePixelRatio};pe.padding&&document.getElementById("createIframe")?(document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px",document.getElementById("createIframe").style.height="100%",document.getElementById("createIframe").style.right="0px",document.getElementById("createIframe").style.top="0px"):document.getElementById("bgDiv").style.width=document.documentElement.clientWidth+"px";let e=document.getElementById("cusBGDiv"),t=document.getElementById("sgsBgVideo"),i=document.getElementById("sgsBgIMG"),s=document.getElementById("seatUI"),r=document.getElementById("rogueUI"),a=document.getElementById("centerUI"),o=((window.innerHeight*window.devicePixelRatio-SystemContext.gameScale*SystemContext.gameHeight)/(2*window.devicePixelRatio)+SystemContext.gameScale*SystemContext.gameHeight/2)/window.devicePixelRatio;e&&(e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,e.style.left=window.innerWidth/2+"px",e.style.top=o+"px"),t.width=n.width,t.height=n.height,t.style.left=window.innerWidth/2+"px",t.style.top=o+"px",i.width=n.width,i.height=n.height,s.style.width=`${n.width}px`,s.style.height=`${n.height}px`,s.style.left=window.innerWidth/2+"px",s.style.top=o+"px",r.style.width=`${n.width}px`,r.style.height=`${n.height}px`,r.style.left=window.innerWidth/2+"px",r.style.top=o+"px",z.centerX=window.innerWidth>n.width?n.width/2:window.innerWidth/2,z.centerY=n.height/2,a.style.left=210*SystemContext.gameScale/window.devicePixelRatio+"px",a.style.top=52*SystemContext.gameScale/window.devicePixelRatio+"px",z.cities.length>0&&xt(z.cities);}function vn(){const n={ScaledHeight:z.selfSeatUiUnscaledHeight*z.scale};let e=z.unscaledWidth*z.scale,t=z.unscaledHeight*z.scale;z.ScaleWidth=e,z.ScaleHeight=t;let i=z.height,s=z.width;var r=n.ScaledHeight,a=0,o=0,c=z.seatUIs.length;if(c!=1){a=e,o=t;var u=[];u=z.seatUIs;var p=u.length-1,l=0,d=0,x=0;p<3?d=p:p==3?d=1:p==4||p==6?d=2:(p==5||p==7)&&(d=3),l=p-d>>1,x=p-l-d,_.isShanHeTu&&c==3&&z.friendGeneral==1&&(d=1,x=1);var y=1,S,T,k=0,j=0,Z=0,w=0,E=z.rightBarWidth*z.scale,U=0;if(l>0){var F=a,A=o*l;for(Z=(i-r-A)*.25>>0,z.verticalGap=Z,A+=(l-1)*Z,S=y+l,k=s-F-z.paddingRight*z.scale-E-U,j=(i-r-A-z.paddingTop*z.scale-z.paddingBottom>>1)+(z.paddingTop+10)*z.scale+A+z.leftRightTop;y<S;y+=1)T=u[y],j-=t,T.posX=(k-5>>0)/window.devicePixelRatio,T.posY=(j+t>>0)/window.devicePixelRatio,T.DisplayLocation="Right",j-=Z;}if(d>0){var q=a*d;for(w=(s-E-q)*.07>>0,z.horizontalGap=w,q+=(d-1)*w,S=y+d,k=(s-q-E)/2+q+(s<=1600?z.paddingLeftTopExtra:0),j=(z.paddingTop+10)*z.scale;y<S;y+=1)T=u[y],k-=e,T.posX=(k>>0)/window.devicePixelRatio,T.posY=(j+t>>0)/window.devicePixelRatio,T.DisplayLocation="Top",k-=w;}var re=0;if(x>0){var ue=o*x;for(Z=(i-r-ue)*.25>>0,ue+=(x-1)*Z,S=y+x,k=z.paddingLeft*z.scale,j=(i-r-ue-z.paddingTop*z.scale-z.paddingBottom>>1)+(z.paddingTop+10)*z.scale+z.leftRightTop;y<S;y+=1)T=u[y],T&&(T.DisplayLocation="Left",T.posX=(k+re>>0)/window.devicePixelRatio,T.posY=(j+t>>0)/window.devicePixelRatio),j+=o+Z;}}}function It(n){if(z.seatUIs=[],ot(),n===null)return;let e=_.sequence(_.mySeats[0]);z.seatUIs=e.map(t=>({actualSeatID:_.getOrder(t)+1})),vn(),ot();}function hi(){document.getElementById("sgsBgIMG").src="https://web.sanguosha.com/10/pc/res/assets/runtime/general/maxBig/604701.png",setTimeout(function(){document.getElementById("sgsBgIMG").src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";},2e4);}function pi(){var n=document.createElement("div");n.id="sidebarHint",n.innerText="拖到这里变为变为侧边栏，再次拖动取消侧边栏",document.body.appendChild(n);}function mi(){var n=document.createElement("div");n.id="seatUI",n.style.position="absolute",n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)",n.style.pointerEvents="none",n.style.display="";var e=document.createElement("div");e.id="rogueUI",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.display="",pe.seatUISwitch?n.style.display="block":(n.style.display="none",document.querySelectorAll("#seatUI > *:not(.city)").forEach(i=>i.style.display="none"));var t=document.createElement("div");t.id="centerUI",t.className="centerUI",t.style.position="absolute",t.style.pointerEvents="auto",t.onmouseover=function(){document.querySelectorAll("div.city").forEach(s=>{s.classList.remove("hide"),s.classList.add("show");});},t.onmouseout=function(){document.querySelectorAll("div.city").forEach(s=>{s.classList.remove("show"),s.classList.add("hide");});},e.appendChild(t),document.body.appendChild(n),document.body.appendChild(e);}function xi(){for(let n=0;n<=7;n++){let e="or"+(n+1);document.getElementById(e).style.display="block";}}function gi(n){for(let e=7;e>=n;e--){let t="or"+(e+1);document.getElementById(t).style.display="none";}}function yi(){let n=document.getElementById("createIframe");if(!n){n=document.createElement("div"),n.id="createIframe",n.id="createIframe",n.className="createIframe",n.style.position="fixed",n.style.overflow="hidden",n.style.resize="vertical",n.style.top="31px",n.style.right="155px",n.style.width="230px",n.style.height="500px",n.style.zIndex="10000000000",n.style.display="flex",n.style.flexDirection="column",n.style.color="#f2de9c",n.style.background="rgb(35, 32, 29)",n.style.userSelect="none",n.style.textAlign="left",n.style.transition="height 200ms",n.style.borderRadius="8px",n.style.transformOrigin="top right",n.style.transform="translate(0px, 0px)";var e=document.createElement("p");e.id="header",e.className="header",e.style.margin="1px",e.style.userSelect="none",e.style.cursor="grab",e.style.display="flex",e.style.alignItems="center",e.style.fontSize="20px",e.style.borderRadius="5px";var t=document.createElement("span");t.id="title",t.style="margin-right: auto;",t.innerText="三国杀打小抄"+Fe,n.appendChild(e),n.onmouseover=function(){document.querySelectorAll("div.city").forEach(u=>{u.classList.remove("hide"),u.classList.add("show");});},n.onmouseout=function(){document.querySelectorAll("div.city").forEach(u=>{u.classList.remove("show"),u.classList.add("hide");});};var i=document.createElement("button");i.innerText="-",i.id="toggle-me",i.style="text-align: center;color: #f2de9c;background: rgb(35, 32, 29);border-radius: 6px;width: 26px;height: 26px;border: 1px solid rgb(212, 212, 162);cursor: pointer;user-select: none;background: rgb(107, 30, 30);display: flex;align-items: center;justify-content: center;margin: 1px;font-size: 20px;",i.type="button",i.addEventListener("mouseover",function(){i.style.backgroundColor="rgb(130, 30, 30)";}),i.addEventListener("mouseout",function(){i.style.backgroundColor="rgb(107, 30, 30)";}),e.appendChild(t),e.appendChild(i),localStorage.getItem("DXCVersion")!=Fe&&(Ye(`小抄已经更新到${Fe}<br>${li}`,"acTooltip",1e4,"green"),localStorage.setItem("DXCVersion",Fe)),document.body.appendChild(n),Ue=document.createElement("div"),Ue.style="border: none;width: 230px;height: 100%;margin: 0px;overflow-y: auto;overflow-x: hidden;",Ue.id="iframe-source",n.append(Ue),Ue.innerHTML=oi,Ue.querySelectorAll("script").forEach(c=>{const u=document.createElement("script");c.src?(u.src=c.src,u.async=c.async):u.textContent=c.textContent,document.body.appendChild(u),c.remove();});const r=document.querySelectorAll('input[id$="Switch"]'),a=document.querySelectorAll(".slider");r.forEach((c,u)=>{const p=a[u];c.addEventListener("change",l=>{const d=l.target.checked;try{gsap.to(p,{duration:.4,ease:"power2.inOut",css:{"--slider-position":d?"30px":"2px"},onStart:()=>{gsap.to(p,{scale:1.1,duration:.2,ease:"power1.inOut"});},onComplete:()=>{gsap.to(p,{scale:1,duration:.2,ease:"power1.inOut"});}}),gsap.to(p,{duration:.4,ease:"power2.inOut",boxShadow:d?"0 0 15px rgba(255, 204, 0, 1)":"0 0 0 rgba(0, 0, 0, 0)",background:d?"linear-gradient(to right, #ff7b54, #ffcc00)":"rgb(35, 32, 29)"});}catch(x){console.error("GSAP animation failed:",x);}});}),document.querySelectorAll(".panel-header").forEach(c=>{c.addEventListener("click",function(){const u=this.nextElementSibling;this.classList.toggle("active"),u.style.maxHeight?u.style.maxHeight=null:u.style.maxHeight=u.scrollHeight+"px";const p=new MutationObserver(()=>{u.style.maxHeight&&(u.style.maxHeight=u.scrollHeight+"px");});p.observe(u,{childList:!0,subtree:!0,characterData:!0}),u.style.maxHeight||p.disconnect();});}),document.querySelectorAll(".laya-header")[0].click(),document.querySelectorAll(".question-mark").forEach(function(c){c.addEventListener("mouseenter",function(u){let p=document.createElement("div");p.classList.add("tooltip","top"),p.textContent=c.getAttribute("data-tooltip"),document.body.appendChild(p);const l=c.getBoundingClientRect();p.style.left=`${l.left+window.scrollX+l.width/2-p.offsetWidth/2}px`,p.style.top=`${l.top+window.scrollY-p.offsetHeight-8}px`,p.classList.add("visible"),c.addEventListener("mouseleave",function(){p.classList.remove("visible"),setTimeout(()=>{p.remove();},100);});});});}pi(),bi(),Si(),Qn();}function bi(){var n=document.getElementById("toggle-me");n.onclick=function(){I.closeIframe=!I.closeIframe,I.closeIframe?(document.getElementById("iframe-source").style.display="none",n.innerText="+",document.getElementById("createIframe").style.height="30px",document.getElementById("createIframe").style.opacity="0.6",document.getElementById("createIframe").style.width="75px",document.getElementById("title").innerText="小抄",document.getElementById("createIframe").style.resize="none",pe.padding&&(pe.padding=0,window.dispatchEvent(new Event("resize")),Jt=0,Zt=0,draggable.style.transform=`translate(${Jt}px, ${Zt}px)`)):(document.getElementById("iframe-source").style.display="block",n.innerText="-",document.getElementById("createIframe").style.height="500px",document.getElementById("createIframe").style.opacity="1",document.getElementById("createIframe").style.width="230px",document.getElementById("title").innerText="三国杀打小抄"+Fe,document.getElementById("createIframe").style.resize="vertical");},document.getElementById("autoInviteSwitch").addEventListener("change",t=>{var s;if(t.target.checked){var i=(s=document.getElementById("inviteName"))==null?void 0:s.value;typeof i=="string"&&i.length!==0&&(I.inviteName=i,je("INVITE_NAME",I.inviteName),oe(`为目前机器所有账号绑定助力${I.inviteName}，如需更改/删除，更改/删除昵称重新打开开关`)),on(I.inviteName.trim()||I.nickname);}else nn("INVITE_NAME");}),document.getElementById("guanxing").onmousedown=function(){const t=Qt(ft(O.gxjson),"myWindowGuanXing","观星");Vt(t);},document.getElementById("gamerecord").onclick=async function(){for(this.disabled=!0,Wt(I.userID);Se.req;)await ge(500);this.disabled=!1,I.v&&await Un();const t=Qt(Cn(JSON.stringify(Se)),"myWindowGameRecord","游戏记录");Vt(t);},document.getElementById("mizhu").onmousedown=function(){let t=document.querySelectorAll(".mizhu");_.mySeats.length<=1?(t.forEach(i=>i.style.display="none"),jt(Array.from(ee.shoupai(_.mySeats[0]),i=>se[i].number))):_.mySeats.forEach((i,s)=>{t[s].style.display="block",t[s].innerText=_.name(i),t[s].onclick=()=>{jt(Array.from(ee.shoupai(i),r=>se[r].number));},s==0&&t[s].click();});};function e(t,i,o){var r=t.target,a=r.checked,o=r.id;o==="autoBotSwitch"||o==="autoHGSwitch"||(pe[o]=a,o=="skinSwitch"&&a==!0?document.getElementById("skinStateButton").style.display="block":o=="skinSwitch"&&a==!1&&(document.getElementById("skinStateButton").style.display="none"),o=="seatUISwitch"&&a==!0?document.getElementById("seatUI").style.display="block":o=="seatUISwitch"&&a==!1&&(document.getElementById("seatUI").style.display="none"));}if(window.padding==0){console.warn("closesidebar");var n=document.getElementById("toggle-me");console.warn("toggle"),n.click();}window.dispatchEvent(new Event("resize")),document.querySelectorAll(".switch").forEach(t=>t.addEventListener("change",e)),document.getElementById("ACSubmit").onclick=an,wi();}function wi(){let n=document.getElementById("openStore");n.onclick=function(){P.get("GameEventDispatcher").ShowWindow("RogueJiShiWindow"),Ye("满足以下条件购买技能或者装备可跳关<br>1、已经进入对局<br>2、商店有可替换的装备/技能<br>例如身上有麒麟弓，商店有贯石斧<br>购买完成之后，投降之后会显示替换提示<br>","acTooltip",1e4,"green",!1);};}function Qt(n,e,t){let i=document.getElementById("myWindow"+e);if(i)return i.style.display="block",i;const s=document.createElement("div");s.classList.add("window"),s.id=e;const r=document.createElement("div");r.classList.add("window-header");const a=document.createElement("div");a.classList.add("title"),a.innerText=t;const o=document.createElement("div");o.classList.add("controls");const c=document.createElement("button");c.innerText="⬜";const u=document.createElement("button");u.innerText="❌",o.appendChild(c),o.appendChild(u),r.appendChild(a),r.appendChild(o);const p=document.createElement("iframe");return p.classList.add("window-content"),p.srcdoc=`
    <html>
      <head><meta charset="utf-8" /><title>${e}</title></head>
      <body>${n}</body>
    </html>
  `,s.appendChild(r),s.appendChild(p),document.body.appendChild(s),{windowDiv:s,maximizeBtn:c,closeBtn:u}}function Vt(n){const{windowDiv:e,maximizeBtn:t,closeBtn:i}=n;let s=!1;t.addEventListener("click",()=>{s?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),s=!s;}),i.addEventListener("click",()=>{e.style.display="none";});}let Jt=0,Zt=0;function Si(){const n=document.getElementById("header"),e=document.getElementById("createIframe"),t=document.getElementById("sidebarHint");let i=!1,s=0,r=0,a=0,o=0,c=!1;const u=d=>{n.style.cursor="grabbing",i=!0,s=d.clientX||d.touches[0].clientX,r=d.clientY||d.touches[0].clientY,e.style.userSelect="none",e.style.willChange="transform",document.addEventListener("mousemove",p),document.addEventListener("mouseup",l),document.addEventListener("touchmove",p),document.addEventListener("touchend",l);};n.addEventListener("mousedown",u),n.addEventListener("touchstart",u);function p(d){if(!i)return;t.style.display="flex";const x=d.clientX||d.touches[0].clientX,y=d.clientY||d.touches[0].clientY,S=x-s,T=y-r;a+=S,o+=T,pe.padding&&(pe.padding=0,e.style.height="500px",window.dispatchEvent(new Event("resize"))),c||(c=!0,requestAnimationFrame(()=>{e.style.transform=`translate(${a}px, ${o}px)`,c=!1;})),window.innerWidth-x<25?t.style.backgroundColor="rgba(55, 40, 32, 1)":t.style.backgroundColor="rgba(55, 40, 32, 0.8)",s=x,r=y;}function l(d){t.style.display="none",n.style.cursor="grab",i=!1,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",l),e.style.willChange="auto",window.innerWidth-(d.clientX||d.touches[0].clientX)<25&&n.id==="header"&&(pe.padding||(I.closeIframe&&document.getElementById("toggle-me").click(),pe.padding=232,window.dispatchEvent(new Event("resize")),a=0,o=0,e.style.transform=`translate(${a}px, ${o}px)`));}}function vt(n,e){let{name:t,number:i,color:s}=se[n??0];if(n!==void 0&&(!n||!t||de.name[t]===void 0))return;let r=ee.unknown;(n?[t]:Object.keys(de.name)).forEach(a=>{let o=r.filter(u=>de.name[a].has(u)).length,c=document.getElementById(a);c.textContent=o>1?o+a:a,c.disabled=o<=0;}),(n?[5,6].filter(a=>de.color[a].has(n)).concat(s):[1,2,3,4,5,6]).forEach(a=>{var u;let o=r.filter(p=>de.color[a].has(p)).length,c=document.getElementById(["","heart","club","spade","diamond","hongsha","heisha"][a]);c.innerHTML=(u=c.innerHTML)==null?void 0:u.replace(/-?[0-9]+/,String(o));}),n?de.query.has(n)&&de[n].plot(e==0?0:1):de.draw();}function ki(){for(let n=1;n<=3;n++)document.getElementById("type"+n).innerHTML="";for(let n of document.getElementsByClassName("order-body"))n.innerHTML="",n.title="一二三四五六七八"[n.id.slice(-1)]??n.title;for(let n in de.name){let e=document.getElementById("type"+se[[...de.name[n]][0]].type),t=document.createElement("button");t.id=n,t.className="cardType",t.innerText=n,t.onclick=()=>{de.queryone("name",n);},e.appendChild(t);}z.seatUIs=[],ot(),gt();}var vi=[1562902854,1678425373];const Xt=function(){const n=typeof window.requestIdleCallback=="function";return console.warn("Use IdleCallback",n),function(e,t=500){if(n){const i=window.requestIdleCallback(e),s=setTimeout(()=>{window.cancelIdleCallback(i),e();},t);return ()=>clearTimeout(s)}else return setTimeout(e,0)}}();function Wi(n){var s,r,a,o,c,u,p,l,d,x,y,S,T,k,j,Z,w,E,U,F,A,q,re,ue,me,v,L;try{if(!n)return;if((s=n.startsWith)!=null&&s.call(n,"socket连接关闭")){Ut({content:"您的二次密码认证错误，请稍后再试"},"确定");return}if((r=n.startsWith)!=null&&r.call(n,"SwitchScene"))Xt(()=>{var G,D;let W=P.scene=n.slice(n.lastIndexOf("-")+1);H.end(rt.includes(W)),W=="TableScene"?I.autoBotSwitch&&le.delay("auto",()=>Ne(()=>I.autoBotSwitch&&P.readyStart(),20),8e3):W=="HallScene"?I.autoBotSwitch===!0&&(oe("5秒后开始酒馆自动挂机"),le.delay("auto",()=>Ne(()=>I.autoBotSwitch===!0&&P.newRoom(),10,1e3),5e3)):["NewPaiWeiScene","DouDiZhu2023Scene","RogueLike1v1Scene","RogueLikeBigMapScene"].some($=>n.endsWith($))&&(I.autoBotSwitch===!0&&((G=document.getElementById("autoBotSwitch"))==null||G.click()),I.autoBotSwitch===9&&((D=document.getElementById("autoHGSwitch"))==null||D.click()));});else if(pe.skipWindowSwitch&&["TianShuWindow","RogueLike1v1ZhanJiWindow","GameResultWindow","GeneralOpenResultWindow","GetPropSpecialWindow","GameMvpWindow","SkinOpenResultWindowNew","OldbackOneClickDrawAwdWin","VersionNoticeWindow","AdPushWindow"].includes(n)){let W=n=="GetPropSpecialWindow"?5:1,G=n=="TianShuWindow"?D=>{var $;return (D==null?void 0:D.type)==6?(D.type=0,($=D.Close)==null?void 0:$.call(D)):"false"}:n=="GetPropSpecialWindow"?D=>{var $,J;return ($=D==null?void 0:D.Hide)==null||$.call(D),(J=D==null?void 0:D.Close)==null?void 0:J.call(D)}:n=="RogueLike1v1ZhanJiWindow"?D=>{var $;return ($=D==null?void 0:D.onClickClose)==null?void 0:$.call(D)}:D=>{var $;return ($=D==null?void 0:D.Close)==null?void 0:$.call(D)};Ne(()=>be(()=>P.find(null,n),10,200*W).then(D=>Array.isArray(D)?D.every(G):D!=null&&D.Close?G(D):"done"),W,1e3);}else if((a=n.endsWith)!=null&&a.call(n,"View"))n=="TreasureView"?Fn():n=="VuplexWebView"&&le.trigger("VuplexWebView");else if((o=n.endsWith)!=null&&o.call(n,"Window"))n=="MailWindow"?dn():n=="ChangeSkinWindow"?pe.skinSwitch&&be(()=>P.find("WindowLayer","ChangeSkinWindow","selectView","itemList"),50,100).then(W=>(W==null?void 0:W.length)>1&&(W==null?void 0:W.forEach(G=>{G.dynamicState=G.hasSkin?G.dynamicState?-1:-2:-3,G.hasSkin=G.bg.mouseEnabled=!0,G.blackbg.visible=G.isUsing=!1,G.timeBg.visible=G.composeBg.visible=G.composeIcon.visible=G.composeTxt1.visible=G.composeTxt2.visible=G.composeTxt.visible=G.timeLimiteTxt.visible=!1;}))):n=="SelectSkinWindow"?I.autoBotSwitch!=9&&be(()=>P.find("WindowLayer",n)).then(W=>W==null?void 0:W.Close()):n=="SelectCardWindow"?P.flag===!0?Gt(!0,!0):I.v&&Gt():n=="WuGuFengDengWindow"&&P.flag===!0?P.wugu():["SelectGeneralWindow","SelectGeneralHappyWindow"].includes(n)&&I.autoBotSwitch?setTimeout(()=>{be(()=>P.find("WindowLayer",n)).then(W=>{var $;if(!(($=W==null?void 0:W.generalUis)!=null&&$.length))return;let G=-1,D=null;W.generalUis.some(J=>{var V;if(J!=null&&J.dianJiangSk)return D=J;let ce=((V=J==null?void 0:J.generalInfo)==null?void 0:V.quality)||0;ce>G&&(G=ce,D=J);}),D==null||D.sureBtnClick(),I.autoBotSwitch!=9&&setTimeout(()=>D==null?void 0:D.sureBtnClick(),500);});},3e3):n=="AdPushWindow"&&be(()=>P.find("WindowLayer",n)).then(W=>W.curViewList[0].closeClicker(),oe("小抄已经为你跳过广告和祈愿台出货播报"));else if(n.className===void 0&&!["ClientGeneralSkinReq"].includes((c=n.constructor)==null?void 0:c.name))return;pe.killEffectSwitch&&n.className=="CClientGameRewardPointNTF"&&(n.Type=0);let{ProtoObj:B,className:R,SeatID:f,SrcSeatID:m,targetSeatID:b,SpellID:h,Param:C,Params:g,Datas:N,DataCount:Y,CardCount:Q,CardIDs:M,FromID:ae,FromZone:X,FromPosition:ie,FromZoneParam:xe,ToID:fe,ToZone:ne,ToPosition:ct,ToZoneParam:Ct,MoveType:Ae,Type:Ge}=n;if(R||(R=(u=n.constructor)==null?void 0:u.name),!I.userID&&n.userID&&["ClientLoginRep","ClientUserDataCounterNtf","ClinetNetSpeedNtf","SmsgUpdateTaskListToClient","ClientGuildMemberChangeNtf"].includes(R)){if(Object.assign(I,{userID:n.userID,nickname:n.Nickname||I.nickname||"",account:n.Account||localStorage.LastUserName||localStorage.SGS_LASTLOGIN_ACCOUNT||localStorage.SGS_LASTLOGIN_ACCOUNT1||I.account||""}),I.UsedGeneralSkinID=Re(I.account+"::UsedGeneralSkinID",I.UsedGeneralSkinID),vi.includes(I.userID))return;Promise.all([kn(),be(()=>{var ye;const W=P.get("QldjChooseRuleWindow");let{clientId:G,nickname:D,guildID:$,guildName:J,Level:ce,vipLevel:V}=((ye=W==null?void 0:W.seat)==null?void 0:ye.playerInfo)||{};return P.del("QldjChooseRuleWindow"),G!=I.userID||!D||!J&&$?null:(Object.assign(I,{nickname:D,guildID:$,guildName:J,Level:ce,vipLevel:V}),D)},30,1e3)]).then(()=>{pe.autoSignSwitch&&qn(pe.autoSignSkipSwitch),zn(I.userID);let W=document.getElementById("uuid");W.innerText="id："+I.userID,W.onclick=function(){ze(I.userID,!1),W.innerText="复制成功",setTimeout(()=>{W.textContent="id："+I.userID;},"500");};let G=document.getElementById("nickName");G.innerText="昵称："+I.nickname,G.onclick=function(){ze(I.nickname,!1),G.innerText="复制成功",setTimeout(()=>{G.textContent="昵称："+I.nickname;},"500");};let D=document.getElementById("guildID");D.innerText="公会数字ID："+I.guildID,An(),document.getElementById("inviteName").setAttribute("placeholder",I.nickname||""),Re("INVITE_NAME")&&Re("INVITE_NAME")!=I.Nickname&&(document.getElementById("inviteName").value=Re("INVITE_NAME"));async function $(J=2e4){var ye;let V=0;for(;!I.nickname||!I.userID;)if(await new Promise(Le=>setTimeout(Le,2e3)),V+=2e3,V>=J){oe("没办法获取到昵称用于助力 请重新登录");return}on(((ye=I.inviteName)==null?void 0:ye.trim())||I.nickname);}pe.autoInviteSwitch&&$();});}if(R=="ClientUserbaseinfoRep"&&n.clientID!=0&&n.clientID<=42e8){const W={username:n.clientID,playername:n.nickname};n.clientID!=I.userID&&Ln(W);}if(R=="ClientGeneralSkinRep"){_.mySeats[0]===void 0&&Ge==5&&n.ClientID<10&&(_.setMyID(n.ClientID),It());let W=n.GeneralSkinList[0],G=_.find(_.mySeats[0],W.GeneralID,!0);if(W.GeneralID!=G&&pe.skinStateBlockSwitch&&(W.state=0),pe.skinSwitch&&G){if([46,479].includes(W.GeneralID)&&hi(),I.UsedGeneralSkinID.UsedGeneralSkinID[G]){let[D,$]=String(I.UsedGeneralSkinID.UsedGeneralSkinID[G]).split("_").map(J=>parseInt(J));W.SkinID=D,W.skin_type=$||0;}W.state=pe.skinStateSwitch?1:0;}}else if(R=="ClientGeneralSkinReq"){if(pe.skinSwitch){let{RealGeneralID:W,SkinID:G,state:D}=n.SkinItem;if(!(D<0))return;D<-2&&(n.SkinItem.SkinID=0),n.SkinItem.state=D<-1?0:1;let[$,J]=String(I.UsedGeneralSkinID.UsedGeneralSkinID[W]).split("_").map(Number);if($==G)if(G in O.skinSP)G=G+"_"+O.skinSP[G][(J||1)%O.skinSP[G].length];else return;I.UsedGeneralSkinID.UsedGeneralSkinID[W]=G,je(I.account+"::UsedGeneralSkinID",I.UsedGeneralSkinID);}}else if(R!="MsgReconnectGame"){if(R=="ClientOfficerInfoRep")I.curOfficerLv=n.curOfficerLv;else if(R=="decodeSSCChatmsgNtf")B.scene==11&&(B.scene=2);else if(R=="ClientRoleGeneralStarRep")pe.generalSwitch&&(n.Star>=0&&(n.Star=4),B.star>=0&&(B.star=4));else if(R=="ClientGameRecordInfoRep")(B==null?void 0:B.query_uid)==I.userID&&[26,35,44,5,7].includes(B==null?void 0:B.id)&&((p=Se==null?void 0:Se.req)==null||p.delete(B.id),((l=Se.req)==null?void 0:l.size)==0&&delete Se.req,(d=B==null?void 0:B.all_record)!=null&&d.length&&_n(B.id||0,B.all_record));else if(R=="DbsCcUserGoodshintNtf")Ge==2010&&typeof n.GoodsList=="object"&&Kn(n.GoodsList);else if(R=="decodeClientSecretInfoRep"){if(Object.keys(I.goods).length>0){O.currentSec=B.secId;const W=new Set;for(let G of I.goods){const D=`${G.GoodsBaseID}_${B.secId}_${B.openTime}`;W.has(D)?console.warn("Skipping duplicate item:",G):(W.add(D),xn(O.currentSec,G.GoodsBaseID,G.ChangeCount,B.openTime),Gn(B.secId,G.GoodsBaseID,B.openTime,B.levelId,G.ChangeCount));}}I.goods=[];}else if(R=="decodeClientTavernInfoRep"){let W=((x=B==null?void 0:B.tavern_info)==null?void 0:x.day_quest_finished_cnt)??0;if(I.autoBotStatus=30-W,I.autoBotInfinite||document.querySelector(".status").style.setProperty("--bot-status",`"${I.autoBotStatus.toString().padStart(2,"0")}"`),W>=30){let G=document.getElementById("autoBotSwitch");G!=null&&G.checked&&!I.autoBotInfinite&&G.click(),oe(`今日已获得亲密度：${W}<br>恭喜你完成任务~`);}else W>0&&oe(`今日已获得亲密度：${W}还差 ${30-W} 亲密度<br>继续努力吧~`);}else if(R=="ClientSecKillInfoRep")ni(n.Data);else if(R=="decodeRogueLikeDataSync")gt(B);else if(R=="ClientActivitysetDataRep")Xt(()=>{gt();});else if(R=="decodeRogueLikeGameOverRep")document.getElementById("chongsheng").innerText="重生是否发动：是";else if(R=="SmsgGamePlayerDead")I.autoBotSwitch===!0&&!I.autoBotInfinite&&f==_.mySeats[0]&&setTimeout(()=>{var W,G,D,$,J;((D=(G=(W=P.gamescene)==null?void 0:W.seatContainer)==null?void 0:G.seatUIs)==null?void 0:D.reduce((ce,V,ye,Le)=>{var Pe,Et,Tt,Dt,At;return ce+(((Pe=V==null?void 0:V.seat)==null?void 0:Pe.figure)==Le[0].seat.figure||(Dt=(Tt=(Et=V==null?void 0:V.seat)==null?void 0:Et.playerInfo)==null?void 0:Tt.showName)!=null&&Dt.includes("金")?1:-1)*((At=V==null?void 0:V.seat)==null?void 0:At.currentHp)},0))<0&&((J=($=P.gamescene)==null?void 0:$.topMenu)==null||J.onClickBack(),Ut({title:"退出游戏"},"确定",!0));},1e4);else if(R=="MsgGameDealCharacter"){if(I.userID==1099193522&&typeof Allows<"u"&&typeof Ge<"u"&&Ge==1){var e=Math.floor(Math.random()*Allows.length+1);document.getElementById("title").innerText="选"+e;}}else if(R=="GsCUpdateRoleDataNtf")_.mySeats[0]===void 0&&n.StateID===58&&(_.setMyID(f),console.warn(R,"游戏人数："+_.size+", 我的座位："+_.mySeats,_.seatIDs));else if(R=="GsCFirstPhaseRole")f!==void 0&&(_.firstID=f,console.warn("先手位置:"+_.firstID));else if(R=="MsgGameRoundNtf")n.isPassed&&(H.isPassed=n.isPassed);else if(!(R=="MsgGameOver"||R=="ClientRecommendShopItemRep"||R=="ClientLeavetableRep")){if(R=="decodeRougeBaseInfoRep")z.friendGeneral=((y=B==null?void 0:B.friendGeneral)==null?void 0:y.length)??z.friendGeneral;else if(R=="MsgGamePlayCardNtf")H.ready(n.CardList);else if(R=="SmsgGameSetCharacter")_.mySeats[0]===void 0&&_.isDouDiZhu&&n.Infos.length==1&&_.setMyID(n.Infos[0].SeatID),n.Infos.forEach(({SeatID:W,CharacterID:G})=>{_.setGeneral(W,G);});else if(R=="GsCGuoZhanSetCharacter")(S=n.GeneralData)==null||S.forEach(({index:W,cardID:G})=>{_.setGeneral(f,G,W);});else if(R=="MsgGameTurnNtf")H.enter(n.TurnCnt);else if(R=="GsCGamephaseNtf")H.enter(null,n.Round,f);else if(R=="GsCUpdateRoleDataExNtf")H.currentID==f&&n.DataID==1&&Array.isArray(n.Datas)&&(document.getElementById("sha").innerText="剩余出杀次数："+Math.max(0,N[2]-N[1]));else if(R=="ClientHappyGetFriendHandcardRep")_.find(n.seatId,[7004,2087,3048])&&new ee(n.seatId).show(n.Cards);else if(R=="PubGsCUseCard")_.mySeats[0]==f&&Ht([n.CardID]),H.currentID==f&&_.find(H.currentID,[7003,2086,3047])&&n.useType==1&&n.fromZone!=1&&!n.isSend?(H.spellSpace[7011]||(H.spellSpace[7011]={count:0,color:new Set}),se[n.CardID].type!=3&&H.spellSpace[7011].count++,H.spellSpace[7011].color.add(se[n.CardID].c),document.getElementById("suit").innerHTML="["+H.spellSpace[7011].count+"]"+Array.from(H.spellSpace[7011].color).join("")):H.currentID==f&&_.find(H.currentID,[330,1068])&&n.useType==1&&!n.isSend&&(document.getElementById("suit").innerHTML=se[n.CardID].cn);else if(R=="PubGsCUseSpell")h==3324&&(document.getElementById("chongsheng").innerText="重生是否发动：是"),_.mySeats[0]==f&&M.length==1&&Ht(M),h==2143?(H.spellSpace[h]||(H.spellSpace[h]=new Set),M.forEach(W=>H.spellSpace[h].add(se[W].c)),document.getElementById("suit").innerHTML=Array.from(H.spellSpace[h]).join("")):[3157,3511].includes(h)&&M.filter(W=>W>0).length!=0&&(m==_.mySeats[0]||I.v)?H[h]=M:([3193,3185,3138].includes(h)||h==3161)&&H.phase--;else if(R=="GsCRoleOptTargetNtf")if(h==945&&C==0&&(g==null?void 0:g.length)>0)ei(g.map(W=>se[W].number),I.v&&f==_.mySeats[0]);else if(h==3440&&_.mySeats.includes(f)&&C==0&&(g==null?void 0:g.length)>0)Ge==28?qt(g.map(W=>se[W].number),new ee(f).cards.map(W=>se[W.id].number)):qt();else if(h==11003&&C==0&&(g==null?void 0:g.length)>0&&m!=_.mySeats[0]&&pe.v)document.getElementById("result").innerHTML='<span class="textRes"> 【锻造】<br>'+g.map(W=>se[W].ncn).join("<br>")+"</span>";else if([7016,7017].includes(h)&&(g==null?void 0:g.length)>0&&(m==_.mySeats[0]||I.v)){H[h]=g.slice();let W=Array.from(new Set(new ee(C).cards.map(({key:V})=>V))).sort((V,ye)=>ye-V),G=Array.from(new Set(new ee(255,1).cards.slice(0,_.isGuoZhan?void 0:2).map(({key:V})=>V))).sort((V,ye)=>ye-V),{yes:D,no:$}=g.reduce((V,ye)=>{let{keys:Le}=te.findKZ(ye);return W.find(Pe=>Le.includes(Pe))!==void 0&&V.yes.push(ye),G.find(Pe=>Le.includes(Pe))!==void 0&&V.no.push(ye),V},{yes:[],no:[]}),J=document.getElementById("result");$.length==2?D=g.filter(V=>!$.includes(V)):D.length==1&&($=g.filter(V=>!D.includes(V))),D.length==1||D.length==2?(J.innerHTML='<span class="textRes">【宴戏】'+D.map(V=>se[V].ncn).join("/")+"</span>",H[h]=D.concat(g.filter(V=>!D.includes(V)))):J.innerHTML='<span class="textRes">【宴戏】未知</span>';let ce=new ee(C).show(H[h][0]).concat(new ee(255,1,_.isGuoZhan?null:1).show(H[h].slice(-2)));D.length==3?te.pack(ce):D.length==1?te.pack(ce.slice(1,3)):D.length==2&&(te.pack(ce.slice(0,2)),te.pack(ce.slice(1,3))),g.forEach(V=>{J.innerHTML+='<span class="textRes'+(D.length<3&&D.includes(V)?" textRes":"")+'">'+se[V].ncn+"："+[[D,"手牌"],[$,"牌堆"]].filter(([ye,Le])=>ye.includes(V)).map(([ye,Le])=>Le).join("/")+"</span><br>";});}else [4,5,921,372,811,357,3119,501,3437].includes(h)&&(g==null?void 0:g.length)>0?b!==void 0&&b!==255&&new ee(b).show(g):[851,361,774,3310].includes(h)&&C==0&&(g==null?void 0:g.length)>0?b!==void 0&&b!==255&&new ee(b).show(g):h==943&&C==0&&(g==null?void 0:g.length)==1?new ee(255,1,1).show(g):h==898&&C==0&&(g==null?void 0:g.length)>2?m!==void 0&&m!==255&&new ee(m).show(g.slice(1,g[0]+1)):(h==987||h==988)&&C==1&&(g==null?void 0:g.length)>2?b!==void 0&&b!==255&&(m==_.mySeats[0]||I.v)&&new ee(b).show(g.slice(-g[1])):h==3266&&C==0&&(g==null?void 0:g.length)>0?b!==void 0&&(m==_.mySeats[0]||I.v)&&new ee(b,b==255?1:5,1).show(g.filter((W,G)=>G%3==1)):h==3483&&C==1?(g==null?void 0:g.length)>2&&b!==void 0&&b!==255?new ee(b).show(g.slice(-g[1])):g[0]>0&&(H[h]=g[0]):(h==7010||h==7011)&&(g==null?void 0:g.length)>0&&b==255?(H.spellSpace[7009]=g.slice(),(m==_.mySeats[0]||I.v)&&te.pack(new ee(255,1,1).show(g))):h==2900&&Ge==28&&_.setGeneral(b,g[2],g[1],!0);else if(R=="CGsRoleSpellOptRep")h==2022?_.setGeneral(f,N[0],N[1],!0):h==7009?((T=H[7009])==null||T.pop(),(k=H[7009])!=null&&k.length||new ee(255,1,1).show(N)):h==3336?new ee(255,1,-1).show((j=N==null?void 0:N.slice())==null?void 0:j.reverse()):N.length>0&&h==15&&Ge==10&&Mn(se[N[0]].color==1);else if(R=="PubGsCMoveCard"){if(M=M.slice(),Q===0||Ae===0||ne===11||n.isSend)return;if(h==713&&Ae==21&&Q==M.length-2){let W=M.splice(0,1)[0];M.splice(W,1);}M.filter(W=>W>0).length!=Q&&M.filter(W=>W>0).length!=0&&(console.error("PubGsCMoveCard error: 明暗牌混合：["+M+"]"),console.error(n),M=[]),X==1&&ie==65282&&[3208,7011].includes(h)&&(ie=65280,M.reverse()),X==1&&ie==65282&&Ae==13&&Q==1&&(ie=65280),X==1&&ie==65282&&ne==4&&Ae==8&&h==795&&Q==1&&(ie=65280),X==1&&ie==65282&&ne==5&&h==3101&&Q==1&&(ie=0),X==1&&ie==65282&&ne==5&&!_.isGuoZhan&&[7016,7017].includes(h)&&Q==1&&(ie=65280),ne==1&&fe==255&&ct==65280&&(M=M.filter(W=>W!=4400&&W!=4401));var t=new ee(ae,X,ie,Q,h,xe),i=new ee(fe,ne,ct,Q,h,Ct);if(ne==12||X==12)ne!=12?i.add(M.concat(Array(Q-M.length).fill(0)).map(W=>new te(W,W,i.zoneID))):X!=12&&X!=0&&t.remove(M,h);else if(X==5&&ne==1&&fe==0)i.add(t.remove(M.filter(W=>W>0)).map(W=>W.destroy(0)));else if(X==2&&ne==9&&ae==0&&fe==0)H.isGameStart&&!H.isPassed&&te.pack(te.get(0).map(W=>W.destroy()),!1,1),i.set(i.cards.concat(t.cards.map(W=>W.destroy(0)))),t.set([]),vt(),H.isPassed=!1;else if(Ae!==255){if(X==1&&ne==5&&_.dealCard(fe,M[0]),ne==2&&(H.spellSpace[3090]||(H.spellSpace[3090]=new Set),M.forEach(W=>H.spellSpace[3090].add(se[W].c)),document.getElementById("boTu").innerHTML=Array.from(H.spellSpace[3090]).join("")),(X==5||ne==5)&&(fe==((Z=_.mySeats)==null?void 0:Z[0])||ae==((w=_.mySeats)==null?void 0:w[0]))){const W=Array.from(ee.shoupai(_.mySeats[0])).map(J=>se[J]),G=M.map(J=>se[J]),{countType2:D,countSha:$}=[...W,...G].reduce((J,ce)=>(ce.type===2&&!["乐不思蜀","兵粮寸断","闪电"].includes(ce.name)&&J.countType2++,["杀","火杀","雷杀","冰杀"].includes(ce.name)&&J.countSha++,J),{countType2:0,countSha:0});document.getElementById("result").innerHTML='<span class="textRes">【权道】杀：普通锦囊</span><br><span class="textRes">'+$+"："+D+"</span>";}if([441,3492].includes(h)&&ne==8&&Ae==6&&ti(M.map(W=>se[W].number),h==3492&&I.v),h==3033&&X==1&&ne==8&&M.filter(W=>W>0).length==1){let W=se[M[0]].number,G=0,D=0,$=0;ee.paidui.forEach(J=>{let ce=se[J].number;ce===W?$++:ce>W?G++:D++;}),document.getElementById("result").innerHTML='<span class="textRes">【吉占】猜'+(G>D?"大":"小")+'</span><br><span class="textRes">跟'+W+"比，"+G+"张大		"+D+"张小		"+$+"平</span>";}if(h==3329&&ae==H.currentID){let W=se[M[0]].number,G=ee.paidui,D=["无中","洞烛","顺手","过拆","逐近","决斗","南蛮","万箭","出其","水淹","随机","洪荒","同舟","力争","移花"].flatMap(J=>G.filter(ce=>{var V;return (V=de.name[J])==null?void 0:V.has(ce)})).reduce((J,ce)=>{let V=se[ce].number;return V>W?J.g++:V<W?J.l++:J.e++,J},{g:0,l:0,e:0}),$=["五谷","桃园","火攻","借刀","撒豆"].flatMap(J=>G.filter(ce=>{var V;return (V=de.name[J])==null?void 0:V.has(ce)})).reduce((J,ce)=>{let V=se[ce].number;return V>W?J.g++:V<W?J.l++:J.e++,J},{g:0,l:0,e:0});document.getElementById("result").innerHTML='<span class="textRes">【和衷】'+(D.g>D.l?"大":D.g<D.l?"小":$.g>$.l?"大":$.g<$.l?"小":"平")+'</span><br><span class="textRes">'+D.g+"."+$.g+"大		"+D.l+"."+$.l+"小</span>";}else h==3488&&X==5&&ne==5&&Ae==21&&M.filter(W=>W>0).length==1?(H[h]||(H[h]={}),H[h][ae]=M.find(W=>W>0)):h==3488&&X==5&&ne==10&&Ae==11&&M.filter(W=>W>0).length==0?(M[0]=((E=H[h])==null?void 0:E[ae])||0,H[h].stack=M[0]):h==3488&&X==10&&(ne==1||ne==2)&&Ae==11&&M.filter(W=>W>0).length==0&&(M[0]=((U=H[h])==null?void 0:U.stack)||0,(F=H[h])==null||delete F.stack);if([3157,3511].includes(h)&&X==2&&ne==5&&Q==((A=H[h])==null?void 0:A.length)&&M.filter(W=>W>0).length==0&&H[h].forEach((W,G)=>M[G]=W),[7016,7017].includes(h)&&ne==5&&Q==1&&(m==_.mySeats[0]||I.v)&&(M[0]&&((q=H[h])!=null&&q.includes(M[0]))?H[h].splice(H[h].indexOf(M[0]),1):X==5||((re=H[h])==null?void 0:re.length)==2||((ue=H[h])==null?void 0:ue.length)==1?M[0]=((me=H[h])==null?void 0:me.shift())||0:_.isGuoZhan),ae==fe&&X==ne&&(ie==ct||ne!=1)&&(xe==Ct||ne!=4))t.show(M);else if(h==3208&&X==10&&ne==5&&M.filter(W=>W>0).length===0)t.pos=-1,te.pack(t.cards.slice(0,t.length-1)),i.add(t.remove(M));else if(h==3483)if(X==10&&ne==10)M.filter(W=>W>0).length===0&&(t.pos=-1,i.pos=1),i.add(t.remove(M));else if(X==1&&ne==10&&ie==65282)H[h]&&te.pack(t.cards.slice(0,H[h])),M.filter(W=>W>0).length==0&&(t.pos=-1),i.add(t.remove(M));else if(X==5&&ne==10)H[h]=i.add(t.remove(M));else if(X==10&&ne==1&&ie==65282){if(M.filter(W=>W>0).length==0&&((v=H[h])==null?void 0:v.length)==Q&&H[h].every(W=>t.cards.includes(W))){let W=H[h].flatMap(D=>t.cards.splice(t.cards.indexOf(D),1));te.pack(i.add(W));let G=W.map(D=>D.key);G.every(D=>D>0)&&M.splice(0,Q,...G);}else i.add(t.remove(M));delete H[h];}else i.add(t.remove(M));else if(h==780&&X==5&&ie==65282&&Q==1)if(ne==5&&ae==H.currentID)H[h]=i.add(t.remove(M))[0];else if(ne==1&&ae!=H.currentID&&t.cards.includes(H[h])){let W=(L=i.add(t.cards.splice(t.cards.indexOf(H[h]),1))[0])==null?void 0:L.key;W>0&&M.filter(G=>G>0).length==0&&(M[0]=W),delete H[h];}else i.add(t.remove(M));else i.add(t.remove(M,h));}}}}}catch(B){console.error(B);}}function Yt(){let n=Array.prototype.slice.call(arguments);try{return n[0]==="INIT"?ci():n[0]==="EXIT"?di():Wi(n[n.length-1])}catch(e){console.error(e.message),console.error(e.stack);const[,t,i]=e.stack.match(/(\d+):(\d+)/);console.error("Line:",t),console.error("Column:",i),oe("小抄GG了，联系作者解决");}}typeof SGSMODULE<"u"&&(Object.defineProperty(window.console,"log",{get(){return console.info},set(){}}),window.SGSMODULE.forEach(n=>n("EXIT")),delete window.SGSMODULE);console.info("%c三国杀打小抄","font-weight: bold; color: white; background-color: #525288; padding: 1px 4px; border-radius: 4px;");window.SGSMODULE=[];Object.defineProperty(window.console,"log",{get(){return function(...n){(window._debug||window.isLogAllClass)&&console.debug(...n),window.SGSMODULE.forEach(e=>e==null?void 0:e(...n));}},set(){}});Yt("INIT").then(n=>{n&&window.SGSMODULE.push(Yt);});

})();